<?xml version="1.0" encoding="UTF-8" ?> <rss version="2.0" xmlns:atom="https://www.w3.org/2005/Atom"> <channel> <title>维唯为为</title> <description>维唯为为 - 对酒当歌，人生几何</description> <atom:link href="https://luowei.github.io/rss.xml" rel="self" type="application/rss+xml"/> <link>https://luowei.github.io</link> <lastBuildDate>Fri, 07 Jul 2023 22:07:46 +0800</lastBuildDate> <pubDate>Fri, 07 Jul 2023 22:07:46 +0800</pubDate> <ttl>1800</ttl> <item> <title>基于Zerotier内网穿透虚拟网络的搭建</title> <description> &lt;h1 id=&quot;基于zerotier内网穿透虚拟网络的搭建&quot;&gt;基于Zerotier内网穿透虚拟网络的搭建&lt;/h1&gt; &lt;h2 id=&quot;搭建zerotier内网穿透&quot;&gt;搭建ZeroTier内网穿透&lt;/h2&gt; &lt;p&gt;优惠链接：https://cloud.tencent.com/act/pro/618season?from=17200&lt;/p&gt; &lt;h3 id=&quot;在服务器上部署zerotier&quot;&gt;在服务器上部署ZeroTier&lt;/h3&gt; &lt;p&gt;项目地址：https://github.com/Jonnyan404/zerotier-planet 相关命令：&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker run &lt;span class=&quot;nt&quot;&gt;--restart&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;on-failure:3 &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; ztncui &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;HTTP_PORT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;5688 &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;HTTP_ALL_INTERFACES&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;yes&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;ZTNCUI_PASSWD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;xxxxx &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; 5688:5688 keynetworks/ztncui &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;登录账号：admin 登录密码：xxxxx&lt;/p&gt; &lt;h3 id=&quot;创建moon服务器&quot;&gt;创建moon服务器：&lt;/h3&gt; &lt;p&gt;项目地址：https://github.com/jonnyan404/docker-zerotier-moon 相关命令：- 创建容器：&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker run &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; zerotier-moon &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; 9993:9993 &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; 9993:9993/udp &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; /etc/ztconf/:/var/lib/zerotier-one jonnyan404/zerotier-moon &lt;span class=&quot;nt&quot;&gt;-4&lt;/span&gt; xx.xx.xx.xx&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;公网IP&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# example&lt;/span&gt; docker run &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; zerotier-moon &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; 5699:5699 &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; 5699:5699/udp &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; /etc/ztconf/:/var/lib/zerotier-one jonnyan404/zerotier-moon &lt;span class=&quot;nt&quot;&gt;-4&lt;/span&gt; 8.222.135.98 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;查看moonID：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker logs zerotier-moon&lt;/code&gt; 检查是否加入moon服务器：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;zerotier-cli listpeers&lt;/code&gt;&lt;/p&gt; &lt;h3 id=&quot;client端&quot;&gt;Client端&lt;/h3&gt; &lt;h4 id=&quot;ubuntu客户端&quot;&gt;Ubuntu客户端&lt;/h4&gt; &lt;p&gt;&lt;strong&gt;1. 安装并加入Zerotier网络&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; https://install.zerotier.com/ | &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;bash &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;zerotier-cli &lt;span class=&quot;nb&quot;&gt;join &lt;/span&gt;9bee8941b5433ef4 &lt;span class=&quot;c&quot;&gt;# 9bee8941b5433ef4为你在网站注册获得的网络ID&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;2. 生成moon配置文件&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; /var/lib/zerotier-one &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;zerotier-idtool initmoon identity.public &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; moon.json &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;3. 修改配置文件moon.json&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;vi moon.json &lt;span class=&quot;c&quot;&gt;# 找到对应行并修改&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;stableEndpoints&quot;&lt;/span&gt;: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;xx.xx.xx.xx/9993&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# xx.xx.xx.xx修改为自己的公网ip&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;4. 生成moon文件&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;zerotier-idtool genmoon moon.json &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;5. 使用moon配置生效&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 在 /var/lib/zerotier-one 目录下，新建一个moons.d 文件夹,并将刚生成的 .moon配置文件放到该文件夹下&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;mv &lt;/span&gt;00000018fasd2319.moon moons.d/ &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;6. 重启Zerotier&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;systemctl zerotier-one restart &lt;span class=&quot;c&quot;&gt;# 重启zerotier &lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 或 &lt;/span&gt; service zerotier-one restart &lt;span class=&quot;c&quot;&gt;# 或 &lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;zerotier-one restart &lt;span class=&quot;c&quot;&gt;# 或 &lt;/span&gt; zerotier-one &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h4 id=&quot;synolog-nas客户端&quot;&gt;Synolog NAS客户端&lt;/h4&gt; &lt;p&gt;使用&lt;a href=&quot;https://luowei.github.io/https://docs.zerotier.com/devices/synology&quot;&gt;docker在Synolog NAS上安装好zerotier客户端&lt;/a&gt;后：&lt;/p&gt; &lt;p&gt;&lt;strong&gt;1. 加入网络&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker &lt;span class=&quot;nb&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-it&lt;/span&gt; zerotier-synology1 zerotier-cli &lt;span class=&quot;nb&quot;&gt;join&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;zerotier网络Id] &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;2. 加入moon&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;zerotier-synology1 zerotier-cli orbit &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;moon Id] &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;moon Id] &lt;span class=&quot;c&quot;&gt;# 查看moon节点连接信息&lt;/span&gt; docker &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;zerotier-synology1 zerotier-cli listpeers &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;或将 moons.d 文件夹复制到 /var/lib/zerotier-one目录下， 或直接运行命令：&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;zerotier-cli orbit xxxxxxxxxx xxxxxxxxxx &lt;span class=&quot;c&quot;&gt;# xxxxxxxxxx 为 moon.json 文件中ID&lt;/span&gt; 或 &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;zerotier-cli orbit 000000xxxxx 000000xxxxx &lt;span class=&quot;c&quot;&gt;# 000000xxxxx 为 .moon 文件的文件名&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h4 id=&quot;openwrt-客户端加入moon服务器&quot;&gt;OpenWRT 客户端加入moon服务器&lt;/h4&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16771589916655/16771770432438.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;h4 id=&quot;windows客户端加入moon服务器&quot;&gt;Windows客户端加入moon服务器：&lt;/h4&gt; &lt;p&gt;相关命令：&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;C:&lt;span class=&quot;se&quot;&gt;\P&lt;/span&gt;rogramData&lt;span class=&quot;se&quot;&gt;\Z&lt;/span&gt;eroTier&lt;span class=&quot;se&quot;&gt;\O&lt;/span&gt;ne zerotier-cli orbit 43d9c44331 43d9c44331 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;登录windows:&lt;/strong&gt;&lt;br /&gt; Windows+R键，然后输入：mstsc 如果连不上，检查一下是否开启的远程服务，如果还不行要检查远程服务是否被误删了&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mstscHKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\TermService&lt;/code&gt; 启动Remote Desktop Services，启动路径：此电脑——管理——服务与应用程序——服务——Remote Desktop Services，如无法启动：&lt;/p&gt; &lt;p&gt;1、打开regedit，找到路径&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\TermService\Parameters&lt;/code&gt;，发现少了一个二制文件&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;serviceDLL&lt;/code&gt;。 2、手动创建，右键新建–&amp;gt;可扩充字符段值，设置名称为&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;serviceDLL&lt;/code&gt;，值&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;%SystemRoot%\System32\termsrv.dll&lt;/code&gt; 3、创建好之后，再次启动&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Remote Desktop Services&lt;/code&gt;服务，无报错。服务器远程访问恢复正常。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;可实现功能：&lt;/strong&gt; 屏幕分辨率调整：windows+R键——输入mstsc——显示选项——显示——调整需要的分辨率即可 文件传输：本地资源——本地设备和资源——详细信息——驱动器——选择要上传到Windows云主机的文件所在的本地硬盘 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;zerotier-cli orbit 43d9c44331 43d9c44331&lt;/code&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E7%BD%91%E7%BB%9C/16771589916655.html</link> <guid>https://luowei.github.io/%E7%BD%91%E7%BB%9C/16771589916655</guid> <pubDate>Fri, 07 Jul 2023 00:00:00 +0800</pubDate> </item> <item> <title>Docker容器常用</title> <description> &lt;h1 id=&quot;docker容器常用&quot;&gt;Docker容器常用&lt;/h1&gt; &lt;h2 id=&quot;查看容器ip地址和网络相关的参数&quot;&gt;查看容器IP地址和网络相关的参数&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;查看容器的IP地址，可以在主机上运行&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;docker ps &lt;span class=&quot;c&quot;&gt;# 查看正在运行的容器的id等信息&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;sudo docker inspect 容器id&quot;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 可以查看到容器的相关信息&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;docker inspect --format &apos;&amp;amp;#123;&amp;amp;#123; .NetworkSettings.IPAddress &amp;amp;#125&amp;amp;#125&apos; 容器id&quot;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 可以查看容器的具体IP地址，如果输出是空的说明没有配置IP地址&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;ifconfig查看主机上的网络&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; /etc/hosts &lt;span class=&quot;c&quot;&gt;# 查看主机内部IP映射表&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; /etc/resolv.conf &lt;span class=&quot;c&quot;&gt;# 查看主机dns服务器配置&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; /etc/nsswitch.conf &lt;span class=&quot;c&quot;&gt;# 查看主机名字服务配置，这个配置文件用来在/etc/hosts文件中查找主机名和IP地址，如果在hosts文件中没有找到给定的主机的话，就会和DNS服务器通讯。&lt;/span&gt; 其他可能的名字服务会联系LDAP，NIS和NIS+等。 ip addr show &lt;span class=&quot;c&quot;&gt;# 查看主机IP地址&lt;/span&gt; ip route show &lt;span class=&quot;c&quot;&gt;# 查看主机转发信息&lt;/span&gt; netstat &lt;span class=&quot;nt&quot;&gt;-nr&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 查看主机当前IP转发表详细信息&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h3 id=&quot;在容器内可以查看网络相关的信息&quot;&gt;在容器内可以查看网络相关的信息&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;ifconfig查看容器内的网络&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; /etc/hosts &lt;span class=&quot;c&quot;&gt;# 查看容器内内部IP映射表&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; /etc/resolv.conf &lt;span class=&quot;c&quot;&gt;# 查看容器内dns服务器配置&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; /etc/nsswitch.conf &lt;span class=&quot;c&quot;&gt;# 查看容器名字服务配置&lt;/span&gt; ip addr show &lt;span class=&quot;c&quot;&gt;# 查看容器IP地址&lt;/span&gt; ip route show &lt;span class=&quot;c&quot;&gt;# 查看容器转发信息&lt;/span&gt; netstat &lt;span class=&quot;nt&quot;&gt;-nr&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 查看容器当前IP转发表详细信息&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;查看iptables：&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;iptables &lt;span class=&quot;nt&quot;&gt;-L&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;如果没有装iptables：&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;iptables &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/docker/16769919072309.html</link> <guid>https://luowei.github.io/docker/16769919072309</guid> <pubDate>Fri, 24 Feb 2023 00:00:00 +0800</pubDate> </item> <item> <title>区块链学习笔记2</title> <description> &lt;h1 id=&quot;区块链学习笔记2&quot;&gt;区块链学习笔记2&lt;/h1&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16766897332728/16766897467557.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16766897332728/16766898290336.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16766897332728/16766898864530.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16766897332728/16766901048968.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;hyperledger-fabric-系统架构&quot;&gt;&lt;strong&gt;Hyperledger Fabric 系统架构&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16766897332728/16766919111928.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Hyperledger Fabric网络拓扑图&lt;/strong&gt; &lt;img src=&quot;https://luowei.github.io/media/16766897332728/16766936996611.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Hyperledger Fabric多通道数据隔离&lt;/strong&gt; &lt;img src=&quot;https://luowei.github.io/media/16766897332728/16766948205074.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Peer账本存储&lt;/strong&gt; &lt;img src=&quot;https://luowei.github.io/media/16766897332728/16766985459616.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E5%AD%A6%E4%B9%A0/16766897332728.html</link> <guid>https://luowei.github.io/%E5%AD%A6%E4%B9%A0/16766897332728</guid> <pubDate>Fri, 24 Feb 2023 00:00:00 +0800</pubDate> </item> <item> <title>R2S刷写OpenWrt软路由</title> <description> &lt;h1 id=&quot;r2s刷写openwrt软路由&quot;&gt;R2S刷写OpenWrt软路由&lt;/h1&gt; &lt;p&gt;&lt;a href=&quot;https://luowei.github.io/https://conveniencespace.com/index.php/2022/05/29/r2s%E5%88%B7%E5%86%99openwrt%E8%BD%AF%E8%B7%AF%E7%94%B1%E7%B3%BB%E7%BB%9F%E6%95%99%E7%A8%8B/&quot;&gt;R2S刷写OpenWrt软路由系统教程&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://luowei.github.io/https://www.kancloud.cn/jackylee666666/r2s-r4s/3040850&quot;&gt;看云·OpenWRT刷写教程&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://luowei.github.io/https://fw.koolcenter.com/iStoreOS/&quot;&gt;iStoreOS固件下载地址&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://luowei.github.io/https://github.com/DHDAXCW/NanoPi-R2S-rk3328&quot;&gt;R2S固件Github源码地址&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://luowei.github.io/http://103.103.201.245:10001/%E9%98%BF%E9%87%8C%E4%BA%91%E7%9B%98/arm%E8%BD%AF%E8%B7%AF%E7%94%B1%E7%B3%BB%E7%BB%9F&amp;amp;%E5%88%B7%E6%9C%BA%E5%B7%A5%E5%85%B7&quot;&gt;arm软路由系统&amp;amp;刷机工具&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;tp-link路由器ap模式配置&quot;&gt;TP-LINK路由器AP模式配置&lt;/h2&gt; &lt;p&gt;试了手头两个多看前买的TP-LINK路由器做成AP接入点，看了下都有无线AP功能，但我这想用一根网线接入到TP路由器直接让这个路由器充当无线交换机用，试了几种连线方法发现其实很简单，&lt;strong&gt;先把TP路由器配置成无线AP模式，再把从主路由拉一根线接入到TP路由器的LAN口&lt;/strong&gt;即可。&lt;/p&gt; </description> <link>https://luowei.github.io/%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/16761735786108.html</link> <guid>https://luowei.github.io/%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/16761735786108</guid> <pubDate>Fri, 24 Feb 2023 00:00:00 +0800</pubDate> </item> <item> <title>windows &amp; linux 上设置端口转发</title> <description> &lt;h1 id=&quot;windows--linux-上设置端口转发&quot;&gt;windows &amp;amp; linux 上设置端口转发&lt;/h1&gt; &lt;p&gt;以下案例在使用某机场代理时，发现其代理的端口都是私有的，这边是打开作用域在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0.0.0.0&lt;/code&gt;上的端口转发到本地&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;127.0.0.1&lt;/code&gt;的私有端口上，从而实现可供外部设备连接使用。&lt;/p&gt; &lt;pre&gt;&lt;code class=&quot;language-cmd&quot;&gt; @echo off rem Find the process information of a listening port 15246 rem for /f &quot;tokens=5&quot; %i in (&apos;netstat -ano ^| find &quot;:15246&quot; ^| find &quot;LISTENING&quot;&apos;) do set &quot;PID=%i&quot; rem Kill the process using the PID rem taskkill /F /PID %PID% rem echo The process with PID %PID% is killed rem ==== Add port proxy ==== rem rem Check if port 15236 is in a listening state rem for /f &quot;tokens=5&quot; %i in (&apos;netstat -ano ^| find &quot;:15236&quot; ^| find &quot;LISTENING&quot;&apos;) do set &quot;PID=%i&quot; rem rem rem If port 15236 is in a listening state, create the port proxy rule for port 15246 rem if defined PID ( rem netsh interface portproxy add v4tov4 listenport=15246 listenaddress=0.0.0.0 connectport=15236 connectaddress=127.0.0.1 rem echo Port 15246 is now forwarded to port 15236 rem ) else ( rem echo Port 15236 is not in a listening state rem ) rem rem for /f &quot;tokens=5&quot; %i in (&apos;netstat -ano ^| find &quot;:15235&quot; ^| find &quot;LISTENING&quot;&apos;) do set &quot;PID=%i&quot; rem rem rem If port 15236 is in a listening state, create the port proxy rule for port 15246 rem if defined PID ( rem netsh interface portproxy add v4tov4 listenport=15245 listenaddress=0.0.0.0 connectport=15235 connectaddress=127.0.0.1 rem echo Port 15245 is now forwarded to port 15235 rem ) else ( rem echo Port 15235 is not in a listening state rem ) rem rem netsh interface portproxy show all rem create a port proxy, which forwards all incoming traffic on IP address 0.0.0.0 and port 15246 to IP address 127.0.0.1 and port 15236. netsh interface portproxy add v4tov4 listenaddress=0.0.0.0 listenport=15246 connectaddress=127.0.0.1 connectport=15236 echo Port 15246 is now forwarded to port 15236 netsh interface portproxy add v4tov4 listenaddress=0.0.0.0 listenport=15245 connectaddress=127.0.0.1 connectport=15235 echo Port 15245 is now forwarded to port 15235 rem create a firewall rule that allows incoming traffic on port 15246 rem netsh advfirewall firewall add rule name=&quot;Port 15246&quot; dir=in action=allow protocol=TCP localport=15246 rem netsh advfirewall firewall add rule name=&quot;Port 15245&quot; dir=in action=allow protocol=TCP localport=15245 rem ==== netsh help command ==== rem to verify that the port 15246 is listening rem netstat -anb | find &quot;:15246&quot; rem to see a list of all current port proxies: rem netsh interface portproxy show all rem to delete a specific port proxy rem netsh interface portproxy delete v4tov4 listenport=15246 listenaddress=0.0.0.0 rem netsh interface portproxy delete v4tov4 listenport=15245 listenaddress=0.0.0.0 pause &lt;/code&gt;&lt;/pre&gt; &lt;hr /&gt; &lt;p&gt;同样，这样还分享一个在linux上使用socat工具作端口转发的shell脚本，以供参考&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#/bin/sh&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Check if socat is running on port 15246&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if &lt;/span&gt;lsof &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; :15246 | &lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-q&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;LISTEN&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Get the PID of the socat process&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;pid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;lsof &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; :15246 | &lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;LISTEN&quot;&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;awk&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;{print $2}&apos;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Kill the process&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;kill&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$pid&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Socat process on port 15246 killed.&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fi&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# socat TCP-LISTEN:15246,reuseaddr,fork TCP:localhost:15236 &lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 后台执行&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;socat TCP-LISTEN:15246,reuseaddr,fork TCP:localhost:15236&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &amp;amp; &lt;span class=&quot;k&quot;&gt;if &lt;/span&gt;lsof &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; :15246 | &lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-q&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;LISTEN&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;==== Now, Socat process on port 15246 killed.&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;==== Socat start faild!&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fi&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/16741455669142.html</link> <guid>https://luowei.github.io/%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/16741455669142</guid> <pubDate>Fri, 24 Feb 2023 00:00:00 +0800</pubDate> </item> <item> <title>区块链技术学习笔记1</title> <description> &lt;h1 id=&quot;区块链技术学习笔记1&quot;&gt;区块链技术学习笔记1&lt;/h1&gt; &lt;h2 id=&quot;区块链中账本的验证过程&quot;&gt;区块链中账本的验证过程&lt;/h2&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16760467294537/16760478105776.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;区块链交易中账户所有权的确权验证流程&quot;&gt;区块链交易中账户所有权的确权验证流程&lt;/h2&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16760467294537/16760467410170.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;btc区块链的记账挖矿过程&quot;&gt;BTC区块链的记账挖矿过程&lt;/h2&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16760467294537/16760490974523.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;btc的共识机制&quot;&gt;BTC的共识机制&lt;/h2&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16760467294537/16760504023633.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E5%AD%A6%E4%B9%A0/16760467294537.html</link> <guid>https://luowei.github.io/%E5%AD%A6%E4%B9%A0/16760467294537</guid> <pubDate>Sat, 11 Feb 2023 00:00:00 +0800</pubDate> </item> <item> <title>iOS Rotation Animation 旋转动画的几种实现</title> <description> &lt;h1 id=&quot;ios-rotation-animation-旋转动画的几种实现&quot;&gt;iOS Rotation Animation 旋转动画的几种实现&lt;/h1&gt; &lt;p&gt;&lt;strong&gt;Swift 实现抽奖轮盘动画：&lt;/strong&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;绘制轮盘：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RaflleWheel&lt;/code&gt;； &lt;ul&gt; &lt;li&gt;根据指定的Rect与角度旋转轮盘图片；&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;利用Easing时间曲线函数自定义淡入淡出动画；&lt;/li&gt; &lt;li&gt;视图动画、视图动画、属性动画师；&lt;/li&gt; &lt;li&gt;旋转（沿着Z轴）CABasicAnimation 与 CASpringAnimation两种实现方式；&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//抽奖轮盘&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;RaflleWheel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UIView&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;angle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;didSet&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setNeedsDisplay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGRect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;drawWheel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bounds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;angle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;angle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//根据指定的Rect与角度旋转图片&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;drawWheel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGRect&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGRect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;angle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//// General Declarations&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UIGraphicsGetCurrentContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;height&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;radius_h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2.0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;radius_v&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2.0&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//// Image Declarations&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UIImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;named&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;image.png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//// Oval Drawing&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;saveGState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;translateBy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;minX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;radius_h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;minY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;radius_v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rotate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;by&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;angle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;180&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;ovalRect&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGRect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;radius_h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;radius_v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;ovalPath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UIBezierPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;ovalIn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ovalRect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;saveGState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ovalPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addClip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;translateBy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;floor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ovalRect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;minX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;floor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ovalRect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;minY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;scaleBy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;translateBy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cgImage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGRect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;restoreGState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;restoreGState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;ViewController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UIViewController&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;@IBOutlet&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UITextField&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;@IBOutlet&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;stiff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UITextField&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;@IBOutlet&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;damping&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UITextField&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;@IBOutlet&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;velocity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UITextField&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;@IBOutlet&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;duration_F&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UITextField&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;@IBOutlet&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;imageView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UIImageView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;@IBOutlet&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;raffleWheel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;RaflleWheel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;viewDidLoad&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;viewDidLoad&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Do any additional setup after loading the view.&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;@IBAction&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;btnAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;sender&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Any&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;manualAnimation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// self.viewAnimate()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// self.animateKeyframes()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// self.propertyAnimator()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// self.addBaseAnimation()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;@IBAction&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;springAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;sender&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Any&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addSpringAnimation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;startValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;endValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;360&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;180&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//n圈 + 半圈&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;total&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;duration_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//秒&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;currentValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//手动 动画&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;manualAnimation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;updateWhell&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;angle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;currentValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;updateWhell&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;angle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;==== angle:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;angle&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;raffleWheel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;angle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;angle&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;ang&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;easeInOutQuad&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;elapsed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;DispatchQueue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;asyncAfter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;deadline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;duration_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;updateWhell&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;angle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ang&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//曲线函数 ease timing curve function&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;easeInOutQuad&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;elapsed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;newElapsed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;elapsed&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newElapsed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newElapsed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newElapsed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newElapsed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;startValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newElapsed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newElapsed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newElapsed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newElapsed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;startValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 视图动画&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;viewAnimate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imageView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;transform&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;identity&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UIView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;animate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;withDuration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;delay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;usingSpringWithDamping&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;initialSpringVelocity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UIView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;AnimationOptions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;curveEaseOut&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imageView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;transform&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGAffineTransform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;rotationAngle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 关键帧动画&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;animateKeyframes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UIView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;animateKeyframes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;withDuration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;5.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;delay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;calculationModeLinear&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UIView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addKeyframe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;withRelativeStartTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;relativeDuration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;animations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imageView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;transform&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGAffineTransform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;rotationAngle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UIView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addKeyframe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;withRelativeStartTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;relativeDuration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;4.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;animations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imageView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;transform&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGAffineTransform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;rotationAngle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//属性动画师&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;propertyAnimator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* let animator = UIViewPropertyAnimator(duration: 3.0, dampingRatio: 0.4) { } animator.addAnimations { self.imageView.transform = CGAffineTransform(rotationAngle: CGFloat.pi) } animator.addCompletion { _ in self.imageView.transform = .identity } animator.startAnimation(afterDelay: 0.5) // animator.pauseAnimation() // animator.continueAnimation(withTimingParameters: nil, durationFactor: 0) */&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UIViewPropertyAnimator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;runningPropertyAnimator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;withDuration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;delay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UIView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addKeyframe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;withRelativeStartTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;relativeDuration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;animations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imageView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;transform&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGAffineTransform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;rotationAngle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UIView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addKeyframe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;withRelativeStartTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;relativeDuration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;animations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imageView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;transform&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGAffineTransform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;rotationAngle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pi&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;completion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;position&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;position&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imageView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;transform&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;identity&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//基础动画 - 旋转（沿着Z轴） transform.rotation.z&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;addBaseAnimation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;animation&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CABasicAnimation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;keyPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;transform.rotation.z&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//旋转360度 = PI*2&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;toValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;??&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;duration&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;duration_F&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;??&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isRemovedOnCompletion&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fillMode&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;forwards&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timingFunction&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CAMediaTimingFunction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;easeInEaseOut&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imageView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;forKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;basic_rotation_animation&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//弹性动画 - 旋转（沿着Z轴） transform.rotation.z&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;addSpringAnimation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;animation&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CASpringAnimation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;keyPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;transform.rotation.z&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fromValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;toValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;??&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stiffness&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stiff&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;??&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;damping&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;damping&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;??&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;initialVelocity&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;velocity&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;??&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;duration&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;duration_F&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;??&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;settlingDuration&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isRemovedOnCompletion&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fillMode&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;forwards&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timingFunction&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CAMediaTimingFunction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;easeInEaseOut&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imageView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;forKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;spring_rotation_animation&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 动画回调代理&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extension&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;ViewController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CAAnimationDelegate&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;animationDidStart&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;anim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CAAnimation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;==== animationDidStart&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;animationDidStop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;anim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CAAnimation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;finished&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;flag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Bool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;flag&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imageView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;removeAllAnimations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imageView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;transform&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGAffineTransform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;rotationAngle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;??&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;==== end &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timeIntervalSince1970&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;轮盘交互动画再封装&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;kd&quot;&gt;@IBAction&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;btnAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;sender&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Any&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loopSize&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;turnCallback&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;== ran around &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; times&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;startCallback&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;== animation start&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stopCallback&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;== animation stop&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;running&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;stopAnimate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;startAnimate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// var animation = ManualAnimation(raffleWheel: self.raffleWheel)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// animation.manualAnimation()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// self.viewAnimate()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// self.animateKeyframes()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// self.propertyAnimator()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// self.addBaseAnimation()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;GameAnimation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;NSObject&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//第几片&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;loopSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//蛋糕片数&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;running&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Bool&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//正在运行动画&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;stop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Bool&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//停止标志&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;retry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Bool&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//重试标志&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 20毫秒&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;unitFactor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.618&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;unit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//1片蛋糕的弧度 * 0.618&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loopSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unitFactor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;upLen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//加速距离&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;downLen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//减速距离&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;retry&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unitFactor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;raffleWheel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;RaflleWheel&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;turnCallback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)?&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;startCallback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)?&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;stopCallback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)?&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;currentAngle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;startAnimate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;running&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;updateWheel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;angle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;stopAnimate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;running&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;raffleWheel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;RaflleWheel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;raffleWheel&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;raffleWheel&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;updateWheel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;angle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;remain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;factor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.25&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//print(&quot;==== angle:\(angle)&quot;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;raffleWheel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;angle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;angle&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//start&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;startCallback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loopSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unitFactor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;turnCallback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loopSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unitFactor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;currentAngle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* //start - easing in if unit * CGFloat(i) * CGFloat(loopSize) &amp;lt; upLen { let factor = factor * ( 1 + pow(factor, 2)) let offset = unit * (factor &amp;gt;= 1 ? factor : factor) currentAngle = (angle + offset).remainder(dividingBy: 2 * CGFloat.pi) DispatchQueue.main.asyncAfter(deadline: .now() + .milliseconds(interval)) { [weak self] in self?.updateWheel(angle: currentAngle, i: i + 1) } return } */&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentAngle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;angle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;truncatingRemainder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;dividingBy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//running&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;DispatchQueue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;asyncAfter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;deadline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;milliseconds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;updateWheel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;angle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentAngle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//stop - easing out&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;factor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;pow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;factor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;factor&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentAngle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;angle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;offset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;remainder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;dividingBy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;rem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;downLen&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;remain&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;remain&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;remain&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;stopCallback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;remain&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentAngle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;angle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;remain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;remainder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;dividingBy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;currentOffset&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;angle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;remainder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;dividingBy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;downLen&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentOffset&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;DispatchQueue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;asyncAfter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;deadline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;milliseconds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;updateWheel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;angle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentAngle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;remain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;factor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;factor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;ManualAnimation&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;raffleWheel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;RaflleWheel&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;startValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;endValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;180&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//n圈 + 半圈&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;total&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;duration_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//秒&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;currentValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//手动 动画&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;manualAnimation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;updateWhell&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;angle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;currentValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;updateWhell&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;angle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;==== angle:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;angle&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;raffleWheel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;angle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;angle&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;ang&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;easeInOutQuad&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;elapsed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;DispatchQueue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;asyncAfter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;deadline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;duration_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;updateWhell&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;angle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ang&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//曲线函数 ease timing curve function&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;easeInOutQuad&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;elapsed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;newElapsed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;elapsed&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newElapsed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newElapsed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newElapsed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newElapsed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;startValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newElapsed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newElapsed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newElapsed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newElapsed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;startValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;参考：&lt;/strong&gt; &lt;a href=&quot;https://luowei.github.io/https://juejin.cn/post/6844903839779274765&quot;&gt;Core Animation总结&lt;/a&gt; &lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://betterprogramming.pub/ui-animations-with-swift-2ebb5e6d2292&quot;&gt;UI Animations With Swift&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://juejin.cn/post/6844903863414161416&quot;&gt;使用UIViewPropertyAnimator实现高级动画&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/ios/16610712855071.html</link> <guid>https://luowei.github.io/ios/16610712855071</guid> <pubDate>Sun, 21 Aug 2022 00:00:00 +0800</pubDate> </item> <item> <title>使用Socat进行端口转发</title> <description> &lt;h1 id=&quot;使用socat进行端口转发&quot;&gt;使用Socat进行端口转发&lt;/h1&gt; &lt;p&gt;以前写使用ssh隧道进行端口转发，这次再介绍下Socat进行端口转发。如&lt;/p&gt; &lt;h2 id=&quot;安装&quot;&gt;安装&lt;/h2&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;socat &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;端口转发&quot;&gt;端口转发&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;TCP&lt;/strong&gt;&lt;br /&gt; 监听本地TCP 80 端口，并将请求转发(代理)到 10.0.0.1:8080 上：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;socat TCP-LISTEN:80,reuseaddr,fork TCP:10.0.0.1:8080 UDP &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;监听本地UDP 53 端口，并将请求转发(代理)到 10.0.0.1:5353 上：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;socat UDP-LISTEN:53,reuseaddr,fork UDP:10.0.0.1:5353 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;将访问本机 15237 端口的请求转发至 localhost:15236 端口&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;socat TCP-LISTEN:15237,reuseaddr,fork TCP:localhost:15236 # 后台执行 (socat TCP-LISTEN:15237,reuseaddr,fork TCP:localhost:15236) &amp;amp; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Socat现在并不支持SOCKS5端口的转发，但SOCKS4端口的转发是支持的，如下：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# 格式：socat TCP-LISTEN:&amp;lt;localport&amp;gt; SOCKS4:&amp;lt;socks-server&amp;gt;:&amp;lt;host&amp;gt;:&amp;lt;port&amp;gt;,socksport=&amp;lt;socksport&amp;gt; socat TCP-LISTEN:15237 SOCKS4A:localhost:secret.shell.server.org:22,socksport=15235 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;参考：&lt;/strong&gt; &lt;a href=&quot;https://luowei.github.io/https://book.hacktricks.xyz/generic-methodologies-and-resources/tunneling-and-port-forwarding&quot;&gt;Tunneling and Port Forwarding&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://www.hi-linux.com/posts/61543.html&quot;&gt;Socat入门教程&lt;/a&gt; &lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/http://tuxgraphics.org/~guido/scripts/ssh-socks5-port-forwarding.html&quot;&gt;Linux ssh: port forwarding, socks5, jump hosts, …&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/shell/16610218773192.html</link> <guid>https://luowei.github.io/shell/16610218773192</guid> <pubDate>Sun, 21 Aug 2022 00:00:00 +0800</pubDate> </item> <item> <title>不同的仓库使用不同的github账号提交</title> <description> &lt;h1 id=&quot;不同的仓库使用不同的github账号提交&quot;&gt;不同的仓库使用不同的github账号提交&lt;/h1&gt; &lt;p&gt;&lt;strong&gt;配置仓库&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git config &lt;span class=&quot;nt&quot;&gt;--add&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--local&lt;/span&gt; core.sshCommand &lt;span class=&quot;s1&quot;&gt;&apos;ssh -i &amp;lt;&amp;lt;&amp;lt;PATH_TO_SSH_KEY&amp;gt;&amp;gt;&amp;gt;&apos;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;In some cases this doesn’t work because ssh_config overriding the command, in this case try ssh -i ~/.ssh/[insert_your_keyname] -F /dev/null to not use the ssh_config. such as below:&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git config --local core.sshCommand &quot;ssh -i ~/.ssh/id_ed25519_lothing -o IdentitiesOnly=yes -F /dev/null&quot; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Refer:&lt;a href=&quot;https://luowei.github.io/https://stackoverflow.com/questions/7927750/specify-an-ssh-key-for-git-push-for-a-given-domain&quot;&gt;https://stackoverflow.com/questions/7927750/specify-an-ssh-key-for-git-push-for-a-given-domain&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;To use a specific key on the fly:&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;GIT_SSH_COMMAND=&apos;ssh -i $HOME/.ssh/id_ed25519 -o IdentitiesOnly=yes -F /dev/null&apos; git push origin master &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Explanation:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;local ENV var before doing the push&lt;/li&gt; &lt;li&gt;-i specifies key&lt;/li&gt; &lt;li&gt;-F forces an empty config so your global one doesn’t overwrite this temporary command&lt;/li&gt; &lt;/ul&gt; </description> <link>https://luowei.github.io/shell/16543014008199.html</link> <guid>https://luowei.github.io/shell/16543014008199</guid> <pubDate>Sat, 04 Jun 2022 00:00:00 +0800</pubDate> </item> <item> <title>正则中的Group、反向引用、前向引用</title> <description> &lt;h1 id=&quot;正则中的group反向引用前向引用&quot;&gt;正则中的Group、反向引用、前向引用&lt;/h1&gt; &lt;p&gt;参考：&lt;a href=&quot;https://luowei.github.io/https://www.regular-expressions.info/backref.html&quot;&gt;https://www.regular-expressions.info/backref.html&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;反向引用&quot;&gt;&lt;strong&gt;反向引用&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;使用反向引用重复匹配html标签&lt;/strong&gt;&lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;([A-Z][A-Z0-9]*)\b[^&amp;gt;]*&amp;gt;.*?&amp;lt;/\1&amp;gt;&lt;/code&gt; &lt;br /&gt; 匹配 &lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Testing &amp;lt;B&amp;gt;&amp;lt;I&amp;gt;bold italic&amp;lt;/I&amp;gt;&amp;lt;/B&amp;gt; text&lt;/code&gt; 中的 &lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;B&amp;gt;&amp;lt;I&amp;gt;bold italic&amp;lt;/I&amp;gt;&amp;lt;/B&amp;gt;&lt;/code&gt;&lt;/strong&gt;.&lt;/p&gt; &lt;p&gt;&lt;strong&gt;反向引用的重复问题&lt;/strong&gt;&lt;br /&gt; 因为每次找到的新匹配会覆盖保存旧的匹配，所以重复反向引用要注意下面两种情况：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;([abc]+)&lt;/code&gt; 与 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;([abc])+&lt;/code&gt; 在匹配 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cab&lt;/code&gt;时有明显的不同，第一个正则表达式会将 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cab&lt;/code&gt; 放入第一个反向引用，而第二个正则表达式将只存储 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;b&lt;/code&gt;。这也意味着 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;([abc]+)=\1&lt;/code&gt; 能匹配 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cab=cab&lt;/code&gt;，而 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;([abc])+=\1&lt;/code&gt; 不能匹配。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;双字检查&lt;/strong&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\b(\w+)\s+\1\b&lt;/code&gt; 匹配 &lt;em&gt;When editing text, doubled words such as “the the” easily creep in.&lt;/em&gt; 中的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;the the&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;&lt;strong&gt;反向引用失败组&lt;/strong&gt;&lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(q?)b\1&lt;/code&gt; 匹配 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;b&lt;/code&gt;&lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(q)?b\1&lt;/code&gt; 不匹配 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;b&lt;/code&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;反向引用不存在组&lt;/strong&gt;&lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(one)\7&lt;/code&gt; 报错&lt;/p&gt; &lt;p&gt;&lt;strong&gt;前向引用(不完全支持)&lt;/strong&gt;&lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(\2two|(one))+&lt;/code&gt; 匹配 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;oneonetwo&lt;/code&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;嵌套引用(不完全支持)&lt;/strong&gt;&lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(\1two|(one))+&lt;/code&gt; 或 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(?&amp;gt;(\1two|(one)))+&lt;/code&gt; 匹配 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;oneonetwo&lt;/code&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;反向引用与命名组&lt;/strong&gt;&lt;br /&gt; 定义命名组：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(?&amp;lt;name&amp;gt;group)&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(?&apos;name&apos;group)&lt;/code&gt; &lt;br /&gt; 引用命名组：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\k&amp;lt;one&amp;gt;&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\g&amp;lt;one&amp;gt;&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\k&apos;one&apos;&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\g&apos;one&apos;&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\k{one}&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\g{one}&lt;/code&gt; &lt;br /&gt; 如，匹配html标签的regex，有以下几种写法： &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;(?&amp;lt;tag&amp;gt;[A-Z][A-Z0-9]*)\b[^&amp;gt;]*&amp;gt;.*?&amp;lt;/\k&amp;lt;tag&amp;gt;&amp;gt;&lt;/code&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;(?&amp;lt;tag&amp;gt;[A-Z][A-Z0-9]*)\b[^&amp;gt;]*&amp;gt;.*?&amp;lt;/\g&amp;lt;tag&amp;gt;&amp;gt;&lt;/code&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;(?&apos;tag&apos;[A-Z][A-Z0-9]*)\b[^&amp;gt;]*&amp;gt;.*?&amp;lt;/\k&amp;lt;tag&amp;gt;&amp;gt;&lt;/code&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;(?&apos;tag&apos;[A-Z][A-Z0-9]*)\b[^&amp;gt;]*&amp;gt;.*?&amp;lt;/\g&amp;lt;tag&amp;gt;&amp;gt;&lt;/code&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;(?&apos;tag&apos;[A-Z][A-Z0-9]*)\b[^&amp;gt;]*&amp;gt;.*?&amp;lt;/\k&apos;tag&apos;&amp;gt;&lt;/code&gt;&lt;/p&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;(?&amp;lt;tag&amp;gt;[A-Z][A-Z0-9]*)\b[^&amp;gt;]*&amp;gt;.*?&amp;lt;/\k{tag}&amp;gt;&lt;/code&gt;&lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;(?&apos;tag&apos;[A-Z][A-Z0-9]*)\b[^&amp;gt;]*&amp;gt;.*?&amp;lt;/\g{tag}&amp;gt;&lt;/code&gt; &lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;(?&apos;tag&apos;[A-Z][A-Z0-9]*)\b[^&amp;gt;]*&amp;gt;.*?&amp;lt;/\1&amp;gt;&lt;/code&gt; &lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;([A-Z][A-Z0-9]*)\b[^&amp;gt;]*&amp;gt;.*?&amp;lt;/\1&amp;gt;&lt;/code&gt;&lt;/p&gt; &lt;p&gt;在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;python&lt;/code&gt;中：&lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;(?P&amp;lt;tag&amp;gt;[A-Z][A-Z0-9]*)\b[^&amp;gt;]*&amp;gt;.*?&amp;lt;/(?P=tag)&amp;gt;&lt;/code&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;多个同名组&lt;/strong&gt;&lt;br /&gt; 如果想匹配&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a&lt;/code&gt;后跟数字&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0..5&lt;/code&gt;，或&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;b&lt;/code&gt;后跟数字&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;4..7&lt;/code&gt;，并且只关心数字，如果希望此匹配后跟&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;c&lt;/code&gt;和前个完全相同的数字，可以使用：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(?:a(?&amp;lt;digit&amp;gt;[0-5])|b(?&amp;lt;digit&amp;gt;[4-7]))c\k&amp;lt;digit&amp;gt;&lt;/code&gt; 匹配 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a2c2&lt;/code&gt; 或 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;b5c5&lt;/code&gt;。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;相对反向引用&lt;/strong&gt; &lt;br /&gt; 相对反向引用：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;k&amp;lt;-n&amp;gt;&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;g&amp;lt;-n&amp;gt;&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\k&apos;-n&apos;&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\g&apos;-n&apos;&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\k-n&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\g-n&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;{-n}&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;g{-n}&lt;/code&gt; &lt;br /&gt; 匹配 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abcc&lt;/code&gt;, 以下写法： &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(a)(b)(c)\k&amp;lt;-1&amp;gt;&lt;/code&gt; &lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(a)(b)(c)\g&amp;lt;-1&amp;gt;&lt;/code&gt; &lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(a)(b)(c)\k&apos;-1&apos;&lt;/code&gt; &lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(a)(b)(c)\g&apos;-1&apos;&lt;/code&gt; &lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(a)(b)(c)\k-1&lt;/code&gt;&lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(a)(b)(c)\g-1&lt;/code&gt;&lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(a)(b)(c)\k{-1}&lt;/code&gt;&lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(a)(b)(c)\g{-1}&lt;/code&gt;&lt;/p&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(a)(b)(c)\k&amp;lt;-3&amp;gt;&lt;/code&gt; 匹配 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abca&lt;/code&gt;&lt;br /&gt; 嵌套(不完全支持)： &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(a)(b)(c\k&amp;lt;-2&amp;gt;)&lt;/code&gt; 匹配 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abcb&lt;/code&gt;&lt;/p&gt; &lt;h3 id=&quot;lookahead&quot;&gt;Lookahead&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;The negative lookahead&lt;/strong&gt; construct is the pair of parentheses, with the opening parenthesis followed by a question mark and an exclamation point. &lt;br /&gt; Match a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;q&lt;/code&gt; not followed by a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;u&lt;/code&gt;, negative lookahead provides the solution: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;q(?!u)&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;&lt;strong&gt;The positive lookahead&lt;/strong&gt; construct is a pair of parentheses, with the opening parenthesis followed by a question mark and an equals sign. Positive lookahead works just the same. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;q(?=u)&lt;/code&gt; matches a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;q&lt;/code&gt; that is followed by a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;u&lt;/code&gt;, without making the u part of the match.&lt;/p&gt; &lt;p&gt;If you want to store the match of the regex inside a lookahead, you have to put capturing parentheses around the regex inside the lookahead, like this: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(?=(regex))&lt;/code&gt;.&lt;/p&gt; &lt;h3 id=&quot;lookbehind&quot;&gt;Lookbehind&lt;/h3&gt; &lt;p&gt;The construct for positive lookbehind is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(?&amp;lt;=text)&lt;/code&gt;: a pair of parentheses, with the opening parenthesis followed by a question mark, “less than” symbol, and an equals sign. &lt;br /&gt; Negative lookbehind is written as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(?&amp;lt;!text)&lt;/code&gt;, using an exclamation point instead of an equals sign.&lt;/p&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(?&amp;lt;!a)b&lt;/code&gt; matches a “b” that is not preceded by an “a”, using negative lookbehind. It doesn’t match &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cab&lt;/code&gt;, but matches the b (and only the b) in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bed&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;debt&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;If you want to find a word not ending with an “s”, you could use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\b\w+(?&amp;lt;!s)\b&lt;/code&gt;. This is definitely not the same as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\b\w+[^s]\b&lt;/code&gt;. When applied to John’s, the former matches John and the latter matches John’ (including the apostrophe). The correct regex without using lookbehind is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\b\w*[^s\W]\b&lt;/code&gt; (star instead of plus, and \W in the character class).&lt;/p&gt; &lt;h3 id=&quot;lookaround&quot;&gt;Lookaround&lt;/h3&gt; &lt;p&gt;The fact that lookaround is zero-length automatically makes it atomic.&lt;/p&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(?=(\d+))\w+\1&lt;/code&gt; does match &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;56x56&lt;/code&gt; in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;456x56&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;Find any word between 6 and 12 letters long containing either “cat”, “dog” or “mouse”: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\b(?=\w{6,12}\b)\w{0,9}(cat|dog|mouse)\w*&lt;/code&gt;.&lt;/p&gt; &lt;h3 id=&quot;keep-text-out-of-the-match&quot;&gt;Keep Text out of The Match&lt;/h3&gt; &lt;p&gt;To overcome the limitations of lookbehind, Perl 5.10, PCRE 7.2, Ruby 2.0, and Boost 1.42 introduced a new feature that can be used instead of lookbehind for its most common purpose. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\K&lt;/code&gt; keeps the text matched so far out of the overall regex match.&lt;/p&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;h\Kd&lt;/code&gt; matches only the second &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;d&lt;/code&gt; in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;adhd&lt;/code&gt;. Instead of lookbehind &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(?&amp;lt;=h)d&lt;/code&gt; match.&lt;/p&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[^a]\Kb&lt;/code&gt; is the same as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(?&amp;lt;=[^a])b&lt;/code&gt;, which are both different from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(?&amp;lt;!a)b&lt;/code&gt;.&lt;/p&gt; </description> <link>https://luowei.github.io/%E6%AD%A3%E5%88%99/16536646132317.html</link> <guid>https://luowei.github.io/%E6%AD%A3%E5%88%99/16536646132317</guid> <pubDate>Fri, 03 Jun 2022 00:00:00 +0800</pubDate> </item> <item> <title>正则删除文本中非匹配项</title> <description> &lt;h1 id=&quot;正则删除文本中非匹配项&quot;&gt;正则删除文本中非匹配项&lt;/h1&gt; &lt;p&gt;比如在Sublime中处理有以下文本：&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16536602052877/16536602744812.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;步骤：&lt;/strong&gt;&lt;/p&gt; &lt;ol&gt; &lt;li&gt;使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;^((?!&quot;aid&quot;: \d+).)*$&lt;/code&gt; -&amp;gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$2&lt;/code&gt; 筛选出 所有含的 “aid”: 939288219 的行；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;,\n*&lt;/code&gt; -&amp;gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\n&lt;/code&gt; 去掉多余的换行；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;^(?:\s)\s+&lt;/code&gt; 去掉多余的空格；&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;strong&gt;原数直接处理&lt;/strong&gt;&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;筛出 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&quot;aid&quot;:\d++&lt;/code&gt;, 匹配 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(&quot;aid&quot;:\d++)&lt;/code&gt; 替换成 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\n$1\n&lt;/code&gt;；&lt;br /&gt; &lt;img src=&quot;https://luowei.github.io/media/16536602052877/16536805115453.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;^((?!&quot;aid&quot;:\d++).)*+\n?+&lt;/code&gt; 删除多余文本；&lt;br /&gt; &lt;img src=&quot;https://luowei.github.io/media/16536602052877/16536804966554.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;结果数据&lt;br /&gt; &lt;img src=&quot;https://luowei.github.io/media/16536602052877/16536805434078.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16536602052877/16537470693552.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/regex/16536602052877.html</link> <guid>https://luowei.github.io/regex/16536602052877</guid> <pubDate>Fri, 27 May 2022 00:00:00 +0800</pubDate> </item> <item> <title>iOS面试常问</title> <description> &lt;h1 id=&quot;ios面试常问&quot;&gt;iOS面试常问&lt;/h1&gt; &lt;p&gt;&lt;strong&gt;NSObect对象本质&lt;/strong&gt; 答： 本质是对C语言结构体objc_object的封装，主要实现是在C++的中结构体objc_object中实现的。其中的isa指针是个联合体，实现了objc_object 与 objc_class 的继承引用体系结构。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;KVO原理&lt;/strong&gt; 答： 为被观察者对象动态生成其子类，并把观察者对象的isa替换成新生的子类，在子类中重载了setXXProperty方法及setValue:forKey方法，并在重载的方法中触发KVO的回调。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Block底层原理与捕获机制&lt;/strong&gt; 答： Block底层是个结构体，有对函数指针与捕获变量的封装，有Global、Stack、Malloc三种类型的Block，捕获全局变量、静态变量、引用类型及__block修饰的变量是传引用，捕获基本类型的局部变量是值传递；捕获局部变量会发生Block_Copy，从栈上拷贝到堆上。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;load 与 initnalize方法&lt;/strong&gt; 答： load的调用是函数指针的直接调用 initnalize调用是走OC消息派发 -&amp;gt; 引伸问题：OC里消息派发流程和原理 load 与 ininalize 在类、父类及分类中的调用情况； 对性能影响：优化load；&lt;/p&gt; &lt;p&gt;&lt;strong&gt;修改编译顺序方案？&lt;/strong&gt; 答：&lt;/p&gt; &lt;p&gt;&lt;strong&gt;RunLoop机制&lt;/strong&gt; 答：&lt;/p&gt; &lt;p&gt;&lt;strong&gt;不用锁实现线程安全&lt;/strong&gt; 答：&lt;/p&gt; &lt;p&gt;&lt;strong&gt;GCD 与 NSOperation&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;二进制重排&lt;/strong&gt; 答： 减小启动时缺页(Page fault)发生的量；符号链接时导出启动时相应的linkMap，配置.order文件，重排符号顺序&lt;/p&gt; &lt;p&gt;&lt;strong&gt;卡顿监测实现方案：&lt;/strong&gt; 答： CADisplayLink FPS 加RunLoop Observer + 子线程 + 信号量 + 计数 监听UI状态&lt;/p&gt; &lt;p&gt;&lt;strong&gt;子线程里加NSTimer&lt;/strong&gt;，触发问题及加RunLoop后线程会不会退出问题 答：&lt;/p&gt; &lt;p&gt;&lt;strong&gt;线程保活&lt;/strong&gt; 答： Runloop 加 port&lt;/p&gt; &lt;p&gt;&lt;strong&gt;自己实现线程池的方案&lt;/strong&gt; 答： 保活线程 GCD Group&lt;/p&gt; &lt;p&gt;&lt;strong&gt;自己实现一个锁&lt;/strong&gt; 答：&lt;/p&gt; &lt;p&gt;&lt;strong&gt;常见的锁&lt;/strong&gt; 答： @syncronized NSLock NSConditionLock 自旋锁 信号量&lt;/p&gt; &lt;p&gt;&lt;strong&gt;不使用锁做线程安全&lt;/strong&gt; 答： GCD 栅栏函数 GCD Group&lt;/p&gt; &lt;p&gt;&lt;strong&gt;线程优先级反转&lt;/strong&gt; 答： 自旋锁内不释放资源的情况下，&lt;/p&gt; &lt;p&gt;&lt;strong&gt;C语言函数的Hook实现方案&lt;/strong&gt; 答： fishHook可以hook动态链接库的函数； Clang插桩可hook所有的C函数；&lt;/p&gt; &lt;p&gt;&lt;strong&gt;swift 中 clousure 原理&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;逃逸闭包与非逃逸闭包的区别与使用场景&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;pod install、update 原理&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Swift几个权限控制关键字&lt;/strong&gt; 答： public open interal private filePrivate&lt;/p&gt; &lt;p&gt;&lt;strong&gt;视频播放器的原理，ffpeg主要模块&lt;/strong&gt; 答： 视频播放器的原理要从获取视频数据到显示在屏幕上的过程说起，&lt;/p&gt; &lt;p&gt;&lt;strong&gt;性能优化&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;App启动详情流程及优化&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;UI VC界面加载流程&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;网络请求流程&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;https原理&lt;/strong&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/16286975952834.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/16286975952834</guid> <pubDate>Tue, 30 Nov 2021 00:00:00 +0800</pubDate> </item> <item> <title>Swift面试笔记</title> <description> &lt;h1 id=&quot;swift面试笔记&quot;&gt;Swift面试笔记&lt;/h1&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/15905889002525/15790492956194.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15790493597997.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15790494015929.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15790533567738.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15790534160629.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15790535243967.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15790535956246.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15790540169327.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15790540604100.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15790541219863.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15790542649011.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15790543665010.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15790544486089.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15790549615194.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15790899699229.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15790899982758.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15790900274146.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15790900723039.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15790901239685.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15791074502919.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15791114802386.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15791116946831.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15791117446047.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15791118406544.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15791119613042.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15791121610495.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15791145060849.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15791145468366.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15791146624934.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15791147231229.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15791147560435.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15791148158971.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889002525/15791208083790.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/15905889002525.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/15905889002525</guid> <pubDate>Tue, 30 Nov 2021 00:00:00 +0800</pubDate> </item> <item> <title>终端Terminal中设置代理</title> <description> &lt;h1 id=&quot;终端terminal中设置代理&quot;&gt;终端Terminal中设置代理&lt;/h1&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;https_proxy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://127.0.0.1:1087 &lt;span class=&quot;nv&quot;&gt;http_proxy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://127.0.0.1:1087 &lt;span class=&quot;nv&quot;&gt;all_proxy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;socks5://127.0.0.1:1080 &lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;https_proxy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://127.0.0.1:15236 &lt;span class=&quot;nv&quot;&gt;http_proxy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://127.0.0.1:15236 &lt;span class=&quot;nv&quot;&gt;all_proxy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;socks5://127.0.0.1:15235 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;Mac / Linux 设置命令行代理：&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;https_proxy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://127.0.0.1:15236&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;http_proxy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://127.0.0.1:15236&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;设置终端中的 wget、curl 等都走 SOCKS5 代理（只对当前终端有效）：&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;all_proxy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;socks5://127.0.0.1:15235&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;Mac / Linux 终端中取消代理设置：&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;unset http_proxy unset https_proxy unset ALL_RPOXY &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;Mac / Linux 永久命令行代理设置:&lt;/strong&gt; 将代理命令写入配置文件 ~/.profile 或 ~/.bashrc 或 ~/.zshrc 中：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# HTTP 代理设置 export http_proxy=http://127.0.0.1:15236 export https_proxy=http://127.0.0.1:15236 或 # SOCKS5 代理设置 export http_proxy=socks5://127.0.0.1:15235 export https_proxy=socks5://127.0.0.1:15235 或 # 强制终端中的 wget、curl 等都走 SOCKS5 代理 export ALL_PROXY=socks5://127.0.0.1:15235 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/linux/16354341220835.html</link> <guid>https://luowei.github.io/linux/16354341220835</guid> <pubDate>Fri, 29 Oct 2021 00:00:00 +0800</pubDate> </item> <item> <title>Adblock 拦截规则</title> <description> &lt;h1 id=&quot;adblock-拦截规则&quot;&gt;Adblock 拦截规则&lt;/h1&gt; &lt;p&gt;&lt;a href=&quot;https://luowei.github.io/https://blog.csdn.net/qq_36450004/article/details/105660153&quot;&gt;AdblockPlus拦截规则简单教程&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://luowei.github.io/https://blog.csdn.net/weixin_40747900/article/details/104328954&quot;&gt;adblock过滤规则编写&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://luowei.github.io/https://blog.csdn.net/weixin_40747900/article/details/104328954&quot;&gt;adblock过滤规则编写&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://luowei.github.io/https://caniuse.com/&quot;&gt;检测API是否可用Can_I_Use&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/ios/16284935780754.html</link> <guid>https://luowei.github.io/ios/16284935780754</guid> <pubDate>Fri, 29 Oct 2021 00:00:00 +0800</pubDate> </item> <item> <title>使用 Swift Package Manager</title> <description> &lt;h1 id=&quot;使用-swift-package-manager&quot;&gt;使用 Swift Package Manager&lt;/h1&gt; &lt;p&gt;Swift Package Manager 是一个去中心化的源码管理工具。&lt;/p&gt; &lt;h2 id=&quot;创建一个基本的swift-package&quot;&gt;创建一个基本的Swift package&lt;/h2&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;mkdir &lt;/span&gt;SwiftGrabber swift package init &lt;span class=&quot;nt&quot;&gt;--type&lt;/span&gt; executable &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;生成-xcode-project&quot;&gt;生成 xcode project&lt;/h2&gt; &lt;p&gt;在生成&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcode project&lt;/code&gt;的过程当中，SPM 会检查&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Package.swift&lt;/code&gt;里定义的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dependency&lt;/code&gt;、&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target&lt;/code&gt;、&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;product&lt;/code&gt;，将&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dependency&lt;/code&gt;引入&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;project&lt;/code&gt;中；根据定义的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target&lt;/code&gt;在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;project&lt;/code&gt;里产生对应的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target&lt;/code&gt;；根据定义的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;product&lt;/code&gt;在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;project&lt;/code&gt;里产生对应的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;product&lt;/code&gt;。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;两个注意点：&lt;/strong&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;对于&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target&lt;/code&gt;，需要在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Sources&lt;/code&gt;文件夹里有对应的子文件夹，并且子文件夹里要有&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.swift&lt;/code&gt;文件，才会自动生成&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target&lt;/code&gt;。&lt;/li&gt; &lt;li&gt;如果文件夹里有&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main.swift&lt;/code&gt;，那这个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target&lt;/code&gt;在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcode project&lt;/code&gt;里就会被转成&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Command Line Tool Target&lt;/code&gt;，如果一开始在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;init package&lt;/code&gt;时没有加上&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--type executable&lt;/code&gt;，但又希望它在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcode&lt;/code&gt;里面用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Command Line Tool Target&lt;/code&gt;的设定，那就要手动加入&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main.swift&lt;/code&gt;到对应的文件夹。同样在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Tests&lt;/code&gt;文件夹里也要相对的放上一个空白的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xxxTests.swift&lt;/code&gt;文件。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Package.swift示例如下：&lt;/p&gt; &lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;PackageDescription&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;package&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Package&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;SwiftGrabber&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;products&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// products 要放在 dependencies 前面&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;libGrabber&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;targets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;libGrabber&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;executable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;SwiftGrabber&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;targets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;SwiftGrabber&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;dependencies&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;package&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://github.com/Alamofire/Alamofire&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;from&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;5.4.1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;targets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;SwiftGrabber&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;dependencies&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;libGrabber&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;libGrabber&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;dependencies&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]),&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;testTarget&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;SwiftGrabberTests&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;dependencies&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;SwiftGrabber&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;生成xcodeproj&lt;/strong&gt; 在项目的根目录下，执行脚本：&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;swift package generate-xcodeproj &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;参考：&lt;a href=&quot;https://luowei.github.io/https://www.appcoda.com.tw/swift-package-manager/&quot;&gt;利用 Swift Package Manager 製作自動化開發者工具&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/ios/16170858898202.html</link> <guid>https://luowei.github.io/ios/16170858898202</guid> <pubDate>Tue, 30 Mar 2021 00:00:00 +0800</pubDate> </item> <item> <title>macOS/iOS中的I/O多路复用方案kqueue</title> <description> &lt;h1 id=&quot;macosios中的io多路复用方案kqueue&quot;&gt;macOS/iOS中的I/O多路复用方案kqueue&lt;/h1&gt; &lt;p&gt;&lt;strong&gt;XNU内核&lt;/strong&gt; &lt;img src=&quot;https://luowei.github.io/media/16138994642898/16154829228779.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Mach+BSD内核&lt;/strong&gt; &lt;img src=&quot;https://luowei.github.io/media/16138994642898/16154828135339.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;尽管XUN的绝对核心是Mach，但是XUN向用户态提供的主要接口是BSD接口。BSD层是建立在Mach之上，是XNU中一个不可分割的一部分。BSD负责提供可靠的、现代的API。其内容包括：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;UNIX进程模型 POSIX线程模型及相关的同步原语 UNIX用户和组 网络协议栈 文件访问系统 设备访问 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;kqueue&lt;/strong&gt;是BSD中使用的内核事件通知机制,一个kqueue指的是一个描述符，这个描述符会阻塞等待直到一个特定的类型和种类的事件发生。用户态或者内核的进程可以等待这个描述符，因而kqueue提供了一种用于一个或多个进程同步的简单且高效的方法。kqueue和kevent（表示事件的数据结构）构成了内核异步I/O的基础。 &lt;strong&gt;kqueue&lt;/strong&gt; 是 FreeBSD 上的一种的多路复用机制。它是针对传统的 select/poll 处理大量的文件描述符性能较低效而开发出来的。注册一堆描述符到 kqueue 以后，当其中的描述符状态发生变化时， kqueue 将一次性通知应用程序哪些描述符可读、可写或出错了。 &lt;strong&gt;kqueue&lt;/strong&gt; 支持多种类型的文件描述符，包括 socket 、信号、定时器、 AIO 、 VNODE 、 PIPE； &lt;strong&gt;kqueue&lt;/strong&gt; 对 AIO ， POSIX 的异步 IO系列的支持，是异步行为完成通知机制之一。&lt;/p&gt; &lt;p&gt;常见的io复用有select、poll、epoll、kqueue等。其中epoll为Linux系统独有，kqueue则在众多unix系统中存在。在go语言中kqueue相关代码位于syscall库中。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;event_t&lt;/code&gt;是&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Kevent()&lt;/code&gt;操作的最基本的事件结构。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kqueue&lt;/code&gt;是&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;freebsd&lt;/code&gt;内核中的一个事件队列&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kernel queue&lt;/code&gt;。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Kevent()&lt;/code&gt;是一个系统调用，也是&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kqueue&lt;/code&gt;的用户界面，是对&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kqueue&lt;/code&gt;进行添加，删除操作的用户态的界面。&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Kevent_t&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Ident&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;uint64&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;//该事件关联的描述符，常见的有socket fd，file fd， signal fd等&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Filter&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int16&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;//事件的类型，比如读事件EVFILT_READ，写事件EVFILT_WRITE，信号事件EVFILT_SIGNAL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Flags&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;uint16&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;//事件的行为，也就是对kqueue的操作，下面介绍几个常用的&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;//如EV_ADD：添加到kqueue中，EV_DELETE从kqueue中删除&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;//EV_ONESHOT：一次性或事件，kevent返回后从kqueue中删除&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;//EV_CLEAR：事件通知给用户后，事件的状态会重置，&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Fflags&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;uint32&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Data&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int64&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Udata&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;byte&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;//用户指定的数据&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Kevent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kq&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;//Kqueue返回的唯一参数值，标记着一个内核队列&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;changes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;//需要对kqueue进行修改的事件集合，kqueue通过此参数完成对事件的修改&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;events&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Kevent_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;//返回的已经就绪的事件列表&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timeout&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Timespec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;//超时控制，不指定事件表示一直等待事件发生，否则只等待一段时间&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;//返回已经就绪的事件数量&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;三种现在高效的io模型&quot;&gt;三种现在高效的I/O模型&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;最常见的I/O复用模型 select&lt;/strong&gt; &lt;img src=&quot;https://luowei.github.io/media/16138994642898/16139011202522.jpg&quot; alt=&quot;&quot; /&gt; select先阻塞，有活动套接字才返回。与阻塞I/O相比，select会有两次系统调用，但是select能处理多个套接字。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;信号驱动 signal driven I/O (SIGIO)&lt;/strong&gt; &lt;img src=&quot;https://luowei.github.io/media/16138994642898/16139012681813.jpg&quot; alt=&quot;&quot; /&gt; 只有UNIX系统支持，与I/O multiplexing (select and poll)相比，它的优势是，免去了select的阻塞与轮询，当有活跃套接字时，由注册的handler处理。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;完全异步的I/O asynchronous I/O (the POSIX aio_functions)&lt;/strong&gt; 很少有*nix系统支持，windows的IOCP则是此模型，完全异步的I/O复用机制，因为纵观上面其它四种模型，至少都会在由kernel copy data to appliction时阻塞。而该模型是当copy完成后才通知application，可见是纯异步的。好像只有windows的完成端口是这个模型，效率也很出色。 &lt;img src=&quot;https://luowei.github.io/media/16138994642898/16139014187773.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;几种模型的比较&lt;/strong&gt; &lt;img src=&quot;https://luowei.github.io/media/16138994642898/16139014456591.jpg&quot; alt=&quot;&quot; /&gt; 从图中可以看出，越往后，阻塞越少，理论上效率也是最优。&lt;/p&gt; &lt;p&gt;epoll,kqueue比select高级，主要是因为他们无轮询，因为他们用callback取代了。 当套接字比较多的时候，每次select()都要通过遍历FD_SETSIZE个Socket来完成调度,不管哪个Socket是活跃的,都遍历一遍。这会浪费很多CPU时间。如果能给套接字注册某个回调函数，当他们活跃时，自动完成相关操作，那就避免了轮询，这正是epoll与kqueue做的。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;只有IOCP是asynchronous I/O，其他机制或多或少都会有一点阻塞。&lt;/li&gt; &lt;li&gt;select低效是因为每次它都需要轮询。但低效也是相对的，视情况而定，也可通过良好的设计改善&lt;/li&gt; &lt;li&gt;epoll, kqueue是Reacor模式，IOCP是Proactor模式。&lt;/li&gt; &lt;li&gt;java nio包是select模型。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;参考： &lt;a href=&quot;https://luowei.github.io/https://blog.csdn.net/Timeinsist/article/details/80978713?utm_medium=distribute.pc_relevant.none-task-blog-OPENSEARCH-10.control&amp;amp;dist_request_id=1506e37b-77d1-4a77-ba97-ed68a8df8560&amp;amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-OPENSEARCH-10.control&quot;&gt;IO复用 – kqueue&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://www.yuanmacha.com/1889172055.html&quot;&gt;kQueue目录监控 (kQueue directory monitoring)&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16138994642898.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16138994642898</guid> <pubDate>Fri, 12 Mar 2021 00:00:00 +0800</pubDate> </item> <item> <title>Mach原语</title> <description> &lt;h1 id=&quot;mach原语&quot;&gt;Mach原语&lt;/h1&gt; &lt;p&gt;&lt;strong&gt;原语：&lt;/strong&gt;是由若干条机器指令构成的完成某种特定功能的一段程序。具有不可分割性，执行也必须是连续的，且在执行过程中不允许被中断。&lt;/p&gt; &lt;h2 id=&quot;同步原语&quot;&gt;同步原语&lt;/h2&gt; &lt;h3 id=&quot;mach-ipc架构中的两个重要组件一个是消息传递机制另一个是同步机制synchronization而同步机制在根本上是由同步原语来实现的&quot;&gt;Mach IPC架构中的两个重要组件，一个是消息传递机制；另一个是同步机制(synchronization)。而同步机制在根本上是由同步原语来实现的。&lt;/h3&gt; &lt;h3 id=&quot;自旋锁hw_lock_t&quot;&gt;自旋锁(hw_lock_t)&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;自旋锁是让没有获取到锁的线程一直循环等待判断该资源是否已经释放锁，它不会把线程阻塞起来。&lt;/li&gt; &lt;li&gt;互斥体与信息量都是阻塞等待的对象。阻塞等待是指如果锁对象被其他线程持有，那么请求访问的线程就被加入到等待队列中，因而被阻塞。阻塞一处线程意味着放弃线程的时间片，把处理器让给调度器认为下一个要执行的线程。当锁可用时，调度器会得到通知，然而根据自己的判断将线程从等待队列中取出并重新调度。然而这种方式可能会严重的影响性能，由于在很多情况下锁对象只需要持有短短几个周期时间，而因此造成的两次或更多次的上下文切换带来的开销则要大好几个数量级。在这种情况下，如果线程不放弃处理器，而是继续 重复地尝试访问锁对象可能是更明智的选择，这种方式就称为忙等(busy-wait)。如果当前锁的持有者确实在几个周期之后就放弃锁了，那么这样就可以节省到少两次上下文切换。&lt;/li&gt; &lt;li&gt;自旋锁是计算机科学用于多执行者同步的一种锁，执行者反覆检查锁变量是否可用。由于执行者在这一过程中保持执行，因此是一种忙等待。一旦获取了自旋锁，执行者会一直保持该锁，直至显式释放自旋锁。自旋锁避免了进程上下文的调度开销，因此对于执行者只会阻塞很短时间的场合是有效的。&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;互斥体lck_mtx_t&quot;&gt;互斥体(lck_mtx_t)&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;互斥体可以看成是二值信号量的特殊情况。是最常用的锁对象。它的实现是把没有获取到锁的线程自己阻塞起来，等待重新调度请求。&lt;/li&gt; &lt;li&gt;互斥体必须属于一个锁组。锁组对象(lck_grp_t)就是一个链表中的一个元素，带有一个给你写的名字，以及最多3种锁的类型:自旋锁、互斥体和读写锁。&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;读写锁lck_rw_t&quot;&gt;读写锁(lck_rw_t)&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;读写锁是更”智能”的互斥体，能够区分读访问与写访问。&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;信号量semaphore&quot;&gt;信号量(semaphore)&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;信息量是泛化的互斥体，其取值为某个正数，即允许并发持有信号量的持有者的个数。&lt;/li&gt; &lt;li&gt;信号量可以在用户态使用，而互斥体只能在内核态使用。&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;锁集lock_set_t&quot;&gt;锁集(lock_set_t)&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;锁集就是锁(实际上是互斥体)的数组，通过给定的锁ID可以访问锁。&lt;/li&gt; &lt;li&gt;锁可以传递给其他线程。交出一个锁会阻塞交出锁的线程，并唤醒接受锁的线程。&lt;/li&gt; &lt;li&gt;Task(任务,Mac上管理进程叫任务)可以在用户态使用锁集。&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;机器原语&quot;&gt;机器原语&lt;/h2&gt; &lt;h3 id=&quot;mach通过一些所谓的机器原语对运行的机器的逻辑抽象机器原理处理的对象包括主机物理机器的抽象时钟维护时间处理器cpu处理器集cpu的逻辑分组&quot;&gt;Mach通过一些所谓的”机器原语”对运行的机器的逻辑抽象，机器原理处理的对象包括主机(物理机器的抽象)、时钟(维护时间)、处理器(CPU)、处理器集(CPU的逻辑分组)。&lt;/h3&gt; &lt;h3 id=&quot;主机&quot;&gt;主机&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;提供机器信息&lt;/li&gt; &lt;li&gt;提供子系统的访问&lt;/li&gt; &lt;li&gt;提供默认的异常处理&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;时钟&quot;&gt;时钟&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;Mach内核提供的一个简单的”时钟(clock)”对象抽象。这个对象用于计时和闹铃。&lt;/li&gt; &lt;li&gt;最重要的内部API: clock_deadline_for_periodic_event()&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;处理器&quot;&gt;处理器&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;基本操作：关闭或启动CPU&lt;/li&gt; &lt;li&gt;runq元素是指分发到这个处理器的线程的本地队列&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;处理器集抽象&quot;&gt;处理器集抽象&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;active_queue保存当前正在执行线程的处理器&lt;/li&gt; &lt;li&gt;idle_queue用于保存当前空闲的处理器&lt;/li&gt; &lt;li&gt;run_queue保存在这个集合中的处理器 执行的线程&lt;/li&gt; &lt;li&gt;pset_self 用于对处理器集进行操作&lt;/li&gt; &lt;li&gt;pset_name_self 用于获得处理器集的信息&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16143174374867/Mach%E5%8E%9F%E8%AF%AD.jpg&quot; alt=&quot;Mach原语&quot; /&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16143174374867.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16143174374867</guid> <pubDate>Fri, 26 Feb 2021 00:00:00 +0800</pubDate> </item> <item> <title>历史是由流氓导演并主演的</title> <description> &lt;h1 id=&quot;历史是由流氓导演并主演的&quot;&gt;历史是由流氓导演并主演的&lt;/h1&gt; &lt;p&gt;最近看了一篇名为[历史是由流氓导演并主演的]的文章，觉得写的很好，说的也很在理，遂作了个脑图梳理。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16121607750293/16121609104690.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E5%AD%A6%E4%B9%A0/16121607750293.html</link> <guid>https://luowei.github.io/%E5%AD%A6%E4%B9%A0/16121607750293</guid> <pubDate>Mon, 01 Feb 2021 00:00:00 +0800</pubDate> </item> <item> <title>中国式逻辑</title> <description> &lt;h1 id=&quot;中国式逻辑&quot;&gt;中国式逻辑&lt;/h1&gt; &lt;p&gt;韩寒说，世界上有两种逻辑。一种叫逻辑，另一种叫“中国逻辑”。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16121604981905/16121605931610.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E5%AD%A6%E4%B9%A0/16121604981905.html</link> <guid>https://luowei.github.io/%E5%AD%A6%E4%B9%A0/16121604981905</guid> <pubDate>Mon, 01 Feb 2021 00:00:00 +0800</pubDate> </item> <item> <title>异或的两个常见应用</title> <description> &lt;h1 id=&quot;异或的两个常见应用&quot;&gt;异或的两个常见应用&lt;/h1&gt; &lt;p&gt;&lt;strong&gt;异或&lt;/strong&gt;运算符”∧”也称XOR运算符。它的规则是：&lt;strong&gt;若参加运算的两个二进位同号，则结果为0（假）；异号则为1（真）&lt;/strong&gt;。即 0∧0＝0，0∧1＝1， 1^0=1，1∧1＝0。&lt;/p&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th style=&quot;text-align: left&quot;&gt;运算&lt;/th&gt; &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;0 ^ 0=0,0 ^ 1=1&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;0异或任何数，其结果=任何数&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;1 ^ 0=1,1 ^ 1=0&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;1异或任何数，其结果=任何数取反&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;x ^ x=0&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;任何数异或自己，等于把自己置0&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;h2 id=&quot;翻转特定位&quot;&gt;翻转特定位&lt;/h2&gt; &lt;p&gt;比如： 01111010，想使其低4位翻转，即1变为0，0变为1。 将它与 00001111 进行 ∧ 运算即可，得到 01110101。&lt;/p&gt; &lt;h2 id=&quot;交换两个值&quot;&gt;交换两个值&lt;/h2&gt; &lt;p&gt;例如，交换两个整数a=3，b=4的值，可通过下列语句实现：&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;＝&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;∧&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;＝&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;∧&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//等同于 b = b∧(a∧b) = 0∧a = a&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;∧&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//等同于 a = (a∧b)∧a = 0∧b = b&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/16112306834700.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/16112306834700</guid> <pubDate>Thu, 21 Jan 2021 00:00:00 +0800</pubDate> </item> <item> <title>iOS &amp; macOS 的 framwork 与 dylib 目录</title> <description> &lt;h1 id=&quot;ios--macos-的-framwork-与-dylib-目录&quot;&gt;iOS &amp;amp; macOS 的 framwork 与 dylib 目录&lt;/h1&gt; &lt;p&gt;framework 目录：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/System/Library/Frameworks&lt;/code&gt;&lt;br /&gt; dylib 目录：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/lib/&lt;/code&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/ios/16110128370860.html</link> <guid>https://luowei.github.io/ios/16110128370860</guid> <pubDate>Tue, 19 Jan 2021 00:00:00 +0800</pubDate> </item> <item> <title>文学与文化</title> <description> &lt;h1 id=&quot;文学与文化&quot;&gt;文学与文化&lt;/h1&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16094421226098/16094434859227.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;现在很多人学习文化，读了几十年的书，对文学与文化这两个概念都没有理解。可能很多人会这样简单的理解，包括我自己以前也这样认为的。以为文学就是文字学，文化就是文字化，以为文学的目的就是学习文字、学会认字读书看报，以为文化的目的就是让大众都能认字读书看报。&lt;/p&gt; &lt;p&gt;其实文学与文化远不是如此，文学与文化是承载着人类文明的发展责任的。&lt;/p&gt; &lt;p&gt;现在想来过去自己的理解在根本上就是错误的，文学应该是理解成文明学、文化应该理解成文明化。文学的作用是让人知是非善恶美丑、成为有良知的文明人，而文化的作用是让大众脱离野蛮状态变得有文明有礼仪，让整个社会摆脱动物界的丛林法实现和谐文明化。&lt;/p&gt; </description> <link>https://luowei.github.io/%E8%AF%BB%E4%B9%A6/16094421226098.html</link> <guid>https://luowei.github.io/%E8%AF%BB%E4%B9%A6/16094421226098</guid> <pubDate>Fri, 01 Jan 2021 00:00:00 +0800</pubDate> </item> <item> <title>2020年还是买了很多书</title> <description> &lt;h1 id=&quot;2020年还是买了很多书&quot;&gt;2020年还是买了很多书&lt;/h1&gt; &lt;p&gt;对于不懂的与未知的，最大的幸事莫过于还有很多书可以翻。 2020年还是买了很多书，虽然很多书没有读，或只读了一部分就放在那了，但还是买了很多书。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16094363070955/16094366218104.jpg&quot; alt=&quot;-w819&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/16094363070955/16094366837543.jpg&quot; alt=&quot;-w858&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/16094363070955/16094367105422.jpg&quot; alt=&quot;-w861&quot; /&gt;&lt;/p&gt; &lt;p&gt;还有最近经常在翻的几本书，放在一边没拍上，也补上。 &lt;img src=&quot;https://luowei.github.io/media/16094363070955/16094375285437.jpg&quot; alt=&quot;-w453&quot; /&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E8%AF%BB%E4%B9%A6/16094363070955.html</link> <guid>https://luowei.github.io/%E8%AF%BB%E4%B9%A6/16094363070955</guid> <pubDate>Fri, 01 Jan 2021 00:00:00 +0800</pubDate> </item> <item> <title>2020年印(影)象(响)深刻的大家们</title> <description> &lt;h1 id=&quot;2020年印影象响深刻的大家们&quot;&gt;2020年印(影)象(响)深刻的大家们&lt;/h1&gt; &lt;p&gt;&lt;strong&gt;记得我第一次去上海图书馆时最让我莫名难忘又震撼的是图书馆门前的思想者雕像，到现在还是有一种用言语说不明白的印象深刻。&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;数说这十年印(影)象(响)深刻的大家们。&lt;/strong&gt; 十年前的余世维、郎咸平们，五年前的高晓松、罗振宇、宋鸿兵们，他们的思想观念虽然让人有所成长，但并没有让人弄清是非价值，也没让人活明白或者说是没唤醒什么。2020年是思想觉醒的一年，也是慢慢明白的一年，读懂了鲁讯、陈丹青、许知远们所写的文化与艺术，理解了秦晖、易中天、袁腾飞们所说的历史，明白了张维迎、张五常、贺卫方们所讲的经济与法治，……&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16094339866828/16094357136239.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E8%AF%BB%E4%B9%A6/16094339866828.html</link> <guid>https://luowei.github.io/%E8%AF%BB%E4%B9%A6/16094339866828</guid> <pubDate>Fri, 01 Jan 2021 00:00:00 +0800</pubDate> </item> <item> <title>Fastlane自动打包配置</title> <description> &lt;h1 id=&quot;fastlane自动打包配置&quot;&gt;Fastlane自动打包配置&lt;/h1&gt; &lt;p&gt;Fastlane自动打包配置，主要是编辑Fastfile，下面给一个简单的示例，代码如下：&lt;/p&gt; &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;default_platform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:ios&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;platform&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:ios&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;desc&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Description of what the lane does&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lane&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:custom_lane&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# add actions here: https://docs.fastlane.tools/actions&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# source &quot;https://gems-china.org&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lane&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:buildApp&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# # 解决在xcode11下获取版本号问题&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# # 首先要在Gemfile里添加：gem &quot;xcodeproj&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# project_version = get_version_number(xcodeproj: &quot;xxxx.xcodeproj&quot;, target: &quot;xxxx&quot;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# project = Xcodeproj::Project.open(&apos;../xxxx.xcodeproj&apos;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# target = project.targets.first&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# if project_version !~ /\d+\./&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# target.build_configurations.each do |configuration|&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# project_version = configuration.build_settings[&quot;MARKETING_VERSION&quot;]&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# end&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# end&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# # 使用cocoapods要在Gemfile添加依赖：gem &apos;cocoapods&apos;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# cocoapods( clean: true, podfile: &quot;./Podfile&quot;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gym&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# workspace: &apos;HelloApp.xcworkspace&apos;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;scheme: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&apos;HelloApp&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# codesigning_identity:&apos;iPhone Developer: Wei Luo (Q5EST84F4F)&apos;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;export_method&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:&apos;development&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;configuration: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&apos;Debug&apos;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lane&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:buildApp2&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 安装cocoapods依赖&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cocoapods&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;clean: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;podfile: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;./Podfile&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 打包使用gym 或 build_app 两种方式都可以&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# gym(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;build_app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# workspace: &apos;MyWallPaper.xcworkspace&apos;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;scheme: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&apos;MyWallPaper&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# codesigning_identity:&apos;iPhone Developer: Wei Luo (Q5EST84F4F)&apos;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;export_method&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:&apos;development&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;configuration: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&apos;Debug&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;export_options: &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;iCloudContainerEnvironment: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&apos;Development&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 添加pgyer插件,终端到当前项目目录执行：fastlane add_plugin pgyer &lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pgyer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;api_key: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;33axxxxxxxxx33de&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;user_key: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;c141xxxxxxxxxx229&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/ios/16093382846124.html</link> <guid>https://luowei.github.io/ios/16093382846124</guid> <pubDate>Wed, 30 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>开小灶</title> <description> &lt;h1 id=&quot;开小灶&quot;&gt;开小灶&lt;/h1&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16080116747063/16080142260989.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;关于开小灶这事，之前看到在一个评选节目上看到马云质问批责一个候选人，在公司替老板上班的时候自己业余也搞了一个小网站的行为。&lt;/p&gt; &lt;p&gt;看后时常在思考对这个问题的价值判断，从人性的角度看也总觉得马云这个批评质问总欠缺些什么。现在仔细一想这就是不准人家开小灶，剥夺个人的私有权力。&lt;/p&gt; &lt;p&gt;如果说那个候选人是因为工作时间自己开小灶导致没有完成公事，那是这候选人的不对；如果人家很好的完成了公事还禁止人家开小灶，那就是剥夺个人的私人空间了，并且还会打击员工的积极性，让本来很有能力的人会要磨洋工。&lt;/p&gt; &lt;p&gt;允许员工在完成公事后，可以自己开小灶，这会极大的激发员工的积极性，因为人都有私心，都想更快更有效率的把公事干完，剩下的时间去干自己的事，实现自己的理想。最终的结果是员工工作效率与产出会成倍上升，员工自己的能力与成就也会快速成长。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;允许开小灶本质上是有利于保护个人权力的，也是符合人性基因的，在完成公事的同时鼓励发展个人私产及私人空间，能极大的激发个人积极性，最终促进个人与整体的成长。&lt;/strong&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E8%AF%BB%E4%B9%A6/16080116747063.html</link> <guid>https://luowei.github.io/%E8%AF%BB%E4%B9%A6/16080116747063</guid> <pubDate>Tue, 15 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>iOS 中 NSProxy 的特性与应用</title> <description> &lt;h1 id=&quot;ios-中-nsproxy-的特性与应用&quot;&gt;iOS 中 NSProxy 的特性与应用&lt;/h1&gt; &lt;h2 id=&quot;nsproxy-的特性&quot;&gt;&lt;strong&gt;NSProxy 的特性&lt;/strong&gt;&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSProxy&lt;/code&gt;的主要功能，负责把消息转发给真正的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target&lt;/code&gt;的代理类；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSProxy&lt;/code&gt;没有继承&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSObject&lt;/code&gt;，但是实现了&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSObject&lt;/code&gt;协议，作为一个抽象类，它没有实现初始化方法，并且会在收到任何它不响应的消息时会引发异常；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSProxy&lt;/code&gt;的子类必须要实现一个初始化或创建方法，并要重写&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;- (void)forwardInvocation:(NSInvocation *)invocation;&lt;/code&gt;和&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-(nullable NSMethodSignature *)methodSignatureForSelector:(SEL)sel&lt;/code&gt;方法，来转发它没实现的方法；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSProxy&lt;/code&gt;自省方法的默认实现是将消息 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;forward&lt;/code&gt; 到 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;realObject&lt;/code&gt;，也就是说&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSProxy&lt;/code&gt;会将自省相关的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;selector&lt;/code&gt; 直接 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;forward&lt;/code&gt; 到&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-forwardInvocation:&lt;/code&gt;回调中，这些自省方法包括：&lt;br /&gt; ``` &lt;ul&gt; &lt;li&gt;(BOOL)isKindOfClass:(Class)aClass;&lt;/li&gt; &lt;li&gt;(BOOL)isMemberOfClass:(Class)aClass;&lt;/li&gt; &lt;li&gt;(BOOL)conformsToProtocol:(Protocol *)aProtocol;&lt;/li&gt; &lt;li&gt;(BOOL)respondsToSelector:(SEL)aSelector; ```&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16074772192999/16080205106965.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;nsproxy-的应用&quot;&gt;&lt;strong&gt;NSProxy 的应用&lt;/strong&gt;&lt;/h2&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;模拟类似多继承功能，实现多个对象消息的分发&lt;/strong&gt; 实现方法是定义一个NSProxy的子类，添加多个NSObject代理对象的属性变量，并在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;forwardInvocation&lt;/code&gt;,&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;methodSignatureForSelector&lt;/code&gt;与&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;respondsToSelector&lt;/code&gt;方法中分依次去实现多个代理对象的方法即可。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;解决NSTimer&lt;/strong&gt; 实现方法同样是定义一个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSProxy&lt;/code&gt;的子类，并在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;forwardInvocation&lt;/code&gt;与&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;methodSignatureForSelector&lt;/code&gt;方法中调用代理对象对应的方法，在使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSTimer&lt;/code&gt;的时候，把&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;proxy&lt;/code&gt;对象作为&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target&lt;/code&gt;传入即可。&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;strong&gt;参考：&lt;/strong&gt;&lt;br /&gt; NSProxy的理解和使用：&lt;a href=&quot;https://luowei.github.io/https://juejin.cn/post/6844903606483681288&quot;&gt;https://juejin.cn/post/6844903606483681288&lt;/a&gt; &lt;br /&gt; NSProxy：&lt;a href=&quot;https://luowei.github.io/https://zhangbuhuai.com/post/nsproxy.html&quot;&gt;https://zhangbuhuai.com/post/nsproxy.html&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16074772192999.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16074772192999</guid> <pubDate>Tue, 15 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>iOS 中常见的内存泄漏</title> <description> &lt;h1 id=&quot;ios-中常见的内存泄漏&quot;&gt;iOS 中常见的内存泄漏&lt;/h1&gt; &lt;p&gt;&lt;strong&gt;内存泄漏（memory leak）&lt;/strong&gt;：是指申请的内存空间使用完毕之后未回收。 &lt;strong&gt;内存溢出（out of memory）&lt;/strong&gt;：是指程序在申请内存时，没有足够的内存空间供其使用。&lt;/p&gt; &lt;ol&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;delegate&lt;/code&gt; 变量没声明为 weak 类型；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSNotification&lt;/code&gt;没有移除通知；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;block&lt;/code&gt;强引用捕获外部变量；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSTimer&lt;/code&gt;在释放前未调用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[timer invalidate]&lt;/code&gt;，对target强引用；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;performSelector:afterDelay&lt;/code&gt;只有在runloop为DefaultMode时才能成功，否则会对target强引用；&lt;/li&gt; &lt;li&gt;提供了release函数的C语言接口；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WKWebView&lt;/code&gt; 的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;addScriptMessageHandler&lt;/code&gt; 操作；&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;目前国内对iOS内存泄漏检测，用的多的主要有：&lt;/p&gt; &lt;ol&gt; &lt;li&gt;Analyzer（静态分析）&lt;/li&gt; &lt;li&gt;MLeaksFinder (第三方工具)&lt;/li&gt; &lt;li&gt;Instruments Leaks (动态检测)&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;strong&gt;参考：&lt;/strong&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://juejin.cn/post/6844903968250789896&quot;&gt;NSTimer解决循环引用的方案&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://juejin.cn/post/6844903606206857230&quot;&gt;NSTimer问题及各种定时器详解&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://wereadteam.github.io/2016/02/22/MLeaksFinder/&quot;&gt;MLeaksFinder 内存泄漏原理&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/http://hchong.net/2020/03/11/iOS%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E6%A3%80%E6%9F%A5-%E5%8E%9F%E7%90%86/&quot;&gt;常见的检测内存泄漏工具&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://xibhe.com/2019/05/27/iOS%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E6%A3%80%E6%B5%8B/&quot;&gt;iOS内存泄漏检测步骤&lt;/a&gt; &lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://cloud.tencent.com/developer/article/1614680&quot;&gt;iOS内存优化心得&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16074769341843.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16074769341843</guid> <pubDate>Tue, 15 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>Json学编程开发——B站直播间</title> <description> &lt;h1 id=&quot;json学编程开发b站直播间&quot;&gt;Json学编程开发——B站直播间&lt;/h1&gt; &lt;p&gt;B站直播间 &lt;br /&gt; 直播间地址：&lt;a href=&quot;https://luowei.github.io/https://live.bilibili.com/22683419&quot;&gt;https://live.bilibili.com/22683419&lt;/a&gt;&lt;/p&gt; &lt;p&gt;或者扫码可直接观看：&lt;br /&gt; &lt;img src=&quot;https://luowei.github.io/media/16079545869098/live_qr.png&quot; alt=&quot;live_qr&quot; /&gt;&lt;/p&gt; &lt;p&gt;本周主要讲：&lt;br /&gt; iOS高级开发原理解析&lt;/p&gt; &lt;p&gt;会附带去零散一点知识点：&lt;br /&gt; 1.讲日常编程开发，比如Shell、Java，Chrome；&lt;br /&gt; 2.一个独立开发者的日常，读书； &lt;br /&gt; 3.提高工作效率与电脑使用效率的一些应用，Sublim，VSCode使用；&lt;br /&gt; 4.日常常用的Shell脚本的写法； &lt;br /&gt; 5.应用开发，主要iOS平台上的应用开发；&lt;/p&gt; </description> <link>https://luowei.github.io/%E7%9B%B4%E6%92%AD/16079545869098.html</link> <guid>https://luowei.github.io/%E7%9B%B4%E6%92%AD/16079545869098</guid> <pubDate>Mon, 14 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>深入理解iOS 中的 Runloop</title> <description> &lt;h1 id=&quot;深入理解ios-中的-runloop&quot;&gt;深入理解iOS 中的 Runloop&lt;/h1&gt; &lt;p&gt;我们知道Runloop本质上是一个执行死循环的对象，它跑起来后大多数时候是处于休眠等待状态，是不占用CPU资源的。我们先来看一下它是怎么做到的：&lt;/p&gt; &lt;p&gt;&lt;strong&gt;闲等待：在死循环里是如何不占用CPU资源的&lt;/strong&gt; 所谓闲等待是在一个循环里，CPU不是一直在空转，没有任务处理时，就不占用CPU计算资源，让CPU就去干别的事。这一般都是通 过中断来实现的：&lt;/p&gt; &lt;ul&gt; &lt;li&gt;中断是CPU停止正在运行的程序并转入处理新情况的程序，处理完毕后才返回原被暂停的程序继续运行；&lt;/li&gt; &lt;li&gt;比如在阻塞IO中IO设备向CPU发一条IO中断信号，CPU就会暂停当前程序的处理去服务该I/O设备的程序；&lt;/li&gt; &lt;li&gt;可知sleep函数本质上是通过时钟中断让CPU暂停对当前线程的处理的，时钟中断可以用来切换运行中的线程（抢占式调度）；&lt;/li&gt; &lt;li&gt;阻塞机制是循环+中断+特定的数据结构实现，本质上是由中断来实现CPU调度切换，中断会导致内核的任务调度器挂起当前进程，当有中断返回或有其他中断信号时，再恢复进程；&lt;/li&gt; &lt;li&gt;非阻塞一般是借助缓冲区满/空，或事件循环通过注册信号处理函数来实现高效且节省CPU资源的。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;strong&gt;关于阻塞就有必要看一下IO的几种模型&lt;/strong&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;strong&gt;阻塞IO：&lt;/strong&gt;进程发起IO系统调用后，进程被阻塞，转到内核空间处理，整个IO处理完毕后返回进程；&lt;/li&gt; &lt;li&gt;&lt;strong&gt;非阻塞IO：&lt;/strong&gt;进程发起IO系统调用后，如果内核缓冲区没有数据，需要到IO设备中读取，进程返回一个错误而不会被阻塞；进程发起IO系统调用后，如果内核缓冲区有数据，内核就会把数据返回进程。应用上一般借助缓冲区减少轮循消耗CPU资源；&lt;/li&gt; &lt;li&gt;&lt;strong&gt;IO复用模型：&lt;/strong&gt;是多个进程IO可以注册到一个复用器(select)上，让该select监听所有注册进来的IO，然后再用一个进程调用该select，如果select所有监听的IO在内核缓冲区都没有可读数据，select调用进程会被阻塞，当任一IO在内核缓冲区中有可数据时，select调用就会返回；&lt;/li&gt; &lt;li&gt;&lt;strong&gt;信号驱动IO：&lt;/strong&gt;当进程发起一个IO操作，会向内核注册一个信号处理函数，然后进程返回不阻塞；当内核数据就绪时会发送一个信号给进程，进程便在信号处理函数中调用IO读取数据。具体应用有linux下的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;epoll&lt;/code&gt;、macOS下的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;runloop&lt;/code&gt;的实现机制。 &lt;strong&gt;异步IO：&lt;/strong&gt;与&lt;strong&gt;同步IO&lt;/strong&gt;是一种IO处理方式。&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;runloop的一些特性总结&quot;&gt;&lt;strong&gt;Runloop的一些特性总结&lt;/strong&gt;&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;Runloop在iOS中被封装成了一个对象，这个对象在循环中用来处理程序运行过程中出现的各种事件（比如说触摸事件、UI刷新事件、定时器事件、&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Selector&lt;/code&gt;事件），从而保持程序的持续运行；&lt;/li&gt; &lt;li&gt;在没有事件处理的时候，会进入睡眠模式，从而节省CPU资源，提高程序性能；&lt;/li&gt; &lt;li&gt;主线程一开起来就会跑一个对应的RunLoop，而RunLoop保证主线程不会被销毁，保证了程序的持续运行；&lt;/li&gt; &lt;li&gt;所以总结起来Runloop主要有3个作用：1.保持线程持续运行；2.处理App中的各种事件；3.节省CPU资源，提高程序性能；&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16074478217682/QQ20201212-142851.png&quot; alt=&quot;QQ20201212-142851&quot; /&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;RunLoop在跑圈过程中，当接收到&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Input sources&lt;/code&gt; 或者 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Timer sources&lt;/code&gt;时就会交给对应的处理方去处理。当没有事件消息传入的时候，RunLoop就休息了。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;NSRunLoop对象是基于CFRunLoopRef的封装，所以&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSRunLoop&lt;/code&gt;的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mainRunLoop&lt;/code&gt;与&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;currentRunLoop&lt;/code&gt;就相当于&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CFRunLoopGetMain&lt;/code&gt;与&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CFRunLoopGetCurrent&lt;/code&gt;。&lt;/p&gt; &lt;/li&gt; &lt;li&gt;主线程的RunLoop已经自动创建好了，子线程的RunLoop需要主动创建，RunLoop在第一次获取时创建，在线程结束时销毁。&lt;/li&gt; &lt;li&gt;RunLoop的5个重要的类： &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;n&quot;&gt;CFRunLoopRef&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//获得当前RunLoop和主RunLoop&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFRunLoopModeRef&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//运行模式，只能选择一种，在不同模式中做不同的操作&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFRunLoopSourceRef&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//事件源，输入源&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFRunLoopTimerRef&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//定时器时间&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFRunLoopObserverRef&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//观察者&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt;一个 RunLoop 包含若干个 Mode，每个 Mode 又包含若干个 Source/Timer/Observer。每次调用 RunLoop 的主函数时，只能指定其中一个 Mode，这个Mode被称作 CurrentMode。如果需要切换 Mode，只能退出 Loop，再重新指定一个 Mode 进入。这样做主要是为了分隔开不同组的 Source/Timer/Observer，让其互不影响。&lt;/li&gt; &lt;li&gt;RunLoop Mode的类型： &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;n&quot;&gt;kCFRunLoopDefaultMode&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//App的默认Mode，通常主线程是在这个Mode下运行&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UITrackingRunLoopMode&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//界面跟踪 Mode，用于 ScrollView 追踪触摸滑动，保证界面滑动时不受其他 Mode 影响&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UIInitializationRunLoopMode&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//在刚启动 App 时第进入的第一个 Mode，启动完成后就不再使用&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GSEventReceiveRunLoopMode&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//接受系统事件的内部 Mode，通常用不到&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kCFRunLoopCommonModes&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//这是一个占位用的Mode，作为标记kCFRunLoopDefaultMode和UITrackingRunLoopMode用，并不是一种真正的Mode&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt;Runloop中与Mode相关的三个函数： &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;CFRunLoopAddSource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//把runloop设置mode后，添加到Source的runloop列表里，对应addPort:forMode:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFRunLoopAddObserver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//向mode 的observer 数组中添加observer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFRunLoopAddTimer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//添加mode 的timer数组中添加Timer,对应 addTimer:forMode:&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt;Source/Timer/Observer 被统称为 mode item，一个 item 可以被同时加入多个 mode。但一个 item 被重复加入同一个 mode 时是不会有效果的。如果一个 mode 中一个 item 都没有，则 RunLoop 会直接退出，不进入循环。&lt;/li&gt; &lt;li&gt;为了保证用户界面保持平滑动画流畅，会给用户界面相关任务设置的较高优先级的 Runloop Mode，如&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;UITrackingRunLoopMode&lt;/code&gt;或&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSRunLoopCommonModes&lt;/code&gt;，这样当UI很活跃的时候会就暂停一些别的任务。比如当&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;UIScrollview&lt;/code&gt;滑动的时候，重绘滚动视图的内容会比别的任务优先级更高，以标准的NSTimer和网络请求就不会启动。&lt;/li&gt; &lt;li&gt; &lt;p&gt;当同时对&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CADisplayLink&lt;/code&gt;指定多个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run loop&lt;/code&gt;模式，如加入&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSDefaultRunLoopMode&lt;/code&gt;和&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;UITrackingRunLoopMode&lt;/code&gt;来保证它不会被滑动打断，也不会被其他UIKit控件动画影响性能。和&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CADisplayLink&lt;/code&gt;类似，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSTimer&lt;/code&gt;同样也可以使用不同的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run loop&lt;/code&gt;模式配置。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;分析源码&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CFRunLoopc.c&lt;/code&gt;知道，在执行RunLoop的循环中使用了GCD的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_source_t&lt;/code&gt;来实现其超时机制；另外GCD中将任务提交到主线程的主队列即&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_get_main_queue()&lt;/code&gt;时，是由RunLoop负责执行。&lt;/p&gt; &lt;/li&gt; &lt;li&gt;只要&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RunLoop Mode&lt;/code&gt;的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Source/Observer/Timer&lt;/code&gt;中的有一个不为空， &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RunLoop&lt;/code&gt;就不会退出循环，即能够常驻内存。可以通过使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CFRunLoopStop(_:)&lt;/code&gt;或者从&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RunLoop Mode&lt;/code&gt;移除所有的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Source/Observer/Timer&lt;/code&gt;，来停止&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;runloop&lt;/code&gt;。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;参考： &lt;a href=&quot;https://luowei.github.io/https://imlifengfeng.github.io/article/487/&quot;&gt;iOS RunLoop详解&lt;/a&gt; &lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://www.cnblogs.com/diegodu/p/4602849.html&quot;&gt;poll/select/epoll 对比&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://www.zhihu.com/question/382972191&quot;&gt;阻塞io和非阻塞io在发生相应的系统调用的时候，操作系统到底发生了什么&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://v2ex.com/t/632449&quot;&gt;编程语言中阻塞机制在操作系统最底层是如何实现的？&lt;/a&gt; &lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://blog.csdn.net/songchuwang1868/article/details/89877739&quot;&gt;Epoll的本质（内部实现原理）&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://blog.csdn.net/daaikuaichuan/article/details/83862311&quot;&gt;epoll原理详解及epoll反应堆模型&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://www.jianshu.com/p/ab555c238d8b&quot;&gt;RunLoop 原理和核心机制&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://juejin.cn/post/6844904090351353869&quot;&gt;对iOS中runloop使用场景的一次总结&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16074478217682.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16074478217682</guid> <pubDate>Sat, 12 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>古代中国梦</title> <description> &lt;h1 id=&quot;古代中国梦&quot;&gt;古代中国梦&lt;/h1&gt; &lt;p&gt;看历史，有人说古代中国老百姓有三个梦，暂且叫『古代中国梦』吧。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16074064214707/16074066047052.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E8%AF%BB%E4%B9%A6/16074064214707.html</link> <guid>https://luowei.github.io/%E8%AF%BB%E4%B9%A6/16074064214707</guid> <pubDate>Tue, 08 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>深入理解 iOS 中 GCD 原理</title> <description> &lt;h1 id=&quot;深入理解-ios-中-gcd-原理&quot;&gt;深入理解 iOS 中 GCD 原理&lt;/h1&gt; &lt;p&gt;首先了解一下，&lt;strong&gt;计算机程序是怎样运行的&lt;/strong&gt;，然后再具体讲 GCD 相关内容。&lt;/p&gt; &lt;ol&gt; &lt;li&gt;当开始运行程序时，首先应把第一条指令所在存储单元的地址赋予程序计数器PC，然后机器就进入了&lt;em&gt;取指阶段&lt;/em&gt;；&lt;/li&gt; &lt;li&gt;在取指阶段，CPU从内存中读取的内容必为指令。然后送往数据缓冲寄存器DR，经DR送往指令寄存器IR；&lt;/li&gt; &lt;li&gt;之后由指令译码器ID对IR中的指令的操作码字段进行译码，然后又PLA发出执行该指令所需要的各种微操作控制信号，取指阶段到此结束。&lt;/li&gt; &lt;li&gt;之后，机器就进入&lt;em&gt;执行指令阶段&lt;/em&gt;，这时CPU便执行指令所规定的具体操作。&lt;/li&gt; &lt;li&gt;当一条指令执行完毕后，即转入下一条指令的取指阶段，如此循环往复，知道遇到暂停或程序结束为止。&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;strong&gt;下面看一下GCD主要的API&lt;/strong&gt; &lt;img src=&quot;https://luowei.github.io/media/16074006673494/16074517435029.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;串行队列与并行队列&quot;&gt;&lt;strong&gt;串行队列与并行队列&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;在说GCD之前，我们先彻底弄明白串行队列与并行队列的意义和作用。&lt;/strong&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;CPU执行指令是一条条执行的，指令的执行序列是一条按执行时间先后顺序排列的无分叉路径，我们这里管这个叫指令执行流，这个执行流可以是进程或线程，或是某些语言里所说的worker也好；&lt;/li&gt; &lt;li&gt;CPU按时间片执行指令，以及多核CPU的出现，可以让1个CPU执行多条不同路径的指令执行流；&lt;/li&gt; &lt;li&gt;我们的程序通过编译链接后，最终得到是一个二进制形式的机器码指令的集合；&lt;/li&gt; &lt;li&gt;如果CPU的每个时钟脉冲会执行1条指令，那一个3G Hz的CPU在1秒里就可以执行30亿条指令，当然实际上1条计算机指令可能由多个CPU微指令的组合操作构成；&lt;/li&gt; &lt;li&gt;队列一般会添加到一个执行流上的，在一个时间段里一个执行流上只能有一个队列在执行；&lt;/li&gt; &lt;li&gt;我们&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;代码最终是以结构体对象的形式添加到队列上的；一个队列上可以添加多个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;代码执行对象；添加在GCD队列上的对象也称之为任务对象；&lt;/li&gt; &lt;li&gt;一个串行队列里的所有对象只会分配到同一个执行流上执行，一个并行队列里的对象会分配到多个不同执行流上执行，所以一个串行队列只对应一个执行流，一个并行队列就可能对应多个执行流；&lt;/li&gt; &lt;li&gt;所以主队列&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_get_main_queue&lt;/code&gt;一定肯定是串行队列，因为它只在主线程运行，而全局队列&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_get_global_queue&lt;/code&gt;则是并行队列，这个全局并行队列上的任务具体被分配在哪个执行流上执行，是由系统调试决定，若主线程不忙一般还是分配在主线程上执行；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_async&lt;/code&gt;会对作为参数传入的队列里追加一个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;任务对象,不会阻塞当前队列的执行流,异步执行作为参数传入的队列里的任务；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_sync&lt;/code&gt;会对作为参数传入的队列里追加一个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;任务对象,只会阻塞主队列的执行流,并且会同步执行作为参数传入的队列里的任务；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_barrier_async&lt;/code&gt;栅栏函数会等待队列上已有的任务全部完成后，再追加栅栏函数传入的任务到队列，并异步执行此任务；而&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_barrier_sync&lt;/code&gt;的差别是同步执行此任务；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_apply&lt;/code&gt;在传入的队列里迭代block任务指定次数；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_suspend&lt;/code&gt;用于挂起队列或资源；&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_resume&lt;/code&gt;用于恢复队列或资源；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_once&lt;/code&gt;在程序的生命周期范围内只执行一次；但是并不是简单的只执行一次，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_once&lt;/code&gt;本质上可以接受多次请求，会对此维护一个请求链表，用来保存程序中所有的单例&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_once&lt;/code&gt;的静态标记。&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;队列与dispatch_async的本质&quot;&gt;&lt;strong&gt;队列与&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_async&lt;/code&gt;的本质&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_async&lt;/code&gt; 与 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_sync&lt;/code&gt; 与队列的使用，下面用一段代码来彻底弄明白。&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//代码添加到autoreleasepool中，使用dispatch_get_global_queue系统会优化线程的创建与分配&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;autoreleasepool&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//验证：dispatch_sync不会阻塞全局队列的执行流&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_queue_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;glb_q&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_get_global_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_sync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;glb_q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//a添加到全局队列异步执行，&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;a dispatch_sync 调用内部,线程：%@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSThread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;currentThread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_sync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;glb_q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//b添加到全局队列异步执行，&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;b dispatch_sync 调用内部,线程：%@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSThread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;currentThread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* 下面第1个数字表示执行流顺序；m表示主队列,g表示全局队列,后面的数字表示任务在队列中的位置, 如:m2表示主队列中的第2个任务；t表示线程,t1表示主线程,t2表示其他线程。 */&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dispatch_get_main_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;2_m2_t1. dispatch_async 调用内部,线程：%@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSThread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;currentThread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;1_m1_t1. dispatch_async 调用后,线程：%@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSThread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;currentThread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSRunLoop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;currentRunLoop&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runUntilDate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dateWithTimeIntervalSinceNow&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_queue_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;global_q&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_get_global_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_sync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;global_q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;3_g1_t1. dispatch_sync 调用内部,线程：%@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSThread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;currentThread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//因当前主线程已经加了同步锁，所以这里添加任务到主队列只能才采用异步方式添加&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dispatch_get_main_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;6_m4_t1. dispatch_async 调用内部,线程：%@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSThread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;currentThread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;global_q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//t7添加到全局队列异步执行&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;7_g3_t2. dispatch_sync 调用内部,线程：%@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSThread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;currentThread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_sync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;global_q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;4_g2_t1. dispatch_sync 调用内部,线程：%@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSThread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;currentThread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;global_q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//因为t7与t8都在同一个队列上，并且t7早于t8加入队列，所以如果t7与t8分本在同一个线程上的话，t7会早于t8执行；&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;8_g4_t2. dispatch_sync 调用内部,线程：%@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSThread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;currentThread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;5_m3_t1. dispatch_sync 调用后,线程：%@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSThread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;currentThread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSRunLoop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;currentRunLoop&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runUntilDate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dateWithTimeIntervalSinceNow&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;这个代码会输出：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;a dispatch_sync 调用内部,线程：&amp;lt;NSThread: 0x100505840&amp;gt;{number = 1, name = main} b dispatch_sync 调用内部,线程：&amp;lt;NSThread: 0x100505840&amp;gt;{number = 1, name = main} 1_m1_t1. dispatch_async 调用后,线程：&amp;lt;NSThread: 0x100505840&amp;gt;{number = 1, name = main} 2_m2_t1. dispatch_async 调用内部,线程：&amp;lt;NSThread: 0x100505840&amp;gt;{number = 1, name = main} 3_g1_t1. dispatch_sync 调用内部,线程：&amp;lt;NSThread: 0x100505840&amp;gt;{number = 1, name = main} 4_g2_t1. dispatch_sync 调用内部,线程：&amp;lt;NSThread: 0x100505840&amp;gt;{number = 1, name = main} 7_g3_t2. dispatch_sync 调用内部,线程：&amp;lt;NSThread: 0x100520de0&amp;gt;{number = 2, name = (null)} 8_g4_t2. dispatch_sync 调用内部,线程：&amp;lt;NSThread: 0x100520de0&amp;gt;{number = 2, name = (null)} 5_m3_t1. dispatch_sync 调用后,线程：&amp;lt;NSThread: 0x100505840&amp;gt;{number = 1, name = main} 6_m4_t1. dispatch_async 调用内部,线程：&amp;lt;NSThread: 0x100505840&amp;gt;{number = 1, name = main} &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;gcd-中主要的api&quot;&gt;&lt;strong&gt;GCD 中主要的API&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;队列&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;dispatch_get_main_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//取主队列&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_get_global_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//取全局队列,第1个参数是线程执行的优先级,第2个参数是预留参数0&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_queue_create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//创建队列,第1个参数标签名,第2个参数NULL表示创建串行队列,DISPATCH_QUEUE_CONCURRENT表示创建并行队列&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;执行&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//异步执行,即在队列里追加一个block对象的任务,不阻塞当前队列的执行流；&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_sync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//同步执行,即在当主队列追加一个block对象的任务,会阻塞主队列的执行流；&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_after&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//延后执行&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_once&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//只执行一次&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_apply&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//迭代执行指定次数&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_barrier_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//插入栅栏后异步执行任务&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_barrier_sync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//插入栅栏后同步执行任务&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;调度组&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;dispatch_group_create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//创建调度组&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_group_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//向调度组队列里添加任务&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_group_enter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//每次调用后任务向调度组列队里添加1次,并且计数+1；&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_group_leave&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//每次调用后把在调度组列队里的任务计数计数-1,减到0时从队列里移出任务；&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_group_notify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//调度组列队中的任务全部执行完后通知block执行&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_group_wait&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//等待整个调度组所有任务执行完&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_group_enter&lt;/code&gt; 必须与 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_group_leave&lt;/code&gt; 成对出现；&lt;/p&gt; &lt;p&gt;&lt;strong&gt;信号量&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//dispatch_semaphore_t对象,参数value用于初始化 semaphore.count;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//semaphore.count小于等于0会阻塞当前线程；&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_semaphore_create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_semaphore_wait&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//p操作,对dsema进行原子性的-1,阻塞&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_semaphore_signal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//V操作,对dsema进行原子性+1,唤醒&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;调度资源&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;dispatch_source_create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_source_set_timer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_source_set_event_handler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_resume&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_suspend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_source_cancel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_source_testcancel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_source_set_cancel_handler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;使用调度组dispatch_group_t&quot;&gt;&lt;strong&gt;使用调度组&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_group_t&lt;/code&gt;&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_group_t&lt;/code&gt;可以用来将GCD的任务合并到一个组里来管理，也可以同时监听组里所有任务的执行情况; 在group上任务完成前，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_group_wait&lt;/code&gt;会阻塞当前线程；&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_after&lt;/code&gt;延时执行任务；&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_block_wait&lt;/code&gt;会阻塞当前线程等待；&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;autoreleasepool&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_queue_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;main_q&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_get_main_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_queue_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;global_q&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_get_global_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_group_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_group_create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_group_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;global_q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;dispatch_async block 1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_group_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;global_q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;dispatch_async block 2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_group_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;global_q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;dispatch_async block 3&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//只有当调用组group中的队列global_q的任务都处理完了，才会通知执行以下的这个block&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_group_notify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;global_q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Done!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_group_wait&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DISPATCH_TIME_NOW&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;800ull&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSEC_PER_MSEC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;dispatch_group_wait 后&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//使用 dispatch_after 让 block1 在1秒后执行&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_time_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DISPATCH_TIME_NOW&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1ull&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSEC_PER_SEC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_block_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;dispatch_after 1秒后 block1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_after&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;main_q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//dispatch_block_wait 用于判断block执行是否超出指定时间&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dispatch_queue_create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ab.d&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DISPATCH_QUEUE_CONCURRENT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_block_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_block_create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;block2 开始执行&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSThread&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sleepForTimeInterval&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;block2 结束执行&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;global_q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;block2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_time_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DISPATCH_TIME_NOW&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1ull&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSEC_PER_SEC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//dispatch_block_wait 会阻塞当前线程,并判断block2 在 t2时间内是否已执行完毕；&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//dispatch_block_wait 只能作用在使用dispatch_block_create创建的block上；&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dispatch_block_wait&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;block2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;block2 执行成功&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;block2 执行超时&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSRunLoop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;currentRunLoop&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runUntilDate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dateWithTimeIntervalSinceNow&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;输出：&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Done&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_group_wait&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;后&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block2&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;开始执行&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block2&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;执行超时&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_after&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;秒后&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block2&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;结束执行&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;栅栏函数与延迟函数&quot;&gt;&lt;strong&gt;栅栏函数与延迟函数&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;我们知道&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_suspend&lt;/code&gt;与&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_resume&lt;/code&gt;也可以用来挂起与恢复队列； 下面来看看相关的代码的实现，如下：&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;autoreleasepool&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_queue_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_queue_create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ab.c&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DISPATCH_QUEUE_CONCURRENT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;a reading 1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;a reading 2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;a reading 3&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_barrier_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;a writing&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;a reading 4&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;a reading 5&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;a reading 6&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_sync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;b reading 1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_sync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;b reading 2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_sync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;b reading 3&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_barrier_sync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;dispatch_barrier_sync: b writing&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_sync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;b reading 4&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_sync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;b reading 5&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_sync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;b reading 6&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);});&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//在q队列里同步迭代block任务5次&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_apply&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;dispatch_apply %zu&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Done&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//下面模拟飞机起飞&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_queue_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_queue_create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ab.d&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DISPATCH_QUEUE_CONCURRENT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;准备&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSThread&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sleepForTimeInterval&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;收起落架&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_resume&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_suspend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//挂起q1队列,让q1无法添加任务&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;起飞&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);});&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_once_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;predicate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_once&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;predicate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;dispatch_once %i&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSRunLoop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;currentRunLoop&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runUntilDate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dateWithTimeIntervalSinceNow&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;输出：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;a reading 2 a reading 1 a reading 3 a writing a reading 4 a reading 5 a reading 6 b reading 1 b reading 2 b reading 3 dispatch_barrier_sync: b writing b reading 4 b reading 5 b reading 6 dispatch_apply 0 dispatch_apply 1 dispatch_apply 2 dispatch_apply 3 dispatch_apply 4 Done dispatch_once 0 准备 收起落架 起飞 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;信号量dispatch_semaphore_t&quot;&gt;信号量&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_semaphore_t&lt;/code&gt;&lt;/h2&gt; &lt;p&gt;用dispatch_semaphore_wait函数进行等待（阻塞，对信号量进行减1），直到上一个任务执行完毕后且通过dispatch_semaphore_signal函数发送信号量（使信号量的值加1），dispatch_semaphore_wait函数收到信号量之后判断信号量的值大于等于1，会再对信号量的值减1。&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;__block&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isSuccess&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_semaphore_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;semaphore&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_semaphore_create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dispatch_get_global_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVCaptureDevice&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requestAccessForMediaType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVMediaTypeVideo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;completionHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;granted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isSuccess&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_semaphore_signal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;semaphore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_semaphore_wait&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;semaphore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DISPATCH_TIME_FOREVER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;dispatch-source&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch source&lt;/code&gt;&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch source&lt;/code&gt;作为苹果封装好的一种数据类型，主要方便我们用于处理事件，并且这些处理的事件在操作系统中处理底层，他主要支持以下种类型的事件的处理： &lt;ol&gt; &lt;li&gt;Timer dispatch sources：定时器类型，能够产生周期性的通知事件；&lt;/li&gt; &lt;li&gt;Signal dispatch sources：信号类型，当UNIX信号到底时，能够通知应用程序；&lt;/li&gt; &lt;li&gt;Descriptor sources：文件描述符类型，处理UNIX的文件或socket描述符，如：数据可读，数据可写，文件被删除、修改或移动，文件的元信息被修改；&lt;/li&gt; &lt;li&gt;Process dispatch sources：进程类型，能够通知一些与进程相关的事件类型，如：当进程退出，当进程调用了&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fork&lt;/code&gt;或&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;exec&lt;/code&gt;，当一个信号传递给了进程；&lt;/li&gt; &lt;li&gt;Mach port dispatch sources：端口匹配类型，能够通知一些端口事件的类型；&lt;/li&gt; &lt;li&gt;Custom dispatch sources：自定义类型，可以自定义一些事件类型。&lt;/li&gt; &lt;/ol&gt; &lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dispatch sources&lt;/code&gt;可以替换一些异步的回调函数，特别是用于处理一些与系统相关的事件。使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch source&lt;/code&gt;可以指定希望监控的事件类型，以及&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch queue&lt;/code&gt;和代码来处理事件，代码的形式可以是block对象或函数。当一个被监听的事件类型的事件到达时，用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dispatch sources&lt;/code&gt;指定的block或函数将会被调用执行；&lt;/li&gt; &lt;li&gt;与将任务提交到&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GCD dispatch queue&lt;/code&gt;不同，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch sources&lt;/code&gt;将会持续对所提交的事件进行监控，除非精确取消所感监听的事件；&lt;/li&gt; &lt;li&gt;为了防止事件被积压在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch queue&lt;/code&gt;中，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch sources&lt;/code&gt;实现了一种事件合并机制。如果在上一个事件被放进队列和被执行之前，又来了一个新事件，则&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch source&lt;/code&gt;将合并老事件和新事件。合并可能会替换或更新事件的信息，这取决于事件的类型，这种机制与UNIX系统信号的不排队机制是一样的。&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;创建dispatch-sources&quot;&gt;创建Dispatch Sources&lt;/h3&gt; &lt;p&gt;创建一个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch Sources&lt;/code&gt;将涉及两方面的创建过程：创建源事件和&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch Sources&lt;/code&gt;对象。&lt;/p&gt; &lt;p&gt;在创建了源事件之后，则可以按如下的步骤创建&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch Sources&lt;/code&gt;对象：&lt;/p&gt; &lt;ol&gt; &lt;li&gt;使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_source_create&lt;/code&gt;函数来创建&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch Sources&lt;/code&gt;对象；&lt;/li&gt; &lt;li&gt;配置&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch Sources&lt;/code&gt;对象： &lt;ol&gt; &lt;li&gt;为&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch Sources&lt;/code&gt;对象指定一个事件处理句柄；&lt;/li&gt; &lt;li&gt;若是&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;timer sources&lt;/code&gt;类型的事件，则可以调用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_source_set_timer&lt;/code&gt;函数来设置timer信息。&lt;/li&gt; &lt;/ol&gt; &lt;/li&gt; &lt;li&gt;配置&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch source&lt;/code&gt;对象的取消句柄(这个是可选操作)；&lt;/li&gt; &lt;li&gt;调用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_resume&lt;/code&gt;函数开始进行事件的处理。&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;在一个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch sources&lt;/code&gt;对象被使用之前，需要对其进行一个附加的配置操作。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;当调用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_source_create&lt;/code&gt;函数来创建一个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch sources&lt;/code&gt;对象后，该对象仍处于&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;suspended（挂起）&lt;/code&gt;状态；&lt;/li&gt; &lt;li&gt;处于挂起状态的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch sources&lt;/code&gt;对象是可以接收事件的，但不能处理这些事件，这种机制主要是为了给用户时间来配置事件的处理句柄和执行一些附件的配置操作。&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;配置event-handler&quot;&gt;配置Event Handler&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;为了处理&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch sources&lt;/code&gt;对象所产生的事件，用户必须定义一个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;event handler（事件处理句柄）&lt;/code&gt;来执行这些事件；&lt;/li&gt; &lt;li&gt;事件处理句柄可以是一个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;block&lt;/code&gt;对象或是一个函数，可以使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_source_set_event_handler&lt;/code&gt; 和 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_source_set_event_handler_f&lt;/code&gt;函数来配置事件处理句柄；&lt;/li&gt; &lt;li&gt;当一个事件到底时，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch source&lt;/code&gt;对象会将事件处理句柄投放到&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch queue&lt;/code&gt;中进行执行；&lt;/li&gt; &lt;li&gt;事件处理句柄体的内容负责处理任何到底的事件。如果当一个新事件到达时，而前一个事件处理句柄虽被放入队列，但还未被执行，那么dispatch source将合并两个事件；如果当一个或多个事件到达时，前一个事件的处理句柄已经开始执行，则dispatch source将保存这些事件，直到当前的处理句柄执行后，dispatch source再将事件处理句柄投入队列中；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_source_get_handle&lt;/code&gt;返回一个dispatch source监控的数据结构，根据不同的dispatch source类型，则返回的不同语义： &lt;ul&gt; &lt;li&gt;若是描述符类型，则返回一个int类型的文件描述符；&lt;/li&gt; &lt;li&gt;若是信号类型，则返回一个int类型的信号数字；&lt;/li&gt; &lt;li&gt;若是进程类型，则返回一个pid_t类型的数据结构；&lt;/li&gt; &lt;li&gt;若是端口类型，则返回一个端口号；&lt;/li&gt; &lt;li&gt;若是其它类型，则返回的值是不确定的； &lt;h3 id=&quot;配置cancellation-handler&quot;&gt;&lt;strong&gt;配置Cancellation Handler&lt;/strong&gt;&lt;/h3&gt; &lt;p&gt;使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_source_set_cancel_handler&lt;/code&gt; 或&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_source_set_cancel_handler_f&lt;/code&gt;函数进行配置。&lt;/p&gt; &lt;h3 id=&quot;修改目标queue&quot;&gt;&lt;strong&gt;修改目标queue&lt;/strong&gt;&lt;/h3&gt; &lt;p&gt;在创建了&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch source&lt;/code&gt;对象是会 指定&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;event&lt;/code&gt; 和 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cancellation handlers&lt;/code&gt;运行的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;queue&lt;/code&gt;，之后也可以通过&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_set_target_queue&lt;/code&gt;函数修改运行的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;queue&lt;/code&gt;。&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;用-gcd-的-api-封装一个定时器&quot;&gt;用 GCD 的 API 封装一个定时器&lt;/h3&gt; &lt;p&gt;这里我们先看代码实现：&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//创建dispatch source&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_source_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_source_create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DISPATCH_SOURCE_TYPE_TIMER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_get_main_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;uint64_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interval&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1ull&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSEC_PER_SEC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;uint64_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;leeway&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1ull&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSEC_PER_SEC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_source_set_timer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_walltime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;leeway&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_source_set_event_handler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;===== timer&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_resume&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSRunLoop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;currentRunLoop&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runUntilDate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dateWithTimeIntervalSinceNow&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;使用dispatch source处理读、写、监听文件事件&lt;/strong&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;创建一个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DISPATCH_SOURCE_TYPE_READ&lt;/code&gt;类型的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch source&lt;/code&gt;对象，打开一个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;file&lt;/code&gt;或&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;socket&lt;/code&gt;，从文件或网络中读取数据；&lt;/li&gt; &lt;li&gt;创建&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DISPATCH_SOURCE_TYPE_WRITE&lt;/code&gt;类似的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch source&lt;/code&gt;对象，并配置好写文件描述符，一旦创建了&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch source&lt;/code&gt;对象之后，系统将立即调用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;event handler&lt;/code&gt;来写入数据到&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;file&lt;/code&gt;或&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;socket&lt;/code&gt;。当完成了写数据，则可以调用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_source_cancel&lt;/code&gt;函数来取消&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch source&lt;/code&gt;对象；&lt;/li&gt; &lt;li&gt;可以创建&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DISPATCH_SOURCE_TYPE_VNODE&lt;/code&gt;类型的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch source&lt;/code&gt;对象，从而当一个文件被删除、写入或重命名等操作时，能够得到通知，实现对文件系统中对象的变化的监控；&lt;/li&gt; &lt;li&gt;使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch source&lt;/code&gt;处理读写文件事件，不能把文件描述符配置为阻塞类型的操作；&lt;/li&gt; &lt;li&gt;可以使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch source&lt;/code&gt;来异步处理信号，创建一个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DISPATCH_SOURCE_TYPE_SIGNAL&lt;/code&gt;类型的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch source&lt;/code&gt;对象，当信息到达时可收到通知，但不可以替代&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sigaction&lt;/code&gt;函数来配置信号处理句柄，也不能不能用于查询所有的signal类型，特别是不能监控&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SIGILL&lt;/code&gt;、&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SIGBUS&lt;/code&gt;和&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SIGSEGV&lt;/code&gt;信号。&lt;/li&gt; &lt;li&gt;创建一个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DISPATCH_SOURCE_TYPE_PROC&lt;/code&gt;类型的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch source对象可以监控子进程的行为，并进行合适的响应&lt;/code&gt;。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;a href=&quot;https://luowei.github.io/https://gist.github.com/luowei/08de72d67dda439ae52acafe86571cc8&quot;&gt;dispatch source 相关应用代码&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;取消dispatch source&lt;/strong&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dispatch source&lt;/code&gt;对象将一直保持有效状态，除非手动调用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_source_cancel&lt;/code&gt;函数来取消它。&lt;/li&gt; &lt;li&gt;取消了&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch source&lt;/code&gt;对象后，将不能再接收到新的事件。一般情况下是取消了dispatch source后，立即释放掉该对象。&lt;/li&gt; &lt;li&gt;取消dispatch source是一个异步操作，即虽然在调用了dispatch_source_cancel函数之后，dispatch source不能再接收到任何事件，但它还可以继续处理在队列中的事件，直到在队列中的最后一个事件被执行完成后，dispatch source才会执行cancellation handler句柄。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;strong&gt;暂停与恢复dispatch source&lt;/strong&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;可以通过使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_suspend&lt;/code&gt;和 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch_resume&lt;/code&gt;函数来暂停和恢复事件传递给&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch source&lt;/code&gt;对象；&lt;/li&gt; &lt;li&gt;当暂停了一个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch source&lt;/code&gt;对象之后，所有在这期间传递给&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch source&lt;/code&gt;对象的事件都会被保存，但当有多个同样事件时，在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch source&lt;/code&gt;对象恢复之后，会将这些事件合并为一个再发送给&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dispatch source&lt;/code&gt;对象，这与UNIX的信号不排队机制是一样的。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;a href=&quot;https://luowei.github.io/https://gist.github.com/luowei/08de72d67dda439ae52acafe86571cc8&quot;&gt;dispatch source使用示例&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;https://luowei.github.io/https://www.cnblogs.com/huliangwen/p/5492493.html&quot;&gt;iOS 并行编程：GCD Dispatch Sources&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://juejin.cn/post/6844904143140683789&quot;&gt;iOS 中多线程NSOperation NSOperationQueue&lt;/a&gt; &lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://blog.csdn.net/rhddlr/article/details/89503029&quot;&gt;GCD定时器使用，封装为单例&lt;/a&gt; &lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://blog.csdn.net/rhddlr/article/details/89488559&quot;&gt;ios后台运行&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://cloud.tencent.com/developer/article/1647232&quot;&gt;多线程 GCD底层原理&lt;/a&gt; &lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://juejin.cn/post/6899727732125466631&quot;&gt;深入理解iOS中的线程关系和使用方法&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16074006673494.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16074006673494</guid> <pubDate>Tue, 08 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>Objective-C当中的Block</title> <description> &lt;h1 id=&quot;objective-c当中的block&quot;&gt;Objective-C当中的Block&lt;/h1&gt; &lt;p&gt;Blocks是C语言的扩充功能，即带有自动变量(局部变量)的匿名函数。 使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;clang&lt;/code&gt;可以通过添加&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-rewrite-objc&lt;/code&gt;编译选项将含有Block语法的源代码变换为C++的源代码，如用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;clang -rewrite-objc main.m&lt;/code&gt;会生成一个与&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main.m&lt;/code&gt;对等的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main.cpp&lt;/code&gt;文件。&lt;/p&gt; &lt;h2 id=&quot;先看总结&quot;&gt;&lt;strong&gt;先看总结：&lt;/strong&gt;&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;当没有引入外部自动变量时，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;是&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__NSGlobalBlock__&lt;/code&gt;；&lt;/li&gt; &lt;li&gt;当只引入了非自动变量(如&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;void *&lt;/code&gt;、变量的类型)时，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;仍然是&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__NSGlobalBlock__&lt;/code&gt;；&lt;/li&gt; &lt;li&gt;当引入了外部自动变量时，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;会变成&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__NSMallocBlock__&lt;/code&gt;；&lt;/li&gt; &lt;li&gt;用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__weak&lt;/code&gt;修饰之后，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;变成了&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__NSStackBlock__&lt;/code&gt;；&lt;/li&gt; &lt;li&gt;引入静态变量、全局变量或全局静态变量，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;是&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__NSGlobalBlock__&lt;/code&gt;；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;截获的自动变量值被保存在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;结构体实例(即Block自身)中，即&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__main_block_impl_0&lt;/code&gt;结构体中；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;优先设置在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__NSStackBlock__&lt;/code&gt;上，只有当&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;引入的变量的作用域结束时，才会把&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;及&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__block&lt;/code&gt;变量从栈复制到堆上，同时栈上的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;与&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__block&lt;/code&gt;变量被废弃，堆上的不受影响；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__NSGlobalBlock__&lt;/code&gt;类型的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;是存放在全局数据区的，只要&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;不截获自动变量，那&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;结构体实例就会存放在全局数据区,即程序的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__DATA__&lt;/code&gt;段中。&lt;/li&gt; &lt;li&gt; &lt;p&gt;当通过函数返回的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;,函数返回时编译器会自动生成复制到堆上的代码 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_retainBlock&lt;/code&gt;，该函数内直接调用了&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_Block_copy&lt;/code&gt;,而此函数就会将&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;从栈上复制到堆上；&lt;/p&gt; &lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;结构体类似于基于&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_object&lt;/code&gt;结构体的Ojbective-C类对象的结构体，其中的成员变量&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;isa&lt;/code&gt;在构造函数中是这样&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;isa = &amp;amp;_NSConcreteStackBlock;&lt;/code&gt;被初始化的。 &lt;img src=&quot;https://luowei.github.io/media/16071202187230/16072460799189.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/16071202187230/16072470084490.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;blk()&lt;/code&gt;的调用，实际上是调用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__main_block_impl_0&lt;/code&gt;里&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__block_impl&lt;/code&gt;实例&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;impl&lt;/code&gt;的成员&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;FuncPtr&lt;/code&gt;,而&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;FuncPtr&lt;/code&gt;即是构造&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;对象(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__main_block_impl_0&lt;/code&gt;)时传入的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__main_block_func_0&lt;/code&gt;函数指针； &lt;img src=&quot;https://luowei.github.io/media/16071202187230/16072727375228.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__main_block_copy_0&lt;/code&gt;与&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__main_block_dispose_0&lt;/code&gt;是拷贝和释放赋值在对象类型的结构体成员变量中的对象，在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;从栈复制到堆时以及堆上的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;被废弃时会调用这两函数；&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;当变量用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__block&lt;/code&gt;修饰变量&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a&lt;/code&gt;后，在block捕获变量&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a&lt;/code&gt;后会为变量生成一个叫&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__Block_byref_a_0&lt;/code&gt;的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__block结构体&lt;/code&gt;，用来存放&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a&lt;/code&gt;变量，并且在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__main_block_impl_0&lt;/code&gt;的结构体中引用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__Block_byref_a_0&lt;/code&gt;对象的指针作为结构体的成员变量。 &lt;img src=&quot;https://luowei.github.io/media/16071202187230/16072625860093.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;/li&gt; &lt;li&gt;以下几种情况栈上的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;会复制到堆上： &lt;ul&gt; &lt;li&gt;调用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;copy&lt;/code&gt;实例方法；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;作为函数返回值返回时；&lt;/li&gt; &lt;li&gt;将&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;赋值给附有&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__strong&lt;/code&gt;修饰的id类型变量或&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;类型成员变量时；&lt;/li&gt; &lt;li&gt;在方法名中含有&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;usingBlock&lt;/code&gt;的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cocoa&lt;/code&gt;框架方法或CGD的API中传递&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Block&lt;/code&gt;时；&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;strong&gt;编译源码&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;libclosure&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;把&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Base SDK&lt;/code&gt;设置为&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;macOS&lt;/code&gt;; &lt;img src=&quot;https://luowei.github.io/media/16071202187230/16071666536378.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;/li&gt; &lt;li&gt;从&lt;a href=&quot;https://luowei.github.io/https://opensource.apple.com/release/macos-10156.html&quot;&gt;Apple Source code&lt;/a&gt;下载源码；&lt;/li&gt; &lt;li&gt; &lt;p&gt;当编译源码&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;libclosure&lt;/code&gt;报&lt;em&gt;&amp;lt;platform/string.h&amp;gt; file not found&lt;/em&gt;时，把&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;libplatform&lt;/code&gt;下载解压后，把头文件导入&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;macosx&lt;/code&gt;的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sdk&lt;/code&gt;的路径下的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/include&lt;/code&gt;下，使用如下命令：&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;ditto &lt;span class=&quot;nv&quot;&gt;$PWD&lt;/span&gt;/private &lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;xcrun &lt;span class=&quot;nt&quot;&gt;-sdk&lt;/span&gt; macosx &lt;span class=&quot;nt&quot;&gt;-show-sdk-path&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;/usr/local/include //查看&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;macosx&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;的&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;sdk&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;的路径：&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;xcrun &lt;span class=&quot;nt&quot;&gt;-sdk&lt;/span&gt; macosx &lt;span class=&quot;nt&quot;&gt;-show-sdk-path&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;； &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;同理，如果报&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;os/assumes.h&amp;gt; file not found&lt;/code&gt;，把&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Libc&lt;/code&gt;下下来并把其中&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;os&lt;/code&gt;下的头文件拷贝到&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$(xcrun -sdk macosx -show-sdk-path)/usr/local/include/os/&lt;/code&gt;下。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;如果报*included file ‘&lt;DEVELOPER_DIR&gt;/Makefiles/CoreOS/Xcode BSD.xcconfig does not exist*，就把[ CoreOSMakefiles](https://luowei.github.io/https://opensource.apple.com/tarballs/CoreOSMakefiles/CoreOSMakefiles-79.tar.gz)下载下来解压后，把里面的`BSD.xcconfig`拷贝到`/Applications/Xcode.app/Contents/Developer`下。&lt;/DEVELOPER_DIR&gt;&lt;/p&gt; &lt;/li&gt; &lt;li&gt;当然更好的方式，是在项目target的 &lt;em&gt;Build Settings -&amp;gt; Header Search Paths&lt;/em&gt; 里添加，如这样： &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$(SRCROOT)/LWCommon //自己创建的文件夹，放缺失的头文件 $(DSTROOT)/usr/include $(DSTROOT)/usr/local/include $(CONFIGURATION_BUILD_DIR)/usr/include $(CONFIGURATION_BUILD_DIR)/usr/local/include /System/Library/Frameworks/System.framework/PrivateHeaders &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt;源码编译成功后，建立新的 target 来执行你程序，从而跑进源码，在target上设置&lt;em&gt;target -&amp;gt; objc -&amp;gt; Build Settings -&amp;gt; Enable Hardened Runtime -&amp;gt; NO&lt;/em&gt; 即可。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;strong&gt;下面用代码来验证这些结论：&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#import &amp;lt;Foundation/Foundation.h&amp;gt; &lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;#pragma clang diagnostic push &lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Hello&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSObject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;implementation&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Hello&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;张三&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Block_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//1. 当没有引入外部自动变量时，blk是__NSGlobalBlock__&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testBlock1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Hello&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;====blk1:%@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// for(int i=0;i&amp;lt;10;i++){&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Block_t blk_t = ^(int count){return count * i;};&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// blk_t(5);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// NSLog(@&quot;====blk_t1:%@&quot;,blk_t);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// }&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//2. 当引入了非自动变量(如void*、变量的类型)时，blk还是__NSGlobalBlock__&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testBlock2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//void *hello = (__bridge void *)([[Hello alloc] init]);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Hello&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hello&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Hello&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//分配1个32字节的空间&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;calloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;calloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;hello size:%lu&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hello&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//这样引入就还是__NSGlobalBlock__&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// NSLog(@&quot;hello:%@&quot;,hello); //这样引入就变成了__NSMallocBlock__&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;p1:%lu p2:%lu&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 如果此时调用free释放掉p1,p2，则相当于引入了自动变量&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// free(p1);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// free(p2);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;====blk2:%@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//3. 当引入了外部自动变量时，blk会变成__NSMallocBlock__&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testBlock3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;a:%i&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;====blk3:%@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;#pragma clang diagnostic ignored &quot;-Warc-unsafe-retained-assign&quot; &lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//4.用__weak修饰之后，变成了__NSStackBlock__&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testBlock4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__weak&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;a:%i&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;====blk4:%@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//5.引入静态变量、全局变量或全局静态变量，是__NSGlobalBlock__&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;global_var&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;static_global_var&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testBlock5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//静态变量&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;static_var&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;global_var&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;static_global_var&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;static_var&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;global_var：%i&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;global_var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;static_global_var：%i&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;static_global_var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;static_var：%i&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;static_var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;====blk5:%@ static_var:%i&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;static_var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//6.通过函数返回的block,函数返回时编译器会自动生成复制到堆上的代码 objc_retainBlock，&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 该函数内直接调用了_Block_copy，将Block复制到堆上&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Block_t&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getBlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testBlock6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Block_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getBlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;====blk6:%@ returnValue:%i&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//7.block存放到复数，会自动复制到堆上&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getBlockList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;block list 0:%i&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);},&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;block list 1:%i&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);},&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testBlock7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blockList&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getBlockList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blk_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blockList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;====blk7:%@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;autoreleasepool&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;testBlock1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;testBlock2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;testBlock3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;testBlock4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;testBlock5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;testBlock6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;testBlock7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;#pragma clang diagnostic pop &lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;输出：&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;hello_block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;56269&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5472036&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Hello&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hello_block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;56269&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5472036&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;====&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__NSGlobalBlock__&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x100399050&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hello_block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;56269&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5472036&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hello&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hello_block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;56269&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5472036&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hello_block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;56269&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5472036&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;====&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__NSGlobalBlock__&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x100399070&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hello_block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;56269&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5472036&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hello_block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;56269&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5472036&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;====&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__NSMallocBlock__&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7fa50ec06440&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hello_block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;56269&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5472036&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hello_block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;56269&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5472036&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;====&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__NSStackBlock__&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7ffeef867f98&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hello_block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;56269&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5472036&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;global_var&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;：&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hello_block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;56269&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5472036&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;static_global_var&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;：&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hello_block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;56269&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5472036&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;static_var&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;：&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hello_block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;56269&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5472036&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;====&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__NSGlobalBlock__&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x1003990b0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;static_var&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hello_block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;56269&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5472036&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;====&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__NSMallocBlock__&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7fa50ef04470&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;returnValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hello_block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;56269&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5472036&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hello_block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;56269&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5472036&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;====&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk7&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__NSMallocBlock__&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7fa50ef04790&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16071202187230.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16071202187230</guid> <pubDate>Mon, 07 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>Objective-C中Class、NSObject、id的本质</title> <description> &lt;h1 id=&quot;objective-c中classnsobjectid的本质&quot;&gt;Objective-C中Class、NSObject、id的本质&lt;/h1&gt; &lt;h2 id=&quot;class-与-objc_class&quot;&gt;&lt;strong&gt;Class 与 objc_class&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;objc 中的结构体&lt;/strong&gt;&lt;br /&gt; &lt;img src=&quot;https://luowei.github.io/media/16072471272365/16072599946323.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_ivar&lt;/code&gt;有四个成员属性，其中&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ivar_name&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ivar_type&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ivar_offset&lt;/code&gt;分别代表了属性的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;名称&lt;/code&gt;，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;类型&lt;/code&gt;，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;内存偏移量&lt;/code&gt;；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_class&lt;/code&gt; 的定义是以结构的形式实现，包含有类本身及父类的信息，属性列表、方法列表、缓存和协议列表；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_class&lt;/code&gt;中&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_ivar_list&lt;/code&gt;与其中的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_ivar&lt;/code&gt;用于实现类的属性列表；&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_method_list&lt;/code&gt;与其中的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_method&lt;/code&gt;用于实现类的方法列表；&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_protocol_list&lt;/code&gt;以及Protocol的数组去实现协议列表，不同的是&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Protocol&lt;/code&gt;的实现不再是一个结构，而是一个继承自&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSObject&lt;/code&gt;的类；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_category&lt;/code&gt; 定义了&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Category&lt;/code&gt;的数据结构，通过&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;category_name&lt;/code&gt;区分不同的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;category&lt;/code&gt;，通过&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;class_name&lt;/code&gt;关联相关的类；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;property_t&lt;/code&gt;中只有&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;name&lt;/code&gt;和&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;attributes&lt;/code&gt;两个成员属性分别是名字和类型，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;property_t&lt;/code&gt;可以帮助我们动态的获取和修改类的变量。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;strong&gt;在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc.h&lt;/code&gt;里，可以看到&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Class&lt;/code&gt;、&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_object&lt;/code&gt;、&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;id&lt;/code&gt;的定义:&lt;/strong&gt; &lt;img src=&quot;https://luowei.github.io/media/16072471272365/16072503065860.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Class&lt;/code&gt; 实际上是 结构体&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_class&lt;/code&gt; 的指针类型；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_object&lt;/code&gt; 里有个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Class&lt;/code&gt;类型的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;isa&lt;/code&gt;，我们知道&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;isa&lt;/code&gt; 是指向&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_class&lt;/code&gt; 结构体的指针，那这个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;isa&lt;/code&gt; 的作用其实就是标记这个&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_object&lt;/code&gt; 对象自己属于某种类型，所以当我们要去判断一个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_object&lt;/code&gt;对象是哪种类型时，只要看它的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;isa&lt;/code&gt; 指向谁就可以了；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;id&lt;/code&gt; 实际上是 结构体&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_object&lt;/code&gt; 的指针类型；&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;strong&gt;在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;runtime.h&lt;/code&gt;里，可以看到&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_class&lt;/code&gt;的定义：&lt;/strong&gt; &lt;img src=&quot;https://luowei.github.io/media/16072471272365/16072481307515.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;NSObject定义&lt;/strong&gt; &lt;img src=&quot;https://luowei.github.io/media/16072471272365/16072599061647.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;sel-与-imp-的本质&quot;&gt;&lt;strong&gt;SEL 与 IMP 的本质&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;SEL&lt;/strong&gt; 定义为结构体objc_selector 的指针，但其本质上是映射为C字符串，因为使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;printf(&quot;%s&quot;,@selector(abcd));&lt;/code&gt;会输出&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abcd&lt;/code&gt;，所以&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SEL&lt;/code&gt;就是方法名。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;在iOS 和MAC 中没有找到&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_selector&lt;/code&gt;的定义，但其&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SEL&lt;/code&gt;就只是一个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;char *&lt;/code&gt;类型的字符串,&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SEL&lt;/code&gt;是映射为C字符串；&lt;/li&gt; &lt;li&gt;但在GNU OC中的定义&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_selector&lt;/code&gt;有两个成员，一个是&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sel_id&lt;/code&gt;，一个是&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sel_types&lt;/code&gt;的C字符串；&lt;br /&gt; &lt;img src=&quot;https://luowei.github.io/media/16072471272365/16072495840650.jpg&quot; alt=&quot;&quot; /&gt;&lt;br /&gt; &lt;strong&gt;IMP&lt;/strong&gt; 实际上是一个函数指针。&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;bool本质上是bool-或-signed-char&quot;&gt;&lt;strong&gt;BOOL本质上是bool 或 signed char&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16072471272365/16072495380681.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;method-的本质&quot;&gt;&lt;strong&gt;Method 的本质&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Method&lt;/code&gt;本质上是&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_method&lt;/code&gt;的指针，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_method_list&lt;/code&gt;是个单链表结构；&lt;/strong&gt; &lt;img src=&quot;https://luowei.github.io/media/16072471272365/16072513610743.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;使用 method_invoke 与 objc_msgSend 两种方式调用函数&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#import &amp;lt;Foundation/Foundation.h&amp;gt; #import &amp;lt;objc/runtime.h&amp;gt; #import &amp;lt;objc/message.h&amp;gt; &lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HelloTest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSObject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;handleName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;andValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNumber&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;implementation&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HelloTest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;handleName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;andValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNumber&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;handleName:%@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;intValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HelloTest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HelloTest&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 获取方法&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Method&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class_getInstanceMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;handleName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;andValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 调用函数:method_invoke 方式&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;returnValue1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSNumber&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;method_invoke&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;测试 method_invoke&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;method_invoke返回值： %d&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;returnValue1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 调用函数:objc_msgSend 方式&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;returnValue2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SEL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSNumber&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objc_msgSend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;handleName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;andValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;测试 objc_msgSend&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;objc_msgSend返回值： %d&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;returnValue2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;标记指针&quot;&gt;&lt;strong&gt;标记指针&lt;/strong&gt;&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;标记指针(Tagged Pointer) 是一个伪对象，所以内部并没有 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;isa&lt;/code&gt; 指针。Tagged Pointer 为我们带来了 3 倍存储空间的节省，以及 106 倍的访问速度；&lt;/li&gt; &lt;li&gt;标记指针是把对象的指针拆成两部分，一部分直接保存对象的数据，另一部分作为特殊标记，表示这是一个特别的指针，不指向任何一个地址，所以也叫伪指针；&lt;/li&gt; &lt;li&gt;Tagged Pointer专门用来存储小的对象，例如&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSNumber&lt;/code&gt;、&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSDate&lt;/code&gt;以及长度小于7字符的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NString&lt;/code&gt;；&lt;/li&gt; &lt;li&gt;Tagged Pointer指针的值不再是地址了，而是真正的值。所以，实际上它不再是一个对象了，它只是一个披着对象皮的普通变量而已。所以，它的内存并不存储在堆中，也不需要malloc和free；&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;strong&gt;NSNumber、NSDate、NSString 自动转伪指针的注册流程：&lt;/strong&gt;&lt;/p&gt; &lt;ol&gt; &lt;li&gt;判断&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_debug_taggedpointer_mask&lt;/code&gt;是否为0，判断是否开启Tagger Pointer，如果是禁用，直接回终止启动；&lt;/li&gt; &lt;li&gt;根据tag去取出类指针，若传递的是一个无效的tag，没有取到正确的类指针，还是终止启动；&lt;/li&gt; &lt;li&gt;尝试通过&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Class oldCls = *slot&lt;/code&gt;去获取该指针指向的类，若要注册的类与该处获取的类不是同一个，那么也是终止启动；&lt;/li&gt; &lt;li&gt;通过&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*slot = cls&lt;/code&gt;将入参&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cls&lt;/code&gt;类赋值给指针slot指向的位置；&lt;/li&gt; &lt;li&gt;若注册的不是基础类型，则&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;OBJC_TAG_RESERVED_7&lt;/code&gt;存储占位类&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;OBJC_CLASS_$___NSUnrecognizedTaggedPointer&lt;/code&gt;；&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;参考：&lt;a href=&quot;https://luowei.github.io/https://jinxuebin.cn/2019/06/Objective-C%E4%B8%AD%E7%9A%84%E4%BC%AA%E6%8C%87%E9%92%88/&quot;&gt;Objective-C中伪指针Tagged PointerTagged Pointer&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;nsobject实现源代码&quot;&gt;&lt;strong&gt;NSObject实现源代码&lt;/strong&gt;&lt;/h2&gt; &lt;pre&gt;&lt;code class=&quot;language-oc&quot;&gt;@implementation NSObject + (void)initialize { } + (id)self { return (id)self; } - (id)self { return self; } + (Class)class { return self; } - (Class)class { return object_getClass(self); } + (Class)superclass { return self-&amp;gt;superclass; } - (Class)superclass { return [self class]-&amp;gt;superclass; } + (BOOL)isMemberOfClass:(Class)cls { return self-&amp;gt;ISA() == cls; } - (BOOL)isMemberOfClass:(Class)cls { return [self class] == cls; } + (BOOL)isKindOfClass:(Class)cls { for (Class tcls = self-&amp;gt;ISA(); tcls; tcls = tcls-&amp;gt;superclass) { if (tcls == cls) return YES; } return NO; } - (BOOL)isKindOfClass:(Class)cls { for (Class tcls = [self class]; tcls; tcls = tcls-&amp;gt;superclass) { if (tcls == cls) return YES; } return NO; } + (BOOL)isSubclassOfClass:(Class)cls { for (Class tcls = self; tcls; tcls = tcls-&amp;gt;superclass) { if (tcls == cls) return YES; } return NO; } + (BOOL)isAncestorOfObject:(NSObject *)obj { for (Class tcls = [obj class]; tcls; tcls = tcls-&amp;gt;superclass) { if (tcls == self) return YES; } return NO; } + (BOOL)instancesRespondToSelector:(SEL)sel { return class_respondsToSelector_inst(nil, sel, self); } + (BOOL)respondsToSelector:(SEL)sel { return class_respondsToSelector_inst(self, sel, self-&amp;gt;ISA()); } - (BOOL)respondsToSelector:(SEL)sel { return class_respondsToSelector_inst(self, sel, [self class]); } + (BOOL)conformsToProtocol:(Protocol *)protocol { if (!protocol) return NO; for (Class tcls = self; tcls; tcls = tcls-&amp;gt;superclass) { if (class_conformsToProtocol(tcls, protocol)) return YES; } return NO; } - (BOOL)conformsToProtocol:(Protocol *)protocol { if (!protocol) return NO; for (Class tcls = [self class]; tcls; tcls = tcls-&amp;gt;superclass) { if (class_conformsToProtocol(tcls, protocol)) return YES; } return NO; } + (NSUInteger)hash { return _objc_rootHash(self); } - (NSUInteger)hash { return _objc_rootHash(self); } + (BOOL)isEqual:(id)obj { return obj == (id)self; } - (BOOL)isEqual:(id)obj { return obj == self; } + (BOOL)isFault { return NO; } - (BOOL)isFault { return NO; } + (BOOL)isProxy { return NO; } - (BOOL)isProxy { return NO; } + (IMP)instanceMethodForSelector:(SEL)sel { if (!sel) [self doesNotRecognizeSelector:sel]; return class_getMethodImplementation(self, sel); } + (IMP)methodForSelector:(SEL)sel { if (!sel) [self doesNotRecognizeSelector:sel]; return object_getMethodImplementation((id)self, sel); } - (IMP)methodForSelector:(SEL)sel { if (!sel) [self doesNotRecognizeSelector:sel]; return object_getMethodImplementation(self, sel); } + (BOOL)resolveClassMethod:(SEL)sel { return NO; } + (BOOL)resolveInstanceMethod:(SEL)sel { return NO; } // Replaced by CF (throws an NSException) + (void)doesNotRecognizeSelector:(SEL)sel { _objc_fatal(&quot;+[%s %s]: unrecognized selector sent to instance %p&quot;, class_getName(self), sel_getName(sel), self); } // Replaced by CF (throws an NSException) - (void)doesNotRecognizeSelector:(SEL)sel { _objc_fatal(&quot;-[%s %s]: unrecognized selector sent to instance %p&quot;, object_getClassName(self), sel_getName(sel), self); } + (id)performSelector:(SEL)sel { if (!sel) [self doesNotRecognizeSelector:sel]; return ((id(*)(id, SEL))objc_msgSend)((id)self, sel); } + (id)performSelector:(SEL)sel withObject:(id)obj { if (!sel) [self doesNotRecognizeSelector:sel]; return ((id(*)(id, SEL, id))objc_msgSend)((id)self, sel, obj); } + (id)performSelector:(SEL)sel withObject:(id)obj1 withObject:(id)obj2 { if (!sel) [self doesNotRecognizeSelector:sel]; return ((id(*)(id, SEL, id, id))objc_msgSend)((id)self, sel, obj1, obj2); } - (id)performSelector:(SEL)sel { if (!sel) [self doesNotRecognizeSelector:sel]; return ((id(*)(id, SEL))objc_msgSend)(self, sel); } - (id)performSelector:(SEL)sel withObject:(id)obj { if (!sel) [self doesNotRecognizeSelector:sel]; return ((id(*)(id, SEL, id))objc_msgSend)(self, sel, obj); } - (id)performSelector:(SEL)sel withObject:(id)obj1 withObject:(id)obj2 { if (!sel) [self doesNotRecognizeSelector:sel]; return ((id(*)(id, SEL, id, id))objc_msgSend)(self, sel, obj1, obj2); } // Replaced by CF (returns an NSMethodSignature) + (NSMethodSignature *)instanceMethodSignatureForSelector:(SEL)sel { _objc_fatal(&quot;+[NSObject instanceMethodSignatureForSelector:] &quot; &quot;not available without CoreFoundation&quot;); } // Replaced by CF (returns an NSMethodSignature) + (NSMethodSignature *)methodSignatureForSelector:(SEL)sel { _objc_fatal(&quot;+[NSObject methodSignatureForSelector:] &quot; &quot;not available without CoreFoundation&quot;); } // Replaced by CF (returns an NSMethodSignature) - (NSMethodSignature *)methodSignatureForSelector:(SEL)sel { _objc_fatal(&quot;-[NSObject methodSignatureForSelector:] &quot; &quot;not available without CoreFoundation&quot;); } + (void)forwardInvocation:(NSInvocation *)invocation { [self doesNotRecognizeSelector:(invocation ? [invocation selector] : 0)]; } - (void)forwardInvocation:(NSInvocation *)invocation { [self doesNotRecognizeSelector:(invocation ? [invocation selector] : 0)]; } + (id)forwardingTargetForSelector:(SEL)sel { return nil; } - (id)forwardingTargetForSelector:(SEL)sel { return nil; } // Replaced by CF (returns an NSString) + (NSString *)description { return nil; } // Replaced by CF (returns an NSString) - (NSString *)description { return nil; } + (NSString *)debugDescription { return [self description]; } - (NSString *)debugDescription { return [self description]; } + (id)new { return [callAlloc(self, false/*checkNil*/) init]; } + (id)retain { return (id)self; } // Replaced by ObjectAlloc - (id)retain { return _objc_rootRetain(self); } + (BOOL)_tryRetain { return YES; } // Replaced by ObjectAlloc - (BOOL)_tryRetain { return _objc_rootTryRetain(self); } + (BOOL)_isDeallocating { return NO; } - (BOOL)_isDeallocating { return _objc_rootIsDeallocating(self); } + (BOOL)allowsWeakReference { return YES; } + (BOOL)retainWeakReference { return YES; } - (BOOL)allowsWeakReference { return ! [self _isDeallocating]; } - (BOOL)retainWeakReference { return [self _tryRetain]; } + (oneway void)release { } // Replaced by ObjectAlloc - (oneway void)release { _objc_rootRelease(self); } + (id)autorelease { return (id)self; } // Replaced by ObjectAlloc - (id)autorelease { return _objc_rootAutorelease(self); } + (NSUInteger)retainCount { return ULONG_MAX; } - (NSUInteger)retainCount { return _objc_rootRetainCount(self); } + (id)alloc { return _objc_rootAlloc(self); } // Replaced by ObjectAlloc + (id)allocWithZone:(struct _NSZone *)zone { return _objc_rootAllocWithZone(self, (malloc_zone_t *)zone); } // Replaced by CF (throws an NSException) + (id)init { return (id)self; } - (id)init { return _objc_rootInit(self); } // Replaced by CF (throws an NSException) + (void)dealloc { } // Replaced by NSZombies - (void)dealloc { _objc_rootDealloc(self); } // Previously used by GC. Now a placeholder for binary compatibility. - (void) finalize { } + (struct _NSZone *)zone { return (struct _NSZone *)_objc_rootZone(self); } - (struct _NSZone *)zone { return (struct _NSZone *)_objc_rootZone(self); } + (id)copy { return (id)self; } + (id)copyWithZone:(struct _NSZone *)zone { return (id)self; } - (id)copy { return [(id)self copyWithZone:nil]; } + (id)mutableCopy { return (id)self; } + (id)mutableCopyWithZone:(struct _NSZone *)zone { return (id)self; } - (id)mutableCopy { return [(id)self mutableCopyWithZone:nil]; } @end &lt;/code&gt;&lt;/pre&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16072471272365.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16072471272365</guid> <pubDate>Sun, 06 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>Xcode断点调试与lldb常用命令</title> <description> &lt;h1 id=&quot;xcode断点调试与lldb常用命令&quot;&gt;Xcode断点调试与lldb常用命令&lt;/h1&gt; &lt;h2 id=&quot;xcode断点调试&quot;&gt;Xcode断点调试&lt;/h2&gt; &lt;h3 id=&quot;断点&quot;&gt;&lt;strong&gt;断点&lt;/strong&gt;&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;添加符号断点&lt;/strong&gt; 我们可以使用方法名作为符号名，添加符号断点。添加符号断点左下角加号，如下图： &lt;img src=&quot;https://luowei.github.io/media/16071825228878/16072210650300.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;添加一个符号名为&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sayHello&lt;/code&gt;的符号断点。 &lt;img src=&quot;https://luowei.github.io/media/16071825228878/16072216618641.jpg&quot; alt=&quot;&quot; /&gt; 然后，调试运行 &lt;img src=&quot;https://luowei.github.io/media/16071825228878/16072216039192.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;编辑断点&lt;/strong&gt; &lt;img src=&quot;https://luowei.github.io/media/16071825228878/16072207005369.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;添加断点行为，在断点时执行代码&lt;/strong&gt; &lt;img src=&quot;https://luowei.github.io/media/16071825228878/16072203032941.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;创建条件断点，并在断点时打印函数调用的堆栈信息&lt;/strong&gt; &lt;img src=&quot;https://luowei.github.io/media/16071825228878/16072205784203.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;h3 id=&quot;lldb常用命令&quot;&gt;&lt;strong&gt;lldb常用命令&lt;/strong&gt;&lt;/h3&gt; &lt;p&gt;&lt;a href=&quot;https://luowei.github.io/http://lldb.llvm.org/&quot;&gt;LLDB&lt;/a&gt; 是一个有着 REPL 的特性和 C++ ,Python 插件的&lt;a href=&quot;http://lldb.llvm.org/source.html&quot;&gt;开源&lt;/a&gt;调试器。也可以安装 &lt;a href=&quot;https://github.com/facebook/chisel&quot;&gt;Chisel&lt;/a&gt;，它是一个开源的 LLDB 插件合辑这会使调试变得更加强大。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;常用命令&lt;/strong&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;po&lt;/code&gt;：查看对象的 description 方法的结果，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;po&lt;/code&gt;是&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;e -o --&lt;/code&gt;的别名；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;print&lt;/code&gt;：打印值，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;print&lt;/code&gt;是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;expression --&lt;/code&gt;的别名，最简写法&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;p&lt;/code&gt;，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;p/x 16&lt;/code&gt;打印十六进制，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;p/t 16&lt;/code&gt;打印二进制，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;p/c&lt;/code&gt;打印字符，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;p/s&lt;/code&gt;打印以’\0’结尾的字符串；格式：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;p/x &amp;lt;变量名&amp;gt;&lt;/code&gt;,x是十六制；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;expression&lt;/code&gt; &lt;表达示&gt;：改变程序值，如`e a = 20`&lt;/表达示&gt;&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;frame info&lt;/code&gt;：获得当前栈帧信息，可简写&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fr i&lt;/code&gt;；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;frame variable&lt;/code&gt;：获得在当前栈帧下的变量列表，可简写&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fr v&lt;/code&gt;；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;frame variable &amp;lt;var_name&amp;gt;&lt;/code&gt; ：获得在当前栈帧下的指定的变量，可简写&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fr v &amp;lt;var_name&amp;gt;&lt;/code&gt;；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;thread backtrace&lt;/code&gt;：打印线程堆栈，后面加&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;all&lt;/code&gt;的印所有线程堆栈信息，可简写&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;th b&lt;/code&gt;；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bt&lt;/code&gt;：函数调用堆栈信息；&lt;/li&gt; &lt;li&gt;script : 进入 python 脚本程序；facebook开源的强大的&lt;a href=&quot;https://luowei.github.io/https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Ffacebook%2Fchisel&quot;&gt;chisel&lt;/a&gt;；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;breakpoint list&lt;/code&gt;：列出所有断点信息，可简写&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;br l&lt;/code&gt;；&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;br disable 1&lt;/code&gt;禁用第1个断点；&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;br del 1&lt;/code&gt;删除第1个断点；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;thread list&lt;/code&gt;：列表所有线程列表，可简写&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;th l&lt;/code&gt;；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;thread return&lt;/code&gt;：立即执行返回命令，跳出当前栈帧，如&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;thread return NO&lt;/code&gt;；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;b ptrace&lt;/code&gt;：列举模块；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;call [NSThread callStackSymbols]&lt;/code&gt;,获取堆栈符号列表；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;image lookup&lt;/code&gt;： 查找定位在模块中的位置；加&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--address/a&lt;/code&gt;参数可以指定地址寻址定位代码位置；&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--name&lt;/code&gt;根据指定符号名查找；&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--type&lt;/code&gt;根据类型查找；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target stop-hook&lt;/code&gt; : &lt;ul&gt; &lt;li&gt;在每次 stop 的时候去执行一些命令；例如：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target stop-hook add -o &quot;frame variable&quot;&lt;/code&gt;,在每次 stop 时，执行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;frame variable&lt;/code&gt; 命令；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target stop-hook list&lt;/code&gt;: 列出 hook 的所有断点；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target stop-hook del&lt;/code&gt; 编号: 删除 hook 的断点；&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;h4 id=&quot;变量操作&quot;&gt;&lt;strong&gt;变量操作&lt;/strong&gt;&lt;/h4&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;lldb&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; e int &lt;span class=&quot;nv&quot;&gt;$a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 2 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;lldb&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; p &lt;span class=&quot;nv&quot;&gt;$a&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; 19 38 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;lldb&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; e NSArray &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; @[ @&lt;span class=&quot;s2&quot;&gt;&quot;Saturday&quot;&lt;/span&gt;, @&lt;span class=&quot;s2&quot;&gt;&quot;Sunday&quot;&lt;/span&gt;, @&lt;span class=&quot;s2&quot;&gt;&quot;Monday&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;lldb&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; p &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$array&lt;/span&gt; count] 2 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;lldb&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; p &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;char&lt;span class=&quot;o&quot;&gt;)[[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$array&lt;/span&gt; objectAtIndex:&lt;span class=&quot;nv&quot;&gt;$a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; characterAtIndex:0] &lt;span class=&quot;s1&quot;&gt;&apos;M&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;lldb&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; p/d &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;char&lt;span class=&quot;o&quot;&gt;)[[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$array&lt;/span&gt; objectAtIndex:&lt;span class=&quot;nv&quot;&gt;$a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; characterAtIndex:0] 77 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h4 id=&quot;流程操作&quot;&gt;流程操作&lt;/h4&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;process continue&lt;/code&gt;：对应&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;continue&lt;/code&gt;按钮功能，别名也是&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;continue&lt;/code&gt;，让程序继续执行，可缩写为&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;c&lt;/code&gt;; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;thread step-over&lt;/code&gt;：跳过一行代码，到下一行，别名为&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;next&lt;/code&gt;，可缩写为&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;n&lt;/code&gt;； &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;thread step in&lt;/code&gt;：跳进一个函数，别名&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;step&lt;/code&gt;，缩写&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;s&lt;/code&gt;；&lt;/p&gt; &lt;p&gt;&lt;strong&gt;参考：&lt;/strong&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://lldb.llvm.org/use/map.html&quot;&gt;GDB to LLDB command map&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://objccn.io/issue-19-2/&quot;&gt;与调试器共舞 - LLDB 的华尔兹&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/ios/16071825228878.html</link> <guid>https://luowei.github.io/ios/16071825228878</guid> <pubDate>Sun, 06 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>iOS里load与initialize方法总结</title> <description> &lt;h1 id=&quot;ios里load与initialize方法总结&quot;&gt;iOS里load与initialize方法总结&lt;/h1&gt; &lt;h2 id=&quot;load方法&quot;&gt;&lt;strong&gt;+load方法&lt;/strong&gt;&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;load方法在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main&lt;/code&gt;函数执行之前调用，具体调用是在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dyld&lt;/code&gt;加载类时，在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dyld_start&lt;/code&gt;之后由&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dyld&lt;/code&gt;调用；&lt;/li&gt; &lt;li&gt;OC 运行时初始化时，会通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dyld_register_image_state_change_handler&lt;/code&gt; 在每次有新的镜像加入运行时的时候，进行回调。执行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load_images&lt;/code&gt; 将所有包含 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt; 方法的文件加入列表 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;loadable_classes&lt;/code&gt; ，然后从这个列表中找到对应的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt; 方法的实现，调用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt; 方法。&lt;/li&gt; &lt;li&gt;ObjC 对于加载的管理，主要使用了两个列表，分别是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;loadable_classes&lt;/code&gt; 和 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;loadable_categories&lt;/code&gt;；方法的调用过程也分为两个部分，准备 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt; 方法和调用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt; 方法。&lt;/li&gt; &lt;li&gt;在将镜像加载到运行时，在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load_images&lt;/code&gt;里会先调用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load_images_nolock&lt;/code&gt;来查找&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt;方法，并在此方里调用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;prepare_load_methods&lt;/code&gt;，然后里面会进一步通过&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;schedule_class_load&lt;/code&gt;方法调用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;add_class_to_loadable_list&lt;/code&gt;将类的函数列表添加到&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;loadable_classes&lt;/code&gt;数组中；通过&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;add_category_to_loadable_list&lt;/code&gt;将分类的方法列表添加到&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;loadable_categories&lt;/code&gt;数组中。&lt;/li&gt; &lt;li&gt;对 load 方法的准备就绪之后，在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load_images&lt;/code&gt;里会执行&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;call_load_methods&lt;/code&gt;，然后里有两个 while 循环，先通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;call_class_loads&lt;/code&gt; 执行所有类的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt; 方法，再通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;call_category_loads&lt;/code&gt; 执行分类的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt; 方法； &lt;img src=&quot;https://luowei.github.io/media/16071300644840/Jietu20201205-123845.jpg&quot; alt=&quot;Jietu20201205-123845&quot; /&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;strong&gt;准备 load 方法过程：&lt;/strong&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load_images&lt;/code&gt; -&amp;gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load_images_nolock&lt;/code&gt; -&amp;gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;prepare_load_methods&lt;/code&gt; -&amp;gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;schedule_class_load&lt;/code&gt; -&amp;gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;add_class_to_loadable_list&lt;/code&gt; 的时候会将未加载的类添加到 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;loadable_classes&lt;/code&gt; 数组中。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;正式调用 load 方法的过程：&lt;/strong&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load_images&lt;/code&gt; -&amp;gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;call_load_methods&lt;/code&gt; -&amp;gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;call_class_loads&lt;/code&gt; 会从 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;loadable_classes&lt;/code&gt; 中取出对应类和方法，执行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt;。&lt;/p&gt; &lt;h2 id=&quot;总个过程总结如下&quot;&gt;&lt;strong&gt;总个过程总结如下&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16071300644840/16071445600902.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;h3 id=&quot;加载映像--回调-load_images&quot;&gt;&lt;strong&gt;加载映像-&amp;gt; 回调 load_images&lt;/strong&gt;&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;如果在扫描镜像的过程中发现了 + load 符号，就会进入 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load_images_nolock&lt;/code&gt; 来查找 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt; 方法，准备 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;+ load&lt;/code&gt; 方法；&lt;/li&gt; &lt;li&gt;在将镜像加载到运行时、对 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt; 方法的准备就绪之后，执行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;call_load_methods&lt;/code&gt;，开始调用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt; 方法；&lt;/li&gt; &lt;/ul&gt; &lt;h4 id=&quot;load_images_nolock&quot;&gt;&lt;strong&gt;load_images_nolock&lt;/strong&gt;&lt;/h4&gt; &lt;p&gt;在这方法里面会调用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;prepare_load_methods&lt;/code&gt; 对 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt; 方法的调用进行准备（将需要调用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt; 方法的类添加到一个列表中）。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;strong&gt;prepare_load_methods&lt;/strong&gt; &lt;ul&gt; &lt;li&gt;在此方法里会通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_getObjc2NonlazyClassList&lt;/code&gt; 获取所有的类的列表之后，会通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;remapClass&lt;/code&gt; 获取类对应的指针，然后调用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;schedule_class_load&lt;/code&gt; 递归地安排当前类和没有调用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;+ load&lt;/code&gt; 父类进入列表。&lt;/li&gt; &lt;li&gt;在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;schedule_class_load&lt;/code&gt;方法内会执行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;add_class_to_loadable_list(cls)&lt;/code&gt; 将当前类加入加载列表之前，会先把父类加入待加载的列表，保证父类在子类前调用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt; 方法。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;&lt;strong&gt;call_load_methods&lt;/strong&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;call_load_methods&lt;/code&gt;里有两个 while 循环，先通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;call_class_loads&lt;/code&gt; 执行所有类的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt; 方法，再通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;call_category_loads&lt;/code&gt; 执行分类的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt; 方法；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;call_class_loads&lt;/code&gt; 会从一个待加载的类列表 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;loadable_classes&lt;/code&gt; 中寻找对应的类，然后找到 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@selector(load)&lt;/code&gt; 的实现并执行；&lt;/li&gt; &lt;li&gt;通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(*load_method)(cls, SEL_load)&lt;/code&gt; 代码执行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;+[XXObject load]&lt;/code&gt;，即调用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt;；&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;h4 id=&quot;最后再总结一下&quot;&gt;&lt;strong&gt;最后再总结一下&lt;/strong&gt;&lt;/h4&gt; &lt;ul&gt; &lt;li&gt;所有类的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt; 方法调用完毕之后再调用分类的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt; 方法，类与分类的方法列表分别存储在对应的两个全局表中；&lt;/li&gt; &lt;li&gt;dyld 分别将类和分类添加到两个全局数组后，再循环取出这两个数组中的元素，递归执行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt;方法，因为有这两个数组，所以分类的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt;不会覆盖原来类的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt;方法；&lt;/li&gt; &lt;li&gt;在类先于分类调用、父类先于子类的大前提下，分类中 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt; 方法的调用顺序取决于符号表中的顺序，也就是编译顺序；&lt;/li&gt; &lt;li&gt;在递归调用类的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;+load&lt;/code&gt;方法过程中，父类会先于子类调用，分类在最后调用；&lt;/li&gt; &lt;li&gt;因为dyld中没有使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_msgSend&lt;/code&gt;来调用函数，而是直接执行，所以不存在方法查找和消息传递机制，所以子类未实现&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt;方法的情况下也不去调用父类的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load&lt;/code&gt;；&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dyld&lt;/code&gt;在调用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load_images&lt;/code&gt;、&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dyld_start&lt;/code&gt;&lt;/p&gt; &lt;h2 id=&quot;initailize方法&quot;&gt;&lt;strong&gt;+initailize方法&lt;/strong&gt;&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;initialize方法是它的类第一次被使用到时才调用，具体为第一次调用此类的相关方法；&lt;/li&gt; &lt;li&gt;initailize是一个初始化方法，在初始化自己之前会递归执行父类的初始化操作，也就是父类的initailize会先执行；&lt;/li&gt; &lt;li&gt;如果子类没有实现 initialize，则会调用父类的initialize，如果子类实现了 initialize，那么就直接执行子类的 initialize；&lt;/li&gt; &lt;li&gt;这个方法是通过 objc_msgSend 调用的，需要经过方法查找和消息转发的过程；&lt;/li&gt; &lt;li&gt;分类的 initialize 方法会覆盖原来类的 initialize，且遵循分类的编译顺序原则，最靠后的分类最终替换掉之前的 initialize 方法；&lt;/li&gt; &lt;/ul&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16071300644840.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16071300644840</guid> <pubDate>Sat, 05 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>C语言中const关键字使用总结</title> <description> &lt;h1 id=&quot;c语言中const关键字使用总结&quot;&gt;C语言中const关键字使用总结&lt;/h1&gt; &lt;h2 id=&quot;用const关键字修饰的意义&quot;&gt;用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;const&lt;/code&gt;关键字修饰的意义：&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;只修饰变量，不修饰其他关键字；&lt;/li&gt; &lt;li&gt;被修饰的部分不可变；&lt;/li&gt; &lt;li&gt;但是不会改变变量的作用域和生命周期。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;strong&gt;下面用几个例子来说明&lt;/strong&gt;&lt;br /&gt; &lt;strong&gt;案例1：&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;复制代码此时 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;const&lt;/code&gt; 修饰的是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*p&lt;/code&gt;。 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*p&lt;/code&gt; 的意义是指针所指向的内存地址的值，所以此时的意思是指针 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;p&lt;/code&gt; 所指向的内存地址的值不可变;而指针 p的值，也就是其指向的内存地址可变； 所以当尝试使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*p&lt;/code&gt; 改变被 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;const&lt;/code&gt; 修饰的常量时，编译器报错，只读的变量不可以被再次赋值，而修改指针 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;p&lt;/code&gt; 的指向时是可行的。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;案例2：&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;const&lt;/code&gt; 不修饰关键字，此时&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;const&lt;/code&gt;修饰的仍然是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*p&lt;/code&gt;，同案例1；&lt;/p&gt; &lt;p&gt;&lt;strong&gt;案例3：&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;此时 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;const&lt;/code&gt; 修饰的是变量 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;p&lt;/code&gt;，也就是局部变量 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;p&lt;/code&gt; 的值不能被改变，所以当尝试使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*p&lt;/code&gt; 改变 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;p&lt;/code&gt; 所指向的内存地址&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a&lt;/code&gt;中的值时，是可行的。但是当尝试重新给 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;p&lt;/code&gt; 赋值，比如让其指向 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;b&lt;/code&gt; 的内存地址时，编译器就会报错。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;案例4：&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;这中情况同情况一和情况二一样，都是修饰变量 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;c&lt;/code&gt;，也就不存在指针那么复杂的情况，其意义就是变量 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;c&lt;/code&gt;的值不可变。&lt;/p&gt; &lt;h2 id=&quot;总结&quot;&gt;&lt;strong&gt;总结&lt;/strong&gt;&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;const&lt;/code&gt; 修饰基础数据时表示变量不可变；&lt;/li&gt; &lt;li&gt;修饰指针时，可以分为修饰 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;const *p&lt;/code&gt; 和 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;* const p&lt;/code&gt;，两种情况。前者表示指针所指向的内存地址的值不可变，后者表示指针的指向不可变；&lt;/li&gt; &lt;/ul&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16071280152846.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16071280152846</guid> <pubDate>Sat, 05 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>iOS中触发离屏渲染的本质原因与场景</title> <description> &lt;h1 id=&quot;ios中触发离屏渲染的本质原因与场景&quot;&gt;iOS中触发离屏渲染的本质原因与场景&lt;/h1&gt; &lt;p&gt;&lt;strong&gt;当前屏幕渲染(On-Screen Rendering)：&lt;/strong&gt;当前屏幕渲染，CPU、GPU 不停地将内容渲染完成放入frame buffer帧缓冲区中，显示屏幕从 frame buffer中获取内容显示。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;离屏渲染(Off-Screen Rendering)：&lt;/strong&gt;离屏渲染，先创建离屏渲染帧缓冲区offscreen frame buffer，然后逐一将内容渲染放入其中，完成后对离屏渲染缓冲区做阴影叠加、裁剪等操作，最后将结果拷贝或切换到帧缓冲区frame buffer中，显示屏幕从 frame buffer中获取内容显示。&lt;/p&gt; &lt;h2 id=&quot;触发离屏渲染的原因&quot;&gt;&lt;strong&gt;触发离屏渲染的原因&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;因为离屏渲染相对于当前屏幕渲染会多创建一个叫作离屏渲染帧缓冲区(offscreen frame buffer)的临时缓冲区,在这个临时缓冲区是主要用来存放一些全局操作过程当中的渲染结果。比如阴影叠加、裁剪、蒙版、模糊、光栅化、组透明、投影、圆角等操作会涉及到多个渲染结果的合并，所以需要临时缓冲区来暂存这些用来最终用来合并的中间渲染结果。&lt;/p&gt; &lt;p&gt;所以，&lt;strong&gt;触发离屏渲染本质上&lt;/strong&gt;是因为涉及到多个渲染结果合并时，需要借助离屏渲染帧缓冲区来暂存渲染结果才触发的。如果说能避免需要多个图层的渲染结果合并操作，就能避免触发离屏渲染。&lt;/p&gt; &lt;h2 id=&quot;避免触发离屏渲染&quot;&gt;&lt;strong&gt;避免触发离屏渲染&lt;/strong&gt;&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;不要使用不必要的 mask，可以预处理图片为圆形，通过 Core Graphics手动绘制圆角；&lt;/li&gt; &lt;li&gt;使用中间为圆形透明的白色背景视图覆盖。但这种方式不能解决背景色为图片或渐变色的情况；&lt;/li&gt; &lt;li&gt;用 UIBezierPath 贝塞尔曲线绘制闭合带圆角的矩形，再将不带圆角的 layer 渲染成图片，添加到贝塞尔矩形中，另外，layer 的布局若生成改变，再重新绘制贝塞尔曲线即可。&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;常见触发离屏渲染的情况&quot;&gt;&lt;strong&gt;常见触发离屏渲染的情况&lt;/strong&gt;&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;layer 设置了使用了 mask 蒙版；&lt;/li&gt; &lt;li&gt;layer 设置了圆角裁剪（masksToBounds+cornerRadius），且包含 sub layer；&lt;/li&gt; &lt;li&gt;layer 设置了组不透明度allowsGroupOpacity，并且不透明度opacity小于1；&lt;/li&gt; &lt;li&gt;layer 设置了投影shadowXX；&lt;/li&gt; &lt;li&gt;layer 设置了光栅化shouldRasterize；&lt;/li&gt; &lt;li&gt;使用了 blur 模糊效果UIVisualEffectView；&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;strong&gt;参考：&lt;/strong&gt; &lt;a href=&quot;https://luowei.github.io/https://www.laoqingcai.com/ios-screen-render/index.html&quot;&gt;iOS 屏幕渲染分析&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16071248803343.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16071248803343</guid> <pubDate>Sat, 05 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>Objective-C中的@property、@synthesize以及@dynamic</title> <description> &lt;h1 id=&quot;objective-c中的propertysynthesize以及dynamic&quot;&gt;Objective-C中的@property、@synthesize以及@dynamic&lt;/h1&gt; &lt;p&gt;&lt;strong&gt;解读&lt;/strong&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;@property 的本质是实际上就是 ivar (实例变量) + 存取方法(getter + setter)。在属性定义完成后，编译器会自动生成该属性的 getter 和 setter 方法，这个过程就叫做自动合成。除了生成 getter 与 setter 方法，编译器还要自动向类中添加适当类型的实例变量，并且在属性名前面加下划线，以此做实例变量的名字;&lt;/li&gt; &lt;li&gt;@synthesize 的作用就是如果没有手动实现 getter 与 setter 方法，那么编译器就会自动加上这两个方法；&lt;/li&gt; &lt;li&gt;@dynamic 的作用就是告诉编译器，getter 与 setter 方法由用户自己实现，不自动生成。但对于 readonly 的属性只需要提供 getter 即可；&lt;/li&gt; &lt;li&gt;这三个关键字都是用来修饰属性的，也就是说是要作用在属性本身或说是属性名上的。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;strong&gt;总结&lt;/strong&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;如果没有写 @synthesize 和 @dynamic，那么编译默认的就是 @synthesize var = _var;&lt;/li&gt; &lt;li&gt;如果加入了 @dynamic 的话，编译系统就不会自己生成 getter 和 setter 方法了，需要我们自己来实现；&lt;/li&gt; &lt;li&gt;当使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@synthesize a=_a;&lt;/code&gt;,指定了成员变量的名称(指定为带下划线的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a&lt;/code&gt;)，就会生成指定的成员变量。如果代码中存在带下划线的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a&lt;/code&gt;，就不会在生成了;&lt;/li&gt; &lt;li&gt;如果是&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@synthesize a;&lt;/code&gt;，还会生成一个名称为带下划线的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a&lt;/code&gt; 成员变量，也就是说如果没有指定成员变量的名称会自动生成一个属性同名的成员变量；&lt;/li&gt; &lt;li&gt;在 category 中使用 @property 也是只会生成 getter 和 setter 方法的声明，如果要给 category 增加属性的实现，需要借助于运行时的两个函数：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_setAssociatedObject&lt;/code&gt;和&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_getAssociatedObject&lt;/code&gt;；&lt;/li&gt; &lt;li&gt;在 protocol 中使用 property 只会生成 setter 和 getter 方法声明，使用属性的目的是希望遵守些协议的对象能够实现该属性。&lt;/li&gt; &lt;/ul&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16071202583411.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16071202583411</guid> <pubDate>Sat, 05 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>Objective-C对象的浅拷贝与深拷贝探究</title> <description> &lt;h1 id=&quot;objective-c对象的浅拷贝与深拷贝探究&quot;&gt;Objective-C对象的浅拷贝与深拷贝探究&lt;/h1&gt; &lt;h2 id=&quot;ios提供了2个拷贝方法&quot;&gt;&lt;strong&gt;iOS提供了2个拷贝方法&lt;/strong&gt;&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;copy 不可变拷贝，产生不可变副本；&lt;/li&gt; &lt;li&gt;mutableCopy可变拷贝，产生可变副本；&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;深拷贝和浅拷贝&quot;&gt;&lt;strong&gt;深拷贝和浅拷贝&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;深拷贝&lt;/code&gt; 内容拷贝，产生新的对象； &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;浅拷贝&lt;/code&gt; 指针拷贝，没有产生新的对象；&lt;/p&gt; &lt;h2 id=&quot;copy和mutablecopy-图解&quot;&gt;&lt;strong&gt;copy和mutableCopy 图解&lt;/strong&gt;&lt;/h2&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt; &lt;/th&gt; &lt;th&gt;copy&lt;/th&gt; &lt;th&gt;mutableCopy&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;NSString&lt;/td&gt; &lt;td&gt;NSString 浅拷贝&lt;/td&gt; &lt;td&gt;NSMutableString深拷贝&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;NSMutableString&lt;/td&gt; &lt;td&gt;NSString深拷贝&lt;/td&gt; &lt;td&gt;NSMutableString深拷贝&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;NSArray&lt;/td&gt; &lt;td&gt;NSArray浅拷贝&lt;/td&gt; &lt;td&gt;NSMutableArray深拷贝&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;NSMutableArray&lt;/td&gt; &lt;td&gt;NSArray深拷贝&lt;/td&gt; &lt;td&gt;NSMutableArray深拷贝&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;NSDictionary&lt;/td&gt; &lt;td&gt;NSDictionary浅拷贝&lt;/td&gt; &lt;td&gt;NSMutableDictionary深拷贝&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;NSMutableDictionary&lt;/td&gt; &lt;td&gt;NSDictionary深拷贝&lt;/td&gt; &lt;td&gt;NSMutableDictionary深拷贝&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;ul&gt; &lt;li&gt;由此可知，&lt;strong&gt;包含’mutable’字串符号的拷贝都是深拷贝，不包含的是浅拷贝。&lt;/strong&gt; 浅拷贝中的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;copy&lt;/code&gt; 方法等价于&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;retain&lt;/code&gt;；&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;property-属性&quot;&gt;&lt;strong&gt;@property 属性&lt;/strong&gt;&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@property&lt;/code&gt;中的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;copy&lt;/code&gt;关键字作用是：调用被赋值给属性的对象的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;copyWithZone&lt;/code&gt;方法，并将返回值赋值给属性；&lt;/li&gt; &lt;li&gt;@property只是告诉编译器，帮我生成 setter和 getter方法，也就是声明并实现属性变量的setter和 getter方法；&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;copy-与-mutablecopy-对比&quot;&gt;&lt;strong&gt;copy 与 mutablecopy 对比&lt;/strong&gt;&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;如果是 copy 方法，则调用对象的 copyWithZone方法；&lt;/li&gt; &lt;li&gt;如果是mutablecopy，则调用对象的mutableCopyWithZone 方法；&lt;/li&gt; &lt;li&gt;如果 copy = 0，mutablecopy = 0，那么最终会调用objc_retain方法；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;copy&lt;/code&gt; 是为了获得不可变副本，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mutableCopy&lt;/code&gt; 是为了获取可变副本，而修饰属性的关键字只有 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;copy&lt;/code&gt;；&lt;/li&gt; &lt;li&gt;在属性中不要使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;copy&lt;/code&gt; 修饰&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSMutableArray&lt;/code&gt;、&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSMutableDictionary&lt;/code&gt;等可变类型；&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;strong&gt;生成 cpp 文件可以使用如下的编译指令：&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;xcrun &lt;span class=&quot;nt&quot;&gt;-sdk&lt;/span&gt; iphoneos clang &lt;span class=&quot;nt&quot;&gt;-arch&lt;/span&gt; arm64 &lt;span class=&quot;nt&quot;&gt;-rewrite-objc&lt;/span&gt; a.m &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; a.cpp &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;用-strong-来修饰字符串属性会出现的问题&quot;&gt;&lt;strong&gt;用 strong 来修饰字符串属性会出现的问题&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;如果使用strong来修饰&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSString&lt;/code&gt;属性，给这个属性赋值一个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSMutableString&lt;/code&gt;对象，然后通过对这个属性加上强制类型转换成&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSMutableString&lt;/code&gt;类型，就可以实现直接修改这个属性内存地址中的值了。&lt;/p&gt; &lt;h2 id=&quot;block的拷贝&quot;&gt;&lt;strong&gt;Block的拷贝&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;ARC 中的 Block 属性使用 copy 和 strong 修饰 Block 都可以&lt;/strong&gt;&lt;/p&gt; &lt;ol&gt; &lt;li&gt;使用 copy 修饰时，相当于主动调用 copy 方法，StackBlock 会被拷贝到堆上而成为 MallocBlock；&lt;/li&gt; &lt;li&gt;使用 strong 修饰时，ARC 模式下，会自动调用 copy 方法，StackBlock 会被拷贝到堆上而成为 MallocBlock；&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;strong&gt;MRC 中的 Block 属性必须使用 copy 修饰&lt;/strong&gt;&lt;/p&gt; &lt;ol&gt; &lt;li&gt;使用 copy 修饰时，相当于主动调用 copy 方法，StackBlock 会被拷贝到堆上而成为 MallocBlock；&lt;/li&gt; &lt;li&gt;MRC 模式下，strong 修饰 Block 只会 retain，不会自动调用 Block 的 copy 方法；&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;关于copy的总结&quot;&gt;&lt;strong&gt;关于copy的总结：&lt;/strong&gt;&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;copy 的目的是创建一个互不干扰，相互独立的副本；&lt;/li&gt; &lt;li&gt;copy 无论是直接调用还是修饰属性，其本质是调用copyWithZone和mutableCopyWithZone方法；&lt;/li&gt; &lt;li&gt;深浅复制的区别在于返回值是否为新创建的对象，和调用 copy 的哪个方法无关；&lt;/li&gt; &lt;li&gt;使用 copy 修饰属性的关键目的是告诉使用者，这个不要直接修改属性所指向内存中的值；&lt;/li&gt; &lt;li&gt;修饰可变类型的对象，比如可变数组，严禁使用 copy 修饰；&lt;/li&gt; &lt;li&gt;copy 的本质是调用 copy 协议中的两个方法，只是系统对字符串、数组、字典、NSNumber 和 Block 实现了该协议的两个方法，其中两个方法所实现的逻辑大同小异；&lt;/li&gt; &lt;li&gt;copy 修饰属性的本质是自动调用新值的 copy 方法以获取一个不可变对象，属性无 mutableCopy 修饰，因为没有必要；&lt;/li&gt; &lt;li&gt;copy 修饰 Block 属性的本质仍然是调用 copy 方法，只是其内部实现是将存放在栈上的 block 转移到堆上，否则栈中的 Block 被销毁后会访问指向该 Block 的指针会产生坏内存访问问题；&lt;/li&gt; &lt;/ul&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16070861382919.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16070861382919</guid> <pubDate>Sat, 05 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>iOS中的 calloc 及权限修饰符</title> <description> &lt;h1 id=&quot;ios中的-calloc-及权限修饰符&quot;&gt;iOS中的 calloc 及权限修饰符&lt;/h1&gt; &lt;p&gt;&lt;strong&gt;内存分配：&lt;/strong&gt; NSObject的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;alloc&lt;/code&gt;类方法首先调用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;allocWithZone:&lt;/code&gt;类方法，这和GUNstep实现相机，然后调用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;class_createInstance&lt;/code&gt;函数，最后通过调用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;calloc&lt;/code&gt;来分配内存块。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;calloc&lt;/code&gt;与&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;malloc&lt;/code&gt;的区别在于：&lt;/strong&gt;用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;calloc&lt;/code&gt;分配的内存区域会初始化为0；而使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;malloc&lt;/code&gt;分配的内存区域是没有初始化为0的；如果使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;malloc&lt;/code&gt;函数分配内存区域后还需要用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;memset&lt;/code&gt;等函数将内存填充为0，所以在OC里面推荐使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;calloc&lt;/code&gt;分配内存；&lt;/p&gt; &lt;p&gt;&lt;strong&gt;GNUstep框架&lt;/strong&gt; iOS 里 Objective-C 中的内存管理是包含在Cocoa框架中用于OS X、iOS应用开发的，iOS中主要采用的是引用计数。因为包含NSObject类的Foundation框架没有公开，但从另一方来看可以从GNUset来理解苹果Cocoa实现，GNUstep是Cocoa框架的互换框架。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;引用计数保存位置：&lt;/strong&gt; GNUstep将引用计数保存在对象占用内存块头部的变量当中，而苹果的实现则是将其保存在&lt;strong&gt;引用计数表&lt;/strong&gt;的记录中； 苹果对&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;autorelease&lt;/code&gt;的实现是通过&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AutoreleasePoolPage&lt;/code&gt;来管理内存的。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;所有权修饰符&lt;/strong&gt; __strong修饰符是id类型和对象类型默认的所有权修饰符。 __weak修饰符提供弱引用,弱引用不能持有对象实例。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;属性声明的属性与所有权修饰符的对应关系&lt;/strong&gt; &lt;img src=&quot;https://luowei.github.io/media/16070288519590/16070857683981.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;循环引用：&lt;/strong&gt;&lt;/p&gt; &lt;ol&gt; &lt;li&gt;类成员变量的互相强引用；&lt;/li&gt; &lt;li&gt;类成员变量对自身实例的强引用；&lt;/li&gt; &lt;li&gt;block的循环引用，如self.block在其执行体内部强引用self；&lt;/li&gt; &lt;/ol&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16070288519590.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16070288519590</guid> <pubDate>Sat, 05 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>iOS weak 底层实现原理</title> <description> &lt;h1 id=&quot;ios-weak-底层实现原理&quot;&gt;iOS weak 底层实现原理&lt;/h1&gt; &lt;p&gt;&lt;strong&gt;weak&lt;/strong&gt;的原理在于底层维护了一张&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;weak_table_t&lt;/code&gt;结构的hash表，Key是所指对象的地址，Value是weak指针的地址（这个地址的值是所指对象的地址）数组。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;weak 的实现原理可以概括一下三步：&lt;/strong&gt;&lt;/p&gt; &lt;ol&gt; &lt;li&gt;初始化时：runtime会调用objc_initWeak函数，初始化一个新的weak指针指向对象的地址;&lt;/li&gt; &lt;li&gt;添加引用时：objc_initWeak函数会调用 objc_storeWeak() 函数， objc_storeWeak() 的作用是更新指针指向，创建对应的弱引用表。&lt;/li&gt; &lt;li&gt;释放时，调用clearDeallocating函数。clearDeallocating函数首先根据对象地址获取所有weak指针地址的数组，然后遍历这个数组把其中的数据设为nil，最后把这个entry从weak表中删除，最后清理对象的记录。&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;相关类及函数调用关系图&quot;&gt;&lt;strong&gt;相关类及函数调用关系图&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16070583973992/16070728320861.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;sidetableweak_table_tweak_entry_t-之间的关系&quot;&gt;&lt;strong&gt;SideTable、weak_table_t、weak_entry_t 之间的关系&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;如下图： &lt;img src=&quot;https://luowei.github.io/media/16070583973992/16070587236725.jpg&quot; alt=&quot;SideTable、weak_table_t、weak_entry_t&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;弱引用对象初始化流程&quot;&gt;&lt;strong&gt;弱引用对象初始化流程&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16070583973992/16070590524526.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;weak原理详解&quot;&gt;&lt;strong&gt;weak原理详解&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;当一个对象做weak引用，在运行时会在底层库调用objc_initWeak函数； 当对象的引用计数为0时，底层会调用_objc_rootDealloc方法对对象进行释放，而在_objc_rootDealloc方法里面会调用rootDealloc方法&lt;/p&gt; &lt;h3 id=&quot;objc_initweak&quot;&gt;&lt;strong&gt;objc_initWeak&lt;/strong&gt;&lt;/h3&gt; &lt;p&gt;该方法的两个参数location和newObj。 &lt;strong&gt;location&lt;/strong&gt; ：__weak指针的地址，存储指针的地址，这样便可以在最后将其指向的对象置为nil。 &lt;strong&gt;newObj&lt;/strong&gt; ：所引用的对象。即例子中的obj 。 在该方法内部调用了storeWeak方法。&lt;/p&gt; &lt;h3 id=&quot;storeweak&quot;&gt;&lt;strong&gt;storeWeak&lt;/strong&gt;&lt;/h3&gt; &lt;p&gt;这个方法的实现如下：&lt;/p&gt; &lt;ul&gt; &lt;li&gt;storeWeak方法实际上是接收了5个参数，分别是haveOld、haveNew和crashIfDeallocating，这三个参数都是以模板的方式传入的，是三个bool类型的参数。 分别表示weak指针之前是否指向了一个弱引用，weak指针是否需要指向一个新的引用，若果被弱引用的对象正在析构，此时再弱引用该对象是否应该crash。&lt;/li&gt; &lt;li&gt;该方法维护了oldTable和newTable分别表示旧的引用弱表和新的弱引用表，它们都是SideTable的hash表。&lt;/li&gt; &lt;li&gt;如果weak指针之前指向了一个弱引用，则会调用weak_unregister_no_lock方法将旧的weak指针地址移除。&lt;/li&gt; &lt;li&gt;如果weak指针需要指向一个新的引用，则会调用weak_register_no_lock方法将新的weak指针地址添加到弱引用表中。&lt;/li&gt; &lt;li&gt;调用setWeaklyReferenced_nolock方法修改weak新引用的对象的bit标志位。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;这个方法中的重点也就是weak_unregister_no_lock和weak_register_no_lock这两个方法。而这两个方法都是操作的SideTable这样一个结构的变量。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;strong&gt;SideTable&lt;/strong&gt; SideTable 的定义： &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SideTable&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;spinlock_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;slock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RefcountMap&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;refcnts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weak_table_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weak_table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt;spinlock_t slock : 自旋锁，用于上锁/解锁 SideTable。&lt;/li&gt; &lt;li&gt;RefcountMap refcnts ：用来存储OC对象的引用计数的 hash表(仅在未开启isa优化或在isa优化情况下isa_t的引用计数溢出时才会用到)。&lt;/li&gt; &lt;li&gt; &lt;p&gt;weak_table_t weak_table : 存储对象弱引用指针的hash表。是OC中weak功能实现的核心数据结构。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;strong&gt;weak_table_t&lt;/strong&gt; weak_table_t 的定义： &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weak_table_t&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weak_entry_t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weak_entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;uintptr_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;uintptr_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_hash_displacement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt;weak_entries： hash数组，用来存储弱引用对象的相关信息weak_entry_t；&lt;/li&gt; &lt;li&gt;num_entries： hash数组中的元素个数；&lt;/li&gt; &lt;li&gt;mask：hash数组长度-1，会参与hash计算。（注意，这里是hash数组的长度，而不是元素个数。比如，数组长度可能是64，而元素个数仅存了2个）；&lt;/li&gt; &lt;li&gt; &lt;p&gt;max_hash_displacement：可能会发生的hash冲突的最大次数，用于判断是否出现了逻辑错误（hash表中的冲突次数绝不会超过改值）； weak_table_t是一个典型的hash结构。weak_entries是一个动态数组，用来存储weak_entry_t类型的元素，这些元素实际上就是OC对象的弱引用信息。&lt;/p&gt; &lt;/li&gt; &lt;li&gt;&lt;strong&gt;weak_entries&lt;/strong&gt; &lt;ul&gt; &lt;li&gt;&lt;strong&gt;weak_entry_t&lt;/strong&gt; weak_entry_t的结构也是一个hash结构，其存储的元素是弱引用对象指针的指针， 通过操作指针的指针，就可以使得weak 引用的指针在对象析构后，指向nil。&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;cp&quot;&gt;#define WEAK_INLINE_COUNT 4 &lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;#define REFERRERS_OUT_OF_LINE 2 &lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weak_entry_t&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DisguisedPtr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objc_object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;referent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 被弱引用的对象&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 引用该对象的对象列表，联合。 引用个数小于4，用inline_referrers数组。 用个数大于4，用动态数组weak_referrer_t *referrers&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;union&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weak_referrer_t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;referrers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 弱引用该对象的对象指针地址的hash数组&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;uintptr_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;out_of_line_ness&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 是否使用动态hash数组标记位&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;uintptr_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_refs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PTR_MINUS_2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// hash数组中的元素个数&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;uintptr_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// hash数组长度-1，会参与hash计算。（注意，这里是hash数组的长度，而不是元素个数。比如，数组长度可能是64，而元素个数仅存了2个）素个数）。&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;uintptr_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_hash_displacement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 可能会发生的hash冲突的最大次数，用于判断是否出现了逻辑错误（hash表中的冲突次数绝不会超过改值）&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// out_of_line_ness field is low bits of inline_referrers[1]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weak_referrer_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inline_referrers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WEAK_INLINE_COUNT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;out_of_line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;out_of_line_ness&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;REFERRERS_OUT_OF_LINE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weak_entry_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weak_entry_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;other&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;memcpy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;other&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;other&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weak_entry_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objc_object&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newReferent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objc_object&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newReferrer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;referent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newReferent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 构造方法，里面初始化了静态数组&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inline_referrers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newReferrer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WEAK_INLINE_COUNT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inline_referrers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt;在weak_entry_t的结构定义中有联合体，在联合体的内部有定长数组inline_referrers[WEAK_INLINE_COUNT]和动态数组weak_referrer_t *referrers两种方式来存储弱引用对象的指针地址。&lt;/li&gt; &lt;li&gt;通过out_of_line()这样一个函数方法来判断采用哪种存储方式。&lt;/li&gt; &lt;li&gt;当弱引用该对象的指针数目小于等于WEAK_INLINE_COUNT时，使用定长数组。&lt;/li&gt; &lt;li&gt;当超过WEAK_INLINE_COUNT时，会将定长数组中的元素转移到动态数组中，并之后都是用动态数组存储。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;strong&gt;weak_entry_for_referent&lt;/strong&gt; 取元素； &lt;strong&gt;append_referrer&lt;/strong&gt; 添加元素；&lt;/p&gt; &lt;/li&gt; &lt;li&gt;&lt;strong&gt;weak_register_no_lock&lt;/strong&gt; weak_register_no_lock 方法添加弱引用。这个方法需要传入四个参数，它们代表的意义如下： &lt;ul&gt; &lt;li&gt;weak_table：weak_table_t结构类型的全局的弱引用表。&lt;/li&gt; &lt;li&gt;referent_id：weak指针。&lt;/li&gt; &lt;li&gt;*referrer_id：weak指针地址。&lt;/li&gt; &lt;li&gt;crashIfDeallocating ：若果被弱引用的对象正在析构，此时再弱引用该对象是否应该crash。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;该方法主要的做了如下几个方便的工作：&lt;/p&gt; &lt;ol&gt; &lt;li&gt;如果referent为nil 或 referent 采用了TaggedPointer计数方式，直接返回，不做任何操作。&lt;/li&gt; &lt;li&gt;如果对象正在析构，则抛出异常。&lt;/li&gt; &lt;li&gt;如果对象不能被weak引用，直接返回nil。&lt;/li&gt; &lt;li&gt;如果对象没有再析构且可以被weak引用，则调用weak_entry_for_referent方法根据弱引用对象的地址从弱引用表中找到对应的weak_entry，如果能够找到则调用append_referrer方法向其中插入weak指针地址。否则新建一个weak_entry。&lt;/li&gt; &lt;/ol&gt; &lt;/li&gt; &lt;li&gt;&lt;strong&gt;weak_unregister_no_lock&lt;/strong&gt; weak_unregister_no_lock移除引用。如果weak指针之前指向了一个弱引用，则会调用weak_unregister_no_lock方法将旧的weak指针地址移除。&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;_objc_rootdealloc&quot;&gt;&lt;strong&gt;_objc_rootDealloc&lt;/strong&gt;&lt;/h2&gt; &lt;h3 id=&quot;rootdealloc&quot;&gt;&lt;strong&gt;rootDealloc&lt;/strong&gt;&lt;/h3&gt; &lt;p&gt;rootDealloc实现：&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kr&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objc_object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rootDealloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isTaggedPointer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// fixme necessary?&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fastpath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonpointer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weakly_referenced&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;has_assoc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;has_cxx_dtor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;has_sidetable_rc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sidetable_present&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;free&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object_dispose&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ol&gt; &lt;li&gt;首先判断对象是否是Tagged Pointer，如果是则直接返回。&lt;/li&gt; &lt;li&gt;如果对象是采用了优化的isa计数方式，且同时满足对象没有被weak引用!isa.weakly_referenced、没有关联对象!isa.has_assoc、没有自定义的C++析构方法!isa.has_cxx_dtor、没有用到SideTable来引用计数!isa.has_sidetable_rc则直接快速释放。&lt;/li&gt; &lt;li&gt;如果不能满足2中的条件，则会调用object_dispose方法。&lt;/li&gt; &lt;/ol&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;object_dispose&lt;/strong&gt; object_dispose方法很简单，主要是内部调用了objc_destructInstance方法。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;strong&gt;objc_destructInstance&lt;/strong&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;objc_destructInstance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Read all of the flags at once for performance.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cxx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hasCxxDtor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assoc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hasAssociatedObjects&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// This order is important.&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cxx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object_cxxDestruct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assoc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_object_remove_assocations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;clearDeallocating&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;p&gt;这段代码表示：如果有自定义的C++析构方法，则调用C++析构函数。如果有关联对象，则移除关联对象并将其自身从Association Manager的map中移除。调用clearDeallocating方法清除对象的相关引用。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;strong&gt;clearDeallocating&lt;/strong&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kr&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objc_object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;clearDeallocating&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;slowpath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonpointer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Slow path for raw pointer isa.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sidetable_clearDeallocating&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;slowpath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weakly_referenced&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;has_sidetable_rc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Slow path for non-pointer isa with weak refs and/or side table data.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;clearDeallocating_slow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sidetable_present&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;p&gt;clearDeallocating中有两个分支，现实判断对象是否采用了优化isa引用计数。&lt;/p&gt; &lt;/li&gt; &lt;li&gt;如果没有的话则需要清理对象存储在SideTable中的引用计数数据。&lt;/li&gt; &lt;li&gt; &lt;p&gt;如果对象采用了优化isa引用计数，则判断是都有使用SideTable的辅助引用计数(isa.has_sidetable_rc)或者有weak引用(isa.weakly_referenced)，符合这两种情况中一种的，调用clearDeallocating_slow方法。&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;clearDeallocating_slow&lt;/strong&gt; 在这个方法里面调用了weak_clear_no_lock来做weak_table的清理工作。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;strong&gt;weak_clear_no_lock&lt;/strong&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;em&gt;此处更详细参考：&lt;a href=&quot;https://luowei.github.io/https://juejin.cn/post/6844904101839372295&quot;&gt;iOS底层原理：weak的实现原理&lt;/a&gt;&lt;/em&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16070583973992.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16070583973992</guid> <pubDate>Fri, 04 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>Autorelease 及 Autoreleasepool 原理</title> <description> &lt;h1 id=&quot;autorelease-及-autoreleasepool-原理&quot;&gt;Autorelease 及 Autoreleasepool 原理&lt;/h1&gt; &lt;p&gt;自动释放池在 MRC 模式与 ARC 模式下还是有些差异的。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;MRC模式&lt;/strong&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;autorelease&lt;/code&gt;会像C语言的自动变量那样来对待对象实例。当超出变量作用域时，对象实例的release实例方法被调用。但同C语言自动变量不同的是，开发者可以设定变量的作用域，而其中的NSAutoreleasePool对象的生存周期就相当于C语言变量的作用域。&lt;/li&gt; &lt;li&gt;要使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;autorealse&lt;/code&gt;就需要生成并持有&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSAutoreleasePool&lt;/code&gt;对象，而后把所有的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;autorealse&lt;/code&gt;实例添加到&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSAutoreleasePool&lt;/code&gt;里，离开作用时，会循环的向&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSAutoreleasePool&lt;/code&gt;里所有的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;autorealse&lt;/code&gt;实例发送&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;release&lt;/code&gt;消息，并废弃&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSAutoreleasePool&lt;/code&gt;对象。&lt;/li&gt; &lt;li&gt;程序的主循环的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSRunLoop&lt;/code&gt;每次循环过程中会对&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSAutoreleasePool&lt;/code&gt;对象进行生成、和废弃，iOS程序在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main&lt;/code&gt;方法里最外层套了一层&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;autoreleasepool&lt;/code&gt;，所以只要这最外层的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;autoreleasepool&lt;/code&gt;对象不废弃，那添加在其中的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;autorelease&lt;/code&gt;对象就不会被释放。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;autorealse&lt;/code&gt;实例方法本质上就是调用了&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSAutoreleasePool&lt;/code&gt;对象的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;addObject&lt;/code&gt;类方法。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSAutoreleasePool&lt;/code&gt;的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;drain&lt;/code&gt;方法会调用，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;autorelease&lt;/code&gt;方法已被该类重载，因此运行就会出错。&lt;/li&gt; &lt;li&gt;通过指定编译参数&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-fobjc-arc&lt;/code&gt;后，编译器会自动添加&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;引用计数&lt;/code&gt;相关的代码；&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;strong&gt;ARC模式&lt;/strong&gt; 在ARC下是使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@autoreleasepool{}&lt;/code&gt;来使用一个AutoreleasePool的，编译时编译器会将其改写这样：&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objc_autoreleasePoolPush&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// {}中的代码&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objc_autoreleasePoolPop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;这两个函数都是对AutoreleasePoolPage的简单封装,AutoreleasePoolPage是一个C++实现的类。其内存结构图如下： &lt;img src=&quot;https://luowei.github.io/media/16070546104738/16070559850193.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;AutoreleasePool并没有单独的结构，而是由若干个AutoreleasePoolPage以双向链表的形式组合而成（分别对应结构中的parent指针和child指针）；&lt;/li&gt; &lt;li&gt;AutoreleasePool是按线程一一对应的（AutoreleasePoolPage结构中的thread指针指向当前线程）；&lt;/li&gt; &lt;li&gt;每一个自动释放池都是由一系列的 AutoreleasePoolPage 组成的，AutoreleasePoolPage每个对象会开辟4096字节内存（也就是虚拟内存一页的大小），除了上面的实例变量所占空间，剩下的空间全部用来储存autorelease对象的地址；&lt;/li&gt; &lt;li&gt;next 指向了下一个为空的内存地址，如果 next指向的地址加入一个 object，它就会如下图所示移动到下一个为空的内存地址中，上面的id *next指针作为游标指向栈顶最新add进来的autorelease对象的下一个位置；&lt;/li&gt; &lt;li&gt;一个AutoreleasePoolPage的空间被占满时，会新建一个AutoreleasePoolPage对象，连接链表，后来的autorelease对象在新的page加入；&lt;/li&gt; &lt;li&gt;向一个对象发送- autorelease消息，就是将这个对象加入到当前AutoreleasePoolPage的栈顶next指针指向的位置；&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;strong&gt;POOL_SENTINEL&lt;/strong&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;POOL_SENTINEL&lt;/code&gt;是个哨兵对象，它只是nil的别名；&lt;/li&gt; &lt;li&gt;在每个自动释放池初始化调用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_autoreleasePoolPush&lt;/code&gt;的时候，都会把一个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;POOL_SENTINEL&lt;/code&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;push&lt;/code&gt; 到自动释放池的栈顶，并且返回这个 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;POOL_SENTINEL&lt;/code&gt; 哨兵对象；&lt;/li&gt; &lt;li&gt;当方法&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_autoreleasePoolPop&lt;/code&gt; 调用时，就会向自动释放池中的对象发送release消息，直到第一个 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;POOL_SENTINEL&lt;/code&gt;；&lt;/li&gt; &lt;li&gt;objc_autoreleasePoolPush的返回值正是这个哨兵对象的地址，被objc_autoreleasePoolPop(哨兵对象)作为入参；&lt;/li&gt; &lt;li&gt;当&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pop&lt;/code&gt;时，会根据传入的哨兵对象地址找到哨兵对象所处的page，在当前page中，将晚于哨兵对象插入的所有autorelease对象都发送一次&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;- release&lt;/code&gt;消息，并向回移动next指针到正确位置，另外在清理过程当前，可以向前跨越若干个page，直到哨兵所在的page；&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;strong&gt;AutoreleasePoolPage 源码节选&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// EMPTY_POOL_PLACEHOLDER is stored in TLS when exactly one pool is &lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pthread_t&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;thread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//这里表明它是个双向链表&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;child&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;uint32_t&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;depth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;uint32_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hiwat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newParent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;magic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;begin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()),&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;thread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pthread_self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newParent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;child&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;check&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Restart from hotPage() every time, in case -release &lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// autoreleased more objects&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hotPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//hotPage&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// fixme I think this `while` can be `if`, but I can&apos;t prove it&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;#if DEBUG &lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// we expect any children to be completely empty&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;child&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;child&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;empty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Not recursive: we don&apos;t want to blow out the stack &lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// if a thread accumulates a stupendous amount of garbage&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;child&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;child&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;deathptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;deathptr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// reinstate TLS value while we work&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setHotPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coldPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;empty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;begin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// pop all of the pools&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DebugMissingPools&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DebugPoolAllocation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pageForPointer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pageForPointer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;uintptr_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pageForPointer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;uintptr_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;uintptr_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SIZE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;offset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fastcheck&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hotPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tls_get_direct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EMPTY_POOL_PLACEHOLDER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setHotPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fastcheck&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coldPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hotPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;autoreleaseFast&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hotPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;full&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__attribute__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;noinline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;autoreleaseFullPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// The hot page is full. &lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;child&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;child&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;full&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Install the first page.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setHotPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;autoreleaseNewPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hotPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;autoreleaseFullPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;autoreleaseNoPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;....&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;....&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DebugPoolAllocation&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;empty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// special case: delete everything during page-per-pool debugging&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kill&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setHotPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;....&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__unused&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pthread_key_init_np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tls_dealloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;....&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_objc_inform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;AUTORELEASE POOLS for thread %p&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pthread_self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;ptrdiff_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coldPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;child&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;....&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Check and propagate high water mark&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Ignore high water marks under 256 to suppress noise.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hotPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;uint32_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mark&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;depth&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;COUNT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;uint32_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;begin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mark&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hiwat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mark&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;256&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;....&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isTaggedPointer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;autorelease&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;....&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objc_autoreleasePoolPush&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;....&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objc_autoreleasePoolPop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ctxt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ctxt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;....&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_objc_autoreleasePoolPrint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;printAll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;....&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr_init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AutoreleasePoolPage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SideTableInit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;参考：&lt;a href=&quot;https://luowei.github.io/https://www.jianshu.com/p/b0c19505a5a4&quot;&gt;Autorelease实现原理&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16070546104738.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16070546104738</guid> <pubDate>Fri, 04 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>C语言中的变量常量及其在虚拟内存中的分配</title> <description> &lt;h1 id=&quot;c语言中的变量常量及其在虚拟内存中的分配&quot;&gt;C语言中的变量常量及其在虚拟内存中的分配&lt;/h1&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;在C语言里，使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;auto&lt;/code&gt;关键字声明自动变量，如果没有被声明为其他类型的变更 ，默认都是自动变量。(注意：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;auto&lt;/code&gt;关键字在C与C++里的用法不同，若编写C/C++兼容程序,最好不要使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;auto&lt;/code&gt;作为存储类别说明符。)&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;静态变量与自动变量的区别在于静在变量是在全局(静态)存储区内分配内存的单元(目标文件的.data段,未初始化的在.bss段),而自动变量则分配在动态存储区(栈区)；只有通过&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;malloc&lt;/code&gt;或&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;new&lt;/code&gt;生成的变量分配在堆区。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;全局变(常)量与静态变(常)量都是存储在全局(静态)存储区(即.data段和.bss段中)。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;static修饰的全局变量与函数不能在其它文件中访问，即使是&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;extern&lt;/code&gt;外部声明也不可见。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;extern&lt;/code&gt;可以将全局变量的作用域扩大到外部文件中。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;c&quot;&gt;# 编译&lt;/span&gt; gcc &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; a.c b.c &lt;span class=&quot;c&quot;&gt;# 链接&lt;/span&gt; gcc a.o b.o &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; ab.out &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;/ul&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16070355852198.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16070355852198</guid> <pubDate>Fri, 04 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>计算机里的内存分配原理</title> <description> &lt;h1 id=&quot;计算机里的内存分配原理&quot;&gt;计算机里的内存分配原理&lt;/h1&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;操作系统要求进程不能直接访问物理内存，而是为每个进程分配一块自己独立的虚拟空间，并且每个进程只能访问自己的虚拟地址空间。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;进程的虚拟空间是操作系统按分段或分页的方法映射到某个物理空间的，虚拟空间到物理空间的转换是依靠CPU里一个叫 MMU 的部件来支持的。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;现代计算机主要是采用页映射的方式来划分地址空间，即把地址空间人为等分成固定大小的页，这个页大小为硬件决定。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;把虚拟空间的页叫虚拟页(Virtual Page，VP)，物理内存中的页叫物理页(Physical Page，PP)，把磁盘中的页叫做磁盘页(Disk Page，DP)。&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16070353479002.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16070353479002</guid> <pubDate>Fri, 04 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>C语言字节对齐及结构体对齐详解</title> <description> &lt;h1 id=&quot;c语言字节对齐及结构体对齐详解&quot;&gt;C语言字节对齐及结构体对齐详解&lt;/h1&gt; &lt;h2 id=&quot;为什么需要字节对齐&quot;&gt;&lt;strong&gt;为什么需要字节对齐&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;对齐与数据在内存中的位置相关，若一个变量的内存地址正好位于它长度的整数倍，那么就称做自然对齐。如在32位CPU下，假设一个整型变量的地址为0x00000004，那它就是自然对齐的。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;字节对齐的作用不仅有利于CPU快速访问，同时合理的利用字节对齐还可以有效地节省内存。&lt;/strong&gt;&lt;br /&gt; 如果上面整型变量的地址不是自然对齐，比如为0x00000002，则CPU如果取它的值的话需要访问两次内存，第一次取从0x00000002-0x00000003的一个short，第二次取从0x00000004-0x00000005的一个short然后组合得到所要的数据，如果变量在0x00000003地址上的话则要访问三次内存，第一次为char，第二次为short，第三次为char，然后组合得到整型数据。而如果变量在自然对齐位置上，则只要一次就可以取出数据。&lt;/p&gt; &lt;p&gt;一般情况下，&lt;strong&gt;各类型变量的地址要求是该类型字节大小的整数倍&lt;/strong&gt;，如：&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;字节对齐&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;short&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;字节对齐&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;字节对齐&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;字节对齐&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;字节对齐&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;字节对齐（部分机器是&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;字节对齐）&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;字节对齐&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;字节对齐（部分机器是&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;字节对齐）&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;指针&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;字节对齐&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;位系统&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;字节对齐&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;位系统&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;字节对齐&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;位系统&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;字节对齐&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;位系统&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;以stuct为例&quot;&gt;&lt;strong&gt;以Stuct为例：&lt;/strong&gt;&lt;/h2&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//定义1个空的结构体&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Obj&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Obj&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot; %p %lu &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; %p %lu &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//输出：0x16fd0e1f0 0 0x16fd0e1e8 0&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;会发现即使是两个空的struct变量，也按照机器字长偏移了8个字节(我们的机器是64位系统)。&lt;br /&gt; 如果修改这个结构Obj的定义为：&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Obj&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//1字节&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//---填充1个字节，确保j的起始地址为2的倍数&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;short&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//2字节&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//---填充4个字节，确保k的起始地址为8的倍数&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//8字节&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//输出：0x16fd621e8 16 0x16fd621d8 16&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;如果再次修改定义为：&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Obj&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//1字节&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//---填充7个字节，确保k的起始地址为8的倍数&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//8字节&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//---不需要填充，j的起始地址正好为2的倍数&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;short&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//2字节&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//---填充6个字节，确保Obj的大小为8的倍数&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//输出：0x16fdaa1e0 24 0x16fdaa1c8 24&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;会发现Obj的大小突然变大到了24，这是因为j后还要填充6个字节确保整个Obj的结构大小。&lt;/p&gt; &lt;p&gt;所以，我们应该&lt;strong&gt;尽量按照变量的大小从小到大进行声明，以节省内存&lt;/strong&gt;。&lt;/p&gt; &lt;h2 id=&quot;设定对齐大小&quot;&gt;&lt;strong&gt;设定对齐大小&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;更改C编译器的缺省字节对齐方式，可以使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pragma pack&lt;/code&gt;伪指令来改变。如以下例子： 在网络通信中，如果我们需要直接发送struct，收发方的对齐方式肯定会不一样，这时我们可以严格控制字节对齐。比如：&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#pragma pack(push) #pragma pack(1) //1字节对齐 &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Obj&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;short&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;#pragma pack(pop) &lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//输出：0x16fde61e8 11 0x16fde61d8 11&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;我们发现缩小对齐字节为1时，Obj的大小变为实际变量的大小之和：11字节。&lt;/p&gt; &lt;p&gt;另外，还有一种方式是使用GNU的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_attribute__&lt;/code&gt;选项来设置。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;__attribute__ ((aligned (n)))，让所作用的结构成员对齐在n字节自然边界上。如果结构中有成员的长度大于n，则按照最大成员的长度来对齐。&lt;/li&gt; &lt;li&gt;__attribute__ ((packed))，取消结构在编译过程中的优化对齐，按照实际占用字节数进行对齐。&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Obj1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;short&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Obj2&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;short&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__attribute__&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aligned&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)));&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Obj3&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;short&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__attribute__&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;packed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Obj&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Obj2&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Obj3&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;== sizeof Obj:%lu &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; Obj2:%lu &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt; Obj3:%lu&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//输出：== sizeof Obj:24 Obj2:11 Obj3:11&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16070329191495.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16070329191495</guid> <pubDate>Fri, 04 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>动态链接深入详解</title> <description> &lt;h1 id=&quot;动态链接深入详解&quot;&gt;动态链接深入详解&lt;/h1&gt; &lt;p&gt;&lt;strong&gt;动态链接：&lt;/strong&gt;为了解决内存及磁盘空间的浪费和更新困难的问题，把程序的链接过程推迟到运行时再进行，就是动态链接的基本思想。让程序在运行时可以动态地选择加载各种程序模块，实现程序功能的扩展，另一方面也可加强程序的兼容的。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;动态链接运行时地址空间分布：&lt;/strong&gt;对于动态链接程序来说，除了可执行文件本身之外，还有它所依赖的共享目标文件。其共享对象的最终装载地址在编译时是不确定的，而是在装载时，装载器根据当前地址空间的空闲情况动态分配一块足够大小的虚拟地址空间给相应的共享对象。&lt;/p&gt; &lt;p&gt;编译一个共享对象,&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-shared&lt;/code&gt;表示生生共享对象，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-fPIC&lt;/code&gt;表示产生地址无关代码；&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gcc &lt;span class=&quot;nt&quot;&gt;-fPIC&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-shared&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; hello.so hello.c &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;装载时重定位：&lt;/strong&gt;我们知道静态链接是链接时重定位，但动态链接时装载进重定位，在Windows中，这种装载时重定位又叫基址重置。&lt;/p&gt; &lt;p&gt;模块中的地址引用方式：可分类模块内引用和模块外引用；也可分为指令引用和数据访问。所以就可以分为以下四种情况：&lt;/p&gt; &lt;ul&gt; &lt;li&gt;模块内部的函数调用、跳转等；&lt;/li&gt; &lt;li&gt;模块内部的数据访问，如模块中定义的全局变量、静态变量；&lt;/li&gt; &lt;li&gt;模块外部的函数调用、跳转等；&lt;/li&gt; &lt;li&gt;模块外部的数据访问，如模块中定义的全局变量；&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;strong&gt;GOT(Global Offset Table)全局偏移表：&lt;/strong&gt;在模块间的数据访问中，因为其他模块的全局变量是与模块装载地址有关的，ELF的做法是在数据段里面建立一个指向这些变量的指针函数，也叫全局偏移表,当代码需要引用该全局变量时，可以通过GOT中相对应的项间接引用。&lt;/p&gt; &lt;p&gt;使用objdump来查看 GOT的位置&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objdump -h pic.so&lt;/code&gt;；查看动态链接时重定位项：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objdump -R pic.so&lt;/code&gt;；&lt;/p&gt; &lt;p&gt;区分一个DSO是否为PIC&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;readelf &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; foo.so | &lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;TEXTREL &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;查看可执行文件所需要的动态链接器的路径：&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;readelf &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; a.out | &lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;interpreter &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;使用readelf查盾&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.dynamic&lt;/code&gt;段的内容：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;readelf -d Lib.so&lt;/code&gt;&lt;/p&gt; &lt;p&gt;查看程序或共享库的依赖：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ldd program1&lt;/code&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;共享模块的全局变量：&lt;/strong&gt;ELF共享库在编译时，默认都把定义在模块内部的全局变量当作定义在其他模块的全局变量，这样就通过GOT来实现变量的访问。即共享模块被装载时，如果某个全局变量在可执行文件中有副本，那么动态链接器就会把GOT中相应地址指向该副本，这样该变量在运行时实际上最终就只有一个实例。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;数据段地址无关性：&lt;/strong&gt;对于共享对象来说，如果数据段中有绝对地址引用，那编译器和链接器就会产生一个重定位表，并且这个表中包含了相对寻址类型的重定位入口。&lt;/p&gt; &lt;p&gt;查看ELF文件动态符号表及它的哈希表：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;readelf -sD Lib.so&lt;/code&gt;&lt;/p&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-Xlinker -rpath ./&lt;/code&gt;表示链接器在当前路径寻找共享对象&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gcc main.c b1.so b2.so &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; main &lt;span class=&quot;nt&quot;&gt;-Xlinker&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rpath&lt;/span&gt; ./ &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;延迟绑定(Procedure Linage Table ,PLT)：&lt;/strong&gt;基本思想时当函数第一次被用到时才进行绑定(符号查找、重定位等)，如果没有用到则不进行绑定。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;动态链接相关的结构：&lt;/strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.interp&lt;/code&gt;段、&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.dynamic&lt;/code&gt;段、动态符号表、动态链接重定位表、进程堆栈里的辅助信息数组。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;动态链接的步骤：&lt;/strong&gt;动态链接器自举，装载共享对象，最后是重定位与初始化。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Linux动态链接器的实现&lt;/strong&gt;：它本身是一个共享对象，是个非常特殊的共享对象，还是个可执行的程序。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;dlopen()：&lt;/strong&gt;用来打开一个动态库； &lt;strong&gt;dlsym()：&lt;/strong&gt;用来查找所需要的符号； &lt;strong&gt;dlerror()：&lt;/strong&gt;用来判断上一次调用是否成功； &lt;strong&gt;dlclose()：&lt;/strong&gt;用来将一个已经加载的模块卸载；&lt;/p&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16069042964193.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16069042964193</guid> <pubDate>Thu, 03 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>ELF文件的装载与Linux的进程</title> <description> &lt;h1 id=&quot;elf文件的装载与linux的进程&quot;&gt;ELF文件的装载与Linux的进程&lt;/h1&gt; &lt;p&gt;&lt;strong&gt;进程的虚拟地址空间&lt;/strong&gt;&lt;br /&gt; 查看进程虚拟空间分布&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; /proc/&amp;lt;pid&amp;gt;/maps &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;PAE(物理地址扩展)&lt;/strong&gt;&lt;br /&gt; 在CPU字长不变的情况下，扩展地址线长度，修改页映射方式，便使新映射方式可以访问更多的物理内存。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;程序的动态装载方法：&lt;/strong&gt;覆盖装入(Overlay)、页映射(Paging)&lt;/p&gt; &lt;p&gt;&lt;strong&gt;可执行文件的装载：&lt;/strong&gt;&lt;br /&gt; 1.进程的建立； 2.页错误；&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Segment(程序头) 与 Section(段表)&lt;/strong&gt;&lt;br /&gt; Segment 是从装载的角度重新划分ELF的各个段；&lt;/p&gt; &lt;pre&gt;&lt;code class=&quot;language-shelll&quot;&gt;# 使用静态链接方式编译链接可执行文件 gcc -static SectionMapping.c -o SectionMapping.elf # 使用 readelf 查看可执行文件 readelf -S SectionMapping.elf # 使用 readelf 命令来查看 ELF 的 Segment readelf -l SectionMapping.elf &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;&lt;strong&gt;进程的VMA&lt;/strong&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;代码VMA：权限只读、可执行；有映像文件；&lt;/li&gt; &lt;li&gt;数据VMA：权限可读写、可执行；有映像文件；&lt;/li&gt; &lt;li&gt;堆VMA：权限可读写、可执行；无映像文件，匿名，可向上扩展；&lt;/li&gt; &lt;li&gt;栈VMA：权限可读写、不可执行；无映像文件，匿名，可向下扩展；&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;strong&gt;段地址对齐&lt;/strong&gt;&lt;br /&gt; 默认页大小4096字节。优化空间和地址安排，让那个各个段接壤部分共享一个物理页面，然后将该物理页面分别映射两次。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;进程栈的初始化：&lt;/strong&gt;栈顶寄存器esp指向的位置是初始化以后堆栈的顶部。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Linux内核装载ELF的过程&lt;/strong&gt;&lt;/p&gt; &lt;ol&gt; &lt;li&gt;检查ELF可执行文件格式的有效性，如魔数、程序度表中Segment的数量；&lt;/li&gt; &lt;li&gt;寻找动态链接&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.interrp&lt;/code&gt;段，设置动态链接路径；&lt;/li&gt; &lt;li&gt;根据程序头表的描述，对ELF文件进行映射，如代码、数据、只读数据；&lt;/li&gt; &lt;li&gt;初始化ELF进程环境，如进程启动时EDX寄存器的地址应该是DT_FINT的地址；&lt;/li&gt; &lt;li&gt;将系统调用的返回地址修改成ELF可执行文件的入口点，这个入口点取决于程序的链接方式；&lt;/li&gt; &lt;/ol&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16068978581321.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16068978581321</guid> <pubDate>Wed, 02 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>静态链接的深入探究</title> <description> &lt;h1 id=&quot;静态链接的深入探究&quot;&gt;静态链接的深入探究&lt;/h1&gt; &lt;p&gt;首先使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gcc&lt;/code&gt;编译两个目标文件,生成a.o、b.o ：&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gcc &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; a.c b.c &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;链接器对目标文件的链接过程中对输入的多个目标文件加工后合并成一个输出文件，合并的过程是将输入文件相同性质的段合并到一起，比如将所有输入文件的”.text”合并到输出文件的”.text”段。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;链接器的空间分配策略&lt;/strong&gt;第一步：空间与地址分配；第二步：符号解析与重定位； 将&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a.o&lt;/code&gt;与&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;b.o&lt;/code&gt;链接起来：&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ld a.o b.o &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; main &lt;span class=&quot;nt&quot;&gt;-ab&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;-e main 表示将 main 函数作为程序入口，ld链接器默认的程序入口为&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_start&lt;/code&gt;;&lt;/li&gt; &lt;li&gt;-o ab 表示链接输出文件名为 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ab&lt;/code&gt;，默认为 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a.out&lt;/code&gt;;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;VMA 表示 Virtual Memory Address,即虚拟地址；LMA 表示 Load Memory Address,即加载地址；&lt;/p&gt; &lt;p&gt;&lt;strong&gt;符号地址的确定：&lt;/strong&gt;链接器在完成扫描与空间分配把各个段的虚拟地址确定后，还须要给每个符号加上一个偏移量，使它们也能够调整到正确的虚拟地址。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;重定位(地址修正)：&lt;/strong&gt;在完成空间和址址的分配后，所有符号的虚拟地址确定了，链接器就进入符号解析与重定位的步骤，此时链接器就可以根据符号的地址对每个需要重定位的指令进行地址修正。然而这个修正的过程是根据一个叫重定位表来做的，它里面保存了与得定位相关的信息。&lt;/p&gt; &lt;p&gt;重定位表也叫重定位段，代码段”.text”如有要重定位的地方，那么就会有一个叫”.rel.text”的段保存了代码的重定位表；同样”.data”段对应的是”.rel.data”。&lt;/p&gt; &lt;p&gt;使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objdump -r a.o&lt;/code&gt;可以用来查看&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a.o&lt;/code&gt;里面要重定位的地方，即&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a.o&lt;/code&gt;所有引用到外部符号的地址。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;符号解析：&lt;/strong&gt;确定符号的目标地址；&lt;/p&gt; &lt;p&gt;&lt;strong&gt;指定修正方式：&lt;/strong&gt;绝对寻址修正、相对寻址修正。区别是绝对寻址修正后的地址为该符号的实际地址；相对寻址修改后的地址为符号距离被修正位置的地址差。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;COMMON块：&lt;/strong&gt;当不同的目标文件需要的COMMON块空间大小不一致时，以最大的那块为准，现代的链接器在处理弱符号时，采用的就是与COMMON块一样的机制。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;重复代码消除：&lt;/strong&gt; 比如拿C++模板来说，每个模板的实例代码都单独存放在一个段里，一般做法是将段的命名为&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.gnu.linkonce.&amp;lt;name&amp;gt;&lt;/code&gt;的形式，这个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;name&lt;/code&gt;是该模板函数实例的修饰后名称，这样链接的时候就可以区分相同的模板实例段了，将名称得复的段丢弃掉就行了。这种消除重复代码的做法对模板如此，对外部内联函数和虚函数表、默认构造函数、默认拷贝构造函数和赋值操作符的做法也类似。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;函数级别的链接：&lt;/strong&gt;就是把所有的函数像模板函数一样单独保存到一个段里面，当链接器须要用到某个函数时，就将它合并到输出文件中，对于那些没有用的函数则抛弃掉。GCC编译器的这种机制是它提供了两个选项分别是：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-ffunction-sections&lt;/code&gt;和&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-fdata-sections&lt;/code&gt;，其作用分别是将每个函数或变量分别保持到独立的段中。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;全局构造与析构：&lt;/strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.init&lt;/code&gt;段里保存的进程初始化代码指令，在main函数被调用之前执行；&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.fini&lt;/code&gt;段里保存着进程终止代码指令，在main函数返回后会被执行。C++的全局构造与析构就是利用这两个特性实现的。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;C++与ABI：&lt;/strong&gt;ABI(Application Binary Interface)是指二进制层面的接口，ABI的兼容程度比API要更严格，因为相同的API在被调用的过程中其内存布局、参数、堆栈分布的细节、调用的指定在不同的机器上是不一样的，除硬件平台外，编程语言、编译器、链接器和操作系统的差异也会造成ABI的不兼容。ABI的不兼容就会导致各个目标文件之间无法相互链接。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;静态库：&lt;/strong&gt;可以简单看成是一组目标文件的集合，即很多目标文件经过压缩打包后形成的一个文件。一种语言的开发环境往往会附带有语言库，这些库是对操作系统的API的包装。&lt;/p&gt; &lt;p&gt;使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ar&lt;/code&gt;工具可以查看静态库文件包含了哪些目标文件,如：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ar -t libc.a&lt;/code&gt;，使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-x&lt;/code&gt;参数可解压所有目标让你说的，如：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ar -x libc.a&lt;/code&gt;；Visual C++使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lib&lt;/code&gt;可以提取、列举.lib文件中的内容，如：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lib /LIST libcmt.lib&lt;/code&gt;。&lt;/p&gt; &lt;p&gt;GCC的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-fno-builtin&lt;/code&gt;可关闭 gcc 的内置函数优化选项，如：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gcc -c -fno-builtin hello.c&lt;/code&gt;可防止GCC把只使用了一个字符串的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;printf&lt;/code&gt;优化替换&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;puts&lt;/code&gt;函数；&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-verbose&lt;/code&gt;可以将整个编译链接过程的中间步骤也打印出来：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gcc -static --verbose -fno-builtin hello.c&lt;/code&gt;。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;链接控制脚本：&lt;/strong&gt; Visual C++是.def文件，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ld -verbose&lt;/code&gt;可查看ld默认的链接脚本；默认的ld链接脚本放在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/lib/ldscripts/&lt;/code&gt;下；使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-T&lt;/code&gt;参数指定自定义脚本，如：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ld -T link.script&lt;/code&gt;。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;BFD库：&lt;/strong&gt;因为不同的软件硬件平台都有它独特的目标文件格式，即使是ELF在不同软硬件平台也有着不同的变种，这些差异导致编译器、链接器很难处理不同平台之间的目标文件，所以就有了BFD这个GNU项目，它就是希望通过一种统一的接口来处理不同的目标文件格式。现在很多的编译器、链接器、调试器以及binutils的其他工作都通过BFD库来处理目标文件，这样做的好处理是把编译器、链接器同具体的目标文件格式隔离开来，一旦要支持一种新的目标文件格式，只要在BFD里添加一种格式支持就可以了。&lt;/p&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16068883427102.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16068883427102</guid> <pubDate>Wed, 02 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>读《商君书》，叹驭民五术</title> <description> &lt;h1 id=&quot;读商君书叹驭民五术&quot;&gt;读《商君书》，叹驭民五术&lt;/h1&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16068398400651/16068402821219.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;1、愚民：统一思想，大一统，赞颂君王的赫赫武功。（反面：自由主义） 2、弱民：国强民弱，治国之道，务在弱民。 3、疲民：为民寻事，疲于奔命，使民无瑕顾及他事。 4、辱民：一无自尊自信；二唆之相互检举揭发，使人人自危于恐惧中。 5、贫民：除了生活必须，剥夺余银余财；人穷志短。&lt;/p&gt; &lt;p&gt;五皆不灵，杀之。&lt;/p&gt; </description> <link>https://luowei.github.io/%E8%AF%BB%E4%B9%A6/16068398400651.html</link> <guid>https://luowei.github.io/%E8%AF%BB%E4%B9%A6/16068398400651</guid> <pubDate>Wed, 02 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>在main方法之前调用函数</title> <description> &lt;h1 id=&quot;在main方法之前调用函数&quot;&gt;在main方法之前调用函数&lt;/h1&gt; &lt;p&gt;&lt;strong&gt;方法一：&lt;/strong&gt;根据glibc的全局构造函数是放在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.ctors&lt;/code&gt;段中，的怪可以在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.ctors&lt;/code&gt;段中添加一些函数指针，就可以让这些函数在全局构造的时候调用了，如下：&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;stdio.h&amp;gt; &lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;my_init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Hello &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ctor_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//向.ctors段中添加一个函数指针&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ctor_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__attribute__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;section&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;.ctors&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;my_init_p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;my_init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;World!&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;方法二：&lt;/strong&gt;利用gcc的关键字 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__attribute__ ((constructor))&lt;/code&gt;，如下：&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;stdio.h&amp;gt; &lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;my_init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__attribute__&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;my_init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Hello &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;World!&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16068138551893.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16068138551893</guid> <pubDate>Tue, 01 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>setjmp的工作原理</title> <description> &lt;h1 id=&quot;setjmp的工作原理&quot;&gt;setjmp的工作原理&lt;/h1&gt; &lt;p&gt;&lt;strong&gt;执行环境&lt;/strong&gt; 简单说就是CPU中的一些寄存器，这些寄存器保存了程序执行的必要信息，以x86为例：&lt;/p&gt; &lt;ul&gt; &lt;li&gt;esp 保存当前栈顶的地址。&lt;/li&gt; &lt;li&gt;ebp 保存当前函数栈帧的地址，在函数的进入点处，把esp保存到ebp，这样在函数任何位置，都可以通过ebp加偏移拿到函数的参数。&lt;/li&gt; &lt;li&gt;eip 保存下一条指令的地址。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;strong&gt;函数调用约定&lt;/strong&gt; 函数的调用约定，对寄存器也有影响，以x86的cdecl(这是C语言函数的调用约定)为例：&lt;/p&gt; &lt;ul&gt; &lt;li&gt;函数参数通过栈传递，顺序从右到左，并且由调用者负责清理栈中的参数。&lt;/li&gt; &lt;li&gt;整型值和内存地址通过eax返回。&lt;/li&gt; &lt;li&gt;eax, ecx, edx由调用者负责保存，其余的由被调函数负责保存。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;strong&gt;汇编中的call指令&lt;/strong&gt; call指令由两条语句组成：&lt;/p&gt; &lt;ul&gt; &lt;li&gt;把下一条指令的地址压栈，然后跳到函数的入口地址；&lt;/li&gt; &lt;li&gt;函数调用完之后，从栈中把指令地址恢复，这样就能正常的返回到函数调用的下一条指令处。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;strong&gt;setjmp/longjmp&lt;/strong&gt; 下面实现从一个函数体内向另一个事先登记过的函数体内跳转，setjmp/longjmp的作用是保存执行环境。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;使用setjmp保存当前执行环境到jmp_buf，然后默认返回0。&lt;/li&gt; &lt;li&gt;程序继续执行，到某个地方调用longjmp，传入上面保存的jmp_buf，以及另一个值。&lt;/li&gt; &lt;li&gt;此时执行点又回到调用setjmp的返回处，且返回值变成longjmp设置的值。&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;stdio.h&amp;gt; #include &amp;lt;setjmp.h&amp;gt; &lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;jmp_buf&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j_buf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;longjmp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j_buf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setjmp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j_buf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)){&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;World!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Hello &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;输出：&lt;/strong&gt; Hello World!&lt;/p&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16067856417927.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16067856417927</guid> <pubDate>Tue, 01 Dec 2020 00:00:00 +0800</pubDate> </item> <item> <title>可执行文件详解之ELF目标文件</title> <description> &lt;h1 id=&quot;可执行文件详解之elf目标文件&quot;&gt;可执行文件详解之ELF目标文件&lt;/h1&gt; &lt;p&gt;&lt;strong&gt;目标文件格式&lt;/strong&gt;：windows 下的PE(Portable Executable)、Linux 的ELF(Executable Linkable Format)以及 macOS 的Mach-O 格式。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;ELF文件类型&lt;/strong&gt;：可重定位文件(Linux 的.o，Windows 的.obj)；可执行文件(如/bin/bash文件，Windows 的.exe)；共享目标文件(Linux 的.so，Windows 的DLL)；核心转储文件(Linux 下的core dump).&lt;/p&gt; &lt;p&gt;&lt;strong&gt;注意&lt;/strong&gt;：使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gcc -c hello.c&lt;/code&gt;，使用-c参数表示只编译，生成的目标文件只编译不链接；&lt;/p&gt; &lt;h2 id=&quot;工具&quot;&gt;工具&lt;/h2&gt; &lt;p&gt;编译器编译源代码生成的文件叫目标文件，Linux使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;file&lt;/code&gt;命令可以查看文件的文件格式。 使用binutils的工具&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objdump&lt;/code&gt;可以查看目标文件的内部结构，如&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objdump -h hello.o&lt;/code&gt;；&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objdump&lt;/code&gt;的”-h”参数把各个段的基本信息打印出来，”-x”把更多信息打印出来，”-s”参数将所有段的内容以十六进制的方式打印出来，”-d”可以将所有包含指令的段反汇编；&lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objcopy&lt;/code&gt;可以把一个二进制文件插入到目标文件作为一段，如&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objcopy -I binary -O elf64-i386 -b i386 image.jpg image.o&lt;/code&gt;，使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objdump -ht image.o&lt;/code&gt;查看； &lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;size&lt;/code&gt;命令可以用来查看ELF文件的代码段、数据段和BSS段的长度；&lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;readelf&lt;/code&gt;命令可以详细查看ELF文件，如&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;readelf -h hello.o&lt;/code&gt;； &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;readelf&lt;/code&gt;的”-S”参数查看ELF文件的段表结构，如&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;readelf -S hello.o&lt;/code&gt;；&lt;br /&gt; macOS下可以使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jtool&lt;/code&gt;查看目标文件具体结构，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;./jtool --pages hello.o&lt;/code&gt;；&lt;/p&gt; &lt;h2 id=&quot;elf目标文件&quot;&gt;ELF目标文件&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;文件头：&lt;/strong&gt; ELF魔数、文件机器字节长度、数据存储方式、版本、运行平台、ABI版本、ELF重定位类型、硬件平台及版本、入口地址、程序头入口及长度段表位置及长度、段表数量等。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;段表：&lt;/strong&gt; 用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;readelf -s hello.o&lt;/code&gt; 查看，如下 &lt;img src=&quot;https://luowei.github.io/media/16065812543516/16065893881876.jpg&quot; alt=&quot;&quot; /&gt; 段表的结构是一个以”Elf32_Shdr”结构体为元素的数组，结构体如下： &lt;img src=&quot;https://luowei.github.io/media/16065812543516/16065894951831.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;重定位表：&lt;/strong&gt; 目标文件中有一个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.rel.text&lt;/code&gt;的段，它的类型是&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SHT_REL&lt;/code&gt;,这就是重定位表(Relocation Table),主要是记录代码段、数据段中那些对绝对地址的引用的位置相关的重定位信息。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;字符串表与段表字符串表：&lt;/strong&gt; 字符串表保存普通字符串，如符号的名字；段表字符串表保存段表中用的字符串，如段名。&lt;/p&gt; &lt;h2 id=&quot;符号&quot;&gt;符号&lt;/h2&gt; &lt;p&gt;符号是链接的接口，所有的符号都记录在目标文件的符号表中；并且每个定义的符号都有一个对应的符号值，如变量与函数的值就是它们的地址。&lt;/p&gt; &lt;p&gt;函数签名包含了一函数名、它的参数类型、它所在的类和名称空间及其他信息，编译器在将C++源代码编译成目标文件时，会将函数的签名和变量的名称进行修饰，形成符号名，这就是编译器的符号修饰。&lt;/p&gt; &lt;h3 id=&quot;extern-c&quot;&gt;extern “C”&lt;/h3&gt; &lt;p&gt;这是Visual C++ 用来声明或定义一个C的符号的关键字,它可以让C++的名称修饰机制不起作用。&lt;/p&gt; &lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;C&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//单独声明某个函数或变量为C语言的符号&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;C&quot;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;C&quot;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;varable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;利用Visual C++的名称修饰机制，这里创建一个extern_c.cpp 的文件，使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;g++ extern_c.cpp -o extern_c&lt;/code&gt;构建一下。&lt;/p&gt; &lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;stdio.h&amp;gt; &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;// g++ extern_c.cpp -o extern_c&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myname&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;C&quot;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_ZN6myname3varE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%d&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_ZN6myname3varE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;因为C语言不支持&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;extern &quot;C&quot;&lt;/code&gt;语法，要Linux 的 GCC编译器也兼容,可以使用C++的宏&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__cplusplus&lt;/code&gt;来判断当前编译单元是不是C++代码，以下代码可防止C++编译器将&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;memset&lt;/code&gt;的符号修改成&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_Z6memsetPvii&lt;/code&gt;.&lt;/p&gt; &lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#ifdef __cplusplus &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;C&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;#endif &lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;memset&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;#ifdef __cplusplus &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;#endif &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h3 id=&quot;__attribute__-weak&quot;&gt;__attribute__ ((weak))&lt;/h3&gt; &lt;p&gt;通过GCC的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; __attribute__ ((weak))&lt;/code&gt;可以定义任何一个强符号为弱符号。&lt;br /&gt; 因为默认是强引用，所以在链接时对外部目标文件的符号的引用若没有找到就会报未定义错误；如果是弱引用链接时就不会报错。 基于此，下面设计一个程序在运行时动态判断是否链接到pthread库(是否在编译时有-lpthread选项)从而决定执行多线程版本还是单线程版本。&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;stdio.h&amp;gt; #include &amp;lt;pthread.h&amp;gt; &lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* 单线程版本：gcc pthread.c -o pt 多线程版本：gcc pthread.c -lpthread -o pt GCC 中可以使用 __attribute__ ((weak)) 这个扩展关键字 来声明对一个外部函数的引用为弱引用. */&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;pthread_create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pthread_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pthread_attr_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__attribute__&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weak&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pthread_create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;这是多线程版本&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;这是单线程版本&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16065812543516.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16065812543516</guid> <pubDate>Sun, 29 Nov 2020 00:00:00 +0800</pubDate> </item> <item> <title>程序的构建过程</title> <description> &lt;h1 id=&quot;程序的构建过程&quot;&gt;程序的构建过程&lt;/h1&gt; &lt;p&gt;以最简单的hello.c为例&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;stdio.h&amp;gt; &lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Hello World&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;gcc hello.c 做了什么事情？&lt;/p&gt; &lt;p&gt;预处理(也叫预编译Prepressing) -&amp;gt; 编译(Compilation) -&amp;gt; 汇编(Assembly) -&amp;gt; 链接(Linking)&lt;/p&gt; &lt;h2 id=&quot;预编译&quot;&gt;预编译&lt;/h2&gt; &lt;p&gt;处理源文件中以#开头的预编译指令、删除注释、添加行号与文件标识等。&lt;br /&gt; .c文件预编译成.i文件,.cpp文件成.ii文件，使用gcc 加-E 选项表示只进行预编译。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gcc &lt;span class=&quot;nt&quot;&gt;-E&lt;/span&gt; hello.c &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; hello 或 cpp hello.c &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; hello.i &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;编译&quot;&gt;编译&lt;/h2&gt; &lt;p&gt;把预处理文件转化成汇编代码文件。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gcc &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; hello.i &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; hello.s &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;现在版本的gcc把预编译与编译两个步骤合并成了一个步骤，使用了一个叫cc1的程序;对应的C++有cc1plus，Objective-C是cc1obj；fortran是f771；java是jc1。&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cc1 hello.c &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;汇编&quot;&gt;汇编&lt;/h2&gt; &lt;p&gt;将汇编代码转变成机器可以执行的指令。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;as hello.s &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; hello.o 或 gcc &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; hello.s &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; hello.o 或直接使用gcc gcc &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; hello.c &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; hello.o &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;链接&quot;&gt;链接&lt;/h2&gt; &lt;p&gt;将不同代码产生的模块组装起来，过程主要包括：地址和空间分配、符号决议及重定位(地址修正)。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ld &lt;span class=&quot;nt&quot;&gt;-static&lt;/span&gt; /ur/lib/crti.o &lt;span class=&quot;nt&quot;&gt;-L&lt;/span&gt;/usr/lib &lt;span class=&quot;nt&quot;&gt;-L&lt;/span&gt;/lib hello.o &lt;span class=&quot;nt&quot;&gt;-start-group&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-lgcc_en&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-lc&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--end-groupcrtn&lt;/span&gt;.o &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/%E5%8E%9F%E7%90%86/16065156342248.html</link> <guid>https://luowei.github.io/%E5%8E%9F%E7%90%86/16065156342248</guid> <pubDate>Sat, 28 Nov 2020 00:00:00 +0800</pubDate> </item> <item> <title>万能浏览器</title> <description> &lt;h1 id=&quot;万能浏览器&quot;&gt;万能浏览器&lt;/h1&gt; &lt;p&gt;&lt;strong&gt;扫码下载&lt;/strong&gt;&lt;br /&gt; &lt;img src=&quot;https://luowei.github.io/media/16063281631235/16063283981415.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/16063281631235/01.jpg&quot; alt=&quot;01&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;简体中文&quot;&gt;简体中文&lt;/h2&gt; &lt;p&gt;=======&lt;/p&gt; &lt;p&gt;万能浏览器 - 一个可个性化的自定义浏览器&lt;/p&gt; &lt;p&gt;万能浏览器是一款可以自定义首页的浏览器；&lt;/p&gt; &lt;p&gt;万能浏览器特点: 可以自定义首页，添加自己喜欢的导航网址； 支持iCloud备份同步浏览器个性化设置； 支持多窗口与历史记录访问； 支持无痕模式与普通模式浏览； 支持网页浏览滚动自动全屏； 支持日间模式与深色模式； 支持无图模式与广告拦截； 支持一键清除上网痕迹； 支持文件下载与文件浏览、管理； 支持离线缓存让网页打开更快； 支持书签的添加与自定义； 支持扫描二维码打开页面； 支持分享页面、网址及系统浏览器打开； 支持网页捏合截图、长截图与导出PDF；&lt;/p&gt; &lt;p&gt;万能浏览器自定义功能: 内置静态WebServer，支持在手机上搭建简单的静态web站点； 新增的ShareExtension，支持在其他应用对任意文件的导入和打开； 内置Web DAV，可以更方便快捷实现从电脑上传或下载文件到web容器； 内置的Web Uploader，可以很方便的上传手机上的已有的照片或文件到Web容器；&lt;/p&gt; &lt;p&gt;万能浏览器，是你个性化的自定义浏览器，你值得拥有！&lt;/p&gt; &lt;p&gt;微信公众号：luogefx&lt;/p&gt; &lt;h3 id=&quot;关键字&quot;&gt;关键字&lt;/h3&gt; &lt;hr /&gt; &lt;p&gt;浏览器,万能浏览器,全能浏览器,WebBrowser,文件浏览器,隐私浏览器,快速浏览器,Web服务器,网页截图,导出PDF,网页下载,上网工具,个性化浏览器,下载工具,自动播放,二维码扫描,信息搜索&lt;/p&gt; &lt;h2 id=&quot;繁体中文&quot;&gt;繁体中文&lt;/h2&gt; &lt;p&gt;=======&lt;/p&gt; &lt;p&gt;萬能瀏覽器 - 一個可個性化的自定義瀏覽器&lt;/p&gt; &lt;p&gt;萬能瀏覽器是一款可以自定義首頁的瀏覽器；&lt;/p&gt; &lt;p&gt;萬能瀏覽器特點: 可以自定義首頁，添加自己喜歡的導航網址； 支持iCloud備份同步瀏覽器個性化設置； 支持多窗口與歷史記錄訪問； 支持無痕模式與普通模式瀏覽； 支持網頁瀏覽滾動自動全屏； 支持日間模式與深色模式； 支持無圖模式與廣告攔截； 支持一鍵清除上網痕跡； 支持文件下載與文件瀏覽、管理； 支持離線緩存讓網頁打開更快； 支持書籤的添加與自定義； 支持掃描二維碼打開頁面； 支持分享頁面、網址及系統瀏覽器打開； 支持網頁捏合截圖、長截圖與導出PDF；&lt;/p&gt; &lt;p&gt;萬能瀏覽器自定義功能: 內置靜態WebServer，支持在手機上搭建簡單的靜態web站點； 新增的ShareExtension，支持在其他應用對任意文件的導入和打開； 內置Web DAV，可以更方便快捷實現從電腦上傳或下載文件到web容器； 內置的Web Uploader，可以很方便的上傳手機上的已有的照片或文件到Web容器；&lt;/p&gt; &lt;p&gt;萬能瀏覽器，是你個性化的自定義瀏覽器，你值得擁有！&lt;/p&gt; &lt;p&gt;Twitter: @luowei010101&lt;/p&gt; &lt;h3 id=&quot;关键字-1&quot;&gt;关键字&lt;/h3&gt; &lt;hr /&gt; &lt;p&gt;瀏覽器,萬能瀏覽器,全能瀏覽器,WebBrowser,文件瀏覽器,隱私瀏覽器,快速瀏覽器,Web服務器,網頁截圖,導出PDF,網頁下載,上網工具,個性化瀏覽器,下載工具,自動播放,二維碼掃描,信息搜索&lt;/p&gt; </description> <link>https://luowei.github.io/%E4%B8%87%E8%83%BD%E8%BE%93%E5%85%A5%E6%B3%95/16063281631235.html</link> <guid>https://luowei.github.io/%E4%B8%87%E8%83%BD%E8%BE%93%E5%85%A5%E6%B3%95/16063281631235</guid> <pubDate>Thu, 26 Nov 2020 00:00:00 +0800</pubDate> </item> <item> <title>使用 macOS 程序员的常用软件</title> <description> &lt;h1 id=&quot;使用-macos-程序员的常用软件&quot;&gt;使用 macOS 程序员的常用软件&lt;/h1&gt; &lt;p&gt;Alfred : 快捷搜索&lt;/p&gt; &lt;ul&gt; &lt;li&gt;参考：&lt;a href=&quot;https://luowei.github.io/https://juejin.cn/post/6844904062484217863&quot;&gt;程序员的macOS系列：高效Alfred进阶&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;iTerm/Termius : 终端 JetBrains系列工具 Dash : 文档查询 VSCode : 开发工具 xcode ： 开发工具 DBeaver ： 看数据库 Robo 3 T ： MongoDB管理 Snappy : 代码片段截图置顶 Parallels Client : 连windows server Beyond Compare : 文件对比 TeamViewer/Splashtop Streamer : 远程屏幕控制 Charles/Posterman : 网络代理 Little Snitch Configuration : 网络监听控制 Docker : docker容器工具 AppCleaner : 应用删除工具 Pusher/Knuff : 推送测试 AirServer : Air 投屏 Framer : UI Code 设计&lt;/p&gt; &lt;p&gt;PDF Editor 6 Pro : PDF编辑 XMind Zen : 思维导图 Doo : 强大的任务管理工具 滴答清单: 任务管理 Things : 任务管理 有道云笔记 ： 笔记&lt;/p&gt; &lt;p&gt;截图(Jietu) : 快速标、便捷分享的截屏工具 Sip : 取色 Snap : 设置快捷键快速启动App PicGo：免费搭建个人图床 Free Download Manager : 全能、极速下载工具 Motrix : 一款全能的下载工具 Clearview : 全能的电子书阅读器 Calibre : 电子书管理 HelloFont : 字由-设计师必备字体利器 Moom : 窗口移动与缩放 Booster/CleanMyMac : macOS 清理 VirtualBox/Parallels Desktop : 虚拟机 网易MuMu : Android模拟器 Genymotion : Android模拟器&lt;/p&gt; &lt;p&gt;Final Cut Pro : 视频编辑 Mini Screen Recorder : 视频录制 Camtasia : 专业的课程录制 OBS : 视频直播及录制 HandBrake : 视频压缩 Permute : 优秀的视频和音频格式编码转换工具 Fission : 音频编辑 Movist Pro : 视频播放 IINA : 看视频,倍数可调&lt;/p&gt; &lt;p&gt;Navicat Premium : 数据库管理 MWeb : Markdown 笔记文档 Paste : 切板增强工具 Archiver / The Unariver : 压缩解压缩&lt;/p&gt; &lt;p&gt;Telegram : 聊天&lt;/p&gt; &lt;p&gt;更多……&lt;/p&gt; &lt;p&gt;&lt;strong&gt;参考：&lt;/strong&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://ihtcboy.com/2018/07/15/2018-07-15_%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84macOS%E7%B3%BB%E5%88%97%EF%BC%9A%E7%B2%BE%E9%80%89MacApp/%E4%BD%A0%E5%A5%BD&quot;&gt;程序员的macOS系列：精选Mac App&lt;/a&gt; &lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://ihtcboy.com/2018/09/30/2018-09-30_%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84macOS%E7%B3%BB%E5%88%97%EF%BC%9AMac%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/&quot;&gt;程序员的macOS系列：Mac开发环境配置&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/macos/16059975716032.html</link> <guid>https://luowei.github.io/macos/16059975716032</guid> <pubDate>Sun, 22 Nov 2020 00:00:00 +0800</pubDate> </item> <item> <title>静态链接与动态链接的原理与区别</title> <description> &lt;h1 id=&quot;静态链接与动态链接的原理与区别&quot;&gt;静态链接与动态链接的原理与区别&lt;/h1&gt; &lt;p&gt;源文件先是被编译成一个个目标文件, 再由链接器把这些目标文件组合成一个可执行文件或库。链接的过程，其核心工作是解决模块间各种符号(变量，函数)相互引用的问题，对符号的引用本质是对其在内存中具体地址的引用，因此确定符号地址是编译，链接，加载过程中一项不可缺少的工作，这就是所谓的符号重定位。&lt;br /&gt; 对于可执行文件或静态库来说，符号重定位是在链接时完成的。对于动态链接库来说，因为动态库的加载是在运行时，且加载的地址不固定，因此动态库的符号重定位是推迟进行的，主要有两种方式：&lt;strong&gt;加载时符号重定位&lt;/strong&gt;及&lt;strong&gt;地址无关代码&lt;/strong&gt;。&lt;/p&gt; &lt;h2 id=&quot;加载时符号重定位&quot;&gt;&lt;strong&gt;加载时符号重定位&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;加载时重定位，其原理很简单，它与链接时重定位是一致的，只是把重定位的时机放到了动态库被加载到内存之后，由动态链接器来进行。 加载时重定位实际上是一个重新修改动态库中数据符号地址的过程(函数符号的地址因为延迟绑定的存在不需要在代码段中重定位)。不同的进程即使是对同一个动态库也很可能是加载到不同地址上，因此当以加载时重定位的方式来使用动态库时，该动态库就没法做到被各个进程所共享，而只能在每个进程中 copy 一份：因为符号重定位后，该动态库与在别的进程中就不同了，可见这样动态库节省内存的优势就不复存在了。&lt;/p&gt; &lt;h2 id=&quot;地址无关代码&quot;&gt;&lt;strong&gt;地址无关代码&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;因加载时重定位有两个缺点：&lt;/p&gt; &lt;ol&gt; &lt;li&gt;它不能使动态库的指令代码被共享。&lt;/li&gt; &lt;li&gt;程序启动加载动态库后，对动态库中的符号引用进行重定位会比较花时间，特别是动态库多且复杂的情况下。&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;地址无关代码的实现在模块内部与模块间又有所不同。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;模块内部符号的访问：&lt;/strong&gt;地址无关代码方案是通过对变量及函数的访问加一层跳转来实现。主要&lt;strong&gt;根据当前 IP(指令指针寄存器) 值来动态计算数据的绝对地址&lt;/strong&gt;，其原理是当动态库编译好之后，库中的数据段，代码段的相对位置就已经固定了，此时对任意一条指令来说，该指令的地址与数据段的距离都是固定的，那么，只要程序在运行时获取到当前指令的地址，就可以直接加上该固定的位移，从而得到所想要访问的数据的绝对地址了。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;模块间符号的访问：&lt;/strong&gt;因为动态库运行时被加载到哪里是未知的，为了能使得代码段里对数据及函数的引用与具体地址无关，只能再作一层跳转，ELF 的做法是在动态库的数据段中加一个表项，叫作 GOT(global offset table), GOT 表格中放的是数据全局符号的地址，该表项在动态库被加载后由动态加载器进行初始化，动态库内所有对数据全局符号的访问都到该表中来取出相应的地址，即可做到与具体地址了，而该表作为动态库的一部分，访问起来与访问模块内的数据是一样的。&lt;/p&gt; &lt;h2 id=&quot;延迟加载&quot;&gt;&lt;strong&gt;延迟加载&lt;/strong&gt;&lt;/h2&gt; &lt;p&gt;动态库是在进程启动的时候加载进来的，加载后，动态链接器需要对其作一系列的初始化，如符号重定位(动态库内以及可执行文件内)，这些工作是比较费时的，特别是对函数的重定位。 因为一个动态库里可能包含很多的全局函数，但是我们往往可能只用到了其中一小部分而已，而且在这用到的一小部分里，很可能其中有些还压根不会执行到，因此完全没必要把那些没用到的函数也过早进行重定位。所以应该等到第一次发生对该函数的调用时才进行符号绑定，也叫延迟绑定。&lt;/p&gt; &lt;p&gt;延迟绑定的实现步骤如下：&lt;/p&gt; &lt;ol&gt; &lt;li&gt;建立一个 GOT.PLT 表，该表用来放全局函数的实际地址，但最开始时，该里面放的不是真实的地址而是一个跳转，接下来会讲。&lt;/li&gt; &lt;li&gt;对每一个全局函数，链接器生成一个与之相对应的影子函数，如 fun@plt。&lt;/li&gt; &lt;li&gt;所有对 fun 的调用，都换成对 fun@plt 的调用，每个fun@plt 长成如下样子： &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;fun@plt: jmp *(fun@got.plt) push index jmp _init &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;p&gt;其中第一条指令直接从 got.plt 中去拿真实的函数地址，如果已经之前已经发生过调用，got.plt 就已经保存了真实的地址，如果是第一次调用，则 got.plt 中放的是 fun@plt 中的第二条指令，这就使得当执行第一次调用时，fun@plt中的第一条指令其实什么事也没做，直接继续往下执行，第二条指令的作用是把当前要调用的函数在 got.plt 中的编号作为参数传给 _init()，而 _init() 这个函数则用于把 fun 进行重定位，然后把结果写入到 got.plt 相应的地方，最后直接跳过去该函数。&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;https://luowei.github.io/https://www.cnblogs.com/catch/p/3857964.html&quot;&gt;https://www.cnblogs.com/catch/p/3857964.html&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/15995892950324.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/15995892950324</guid> <pubDate>Wed, 09 Sep 2020 00:00:00 +0800</pubDate> </item> <item> <title>iOS问题汇总之iOS应用 - Flutter混合开发关键点</title> <description> &lt;h1 id=&quot;ios问题汇总之ios应用---flutter混合开发关键点&quot;&gt;iOS问题汇总之iOS应用 - Flutter混合开发关键点&lt;/h1&gt; &lt;h2 id=&quot;flutter-要点&quot;&gt;Flutter 要点&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;Flutter常用依赖&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;environment&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;sdk&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;gt;=2.1.0&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;lt;3.0.0&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;dependencies&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;flutter&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;sdk&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;flutter&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# The following adds the Cupertino Icons font to your application.&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# Use with the CupertinoIcons class for iOS style icons.&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;cupertino_icons&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;^0.1.2&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;english_words&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;^3.1.0&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;fluro&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;^1.5.1&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;flutter_webview_plugin&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;^0.3.5&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# Flutter 常用工具类库 https://github.com/Sky24n/flustars&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;flustars&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;0.2.6+1&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 格式化String https://github.com/Naddiseo/dart-sprintf&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;sprintf&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;^4.0.2&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;flutter_swiper&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;^1.1.6&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# Toast插件 https://github.com/OpenFlutter/flutter_oktoast&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;oktoast&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;^2.2.1&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# Dart 常用工具类库 https://github.com/Sky24n/common_utils&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;common_utils&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;^1.1.3&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 网络库 https://github.com/flutterchina/dio&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;dio&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;^3.0.7&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# https://github.com/ReactiveX/rxdart&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rxdart&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;^0.22.5&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;event_bus&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;^1.0.1&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# UI库 https://flui.xin/guide.html&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;flui&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;0.7.4&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;provider&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;^3.2.0&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 验证码框 https://github.com/adar2378/pin_code_fields&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;pin_code_fields&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;^2.3.0+3&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;dev_dependencies&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;flutter_test&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;sdk&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;flutter&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;Native端关键步骤&lt;/strong&gt;&lt;br /&gt; FlutterEngine 与 FlutterMethodChannel&lt;/p&gt; &lt;pre&gt;&lt;code class=&quot;language-oc&quot;&gt;//定义engine 与 methodChannel FlutterEngine *flutterEngine = [[FlutterEngine alloc] initWithName:@&quot;test engine&quot;]; FlutterMethodChannel *commonChannel = [FlutterMethodChannel methodChannelWithName:@&quot;native_common_channel&quot; binaryMessenger:self.flutterEngine]; [self.flutterEngine run]; //定义handler NSMutableDictionary &amp;lt;NSString *, FlutterMethodCallHandler&amp;gt;* handlers = @{}; FlutterMethodCallHandler handler = ^(FlutterMethodCall *call, FlutterResult result) { NSMutableDictionary * userInfo = @{@&quot;name&quot;:&quot;zhangsan&quot;,@&quot;age&quot;:@&quot;30&quot;}; NSString * json = [userInfo mj_JSONString]; result(json); } handlers[@&quot;test_native&quot;] = handler; //为channer设置methodCallHandler commonChannel.methodCallHandler = ^(FlutterMethodCall *call, FlutterResult result) { FlutterMethodCallHandler handler = [weakSelf.handlers objectForKey:call.method]; if (handler) { dispatch_async(dispatch_get_main_queue(), ^{ handler(call, result); }); } }; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Flutter ViewController 需要从 FlutterViewController 继承下来&lt;/p&gt; &lt;pre&gt;&lt;code class=&quot;language-oc&quot;&gt;@interface LWFlutterVC:FlutterViewController @end LWFlutterVC *flutterViewController = [[LWFlutterVC alloc] initWithEngine:self.flutterEngine nibName:nil bundle:nil]; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;如果是Flutter与Native混合项目,iOS端的podfile添加这样的设置：&lt;/p&gt; &lt;div class=&quot;language-dart highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;flutter_application_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;expand_path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;../.&apos;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;/Flutter_DemoModule&apos;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;flutter_application_path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;.ios&apos;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;Flutter&apos;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;podhelper.rb&apos;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;App_ios&apos;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Pods&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;App&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;install_all_flutter_pods&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;flutter_application_path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;Masonry&apos;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;~&amp;gt; 1.1.0&apos;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;Flutter端重点&lt;/strong&gt; &lt;br /&gt; 程序入口&lt;/p&gt; &lt;div class=&quot;language-dart highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;package:flutter/material.dart&apos;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runApp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MyApp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;StatefulWidget&lt;/p&gt; &lt;div class=&quot;language-dart highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MyApp&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;StatefulWidget&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MyApp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(){&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;router&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Router&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Routes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;configureRoutes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;router&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Application&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;router&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;router&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nd&quot;&gt;@override&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;State&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StatefulWidget&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;createState&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// TODO: implement createState&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_MyAppState&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;_MyAppState&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;State&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MyApp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_hasLogin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_MyAppState&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(){&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_hasLogin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;showWelcomePage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(){&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_hasLogin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// return SplashPage();&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MyHomePage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nd&quot;&gt;@override&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Widget&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BuildContext&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// TODO: implement build&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FLToastProvider&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;defaults:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ToastPV&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;toastDefaults&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;child:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MaterialApp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;title:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;titles&apos;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;theme:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ThemeData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;primaryColor:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Colours&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;app_main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;backgroundColor:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0xFFEFEFEF&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;accentColor:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0xFF888888&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;textTheme:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TextTheme&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//设置Material的默认字体样式&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;body1:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TextStyle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;color:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0xFF888888&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;fontSize:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;16.0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;iconTheme:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IconThemeData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;color:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Colours&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;app_main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;size:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;35.0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;home:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Scaffold&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;body:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;showWelcomePage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(),),&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;onGenerateRoute:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Application&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;router&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;generator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;StatelessWidget&lt;/p&gt; &lt;div class=&quot;language-dart highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MyApp&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;StatelessWidget&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nd&quot;&gt;@override&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Widget&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BuildContext&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wordPair&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WordPair&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MaterialApp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;title:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;Welcome to Flutter&apos;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;home:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Scaffold&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;title:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;Welcome to Flutter&apos;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;body:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Center&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;child:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wordPair&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;asPascalCase&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;child:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RandomWords&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;dart-要点&quot;&gt;Dart 要点&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;JIT 与 AOT&lt;/strong&gt;&lt;br /&gt; Dart 是少数同时支持 JIT（Just In Time，即时编译）和 AOT（Ahead of Time，运行前编译）的语言之一。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;内存分配与垃圾回收&lt;/strong&gt;&lt;br /&gt; Dart VM 的内存分配策略比较简单，创建对象时只需要在堆上移动指针，内存增长始终是线性的，省去了查找可用内存的过程；&lt;br /&gt; 在 Dart 中，并发是通过 Isolate实现的，一秀配合事件循环（Event Looper）在事件队列（Event Queue）上传递消息通信。Isolate 是类似于线程但不共享内存，独立运行的 worker。这样的机制，就可以让 Dart 实现无锁的快速分配。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;单线程模型&lt;/strong&gt; &lt;br /&gt; 支持并发执行线程的高级语言（比如，C++、Java、Objective-C），大都以抢占式的方式切换线程，即：每个线程都会被分配一个固定的时间片来执行，超过了时间片后线程上下文将被抢占后切换。如果这时更在更新线程间的共享资源，抢占后就可能导致数据不同步的问题。解决这个问题的方式，使用锁来保护共享资源，但锁本身又可能会带来性能损耗，甚至出现死锁；&lt;/p&gt; &lt;p&gt;Dart 是单线程模型，因为它天然不存在资源竞争和状态同步的问题。这就意味着，一旦某个函数开始执行，就将执行到这个函数结束，而不会被其他 Dart 代码打断。所以 Dart 中并没有线程，只有 Isolate（隔离区）。Isolate之间不会共享内存，就像几个运行在不同进程中的 worker，通过事件循环（Event Looper）在事件队列（Event Queue）上传递消息通信。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;类型安全&lt;/strong&gt; &lt;br /&gt; Dart是类型安全的语言，支持静态类型检测，可以在编译前发现一些类型的错误，并排除潜在问题。另外Dart还有似类ruby mixin混入其他功能实现类似多继承的特性。&lt;/p&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/15995553733648.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/15995553733648</guid> <pubDate>Wed, 09 Sep 2020 00:00:00 +0800</pubDate> </item> <item> <title>iOS问题汇总之iOS应用 - Swift常见问题与技术</title> <description> &lt;h1 id=&quot;ios问题汇总之ios应用---swift常见问题与技术&quot;&gt;iOS问题汇总之iOS应用 - Swift常见问题与技术&lt;/h1&gt; &lt;h2 id=&quot;swift常见原则与问题&quot;&gt;Swift常见原则与问题&lt;/h2&gt; &lt;h3 id=&quot;常见问题&quot;&gt;常见问题&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;参考：&lt;/strong&gt;&lt;a href=&quot;https://luowei.github.io/https://swifter.tips/&quot;&gt;https://swifter.tips/&lt;/a&gt;&lt;/p&gt; &lt;h4 id=&quot;map与flatmap的区别map不能将元素映射成可选类型flatmap可以&quot;&gt;&lt;strong&gt;map与flatmap的区别&lt;/strong&gt;：map不能将元素映射成可选类型,flatmap可以；&lt;/h4&gt; &lt;h4 id=&quot;mapfilterreduce-的作用&quot;&gt;&lt;strong&gt;map、filter、reduce 的作用&lt;/strong&gt;&lt;/h4&gt; &lt;p&gt;map: 映射,将一个元素根据某个函数 映射 成另一个元素（可以是同类型，也可以是不同类型） filter: 过滤,将一个元素传入闭包中，如果返回的是false ， 就过滤掉 reduce : reduce函数接收两个参数，一个初始值和一个组合闭包(combine closure)，期间通过一个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;累加器（Accumulator）&lt;/code&gt;来持续记录每次迭代闭包运算后的递增状态，化零为整。&lt;br /&gt; 例如，将一个数组中的各个元素与一个初始值10相加，可以使用reduce函数，实现一个类似累加器的作用。&lt;/p&gt; &lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;items&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;2.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;4.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;5.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;7.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;total&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;items&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;combine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 28.0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;codes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;abc&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;def&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;ghi&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;codes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;combine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// &quot;abcdefghi&quot;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h4 id=&quot;swift-currying柯里化&quot;&gt;&lt;strong&gt;Swift Currying（柯里化）&lt;/strong&gt;&lt;/h4&gt; &lt;p&gt;实现一个函数，输入是任一整数，输出要返回输入的整数 + 2.&lt;/p&gt; &lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;addition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addition&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;add2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//普通调用方式&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;add2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//连起来调用方式&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//再比如下面比较大小&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;greaterThan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;comparer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Bool&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;comparer&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;compareResult&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;greaterThan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h4 id=&quot;如何声明一个只能被类-conform-的-protocol&quot;&gt;&lt;strong&gt;如何声明一个只能被类 conform 的 protocol?&lt;/strong&gt;&lt;/h4&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;protocol OnlyClassProtocol : class { } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h4 id=&quot;什么是-copy-on-write时候&quot;&gt;&lt;strong&gt;什么是 copy on write时候?&lt;/strong&gt;&lt;/h4&gt; &lt;p&gt;写时复制, 指的是 swift 中的值类型, 并不会在一开始赋值的时候就去复制, 只有在需要修改的时候, 才去复制.&lt;/p&gt; &lt;h4 id=&quot;associatedtype关联类型-的作用&quot;&gt;&lt;strong&gt;associatedtype(关联类型) 的作用?&lt;/strong&gt;&lt;/h4&gt; &lt;p&gt;简单来说就是 protocol 使用的泛型.&lt;/p&gt; &lt;p&gt;例如定义一个列表协议&lt;/p&gt; &lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;protocol&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;ListProtcol&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;associatedtype&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Element&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;实现协议的时候, 可以使用 typealias 指定为特定的类型, 也可以自动推断, 如&lt;/p&gt; &lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;IntList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;ListProtcol&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 使用 typealias 指定为 Int&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;typealias&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Element&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;](&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;https&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//luowei.github.io/)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;popLast&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;DoubleList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;ListProtcol&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;](&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;https&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//luowei.github.io/)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;// 自动推断&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;popLast&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;使用泛型也可以&lt;/p&gt; &lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;AnyList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;ListProtcol&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;](&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;https&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//luowei.github.io/)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;popLast&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;可以使用 where 字句限定 Element 类型, 如:&lt;/p&gt; &lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;extension&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;ListProtcol&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;where&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Element&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;isInt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Bool&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h4 id=&quot;public-和-open-的区别&quot;&gt;&lt;strong&gt;public 和 open 的区别&lt;/strong&gt;&lt;/h4&gt; &lt;p&gt;这两个都用于在模块中声明需要对外界暴露的函数. 区别在于, public 修饰的类, 在模块外无法继承,. open 则可以任意继承 公开度来说, public &amp;lt; open&lt;/p&gt; &lt;h4 id=&quot;self-的使用场景&quot;&gt;&lt;strong&gt;Self 的使用场景&lt;/strong&gt;&lt;/h4&gt; &lt;p&gt;Self 通常在协议中使用, 用来表示实现者或者实现者的子类类型.&lt;/p&gt; &lt;p&gt;例如, 定义一个复制的协议&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;protocol CopyProtocol { func copy() -&amp;gt; Self } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;如果是结构体去实现, 要将Self 换为具体的类型&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;struct SomeStruct: CopyProtocol { let value: Int func copySelf() -&amp;gt; SomeStruct { return SomeStruct(value: self.value) } } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h4 id=&quot;kvo与kvc&quot;&gt;&lt;strong&gt;KVO与KVC&lt;/strong&gt;&lt;/h4&gt; &lt;p&gt;参考：&lt;a href=&quot;https://luowei.github.io/https://www.jianshu.com/p/d657ad764aaa&quot;&gt;https://www.jianshu.com/p/d657ad764aaa&lt;/a&gt;&lt;br /&gt; KVC(NSKeyValueCoding),KVO就是基于KVC来实现的。&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;在调用 setValue: forKey: 的时，程序优先调用 setName: 方法，如果没有找到 setName: 方法 KVC会检查这个类的 + (BOOL)accessInstanceVariablesDirectly 类方法看是否返回YES（默认YES），返回YES则会继续查找该类有没有名为_name的成员变量，如果还是没有找到则会继续查找_isName成员变量，还是没有则依次查找name,isName。上述的成员变量都没找到则执行setValue:forUndefinedKey: 抛出异常，如果不想程序崩溃应该重写该方法。假如这个类重写了+ (BOOL)accessInstanceVariablesDirectly 返回的是NO，则程序没有找到setName:方法之后，会直接执行setValue:forUndefinedKey: 抛出异常。&lt;/p&gt; &lt;p&gt;在调用valueForKey:的时，会依次按照getName，name，isName的顺序进行调用。如果这3个方法没有找到，那么KVC会按照countOfName,objectInNameAtIndex来查找。如果查找到这两个方法就会返回一个数组。如果还没找到则调用+ (BOOL)accessInstanceVariablesDirectly 看是否返回YES，返回YES则依次按照_name,_isName,name,isName顺序查找成员变量名，还是没找到就调用valueForUndefinedKey:；返回NO直接调用valueForUndefinedKey:&lt;/p&gt; &lt;p&gt;KVC的一些注意：KVC在设置时可能会设置错误的Key值导致程序崩溃，需要重写valueForUndefinedKey:和setValue:forUndefinedKey:。还有一种是在设置中不小心传递了nil，这时候需要重写setNilValueForKey:。&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;KVO的底层是通过isa-swizzling实现的&lt;br /&gt; 我们知道Method-Swizzling，它的实现其实是一个替换函数实现指针的过程；&lt;br /&gt; isa-swizzling顾名思义就是替换isa的过程，oc中每个对象都有一个名为isa的指针，指向该对象的类。 NSObject就是一个包含isa指针的结构体，Class也是一个包含isa指针的结构体。每一个类实际上也是一个对象，每一个类也有一个名为isa的指针。Class是元类(meteClass)的实例，Class里也有个isa的指针, 指向meteClass(元类)，元类也有isa指针,最终指向的是一个根元类(root meteClass).根元类的isa指针指向本身。 isa-swizzling就是在运行时动态地修改 isa 指针的值，达到替换对象整个行为的目的。 所以KVO的实现原理是：添加观察后，系统实现了一个子类，然后将被观察的类对象的isa指针指向这个子类。再重写了setter方法。并在当中添加了willChangeValueForKey:和didChangeValueForKey:。移除观察就是将isa指针指向原来的类对象中。&lt;/p&gt; &lt;h4 id=&quot;swift-如何让自定义对象支持字面量初始化&quot;&gt;&lt;strong&gt;Swift 如何让自定义对象支持字面量初始化?&lt;/strong&gt;&lt;/h4&gt; &lt;p&gt;有几个协议, 分别是: ExpressibleByArrayLiteral 可以由数组形式初始化 ExpressibleByDictionaryLiteral 可以由字典形式初始化 ExpressibleByNilLiteral 可以由nil 值初始化 ExpressibleByIntegerLiteral 可以由整数值初始化 ExpressibleByFloatLiteral 可以由浮点数初始化 ExpressibleByBooleanLiteral 可以由布尔值初始化 ExpressibleByUnicodeScalarLiteral ExpressibleByExtendedGraphemeClusterLiteral ExpressibleByStringLiteral 最后三种都是由字符串初始化, 上面两种包含有 Unicode 字符和特殊字符&lt;/p&gt; &lt;h4 id=&quot;-的作用&quot;&gt;&lt;strong&gt;?? 的作用&lt;/strong&gt;&lt;/h4&gt; &lt;p&gt;当可选值为nil时，输出后面给定的值&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;var test : String? = nil print(test ?? &quot;optional = nil&quot;) //输出 optional = nil &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h4 id=&quot;swift-dynamic的作用&quot;&gt;&lt;strong&gt;swift dynamic的作用&lt;/strong&gt;&lt;/h4&gt; &lt;p&gt;dynamic的作用就是让swift代码也能有oc中的动态机制，常用的就是KVO。 使用dynamic关键字标记属性，使属性启用Objc的动态转发功能； dynamic只用于类，不能用于结构体和枚举，因为它们没有继承机制，而Objc的动态转发就是根据继承关系来实现转发。&lt;/p&gt; &lt;h4 id=&quot;深入理解swift-的派发机制&quot;&gt;&lt;strong&gt;深入理解swift 的派发机制&lt;/strong&gt;&lt;/h4&gt; &lt;p&gt;参考：&lt;a href=&quot;https://luowei.github.io/https://kemchenj.github.io/2016-12-25-1/&quot;&gt;https://kemchenj.github.io/2016-12-25-1/&lt;/a&gt;&lt;br /&gt; 编译型语言有三种基础的函数派发方式: 直接派发(Direct Dispatch), 函数表派发(Table Dispatch) 和 消息机制派发(Message Dispatch)。Java 默认使用函数表派发, 但你可以通过 final 修饰符修改成直接派发. C++ 默认使用直接派发, 但可以通过加上 virtual 修饰符来改成函数表派发. 而 Objective-C 则总是使用消息机制派发, 但允许开发者使用 C 直接派发来获取性能的提高。Swift里的派发方式如下图： &lt;img src=&quot;https://luowei.github.io/media/15995030718262/15995927693609.jpg&quot; alt=&quot;&quot; /&gt; 结起来有这么几点:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;值类型总是会使用直接派发, 简单易懂&lt;/li&gt; &lt;li&gt;而协议和类的 extension 都会使用直接派发&lt;/li&gt; &lt;li&gt;NSObject 的 extension 会使用消息机制进行派发&lt;/li&gt; &lt;li&gt;NSObject 声明作用域里的函数都会使用函数表进行派发.&lt;/li&gt; &lt;li&gt;协议里声明的, 并且带有默认实现的函数会使用函数表进行派发&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;swift常用框架&quot;&gt;Swift常用框架&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;https://luowei.github.io/https://github.com/Tim9Liu9/TimLiu-iOS&quot;&gt;iOS开发常用的第三方库、插件 - OC&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://github.com/Tim9Liu9/TimLiu-iOS/blob/master/Swift.md&quot;&gt;iOS开发常用的第三方库、插件 - Swift&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://www.jianshu.com/p/e95f0cd77f94&quot;&gt;Swift常用的iOS开发第三方库&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://codertw.com/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80/707177/&quot;&gt;整理swift常用的第三方框架&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://juejin.im/post/6844904112614539278&quot;&gt;swift 常用第三方框架&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;swift面向协议编程&quot;&gt;Swift面向协议编程&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;https://luowei.github.io/https://juejin.im/post/6844903794333974536&quot;&gt;Swift 面向协议编程的那些事&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://swift.gg/2019/09/05/protocol-oriented-programming/&quot;&gt;SwiftGG Swift 中的面向协议编程：引言&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://www.jianshu.com/p/9bad7185c863&quot;&gt;Swift - 面向协议编程（POP）&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://juejin.im/post/6844903928446844935&quot;&gt;Swift面向协议编程(POP)&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://a1049145827.github.io/2018/02/26/Swift-%E9%9D%A2%E5%90%91%E5%8D%8F%E8%AE%AE%E7%BC%96%E7%A8%8B-%E7%BB%84%E4%BB%B6%E5%8C%96/&quot;&gt;Swift 面向协议编程/组件化&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;最新的swiftui相关知识点&quot;&gt;最新的SwiftUI相关知识点&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;https://luowei.github.io/https://objccn.io/products/swift-ui&quot;&gt;SwiftUI 与 Combine 编程&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;其他&quot;&gt;其他&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;异或-交换两变量的值原理&lt;/strong&gt;&lt;br /&gt; &lt;img src=&quot;https://luowei.github.io/media/15995030718262/15995825084296.jpg&quot; alt=&quot;&quot; /&gt; &lt;strong&gt;不建议在实际使用中采用这样的写法&lt;/strong&gt;。这种奇技淫巧虽然看起来十分巧妙，但这样并不见得能够比朴素的交换来的更快。而且这种方法存在一个缺陷：如果 a 和 b 引用的是同一个变量的话，使用这种方法会使得这个变量变为0。&lt;/p&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/15995030718262.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/15995030718262</guid> <pubDate>Wed, 09 Sep 2020 00:00:00 +0800</pubDate> </item> <item> <title>把多张图片快速合并成一个pdf文件</title> <description> &lt;h1 id=&quot;把多张图片快速合并成一个pdf文件&quot;&gt;把多张图片快速合并成一个pdf文件&lt;/h1&gt; &lt;h2 id=&quot;img2pdf方案&quot;&gt;img2pdf方案&lt;/h2&gt; &lt;p&gt;安装img2pdf,参考：https://gitlab.mister-muffin.de/josch/img2pdf；&lt;br /&gt; 建意把源码下下来，在源码目录下直接使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pip3 install .&lt;/code&gt;安装，安装好后使用以下命令即可把多张图片转成一个pdf。&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;img2pdf *.png *.jpg -o out.pdf &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;使用万能的-imagemagick&quot;&gt;使用万能的 imagemagick&lt;/h2&gt; &lt;p&gt;使用brew安装好 imagemagick&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew install imagemagick &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;如果安装失败，使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo chown -R $(whoami) $(brew --prefix)/*&lt;/code&gt;，或者：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo mkdir /usr/local/Frameworks sudo chown $USER /usr/local/Frameworks &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;转成pdf&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;convert *.jpg output.pdf convert -quality 60 *.jpg output.pdf &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;如果是window，可以使用 cygwin 安装 imagemagick 。&lt;/p&gt; &lt;h2 id=&quot;把pdf导出成一张张imagehtmltext&quot;&gt;把PDF导出成一张张image/html/text&lt;/h2&gt; &lt;p&gt;使用XpdfReader项目：&lt;a href=&quot;https://luowei.github.io/https://www.xpdfreader.com/pdftoppm-man.html&quot;&gt;https://www.xpdfreader.com/pdftoppm-man.html&lt;/a&gt;&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pdftopng ./aaa.pdf ./aaa &lt;span class=&quot;c&quot;&gt;# 导出成png图片&lt;/span&gt; pdftohtml ./aaa.pdf ./aaa &lt;span class=&quot;c&quot;&gt;# 导出html并放到生成的aaa目录下 &lt;/span&gt; pdftotext ./aaa.pdf ./text &lt;span class=&quot;c&quot;&gt;# 导出html并放到生成的aaa目录下 &lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;如果是要把html生成为pdf&quot;&gt;如果是要把html生成为pdf&lt;/h2&gt; &lt;p&gt;使用wkhtmltopdf是一个不错的选择，官方地址：&lt;a href=&quot;https://luowei.github.io/https://wkhtmltopdf.org/&quot;&gt;https://wkhtmltopdf.org/&lt;/a&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;wkhtmltopdf http://localhost/aaaa.html $HOME/doc_pdf/check.pdf &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;其他&quot;&gt;其他&lt;/h2&gt; &lt;p&gt;imagemagick安装好后，可能会有以下环境变量设置的提示：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;==&amp;gt; glib Bash completion has been installed to: /usr/local/etc/bash_completion.d ==&amp;gt; docbook To use the DocBook package in your XML toolchain, you need to add the following to your ~/.bashrc: export XML_CATALOG_FILES=&quot;/usr/local/etc/xml/catalog&quot; ==&amp;gt; gnu-getopt gnu-getopt is keg-only, which means it was not symlinked into /usr/local, because macOS already provides this software and installing another version in parallel can cause all kinds of trouble. If you need to have gnu-getopt first in your PATH run: echo &apos;export PATH=&quot;/usr/local/opt/gnu-getopt/bin:$PATH&quot;&apos; &amp;gt;&amp;gt; ~/.zshrc Bash completion has been installed to: /usr/local/opt/gnu-getopt/etc/bash_completion.d ==&amp;gt; libtool In order to prevent conflicts with Apple&apos;s own libtool we have prepended a &quot;g&quot; so, you have instead: glibtool and glibtoolize. ==&amp;gt; guile Guile libraries can now be installed here: Source files: /usr/local/share/guile/site/3.0 Compiled files: /usr/local/lib/guile/3.0/site-ccache Extensions: /usr/local/lib/guile/3.0/extensions Add the following to your .bashrc or equivalent: export GUILE_LOAD_PATH=&quot;/usr/local/share/guile/site/3.0&quot; export GUILE_LOAD_COMPILED_PATH=&quot;/usr/local/lib/guile/3.0/site-ccache&quot; export GUILE_SYSTEM_EXTENSIONS_PATH=&quot;/usr/local/lib/guile/3.0/extensions&quot; ==&amp;gt; unbound To have launchd start unbound now and restart at startup: sudo brew services start unbound ==&amp;gt; gnutls If you are going to use the Guile bindings you will need to add the following to your .bashrc or equivalent in order for Guile to find the TLS certificates database: export GUILE_TLS_CERTIFICATE_DIRECTORY=/usr/local/etc/gnutls/ ==&amp;gt; icu4c icu4c is keg-only, which means it was not symlinked into /usr/local, because macOS provides libicucore.dylib (but nothing else). If you need to have icu4c first in your PATH run: echo &apos;export PATH=&quot;/usr/local/opt/icu4c/bin:$PATH&quot;&apos; &amp;gt;&amp;gt; ~/.zshrc echo &apos;export PATH=&quot;/usr/local/opt/icu4c/sbin:$PATH&quot;&apos; &amp;gt;&amp;gt; ~/.zshrc For compilers to find icu4c you may need to set: export LDFLAGS=&quot;-L/usr/local/opt/icu4c/lib&quot; export CPPFLAGS=&quot;-I/usr/local/opt/icu4c/include&quot; For pkg-config to find icu4c you may need to set: export PKG_CONFIG_PATH=&quot;/usr/local/opt/icu4c/lib/pkgconfig&quot; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/shell/15995586002980.html</link> <guid>https://luowei.github.io/shell/15995586002980</guid> <pubDate>Tue, 08 Sep 2020 00:00:00 +0800</pubDate> </item> <item> <title>iOS问题汇总之iOS应用 - Web Hybrid混合页面开发关键点</title> <description> &lt;h1 id=&quot;ios问题汇总之ios应用---web-hybrid混合页面开发关键点&quot;&gt;iOS问题汇总之iOS应用 - Web Hybrid混合页面开发关键点&lt;/h1&gt; &lt;h2 id=&quot;web-hybrid关键点&quot;&gt;Web Hybrid关键点&lt;/h2&gt; &lt;h3 id=&quot;hybridweb混合页面&quot;&gt;HybridWeb混合页面&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;视图结构&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;safeAreaView(UIView) |——searchBar(UIView) |——scrollView(UIScrollView) |——contentView(UIView) |——bannerView(UIView) |——mainWebView(WKWebView) &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;需要根据&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;document.body.offsetHeight&lt;/code&gt;动态更新WebView的高度，以保证只有最外层的Scroll有效&lt;/strong&gt;&lt;/p&gt; &lt;pre&gt;&lt;code class=&quot;language-oc&quot;&gt;- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary&amp;lt;NSKeyValueChangeKey, id&amp;gt; *)change context:(void *)context { if ([keyPath isEqualToString:@&quot;contentSize&quot;] &amp;amp;&amp;amp; self.canKVOSetScrollViewHeight) { [self evaluateJavaScript:@&quot;document.body.offsetHeight&quot; completionHandler:^(id _Nullable scrollHeight, NSError *_Nullable error) { CGFloat height = [scrollHeight floatValue]; if (self.webContentHeight != height &amp;amp;&amp;amp; height &amp;gt; 1) { self.webContentHeight = height; [self.mainWebView mas_updateConstraints:^(MASConstraintMaker *make) { make.height.mas_greaterThanOrEqualTo(self.webContentHeight); }]; [self.safeAreaView layoutIfNeeded]; } }]; } } &lt;/code&gt;&lt;/pre&gt; &lt;h2 id=&quot;virtualview虚拟视图jscore关键点&quot;&gt;VirtualView虚拟视图+JSCore关键点&lt;/h2&gt; &lt;h3 id=&quot;virtualview&quot;&gt;&lt;strong&gt;VirtualView&lt;/strong&gt;&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;CALayer的属性包装成虚拟视图结点；图层渲染前创建的过程，就是虚拟Node结点合并的过程;&lt;/li&gt; &lt;li&gt;KVO实现对Layout、颜色等属性变化的更新;&lt;/li&gt; &lt;li&gt;核心类VVViewContainer继承自UIView，所有视图组合的图层的承载容器；&lt;/li&gt; &lt;li&gt;自定属性结点可组合自定义UIView;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;VirtualViewDelegate&lt;/p&gt; &lt;pre&gt;&lt;code class=&quot;language-oc&quot;&gt;- (void)virtualViewClickedWithAction:(NSString *)action andValue:(NSString *)value; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;把一个类做成可字典方式取值与设值，实现两个方法即可：&lt;/p&gt; &lt;pre&gt;&lt;code class=&quot;language-oc&quot;&gt;- (JSValue *)objectForKeyedSubscript:(id)key ; - (void)setObject:(id)object forKeyedSubscript:(NSObject &amp;lt;NSCopying&amp;gt; *)key ; &lt;/code&gt;&lt;/pre&gt; &lt;h3 id=&quot;jscore与jscontext&quot;&gt;&lt;strong&gt;JSCore与JSContext&lt;/strong&gt;&lt;/h3&gt; &lt;p&gt;从UIWebView获得JSContext实例&lt;/p&gt; &lt;pre&gt;&lt;code class=&quot;language-oc&quot;&gt;self.webViewJSContext = [self.webView valueForKeyPath:@&quot;documentView.webView.mainFrame.javaScriptContext&quot;]; //注册native方法 self.webViewJSContext[@&quot;pnu_log&quot;] = ^(NSString *text) { PPDNativeLog(@&quot;[PPDNative] pnu_log:%@&quot;, text); // [[[UIAlertView alloc] initWithTitle:nil message:text delegate:nil cancelButtonTitle:@&quot;OK&quot; otherButtonTitles:nil] show]; }; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;直接生成JSContext实例&lt;/p&gt; &lt;pre&gt;&lt;code class=&quot;language-oc&quot;&gt;JSContext *jsContext = [[JSContext alloc] init]; [jsContext evaluateScript:jsText withSourceURL:[NSURL fileURLWithPath:jsPath]]; &lt;/code&gt;&lt;/pre&gt; &lt;h3 id=&quot;采用jscontext实现js调用原生使用案例&quot;&gt;&lt;strong&gt;采用JSContext实现JS调用原生,使用案例&lt;/strong&gt;&lt;/h3&gt; &lt;p&gt;注册native方法&lt;/p&gt; &lt;pre&gt;&lt;code class=&quot;language-oc&quot;&gt;self.webViewJSContext[@&quot;native_request&quot;] = ^(id value,JSValue *callback) { strongify(self) //把value构造成jsReuest JSRequest *jsRequest = [self jsRequestWithValue:value]; if(!jsRequest){ return; } jsRequest.successCallback = callback; jsRequest.errorCallback = callback; //拆解jsRequest，构造原生的网络请求 [self requestWithJSRequest:jsRequest]; }; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;JS端调用&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;nativeRequest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;responseCallback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;http://baidu.com/xxxx&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;POST&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;David&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;native_request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;responseString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;responseCallback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;responseString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;其他&quot;&gt;其他&lt;/h2&gt; &lt;h3 id=&quot;同步方法获得ios设备权限&quot;&gt;同步方法获得iOS设备权限&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;请求相机权限&lt;/strong&gt;&lt;/p&gt; &lt;pre&gt;&lt;code class=&quot;language-oc&quot;&gt;//请求相机权限 + (BOOL)checkCameraAccess { BOOL isPhotoSupport = [UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]; if(!isPhotoSupport){ [LWBaseViewController showHUDWithMessage:NSLocalizedString(@&quot;Not Surpport Camera&quot;, nil)]; return NO; } __block BOOL isSuccess = NO; dispatch_semaphore_t semaphore = dispatch_semaphore_create(0); dispatch_async(dispatch_get_global_queue(0, 0), ^{ [AVCaptureDevice requestAccessForMediaType:AVMediaTypeVideo completionHandler:^(BOOL granted) { //非主线程 if (granted) { isSuccess = YES; dispatch_semaphore_signal(semaphore); } else { dispatch_semaphore_signal(semaphore); } }]; }); dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER); return isSuccess; } &lt;/code&gt;&lt;/pre&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/15995026070817.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/15995026070817</guid> <pubDate>Tue, 08 Sep 2020 00:00:00 +0800</pubDate> </item> <item> <title>iOS问题汇总之iOS应用 - 浏览器及WKWebView关键点</title> <description> &lt;h1 id=&quot;ios问题汇总之ios应用---浏览器及wkwebview关键点&quot;&gt;iOS问题汇总之iOS应用 - 浏览器及WKWebView关键点&lt;/h1&gt; &lt;h2 id=&quot;wkwebview&quot;&gt;WKWebView&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;关键代码&lt;/strong&gt;&lt;/p&gt; &lt;pre&gt;&lt;code class=&quot;language-oc&quot;&gt;self.wkWebView.allowsBackForwardNavigationGestures = YES; [self.wkWebView addObserver:self forKeyPath:@&quot;estimatedProgress&quot; options:NSKeyValueObservingOptionNew context:nil]; [self.wkWebView addObserver:self forKeyPath:@&quot;title&quot; options:NSKeyValueObservingOptionNew context:nil]; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;&lt;strong&gt;关键类与方法&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;WKUserContentController&lt;/p&gt; &lt;p&gt;//添加消息处理&lt;/p&gt; &lt;pre&gt;&lt;code class=&quot;language-oc&quot;&gt;self.configuration.userContentController = [WKUserContentController new]; [self.configuration.userContentController addScriptMessageHandler:self name:@&quot;webViewReload&quot;]; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;//添加UserScript&lt;/p&gt; &lt;pre&gt;&lt;code class=&quot;language-oc&quot;&gt;\- (void)addUserScript:(WKUserScript *)userScript; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;//处理js端消息&lt;/p&gt; &lt;pre&gt;&lt;code class=&quot;language-oc&quot;&gt;\- (void)userContentController:(WKUserContentController *)userContentController didReceiveScriptMessage:(WKScriptMessage *)message; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;//处理当接收到验证窗口时&lt;/p&gt; &lt;pre&gt;&lt;code class=&quot;language-oc&quot;&gt;\- (void) webView:(WKWebView *)webView didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;//切换用户代理模式&lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;//私有方法：- (void)_setCustomUserAgent:(id)arg1;&lt;/code&gt;&lt;/p&gt; &lt;p&gt;WKNavigationDelegate&lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;decidePolicyForNavigationAction：&lt;/code&gt;&lt;/p&gt; &lt;p&gt;WKScriptMessageHandler&lt;/p&gt; &lt;p&gt;WKUIDelegate&lt;br /&gt; //处理页面的promt弹窗&lt;/p&gt; &lt;p&gt;//此方法可以让我们得知点击了哪个buttin,回传button index值&lt;br /&gt; UIActionSheetDelegate &lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex&lt;/code&gt;&lt;/p&gt; &lt;p&gt;WKWebViewConfiguration WKProcessPool 单例&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;configuration.processPool = [WKProcessPool new]; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;//判断跳转类型,在做容器内外跳转可借用&lt;/p&gt; &lt;pre&gt;&lt;code class=&quot;language-oc&quot;&gt;\- (void)webView:(WKWebView *)webView didFinishNavigation:(WKNavigation *)navigation if(navigationAction.navigationType == WKNavigationTypeReload || navigationAction.navigationType == WKNavigationTypeBackForward || navigationAction.navigationType == WKNavigationTypeFormSubmitted || navigationAction.navigationType == WKNavigationTypeFormResubmitted ){ decisionHandler(WKNavigationActionPolicyAllow); return; } &lt;/code&gt;&lt;/pre&gt; &lt;h2 id=&quot;adblockrules&quot;&gt;AdblockRules&lt;/h2&gt; &lt;h3 id=&quot;基本过滤规则&quot;&gt;基本过滤规则&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;参考：&lt;/strong&gt;&lt;a href=&quot;https://luowei.github.io/https://blog.csdn.net/qq_36450004/article/details/105660153&quot;&gt;AdblockPlus拦截规则简单教程&lt;/a&gt;&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;ul&gt; &lt;li&gt;通配符；&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;@@表示例外规则符；&lt;/li&gt; &lt;li&gt; &lt;table&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;管道符&lt;/td&gt; &lt;td&gt;表示过滤规则终止；&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;/li&gt; &lt;li&gt; &lt;table&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;双管道符&lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;td&gt;表示域名前匹配；&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;/li&gt; &lt;li&gt;标记分隔符^表示单个分隔符的占位符。有时，您可能需要在过滤器中接受任何分隔符。分隔符可以是任何东西，除了一个字母，一个数字或以下情况之一：_，-，.，%。地址的末尾也可被视作一个分隔符。&lt;/li&gt; &lt;li&gt;感叹号!表示注释。!开头的行会被默认为注释行，不被执行。&lt;/li&gt; &lt;li&gt;$表示过滤器选项；&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;strong&gt;规则库：&lt;/strong&gt;&lt;a href=&quot;https://luowei.github.io/https://easylist.to/&quot;&gt;EasyList&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;ad request 拦截原理&lt;/strong&gt;&lt;br /&gt; 关键方法：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;e.preventDefault();&lt;/code&gt;&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;filter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;AdBlocker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;checkFilterMatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;tagType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;documentHost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;filter&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;BlockingFilter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;preventDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;......&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h3 id=&quot;无图模式原理&quot;&gt;无图模式原理&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;js修改document加载行为&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;beforeload&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ImageBlocker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;blockImages&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/*blockImages beforeload*/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ImageBlocker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;blockImages&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;isImage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/.jpg/i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/.png/i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/.gif/i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/.jpeg/i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/.bmp/i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;isImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;preventDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;isImgTag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tagName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;IMG&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;isImgTag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;preventDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/*替换background-image*/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ImageBlocker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;removeBackgroundImages&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//alert(&apos;=====removeBackgroundImages&apos;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ImageBlocker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;enable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bgImgs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;querySelectorAll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;*[style^=&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&quot;background-image:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&quot;]&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bgImgs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bgImg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bgImgs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bgImg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;backgroundImage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h3 id=&quot;cookie注入两种方法&quot;&gt;Cookie注入两种方法&lt;/h3&gt; &lt;ol&gt; &lt;li&gt;swizzle loadRequest &lt;pre&gt;&lt;code class=&quot;language-oc&quot;&gt;[WKWebView lwwk_swizzleMethod:@selector(loadRequest:) withMethod:@selector(myLoadRequest:)]; &lt;/code&gt;&lt;/pre&gt; &lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;strong&gt;分iOS11以下与iOS11以上不同&lt;/strong&gt;&lt;br /&gt; iOS11以下，直接：&lt;/p&gt; &lt;pre&gt;&lt;code class=&quot;language-oc&quot;&gt;NSDictionary&amp;lt;NSString *, NSString *&amp;gt; *requestHeaderFields = [NSHTTPCookie requestHeaderFieldsWithCookies:cookies]; [mRequest setHTTPShouldHandleCookies:YES]; [mRequest setAllHTTPHeaderFields:requestHeaderFields]; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;iOS11以上，要注意 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setCookie:completionHandler:^{}&lt;/code&gt; 可能不会回调的bug;&lt;/p&gt; &lt;ol&gt; &lt;li&gt;使用js方法：使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;wkWebView evaluateJavaScript:@&quot;document.cookie&quot;&lt;/code&gt; 方法；&lt;/li&gt; &lt;/ol&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/15994965110931.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/15994965110931</guid> <pubDate>Tue, 08 Sep 2020 00:00:00 +0800</pubDate> </item> <item> <title>驾考科目三灯光表(附长沙市天心大托考场线路图)</title> <description> &lt;h1 id=&quot;驾考科目三灯光表附长沙市天心大托考场线路图&quot;&gt;驾考科目三灯光表(附长沙市天心大托考场线路图)&lt;/h1&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/15975082384466/g.png&quot; alt=&quot;g&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;​注：&lt;/strong&gt;考场线路图仅供参考，考试以现场实际线路为准​。&lt;/p&gt; &lt;p&gt;以下是C2自动挡考试灯光​表： &lt;br /&gt; &lt;img src=&quot;https://luowei.github.io/media/15975082384466/c.png&quot; alt=&quot;c&quot; /&gt;&lt;/p&gt; &lt;p&gt;以下是C1手动挡考试灯光表： &lt;br /&gt; &lt;img src=&quot;https://luowei.github.io/media/15975082384466/15975093926035.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;附：长沙市天心大托考场线路图 &lt;br /&gt; &lt;img src=&quot;https://luowei.github.io/media/15975082384466/f.png&quot; alt=&quot;f&quot; /&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E9%A9%BE%E8%80%83/15975082384466.html</link> <guid>https://luowei.github.io/%E9%A9%BE%E8%80%83/15975082384466</guid> <pubDate>Sun, 16 Aug 2020 00:00:00 +0800</pubDate> </item> <item> <title>macOS的say命令使用详解</title> <description> &lt;h1 id=&quot;macos的say命令使用详解&quot;&gt;macOS的say命令使用详解&lt;/h1&gt; &lt;h2 id=&quot;voice列表&quot;&gt;voice列表&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;(base) ➜ ~ say -v &apos;?&apos; Alex en_US # Most people recognize me by my voice. Alice it_IT # Salve, mi chiamo Alice e sono una voce italiana. Alva sv_SE # Hej, jag heter Alva. Jag är en svensk röst. Amelie fr_CA # Bonjour, je m’appelle Amelie. Je suis une voix canadienne. Anna de_DE # Hallo, ich heiße Anna und ich bin eine deutsche Stimme. Carmit he_IL # שלום. קוראים לי כרמית, ואני קול בשפה העברית. Damayanti id_ID # Halo, nama saya Damayanti. Saya berbahasa Indonesia. Daniel en_GB # Hello, my name is Daniel. I am a British-English voice. Diego es_AR # Hola, me llamo Diego y soy una voz española. Ellen nl_BE # Hallo, mijn naam is Ellen. Ik ben een Belgische stem. Fiona en-scotland # Hello, my name is Fiona. I am a Scottish-English voice. Fred en_US # I sure like being inside this fancy computer Ioana ro_RO # Bună, mă cheamă Ioana . Sunt o voce românească. Joana pt_PT # Olá, chamo-me Joana e dou voz ao português falado em Portugal. Jorge es_ES # Hola, me llamo Jorge y soy una voz española. Juan es_MX # Hola, me llamo Juan y soy una voz mexicana. Kanya th_TH # สวัสดีค่ะ ดิฉันชื่อKanya Karen en_AU # Hello, my name is Karen. I am an Australian-English voice. Kyoko ja_JP # こんにちは、私の名前はKyokoです。日本語の音声をお届けします。 Laura sk_SK # Ahoj. Volám sa Laura . Som hlas v slovenskom jazyku. Lekha hi_IN # नमस्कार, मेरा नाम लेखा है. मैं हिन्दी में बोलने वाली आवाज़ हूँ. Luca it_IT # Salve, mi chiamo Luca e sono una voce italiana. Luciana pt_BR # Olá, o meu nome é Luciana e a minha voz corresponde ao português que é falado no Brasil Maged ar_SA # مرحبًا اسمي Maged. أنا عربي من السعودية. Mariska hu_HU # Üdvözlöm! Mariska vagyok. Én vagyok a magyar hang. Mei-Jia zh_TW # 您好，我叫美佳。我說國語。 Melina el_GR # Γεια σας, ονομάζομαι Melina. Είμαι μια ελληνική φωνή. Milena ru_RU # Здравствуйте, меня зовут Milena. Я – русский голос системы. Moira en_IE # Hello, my name is Moira. I am an Irish-English voice. Monica es_ES # Hola, me llamo Monica y soy una voz española. Nora nb_NO # Hei, jeg heter Nora. Jeg er en norsk stemme. Paulina es_MX # Hola, me llamo Paulina y soy una voz mexicana. Rishi en_IN # Hello, my name is Rishi. I am an Indian-English voice. Samantha en_US # Hello, my name is Samantha. I am an American-English voice. Sara da_DK # Hej, jeg hedder Sara. Jeg er en dansk stemme. Satu fi_FI # Hei, minun nimeni on Satu. Olen suomalainen ääni. Sin-ji zh_HK # 您好，我叫 Sin-ji。我講廣東話。 Tessa en_ZA # Hello, my name is Tessa. I am a South African-English voice. Thomas fr_FR # Bonjour, je m’appelle Thomas. Je suis une voix française. Ting-Ting zh_CN # 您好，我叫Ting-Ting。我讲中文普通话。 Veena en_IN # Hello, my name is Veena. I am an Indian-English voice. Victoria en_US # Isn&apos;t it nice to have a computer that will talk to you? Xander nl_NL # Hallo, mijn naam is Xander. Ik ben een Nederlandse stem. Yelda tr_TR # Merhaba, benim adım Yelda. Ben Türkçe bir sesim. Yuna ko_KR # 안녕하세요. 제 이름은 Yuna입니다. 저는 한국어 음성입니다. Yuri ru_RU # Здравствуйте, меня зовут Yuri. Я – русский голос системы. Zosia pl_PL # Witaj. Mam na imię Zosia, jestem głosem kobiecym dla języka polskiego. Zuzana cs_CZ # Dobrý den, jmenuji se Zuzana. Jsem český hlas. &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/macos/15974170272446.html</link> <guid>https://luowei.github.io/macos/15974170272446</guid> <pubDate>Fri, 14 Aug 2020 00:00:00 +0800</pubDate> </item> <item> <title>黄道二十八星宿</title> <description> &lt;h1 id=&quot;黄道二十八星宿&quot;&gt;黄道二十八星宿&lt;/h1&gt; &lt;p&gt;&lt;strong&gt;二十八宿&lt;/strong&gt;&lt;br /&gt; 二十八宿，是黄道附近二十八组星象的总称。上古时代人们根据日月星辰的运行轨迹和位置，把黄道附近的星象划分为二十八组，俗称“二十八宿”。古人选择黄道赤道附近的二十八个组星象作为坐标，以此作为观测天象参照物。因为它们环列在日、月、五星的四方，很像日、月、五星栖宿的场所，所以称作“宿”。二十八宿分为东南西北四方各分为七宿，即为“四象”：东方苍龙，南方朱雀，西方白虎，北方玄武。二十八宿是中国古代天文学家的重要创作。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/15972586588326/aaa.jpg&quot; alt=&quot;aaa&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;东方青龙&lt;/strong&gt;：龙是东方的七宿——角、亢、氐、房、心、尾、箕，而这七宿的形状又极似龙形，从他们的字义上就可以看出来，角是龙的角，亢是颈项，氐是本，而是颈根，房是膀，是胁，心是心脏，尾是尾，箕是尾末。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;南方朱雀&lt;/strong&gt;：易经的四象是老阳、老阴、少阳、少阴，而在风水学的四象学，就是“左青龙、右白虎、前朱雀、后玄武”。经曰：“夫玄武拱北，朱雀峙南，青龙蟠东，白虎踞西，四势本应四方之气，而穴居位乎中央，故得其柔顺之气则吉，反此则凶”。朱雀是四灵之一，也和其他三种一样，它是出自星宿的，是南方七宿的总称：井、鬼、柳、星、张、翼、轸。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;西方白虎&lt;/strong&gt;：白虎也是战神、杀伐之神。白虎具有避邪、禳灾、祈丰及惩恶的扬善、发财致富、喜结良缘等多种神力。而它是四灵之一，当然也是由星宿变成的。是由二十八星宿之中，位西方七宿：奎、娄、胃、昴、毕、觜、参。所以是西方的代表，而它的白，是因是西方，西方在五行中属金，色是白的。所以它叫白虎不是因它是白色，而是从五行中说的了。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;北方玄武&lt;/strong&gt;：玄武是一种由龟和蛇组合成的一种灵物。玄武的本意就是玄冥，武、冥古音是相通的。武，是黑的意思；冥，就是阴的意思。但玄武被后世的道士们升级做北方的大帝“真武大帝”。有别于其他三灵。七宿是斗、牛、女、虚、危、室、壁。&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;东方七宿：角，木蛟；亢，金龙；氐，土貉；房，日兔；心，月狐；尾，火虎；箕，水豹。 北方七宿：斗，木獬；牛，金牛；女，土蝠；虚，日鼠；危，月燕；室，火猪；壁，水貐。 西方七宿：奎，木狼；娄，金狗；胃，土雉；昴，日鸡；毕，月乌；觜，火猴；参，水猿。 南方七宿：井，木犴；鬼，金羊；柳，土獐；星，日马；张，月鹿；翼，火蛇；轸，水蚓。 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/%E6%97%A5%E5%8E%86/15972586588326.html</link> <guid>https://luowei.github.io/%E6%97%A5%E5%8E%86/15972586588326</guid> <pubDate>Thu, 13 Aug 2020 00:00:00 +0800</pubDate> </item> <item> <title>建除十二神</title> <description> &lt;h1 id=&quot;建除十二神&quot;&gt;建除十二神&lt;/h1&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/15972585387473/15972593448915.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;建除十二神，中国民俗信仰中的十二位神明，分别为建、除、满、平、定、执、破、危、成、收、开、闭。这十二位神明每日轮值，周而复始，负责保护凡间人民的平安。在传统农民历中，二十八宿下，通常会依序在每日标注上今日轮值神名，作为择日吉凶的参考，称为十二建除日。&lt;/p&gt; &lt;h3 id=&quot;择日参考&quot;&gt;择日参考&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;建日&lt;/strong&gt;&lt;br /&gt; 健旺之气。行军、外出、求财、谒贵、上书都是好日子，如寄履历表求职，或到上司家拜访，找亲朋好友周转一下，选此建日即对了。建日为该月最吉祥的日子。本日不可动土、开仓。&lt;br /&gt; &lt;strong&gt;除日&lt;/strong&gt;&lt;br /&gt; 为除旧布新之象。除服、疗病、避邪、出行、嫁娶都是好日子，如有久病想找个日子换医生试试不妨选择除日，效果甚佳。不可求官、上任、开张、搬家。逢除日不到上司家，以免吃力不讨好，新官上任更不可选在除日，以免官运受阻，断送前程。&lt;br /&gt; &lt;strong&gt;满日&lt;/strong&gt;&lt;br /&gt; 为丰收圆满之意。祈福、结亲、开市都是好日子，如好友想结拜成兄弟，或准备替小孩认干爹，选择满日最好。不可服药、栽种、下葬、求医疗病、上官赴任。&lt;br /&gt; &lt;strong&gt;平日&lt;/strong&gt;&lt;br /&gt; 平者平常也，无凶无吉之日。一般修屋、求福、外出、求财、嫁娶都可以用平日。&lt;br /&gt; &lt;strong&gt;定日&lt;/strong&gt;&lt;br /&gt; 按定为不动，不动则为死气。因此定日诸事不宜，只可做计划性的工作，尤其打官司如逢定日必不妙。&lt;br /&gt; &lt;strong&gt;执日&lt;/strong&gt;&lt;br /&gt; 为固执之意，执持操守也。司法警察人员，选择执日抓人最好不过了，十拿九稳。一般执日宜祈福、祭祀、求子、结婚、立约。忌搬家、远行。&lt;br /&gt; &lt;strong&gt;破日&lt;/strong&gt;&lt;br /&gt; 为刚旺破败之日，万事皆忘，婚姻不谐。惟宜求医疗病及赴考求名。逢破日，不宜多管闲事。&lt;br /&gt; &lt;strong&gt;危日&lt;/strong&gt;&lt;br /&gt; 为危险之意。最忌登高、冒险，喜登山踏青的朋友，逢危日就应该特别小心。&lt;br /&gt; &lt;strong&gt;成日&lt;/strong&gt;&lt;br /&gt; 为成功、成就、结果之意。凡事皆有成，祈福、入学、开市、嫁娶、求医、远行、移徙、上任都是好日子。但不宜打官司，否则必定赢不了。&lt;br /&gt; &lt;strong&gt;收日&lt;/strong&gt;&lt;br /&gt; 为收成之意。经商开市、外出求财，买屋签约、嫁娶订盟诸事吉利。&lt;br /&gt; &lt;strong&gt;开日&lt;/strong&gt;&lt;br /&gt; 为开放、开心之意。除了埋葬主大凶外，凡事求财、求子、求缘、求职、求名都是好日子。&lt;br /&gt; &lt;strong&gt;闭日&lt;/strong&gt;&lt;br /&gt; 坚固之意。最宜埋葬，代表能富贵大吉大利。逢闭日不宜看眼睛及求医 问学。外出经商，上任就职，逢闭日也不理想。&lt;/p&gt; </description> <link>https://luowei.github.io/%E6%97%A5%E5%8E%86/15972585387473.html</link> <guid>https://luowei.github.io/%E6%97%A5%E5%8E%86/15972585387473</guid> <pubDate>Thu, 13 Aug 2020 00:00:00 +0800</pubDate> </item> <item> <title>二十四节气简表美图</title> <description> &lt;h1 id=&quot;二十四节气简表美图&quot;&gt;二十四节气简表美图&lt;/h1&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/15972393395932/15972400275652.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;农历月份通常包含一个节气和一个中气，如惊蛰／春分等等，若某农历月份只有节气而没有中气，历法便会把该月作为上个月的闰月。古代历法以太阳历二十四气配阴历十二月，阴历每月二气：在月初的叫节令，在月中以后的叫中气。如立春为正月节令，雨水为正月中气。&lt;/p&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;月份&lt;/th&gt; &lt;th&gt;节令(节)&lt;/th&gt; &lt;th&gt;中气(气)&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;正月&lt;/td&gt; &lt;td&gt;立春&lt;/td&gt; &lt;td&gt;雨水&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;二月&lt;/td&gt; &lt;td&gt;惊蛰&lt;/td&gt; &lt;td&gt;春分&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;三月&lt;/td&gt; &lt;td&gt;清明&lt;/td&gt; &lt;td&gt;谷雨&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;四月&lt;/td&gt; &lt;td&gt;立夏&lt;/td&gt; &lt;td&gt;小满&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;五月&lt;/td&gt; &lt;td&gt;芒种&lt;/td&gt; &lt;td&gt;夏至&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;六月&lt;/td&gt; &lt;td&gt;小暑&lt;/td&gt; &lt;td&gt;大暑&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;七月&lt;/td&gt; &lt;td&gt;立秋&lt;/td&gt; &lt;td&gt;处暑&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;八月&lt;/td&gt; &lt;td&gt;白露&lt;/td&gt; &lt;td&gt;秋分&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;九月&lt;/td&gt; &lt;td&gt;寒露&lt;/td&gt; &lt;td&gt;霜降&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;十月&lt;/td&gt; &lt;td&gt;立冬&lt;/td&gt; &lt;td&gt;小雪&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;冬月&lt;/td&gt; &lt;td&gt;大雪&lt;/td&gt; &lt;td&gt;冬至&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;腊月&lt;/td&gt; &lt;td&gt;小寒&lt;/td&gt; &lt;td&gt;大寒&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p&gt;廿四个节气分别为：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;立春、雨水、惊蛰、春分、清明、谷雨、立夏、小满、芒种、夏至、小暑、大暑、立秋、处暑、白露、秋分、寒露、霜降、立冬、小雪、大雪、冬至、小寒、大寒&lt;/code&gt;。 节气中的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;立春、惊蛰、清明、立夏、芒种、小暑、立秋、白露、寒露、立冬、大雪、小寒&lt;/code&gt;，分别为干支历&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;寅月、卯月、辰月、巳月、午月、未月、申月、酉月、戌月、亥月、子月、丑月&lt;/code&gt;的起始。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/15972393395932/15972400831648.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/15972393395932/15972401301042.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/15972393395932/15972401621355.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E5%85%B6%E4%BB%96/15972393395932.html</link> <guid>https://luowei.github.io/%E5%85%B6%E4%BB%96/15972393395932</guid> <pubDate>Wed, 12 Aug 2020 00:00:00 +0800</pubDate> </item> <item> <title>如何下载AppStore上的ipa文件</title> <description> &lt;h1 id=&quot;如何下载appstore上的ipa文件&quot;&gt;如何下载AppStore上的ipa文件&lt;/h1&gt; &lt;h3 id=&quot;方法一&quot;&gt;方法一：&lt;/h3&gt; &lt;ol&gt; &lt;li&gt;mac上安装并打开Apple Configurator 2(AC2)；&lt;/li&gt; &lt;li&gt;在AC2上使用Apple Id登录登录后，连接iOS设备；&lt;/li&gt; &lt;li&gt; &lt;p&gt;在iOS设置视图上右键 -&amp;gt; 添加 -&amp;gt; 应用，并在打开的界面中选择要下载的应用,点添加； &lt;img src=&quot;https://luowei.github.io/media/15969015206167/15969017618551.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;/li&gt; &lt;li&gt;然后会开始下载，下载完成后会弹出对话框、不要急着安装替换或停止，先去文件夹(/Users/luowei/Library/Group\ Containers/K36BKF7T3D.group.com.apple.configurator/Library/Caches/Assets/TemporaryItems/MobileApps )把ipa复制出来，即可。&lt;/li&gt; &lt;/ol&gt; &lt;h3 id=&quot;方法二&quot;&gt;方法二&lt;/h3&gt; &lt;p&gt;在mac上使用iMazing,连接好设备好选应用，再选应用管理，再登录Apple Id，再选从App Store添加，然后在搜索框中搜索，并下载，下载完成后，从资料库中把ipa拷出来即可，也可以使用iMazing自带的导出ipa功能导出。 &lt;img src=&quot;https://luowei.github.io/media/15969015206167/15969023857580.jpg&quot; alt=&quot;资料库&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/15969015206167/15969021592377.jpg&quot; alt=&quot;管理应用程序&quot; /&gt;&lt;/p&gt; &lt;h3 id=&quot;把ipa安装到ios设备&quot;&gt;把ipa安装到iOS设备&lt;/h3&gt; &lt;p&gt;把ipa安装包，拖到 &lt;a href=&quot;https://luowei.github.io/http://www.cydiaimpactor.com&quot;&gt;Cydia Impactor&lt;/a&gt; 上即可安装到iOS设备，安装的过程中要输入Apple ID与密码，如果Apple ID开启了两步验证，就去&lt;a href=&quot;https://appleid.apple.com&quot;&gt;appleid.apple.com&lt;/a&gt;登录生成一个专用密码登录。 &lt;img src=&quot;https://luowei.github.io/media/15969015206167/15969027353737.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;注：当然如果只是想把iphone上的应用安装到ipad上，直接在Appstore登录后，点头像-&amp;gt; 选 已购项目-&amp;gt; 我的购买项目 -&amp;gt; 搜索想要安装的app名安装即可。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;参考：&lt;/strong&gt; &lt;a href=&quot;https://luowei.github.io/https://medium.com/xcnotes/how-to-download-ipa-from-app-store-43e04b3d0332&quot;&gt;How to download an .ipa from App Store&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/ios/15969015206167.html</link> <guid>https://luowei.github.io/ios/15969015206167</guid> <pubDate>Sun, 09 Aug 2020 00:00:00 +0800</pubDate> </item> <item> <title>iOS 越狱知识大全</title> <description> &lt;h1 id=&quot;ios-越狱知识大全&quot;&gt;iOS 越狱知识大全&lt;/h1&gt; &lt;p&gt;Taig iOS 越狱 QA 大全：&lt;a href=&quot;https://luowei.github.io/https://taig9.com/apps-and-tweaks&quot;&gt;https://taig9.com/apps-and-tweaks&lt;/a&gt;&lt;/p&gt; &lt;p&gt;Cydia and Sileo 软件源 &lt;a href=&quot;https://luowei.github.io/https://cydia-app.com/repo-sources&quot;&gt;https://taig9.com/apps-and-tweaks&lt;/a&gt;&lt;/p&gt; &lt;p&gt;15个最好的 Cydia 替代者：&lt;a href=&quot;https://luowei.github.io/https://cydia-app.com/alternative&quot;&gt;https://taig9.com/apps-and-tweaks&lt;/a&gt;&lt;/p&gt; &lt;p&gt;AppValley 安装：&lt;a href=&quot;https://luowei.github.io/https://cydia-app.com/appvalley&quot;&gt;https://taig9.com/apps-and-tweaks&lt;/a&gt;&lt;/p&gt; &lt;p&gt;TopStore App：&lt;a href=&quot;https://luowei.github.io/https://cydia-app.com/topstore&quot;&gt;https://taig9.com/apps-and-tweaks&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E8%B6%8A%E7%8B%B1/15968848422904.html</link> <guid>https://luowei.github.io/%E8%B6%8A%E7%8B%B1/15968848422904</guid> <pubDate>Sun, 09 Aug 2020 00:00:00 +0800</pubDate> </item> <item> <title>APP运营投稿社区</title> <description> &lt;h1 id=&quot;app运营投稿社区&quot;&gt;APP运营投稿社区&lt;/h1&gt; &lt;p&gt;&lt;strong&gt;应用社区&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;小众软件：&lt;a href=&quot;https://luowei.github.io/https://www.appinn.com&quot;&gt;www.appinn.com&lt;/a&gt;&lt;/p&gt; &lt;p&gt;创造者日报：&lt;a href=&quot;https://luowei.github.io/https://creatorsdaily.com&quot;&gt;creatorsdaily.com&lt;/a&gt;&lt;/p&gt; &lt;p&gt;最美应用：&lt;a href=&quot;https://luowei.github.io/http://zuimeia.com&quot;&gt;zuimeia.com&lt;/a&gt;&lt;/p&gt; &lt;p&gt;少数派：&lt;a href=&quot;https://luowei.github.io/https://sspai.com&quot;&gt;sspai.com&lt;/a&gt;&lt;/p&gt; &lt;p&gt;知乎iOS应用推荐话题：&lt;a href=&quot;https://luowei.github.io/https://www.zhihu.com/topic/19769897/top-answers&quot;&gt;www.zhihu.com/topic/19769897/top-answers&lt;/a&gt;&lt;/p&gt; &lt;p&gt;APP不释手-优质应用推荐：微信小程序&lt;/p&gt; &lt;hr /&gt; &lt;p&gt;&lt;strong&gt;运营社区(不收软文)&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;运营喵：&lt;a href=&quot;https://luowei.github.io/https://www.yymiao.cn/&quot;&gt;https://www.yymiao.cn/&lt;/a&gt;&lt;/p&gt; &lt;p&gt;运营派：&lt;a href=&quot;https://luowei.github.io/https://www.yunyingpai.com/&quot;&gt;https://www.yunyingpai.com/&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/app/15967419148255.html</link> <guid>https://luowei.github.io/app/15967419148255</guid> <pubDate>Sun, 09 Aug 2020 00:00:00 +0800</pubDate> </item> <item> <title>Makefile使用指南</title> <description> &lt;h1 id=&quot;makefile使用指南&quot;&gt;Makefile使用指南&lt;/h1&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/15967351089829/makefile0.png&quot; alt=&quot;makefile0&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15967351089829/makefile1.png&quot; alt=&quot;makefile1&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15967351089829/makefile2.png&quot; alt=&quot;makefile2&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15967351089829/makefile3.png&quot; alt=&quot;makefile3&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15967351089829/makefile4.png&quot; alt=&quot;makefile4&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15967351089829/makefile5.png&quot; alt=&quot;makefile5&quot; /&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/shell/15967351089829.html</link> <guid>https://luowei.github.io/shell/15967351089829</guid> <pubDate>Sun, 09 Aug 2020 00:00:00 +0800</pubDate> </item> <item> <title>iMac一体机配置单</title> <description> &lt;h1 id=&quot;imac一体机配置单&quot;&gt;iMac一体机配置单&lt;/h1&gt; &lt;h2 id=&quot;电脑配置清单&quot;&gt;电脑配置清单&lt;/h2&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;名称&lt;/th&gt; &lt;th&gt;型号&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;处理器(CPU)&lt;/td&gt; &lt;td&gt;英特尔 第四代酷睿 i7-4790 @ 3.60GHz 四核&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;主 板&lt;/td&gt; &lt;td&gt;英特尔 TH87G-P Series&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;内 存&lt;/td&gt; &lt;td&gt;8 GB ( 金士顿 DDR3L 1600MHz )&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;硬 盘&lt;/td&gt; &lt;td&gt;希捷 ST500LM000-1EJ162 ( 500 GB / 10000 转/分 )&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;显 卡&lt;/td&gt; &lt;td&gt;英特尔 HD Graphics 4600 ( 160 MB / 英特尔 )&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;显示器&lt;/td&gt; &lt;td&gt;CHR7511 CH7511B&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;h2 id=&quot;详细报表&quot;&gt;详细报表&lt;/h2&gt; &lt;p&gt;——–[ 鲁大师 ]———-&lt;/p&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt; &lt;/th&gt; &lt;th&gt; &lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;软件:&lt;/td&gt; &lt;td&gt;鲁大师 5.1020.1140.314&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;时间:&lt;/td&gt; &lt;td&gt;2020-06-17 00:16:21&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;网站:&lt;/td&gt; &lt;td&gt;http://www.ludashi.com&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p&gt;——–[ 概览 ]——–&lt;/p&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt; &lt;/th&gt; &lt;th&gt; &lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;电脑型号&lt;/td&gt; &lt;td&gt;X64 兼容 台式电脑&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;操作系统&lt;/td&gt; &lt;td&gt;Windows 8.1 专业版 64位 ( DirectX 11 )&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;处理器&lt;/td&gt; &lt;td&gt;英特尔 第四代酷睿 i7-4790 @ 3.60GHz 四核&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;主板&lt;/td&gt; &lt;td&gt;英特尔 TH87G-P Series ( Lynx Point )&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;显卡&lt;/td&gt; &lt;td&gt;英特尔 HD Graphics 4600 ( 160 MB / 英特尔 )&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;内存&lt;/td&gt; &lt;td&gt;8 GB ( 金士顿 DDR3L 1600MHz )&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;主硬盘&lt;/td&gt; &lt;td&gt;希捷 ST500LM000-1EJ162 ( 500 GB / 10000 转/分 )&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;显示器&lt;/td&gt; &lt;td&gt;CHR7511 CH7511B&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;声卡&lt;/td&gt; &lt;td&gt;英特尔 Lynx Point 高保真音频&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;网卡&lt;/td&gt; &lt;td&gt;瑞昱 RTL8168/8111/8112 Gigabit Ethernet Controller&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p&gt;——–[ 主板 ]———&lt;/p&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt; &lt;/th&gt; &lt;th&gt; &lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;主板型号&lt;/td&gt; &lt;td&gt;英特尔 TH87G-P Series&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;芯片组&lt;/td&gt; &lt;td&gt;Lynx Point&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;BIOS版本&lt;/td&gt; &lt;td&gt;American Megatrends Inc. 4.6.5 / BIOS程序发布日期: 06/30/2014&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;BIOS的大小&lt;/td&gt; &lt;td&gt;3072 KB&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;BIOS的序列号&lt;/td&gt; &lt;td&gt;63-0100-000001-00101111-041312-Chipset&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;板载设备&lt;/td&gt; &lt;td&gt;视频设备 (启用)&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p&gt;——–[ 处理器 ]——–&lt;/p&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt; &lt;/th&gt; &lt;th&gt; &lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;处理器&lt;/td&gt; &lt;td&gt;英特尔 第四代酷睿 i7-4790 @ 3.60GHz 四核&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;步进&lt;/td&gt; &lt;td&gt;C0&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;速度&lt;/td&gt; &lt;td&gt;3.60 GHz (109 MHz x 33.0)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;处理器数量&lt;/td&gt; &lt;td&gt;核心数: 4 / 线程数: 8&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;核心代号&lt;/td&gt; &lt;td&gt;Haswell&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;生产工艺&lt;/td&gt; &lt;td&gt;22 纳米&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;插槽/插座&lt;/td&gt; &lt;td&gt;Socket H3 (LGA 1150)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;一级数据缓存&lt;/td&gt; &lt;td&gt;4 x 32 KB, 8-Way, 64 byte lines&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;一级代码缓存&lt;/td&gt; &lt;td&gt;4 x 32 KB, 8-Way, 64 byte lines&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;二级缓存&lt;/td&gt; &lt;td&gt;4 x 256 KB, 8-Way, 64 byte lines&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;三级缓存&lt;/td&gt; &lt;td&gt;8 MB, 16-Way, 64 byte lines&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;特征&lt;/td&gt; &lt;td&gt;MMX, SSE, SSE2, SSE3, SSSE3, SSE4.1, SSE4.2, HTT, EM64T, EIST&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p&gt;——–[ 硬盘 ]———&lt;/p&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt; &lt;/th&gt; &lt;th&gt; &lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;产品&lt;/td&gt; &lt;td&gt;希捷 ST500LM000-1EJ162&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;大小&lt;/td&gt; &lt;td&gt;500 GB&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;转速&lt;/td&gt; &lt;td&gt;5400 转/分&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;缓存&lt;/td&gt; &lt;td&gt;64 MB&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;硬盘已使用&lt;/td&gt; &lt;td&gt;共 1655 次，累计 5272 小时&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;固件&lt;/td&gt; &lt;td&gt;SM16&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;接口&lt;/td&gt; &lt;td&gt;SATA III&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;数据传输率&lt;/td&gt; &lt;td&gt;600.00 MB/秒&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;特征&lt;/td&gt; &lt;td&gt;S.M.A.R.T, APM, 48-bit LBA, NCQ&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p&gt;——–[ 内存 ]———&lt;/p&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt; &lt;/th&gt; &lt;th&gt; &lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;ChannelA-DIMM0&lt;/td&gt; &lt;td&gt;金士顿 DDR3L 1600MHz 8GB&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造日期&lt;/td&gt; &lt;td&gt;2014 年 40 周&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;型号&lt;/td&gt; &lt;td&gt;7F98 9905428-087.A00LF&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;序列号&lt;/td&gt; &lt;td&gt;1B02CB16&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;厂商&lt;/td&gt; &lt;td&gt;Kingston&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;模块位宽:&lt;/td&gt; &lt;td&gt;64 Bits&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;模块电压:&lt;/td&gt; &lt;td&gt;SSTL 1.35V&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p&gt;——–[ 显卡 ]——-&lt;/p&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt; &lt;/th&gt; &lt;th&gt; &lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;主显卡&lt;/td&gt; &lt;td&gt;英特尔 HD Graphics 4600&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;显存&lt;/td&gt; &lt;td&gt;160 MB&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商&lt;/td&gt; &lt;td&gt;英特尔&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;BIOS日期&lt;/td&gt; &lt;td&gt;03/07/20 (非显卡制造日期)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;驱动版本&lt;/td&gt; &lt;td&gt;10.18.14.4578&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;驱动日期&lt;/td&gt; &lt;td&gt;20170104&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p&gt;——–[ 显示器 ]———&lt;/p&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt; &lt;/th&gt; &lt;th&gt; &lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;产品&lt;/td&gt; &lt;td&gt;CHR7511 CH7511B&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;固件程序日期&lt;/td&gt; &lt;td&gt;2011 年 21 周 (非显示器制造日期)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;类型&lt;/td&gt; &lt;td&gt;30 - 83 KHz / 56 - 76 Hz&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;分辨率&lt;/td&gt; &lt;td&gt;1920 x 1080 32 位真彩色 ( 刷新率: 59 Hz )&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Gamma&lt;/td&gt; &lt;td&gt;2.20&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;电源管理&lt;/td&gt; &lt;td&gt;Standby, Suspend, Active-Off&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p&gt;——–[ 其他设备 ]——–&lt;/p&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt; &lt;/th&gt; &lt;th&gt; &lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;网卡&lt;/td&gt; &lt;td&gt;瑞昱 RTL8168/8111/8112 Gigabit Ethernet Controller&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;无线网卡&lt;/td&gt; &lt;td&gt;Atheros AR9285 Wireless Network Adapter&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商&lt;/td&gt; &lt;td&gt;智邦&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;声卡&lt;/td&gt; &lt;td&gt;英特尔 Lynx Point 高保真音频&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;键盘&lt;/td&gt; &lt;td&gt;PS/2 标准键盘&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;键盘&lt;/td&gt; &lt;td&gt;HID 标准键盘&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;鼠标&lt;/td&gt; &lt;td&gt;微软 PS/2 鼠标&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;鼠标&lt;/td&gt; &lt;td&gt;HID-compliant 鼠标&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;摄像头&lt;/td&gt; &lt;td&gt;Apple, Inc. Built-in iSight&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p&gt;——–[ PCI设备 ]——–&lt;/p&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt; &lt;/th&gt; &lt;th&gt; &lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;设备&lt;/td&gt; &lt;td&gt;Haswell DRAM Controller&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备ID&lt;/td&gt; &lt;td&gt;0C00&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商ID&lt;/td&gt; &lt;td&gt;8086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;类别&lt;/td&gt; &lt;td&gt;Bridge / PCI to HOST&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统ID&lt;/td&gt; &lt;td&gt;0C008086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备&lt;/td&gt; &lt;td&gt;HD Graphics 4600&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备ID&lt;/td&gt; &lt;td&gt;0412&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商ID&lt;/td&gt; &lt;td&gt;8086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;类别&lt;/td&gt; &lt;td&gt;Display / VGA&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统ID&lt;/td&gt; &lt;td&gt;04128086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备&lt;/td&gt; &lt;td&gt;Lynx Point USB xHCI Host Controller&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备ID&lt;/td&gt; &lt;td&gt;8C31&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商ID&lt;/td&gt; &lt;td&gt;8086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;类别&lt;/td&gt; &lt;td&gt;Serial / USB (UHCI)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统ID&lt;/td&gt; &lt;td&gt;8C318086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备&lt;/td&gt; &lt;td&gt;Lynx Point MEI Controller #1&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备ID&lt;/td&gt; &lt;td&gt;8C3A&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商ID&lt;/td&gt; &lt;td&gt;8086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;类别&lt;/td&gt; &lt;td&gt;Simple Communication / Other&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统ID&lt;/td&gt; &lt;td&gt;8C3A8086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备&lt;/td&gt; &lt;td&gt;Lynx Point USB Enhanced Host Controller #2&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备ID&lt;/td&gt; &lt;td&gt;8C2D&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商ID&lt;/td&gt; &lt;td&gt;8086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;类别&lt;/td&gt; &lt;td&gt;Serial / USB 2.0 (EHCI)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统ID&lt;/td&gt; &lt;td&gt;8C2D8086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备&lt;/td&gt; &lt;td&gt;Lynx Point HD Audio Controller&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备ID&lt;/td&gt; &lt;td&gt;8C20&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商ID&lt;/td&gt; &lt;td&gt;8086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;类别&lt;/td&gt; &lt;td&gt;Multimedia / Hi-definition Audio&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统ID&lt;/td&gt; &lt;td&gt;8C208086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备&lt;/td&gt; &lt;td&gt;Lynx Point PCI Express Root Port 1&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备ID&lt;/td&gt; &lt;td&gt;8C10&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商ID&lt;/td&gt; &lt;td&gt;8086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;类别&lt;/td&gt; &lt;td&gt;Bridge / PCI to PCI&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统ID&lt;/td&gt; &lt;td&gt;00000000&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备&lt;/td&gt; &lt;td&gt;Lynx Point PCI Express Root Port 3&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备ID&lt;/td&gt; &lt;td&gt;8C14&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商ID&lt;/td&gt; &lt;td&gt;8086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;类别&lt;/td&gt; &lt;td&gt;Bridge / PCI to PCI&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统ID&lt;/td&gt; &lt;td&gt;00000000&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备&lt;/td&gt; &lt;td&gt;Lynx Point PCI Express Root Port 4&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备ID&lt;/td&gt; &lt;td&gt;8C16&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商ID&lt;/td&gt; &lt;td&gt;8086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;类别&lt;/td&gt; &lt;td&gt;Bridge / PCI to PCI&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统ID&lt;/td&gt; &lt;td&gt;00000000&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备&lt;/td&gt; &lt;td&gt;Lynx Point USB Enhanced Host Controller #1&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备ID&lt;/td&gt; &lt;td&gt;8C26&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商ID&lt;/td&gt; &lt;td&gt;8086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;类别&lt;/td&gt; &lt;td&gt;Serial / USB 2.0 (EHCI)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统ID&lt;/td&gt; &lt;td&gt;8C268086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备&lt;/td&gt; &lt;td&gt;Lynx Point LPC Controller&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备ID&lt;/td&gt; &lt;td&gt;8C4A&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商ID&lt;/td&gt; &lt;td&gt;8086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;类别&lt;/td&gt; &lt;td&gt;Bridge / PCI to ISA&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统ID&lt;/td&gt; &lt;td&gt;8C4A8086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备&lt;/td&gt; &lt;td&gt;Lynx Point 6-Port SATA AHCI Controller&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备ID&lt;/td&gt; &lt;td&gt;8C02&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商ID&lt;/td&gt; &lt;td&gt;8086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;类别&lt;/td&gt; &lt;td&gt;Storage / Serial ATA (AHCI 1.0)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统ID&lt;/td&gt; &lt;td&gt;8C028086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备&lt;/td&gt; &lt;td&gt;Lynx Point SMBus Controller&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备ID&lt;/td&gt; &lt;td&gt;8C22&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商ID&lt;/td&gt; &lt;td&gt;8086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;类别&lt;/td&gt; &lt;td&gt;Serial / SMBus Controller&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统ID&lt;/td&gt; &lt;td&gt;8C228086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备&lt;/td&gt; &lt;td&gt;Lynx Point Thermal Management Controller&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备ID&lt;/td&gt; &lt;td&gt;8C24&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商ID&lt;/td&gt; &lt;td&gt;8086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;类别&lt;/td&gt; &lt;td&gt;Data Aquisition &amp;amp; Signal Processing /Other&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统制造商&lt;/td&gt; &lt;td&gt;Intel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统ID&lt;/td&gt; &lt;td&gt;8C248086&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备&lt;/td&gt; &lt;td&gt;RTL8168/8111/8112 Gigabit Ethernet Controller&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备ID&lt;/td&gt; &lt;td&gt;8168&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商&lt;/td&gt; &lt;td&gt;Realtek&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商ID&lt;/td&gt; &lt;td&gt;10EC&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;类别&lt;/td&gt; &lt;td&gt;Network / Ethernet&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统制造商&lt;/td&gt; &lt;td&gt;Realtek&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统ID&lt;/td&gt; &lt;td&gt;012310EC&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备&lt;/td&gt; &lt;td&gt;AR9285 Wireless Network Adapter&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备ID&lt;/td&gt; &lt;td&gt;002B&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商&lt;/td&gt; &lt;td&gt;Atheros&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商ID&lt;/td&gt; &lt;td&gt;168C&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;类别&lt;/td&gt; &lt;td&gt;Network / Other&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统制造商&lt;/td&gt; &lt;td&gt;Accton&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;子系统ID&lt;/td&gt; &lt;td&gt;A8421113&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p&gt;——–[ USB设备 ]——–&lt;/p&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt; &lt;/th&gt; &lt;th&gt; &lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;制造商ID&lt;/td&gt; &lt;td&gt;1BCF&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;产品ID&lt;/td&gt; &lt;td&gt;0005&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;类别&lt;/td&gt; &lt;td&gt;0 / 0 / 0&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备&lt;/td&gt; &lt;td&gt;? USB Optical Mouse&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Serial&lt;/td&gt; &lt;td&gt;?&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;版本&lt;/td&gt; &lt;td&gt;USB 2.0&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商ID&lt;/td&gt; &lt;td&gt;1C4F&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;产品ID&lt;/td&gt; &lt;td&gt;0002&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;类别&lt;/td&gt; &lt;td&gt;0 / 0 / 0&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备&lt;/td&gt; &lt;td&gt;SIGMACHIP USB Keyboard&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Serial&lt;/td&gt; &lt;td&gt;?&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;版本&lt;/td&gt; &lt;td&gt;USB 1.1&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;描述&lt;/td&gt; &lt;td&gt;Apple, Inc. Built-in iSight&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商ID&lt;/td&gt; &lt;td&gt;05AC&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;产品ID&lt;/td&gt; &lt;td&gt;8502&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;类别&lt;/td&gt; &lt;td&gt;239 / 2 / 1&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备&lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;版本&lt;/td&gt; &lt;td&gt;USB 2.0&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;制造商ID&lt;/td&gt; &lt;td&gt;0CF3&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;产品ID&lt;/td&gt; &lt;td&gt;3002&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;类别&lt;/td&gt; &lt;td&gt;224 / 1 / 1&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;设备&lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;版本&lt;/td&gt; &lt;td&gt;USB 1.1&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p&gt;——–[ 传感器 ]——–&lt;/p&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt; &lt;/th&gt; &lt;th&gt; &lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;名称&lt;/td&gt; &lt;td&gt;ITE IT8772&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;CPU温度&lt;/td&gt; &lt;td&gt;61℃&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;CPU核心&lt;/td&gt; &lt;td&gt;61℃&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;CPU封装&lt;/td&gt; &lt;td&gt;61℃&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;主板&lt;/td&gt; &lt;td&gt;25℃&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;硬盘温度&lt;/td&gt; &lt;td&gt;49℃&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;风扇&lt;/td&gt; &lt;td&gt;2089转&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; </description> <link>https://luowei.github.io/%E5%85%B6%E4%BB%96/15949971307203.html</link> <guid>https://luowei.github.io/%E5%85%B6%E4%BB%96/15949971307203</guid> <pubDate>Sun, 09 Aug 2020 00:00:00 +0800</pubDate> </item> <item> <title>离散数学与组合数学考试复习大纲</title> <description> &lt;h1 id=&quot;离散数学与组合数学考试复习大纲&quot;&gt;离散数学与组合数学考试复习大纲&lt;/h1&gt; &lt;h2 id=&quot;一考试大纲&quot;&gt;一、考试大纲&lt;/h2&gt; &lt;p&gt;离散数学与组合数学是现代数学的重要分支,是计算机科学的基础理论课程数理逻辑、集合论、图论与代数结构是离散数学的重要组成部分。要求考生对它们的基本概念有较深入的了解,能够系统地掌握命题演算、谓词演算及朴素集合论的经典内容,掌握演绎推理的基本方法。掌握图论的基本定理和应用,熟悉代数系统的基本概念及定理。组合数学部分要求考生掌握各种基本的计数方法,线性常系数递推关系的解法,Burnside引理和Polya定理的应用,容斥原理和鸽巢原理的应用等。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;主要内容包括:&lt;/strong&gt;&lt;/p&gt; &lt;h3 id=&quot;一命题逻辑的等值演算与推理演算&quot;&gt;(一)命题逻辑的等值演算与推理演算&lt;/h3&gt; &lt;p&gt;1.命题逻辑的基本概念、命题逻辑联结词与真值表,重言式&lt;br /&gt; 2.简单命题的形式化(简单自然语句的形式化)&lt;br /&gt; 3.等值定理、基本等值公式以及等值演算&lt;br /&gt; 4·命题公式与真值表的关系、联结词的完备集)&lt;br /&gt; 5.析取范式、合取范式、主析取范式和主合取范式&lt;br /&gt; 6.命题逻辑的推理规则与推理演算,归结推理证明方法&lt;br /&gt; 7.命题逻辑公理系统的概念,公理系统的基本结构&lt;/p&gt; &lt;h3 id=&quot;二谓词逻辑的等值演算和推理演算&quot;&gt;(二)谓词逻辑的等值演算和推理演算&lt;/h3&gt; &lt;p&gt;1,谓词、量词的基本概念及表示法&lt;br /&gt; 2.复杂自然语句的形式化&lt;br /&gt; 3,否定型等值式、量词分配等值式&lt;br /&gt; 4·范式、前束范式,Skolem标准形&lt;br /&gt; 5,基本推理公式及其证明方法&lt;br /&gt; 6,谓词逻辑的推理规则与推理演算,归结推理法&lt;/p&gt; &lt;h3 id=&quot;三集合与关系&quot;&gt;(三)集合与关系&lt;/h3&gt; &lt;p&gt;1,集合的概念、性质和基本运算,集合间的关系和特殊集合&lt;br /&gt; 2,有限集合的基数,包含排斥原理&lt;br /&gt; 3,集合论公理系统,无穷公理和自然数集合&lt;br /&gt; 4,二元关系的概念、关系矩阵和关系图&lt;br /&gt; 5,关系的逆、合成,关系的基本性质,关系的闭包&lt;br /&gt; 6.等价关系和划分,偏序关系与哈斯图:&lt;br /&gt; 7,任意集合上的函数定义与性质、特殊函数,满射、单射与双射&lt;br /&gt; 8.集合的势、无限集合的基数&lt;/p&gt; &lt;h3 id=&quot;四图论的基本概念路与回路&quot;&gt;(四)图论的基本概念、路与回路&lt;/h3&gt; &lt;p&gt;1.图的基本概念与性质&lt;br /&gt; 2.图的代数表示&lt;br /&gt; 3.途径、路、回路、迹的定义&lt;br /&gt; 4.欧拉环游(欧拉闭迹)与欧拉迹&lt;br /&gt; 5.汉密尔顿路与回路&lt;br /&gt; 6.最短路径&lt;br /&gt; 7.连通性&lt;br /&gt; 8.有向图&lt;/p&gt; &lt;h3 id=&quot;五树平面图与图的着色&quot;&gt;(五）树、平面图与图的着色&lt;/h3&gt; &lt;p&gt;1.树的定义及等价条件&lt;br /&gt; 2.支撑树的计数&lt;br /&gt; 3.森林&lt;br /&gt; 4,最短树&lt;br /&gt; 5.平面图与极大平面图&lt;br /&gt; 6,对偶图&lt;br /&gt; 7.色数与色多项式&lt;/p&gt; &lt;p&gt;###（六）代数结构 &lt;br /&gt; 1.代数系统的概念&lt;br /&gt; 2,同构与同态&lt;br /&gt; 3,群的基本知识&lt;br /&gt; 4.循环群、群的同构&lt;br /&gt; 5,变换群和置换群、Caylay定理&lt;br /&gt; 6.陪集和群的陪集分解、Lagrange定理&lt;br /&gt; 7,正规子群与商群&lt;br /&gt; 8.同态、同态基本定理&lt;br /&gt; 9.域的概念&lt;/p&gt; &lt;p&gt;###(七)排列与组合 &lt;br /&gt; 1.加法法则与乘法法则&lt;br /&gt; 2.排列与组合&lt;br /&gt; 3.Stirling 近似公式&lt;br /&gt; 4.排列的生成算法&lt;br /&gt; 5.组合的生成算法&lt;br /&gt; 6.可重组合&lt;br /&gt; 7,若干等式及其组合意义&lt;/p&gt; &lt;p&gt;###（八)母函数与递推关系 &lt;br /&gt; 1.母函数&lt;br /&gt; 2.递推关系&lt;br /&gt; 3.Fibonacci 列&lt;br /&gt; 4.线性常系数递推关系&lt;br /&gt; 5.整数的拆分和Ferrers图像&lt;br /&gt; 6.指数型母函数&lt;br /&gt; 7.母函数和递推关系应用举例&lt;br /&gt; 8,错排问题&lt;br /&gt; 9.Sliding数效&lt;br /&gt; 10.Catalan数&lt;/p&gt; &lt;p&gt;###（九）容斥原理和鸽巢原理 &lt;br /&gt; 1,容斥原理&lt;br /&gt; 2,棋盘多项式与有限制排列&lt;br /&gt; 3,一般公式&lt;br /&gt; 4·二项式反演与Mobius反演&lt;br /&gt; 5.鸽巢原理&lt;br /&gt; 6.Ramsey问题和Ramsey数&lt;/p&gt; &lt;p&gt;###(十) Polya 定理 &lt;br /&gt; 1.Burnside引理&lt;br /&gt; 2 Polya定理&lt;br /&gt; 3,母函数型的Polya定理&lt;br /&gt; 4.图的计数&lt;/p&gt; &lt;h2 id=&quot;二复习指南&quot;&gt;二、复习指南&lt;/h2&gt; &lt;h3 id=&quot;一命题逻辑的等值演算和推理演算&quot;&gt;（一)命题逻辑的等值演算和推理演算&lt;/h3&gt; &lt;p&gt;1,理解并掌握命题逻辑的基本概念,熟练掌握五个常用的命题联结词及其真值表,掌握命题与真值表的关系,以及由简单命题通过联结词构造复合命题的方法。&lt;br /&gt; 2,掌握重言式、永假式和可满足公式的区别与判别方法;理解命题形式化的步骤与方法,能够熟练地将简单自然语句利用命题联结词进行形式化。&lt;br /&gt; 3,掌握和理解命题公式等值的概念,掌握命题公式等值的判别方法。&lt;br /&gt; 4,熟悉基本的等值公式;对于常用的等值公式,能在理解的基础上熟记并能在等值演算中灵活使用。&lt;br /&gt; 5.了解联结词完备集的概念,掌握判别联结词完备集的方法,了解对偶式的基本概念。&lt;br /&gt; 6·理解范式的概念和范式定理,深入理解主析取范式和主合取范式的构成,能够熟练地将命题公式化成相应的主析取范式和主合取范式。&lt;br /&gt; 7,理解推理公式的基本结构,熟悉基本的推理公式,掌握推理公式的不同证明方法。&lt;br /&gt; 8.理解基本的推理规则,掌握使用推理规则进行推理演算的方法。&lt;br /&gt; 9,理解归结推理规则,掌握用归结推理法证明的方法。&lt;br /&gt; 10,了解命题逻辑的公理系统的概念和基本构成,进行定理推演的过程和方法。&lt;/p&gt; &lt;h3 id=&quot;二谓词逻辑的等值演算和推理演算-1&quot;&gt;(二)谓词逻辑的等值演算和推理演算&lt;/h3&gt; &lt;p&gt;1,理解谓词、个体词、函数和量词的概念,重点解决使用谓词逻辑描述自然语句的表达问题,能够熟练地将一些复杂的自然语句进行形式化描述。&lt;br /&gt; 2,了解有限域下全称量词和存在量词的表示法,理解它在谓词逻辑中的重要作用。&lt;br /&gt; 3.了解普遍有效公式、可满足式和不可满足式的概念和划分方法,知道一阶谓词逻辑的判定问题的基本内容以及有关的主要结论。&lt;br /&gt; 4,理解谓词逻辑公式等值的概念,掌握否定型等值式的不同形式及其证明方法。&lt;br /&gt; 5.了解量词对不同联结词的分配律,掌握量词分配等值式的证明方法。&lt;br /&gt; 6·理解范式的概念,掌握前束范式的定义以及Skolem标准形的构成,会求谓词逻辑公式的前束范式和仅保留全称量词的前束范式。&lt;br /&gt; 7.熟悉谓词逻辑的基本推理公式,能够给出解释性的证明和其他推理公式正确性的判断。&lt;br /&gt; 8.理解谓词逻辑有关量词的四条推理规则,掌握使用推理规则进行推理演算的方法。&lt;br /&gt; 9·理解谓词逻辑的归结推理法的证明过程,掌握用归结法证明推理公式的方法。&lt;/p&gt; &lt;h3 id=&quot;三集合与关系-1&quot;&gt;(三）集合与关系&lt;/h3&gt; &lt;p&gt;1.深入理解并掌握集合的概念和不同的表示方法,能够熟练地用谓词形式来描述集合中元素的性质;理解集合间的关系和特殊集合,熟练掌握集合的基本运算。&lt;br /&gt; 2,理解集合运算的性质和主要证明方法,能够用谓词演算或集合恒等式的方法证明集合的相等、包含或进行集合公式的化简。&lt;br /&gt; 3.了解集合基数的概念,掌握有限集合基数的计算方法,理解包含排斥原理及其具体应用。.&lt;br /&gt; 4,对集合论公理系统有概貌的了解,理解无穷公理以及自然数集合在集合论中的表示。&lt;br /&gt; 5·理解二元关系的概念,掌握关系矩阵表示法和关系图画法。深入理解关系的某些特殊性质,包括自反性、非自反性、对称性、反对称性和传递性以及它们之间的关系。&lt;br /&gt; 6.了解关系的闭包的定义及其性质;掌握已知关系R的自反、对称和传递闭包的构造方法。&lt;br /&gt; 7.深入理解等价关系和划分的概念,掌握相关的证明思路与方法。了解相容关系和覆盖的概念以及它们与等价关系和划分的主要区别。&lt;br /&gt; 8.深入理解偏序关系和哈斯图的概念;掌握用哈斯图表示偏序集的方法;了解拟序关系、全序关系和链等概念。&lt;br /&gt; 9.理解函数的定义,特别是任意集合上的函数的概念,深入理解函数的单射、满射和双射的概念。掌握从集合A到集合B构造双射函数的方法。&lt;br /&gt; 10,理解集合等势的概念,掌握判断集合等势的方法。了解有限集合与无限集合的严格定义,熟悉无限集合基数的记法和康托尔定理、连续统假设的内容以及目前的基本结论。&lt;/p&gt; &lt;h3 id=&quot;四图论的基本概念路与回路-1&quot;&gt;（四）图论的基本概念、路与回路&lt;/h3&gt; &lt;p&gt;1,理解并熟练掌握图论的最基本的概念,包括图、度、简单图完全图、正则图等&lt;br /&gt; 2.掌握图的最基本的性质。&lt;br /&gt; 3,掌握图的邻接矩阵和关联矩阵表示方法以及它们各自的性质。&lt;br /&gt; 4,掌握有向图与无向图的途径与闭途径,路与回路,有向途径(有向链)、有向路、有向回路、有向迹与有向闭迹、连通图等的定义及性质。&lt;br /&gt; 5,掌握欧拉环游与欧拉迹的定义以及存在欧拉环游的充分必要条件。&lt;br /&gt; 6.掌握与汉密尔顿图相关的定义以及相关定理。&lt;br /&gt; 7.掌握图的着色的基本内容。&lt;br /&gt; 8,了解求图的最短路、最小树等的基本算法。&lt;/p&gt; &lt;h3 id=&quot;五树平面图与图的着色-1&quot;&gt;(五)树、平面图与图的着色&lt;/h3&gt; &lt;p&gt;1,熟悉并掌握树的等价定义及基本性质。&lt;br /&gt; 2,掌握连通图中支撑树数目的计算方法。&lt;br /&gt; 3·熟悉并掌握赋权连通图中最短支撑树的Kruskal算法。&lt;br /&gt; 4,熟练掌握欧拉公式,了解极大平面图的有关性质。&lt;br /&gt; 5,掌握对偶图的定义与构造方法,学会利用对偶图求解基本问题。&lt;br /&gt; 6,熟悉色数的定义、有关定理和简单图形的色数计算。&lt;br /&gt; 7,掌握简单图形的色多项式的计算。&lt;/p&gt; &lt;h3 id=&quot;六代数结构&quot;&gt;（六)代数结构&lt;/h3&gt; &lt;p&gt;1,熟练掌握代数系统的基本概念,如n元运算、单位元、逆元、半群、含么半群等。&lt;br /&gt; 2,理解同态与同构的有关定义,并能够进行简单证明。&lt;br /&gt; 3,深入理解群的有关基本知识与基本定理。&lt;br /&gt; 4,深入理解循环群的定义及相关定理,掌握群同构概念。&lt;br /&gt; 5,掌握交换群、置换群概念,及轮换、对换计算,了解Cayley定理&lt;br /&gt; 6.掌握陪集的定义、性质及群的陪集分解,了解Lagrange定理。&lt;br /&gt; 7,掌握正规子群的定义和性质,了解商群。&lt;br /&gt; 8.了解同态核定义及同态基本定理。&lt;br /&gt; 9.掌握环域的定义及基本性质。&lt;/p&gt; &lt;h3 id=&quot;七排列与组合&quot;&gt;(七)排列与组合&lt;/h3&gt; &lt;p&gt;1,熟练运用加法法则和乘法法则,运用这些法则解决各种比较简单的计数问题。在解决计数问题的过程中注意使用合理分类和模型转换的技巧。&lt;br /&gt; 2.熟练掌握无重排列、无重组合、可重排列、重数给定的排列、圆排列、项链排列等概念及其计数公式的推导,并能熟练运用这些概念和计数公式解决各种问题。利用重数给定的排列及其计数公式给出多项式展开的系数计算公式,并将其与不同的球放入不同的盒子,每盒球数给定的模型联系起来。&lt;br /&gt; 3,利用模型转换技巧解决不易直接计算的计数问题。&lt;br /&gt; 4,利用不同方法推导可重组合及隔位组合的计算公式。&lt;br /&gt; 5·利用计算公式、归纳法和建立适当的组合模型的方法证明一些基本的组合恒等式。&lt;br /&gt; 6,应用各种组合模型及其计数方法解决各种相关的问题。&lt;/p&gt; &lt;h3 id=&quot;八母函数与递推关系&quot;&gt;(八)母函数与递推关系&lt;/h3&gt; &lt;p&gt;1,掌握序列和它的母函数的关系,掌握形式幂级数的基本运算。&lt;br /&gt; 2,掌握根据已知具体序列的基本性质求其递推关系,再利用母函数解递推关系,得到序列的表达式的方法。&lt;br /&gt; 3,掌握根据Fibonaci数列的基本性质列出其递推关系,再利用母函数求解其递推关系,即给出序列的表达式的方法。掌握利用Fi-bonacci数列的递推关系,证明一些与Fibonacci数列相关的恒等式。掌握利用Fibonacci数列在优选法中的简单应用。&lt;br /&gt; 4.掌握利用母函数法解一般线性常系数递推关系的方法。掌握无重根、有重根和有共轭复根3种情况下求序列表达式的方法。&lt;br /&gt; 5.掌握整数拆分的基本概念和一些简单方法。利用Ferrer图像解决一些拆分的计数问题。掌握根据错排的定义,求错排数列的递推关系的方法及利用母函数求解错排数列的表达式的方法。掌握利用递推关系和母函数解决一些应用问题的方法。了解Stirding数的组合意义。了解用不同方法给出Catalan数的计数公式。&lt;/p&gt; &lt;h3 id=&quot;九容斥原理和鸽巢原理&quot;&gt;（九）容斥原理和鸽巢原理&lt;/h3&gt; &lt;p&gt;1,掌握容斥原理的基本公式并利用基本公式解决一些应用问题。&lt;br /&gt; 2,掌握利用容斥原理基本公式解错排问题的方法。&lt;br /&gt; 3,掌握利用棋盘多项式的概念解决一些有限制的排列问题。&lt;br /&gt; 4.掌握二项式反演和Mobius反演的基本方法,解决一些问题。&lt;br /&gt; 5.掌握鸽巢原理的几种表述方法,并用鸽巢原理解决一些问题。注意将鸽巢原理与一些别的数学概念及技巧结合起来应用的方法。&lt;br /&gt; 6.掌握分析一些典型的Ramsey问题的方法。&lt;br /&gt; 7,掌握推算一些简单的Ramsey数的方法。&lt;/p&gt; &lt;h3 id=&quot;十-polya定理&quot;&gt;(十) Polya定理&lt;/h3&gt; &lt;p&gt;1·掌握群的基本概念和定理。&lt;br /&gt; 2.掌握置换群的基本概念。&lt;br /&gt; 3,掌握置换的轮换、对换等表示方法和奇偶置换的概念。掌握正多面体的计算方法和转动群的分析方法。&lt;br /&gt; 4,掌握含不动点的置换子群、置换群作用下对象的轨道(等价类)等概念。掌握推导Burnside引理、Polya定理的方法。利用Burnside 引理和Polya定理解决一些应用问题。&lt;br /&gt; 5.掌握母函数型Polya定理的推导和应用。6,利用Polya定理解决图的计数问题。&lt;/p&gt; &lt;h3 id=&quot;三思考题&quot;&gt;三、思考题&lt;/h3&gt; &lt;p&gt;说明:以下按照考试大纲与复习指南的十大部分,每一部分分别给出思考题和选择题。 &lt;br /&gt; &lt;strong&gt;(一）命题逻辑的等值演算和推理演算&lt;/strong&gt; &lt;br /&gt; 1,什么是命题?什么是真值、真命题、假命题?&lt;br /&gt; 2.什么是命题联结词?它们的主要性质有哪些?&lt;br /&gt; 3.什么是合式公式?什么是重言式、矛盾式和可满足式?&lt;br /&gt; 4,如何判断两个命题公式是否等值?&lt;br /&gt; 5,如果仅仅知道命题公式的真值表,是否可以构造命题公式本身?应该如何构造?&lt;br /&gt; 6,n个命题变项可以构造多少个彼此独立的真值函项?&lt;/p&gt; &lt;p&gt;7,下列语句中( )是命题,并判断是简单命题还是复合命题。&lt;br /&gt; (B) 吃饭了吗?&lt;br /&gt; (A)好大的一场雪!&lt;br /&gt; (C)如果天不下雨,我就骑车去。&lt;br /&gt; (D)我正在说谎。&lt;/p&gt; &lt;p&gt;8,下列联结词不满足交换律的是( )。&lt;br /&gt; (A) →&lt;br /&gt; (B) ∧&lt;br /&gt; (C) ∨&lt;br /&gt; (D) ↔&lt;/p&gt; &lt;p&gt;9,下列合式公式中,( )不是重言式。&lt;br /&gt; (A) Q→(P∨Q)&lt;br /&gt; (B) (P∧Q)→P&lt;br /&gt; (C) ¬ (P∧┐Q)∧(¬ P∨Q)&lt;br /&gt; (D) (¬P∨Q)↔(P→Q)&lt;/p&gt; &lt;p&gt;10,给定命题公式(PVQ)-R,该公式在联结词的完备集 {¬,→} 中的形式为( ),在 {¬,∧} 中的形式为( ),在 {¬,∨} 中的形式为( )。&lt;/p&gt; &lt;p&gt;11,命题公式¬(P→Q)的主析取范式为( ),主合取范式为( )。&lt;/p&gt; &lt;p&gt;12,给定前提 →(P∧→Q), →Q∨R, →R, 则逻辑推论为( )。&lt;/p&gt; &lt;p&gt;13,命题逻辑的公理系统可简述为( )。&lt;br /&gt; (A)用来建立公理的系统&lt;br /&gt; (B)用公理产生推理规则的系统&lt;br /&gt; (C)用来完善已有公理的系统&lt;br /&gt; (D)从精选的几条公理出发,根据规定的演绎规则,推导出一系列定理的形式符号系统&lt;/p&gt; &lt;p&gt;14,通常一个公理系统包括以下哪几个部分( )。&lt;br /&gt; (A)初始符号&lt;br /&gt; (B)形成规则&lt;br /&gt; (C)公理 &lt;br /&gt; (D)变形规则&lt;br /&gt; (E)建立定理&lt;br /&gt; (F)以上所有部分&lt;/p&gt; &lt;p&gt;&lt;strong&gt;(二)谓词逻辑的等值演算和推理演算&lt;/strong&gt; &lt;br /&gt; 1,谓词逻辑与命题逻辑有哪些主要区别?它应提供哪些命题逻辑中不具备的功能,又可能带来哪些复杂的新问题?&lt;br /&gt; 2,谓词逻辑的公式应如何分类?判断任一公式的普遍有效性是否存在可行的方法?&lt;br /&gt; 3,在谓词逻辑中等值是如何定义的?谓词逻辑有哪些与命题逻辑类似的等值公式,如何证明它们的正确性?&lt;br /&gt; 4,任一谓词公式是否可化为与之等值的范式?这种范式形式是否唯一？&lt;br /&gt; 5,如何使用范式来简化对任一公式的普遍有效性与不可满足性的判定？&lt;br /&gt; 6,在谓词逻辑中如何进行推理演算?如何处理谓词逻辑中出现的量词？&lt;br /&gt; 7,归结法是否也适用于谓词逻辑?如何使用归结法进行谓词推理公式的证明?&lt;br /&gt; 8,设论域S={a,b,c} ,消去公式(∀x)P(x) ∧(∃x)Q(x)中的量词后,公式可化为( )。&lt;/p&gt; &lt;p&gt;9,将下列语句形式化:&lt;br /&gt; (1)并非每个实数都是有理数[R(x):x是实数,Q(x):x是有理数]。&lt;br /&gt; (2)没有不犯错误的人[P(x) :x是人,F(x) :x犯错误]。&lt;br /&gt; (3)尽管有人聪明,但未必一切人都聪明[P(x) :x是人,C(x) :x聪明]。&lt;/p&gt; &lt;p&gt;10,下面的等值式中不正确的是( )。(其中Q是命题变项,与个体变元x无关。)&lt;br /&gt; (A) (∀x) (P(x) ∨Q)=(∀x)P(x)∨Q&lt;br /&gt; (B) (∃x) (P(x) ∨Q)=(∃x)P(x)∨Q&lt;br /&gt; (C) (∀x) (P(x)→Q) =(∃x)P(x)→Q&lt;br /&gt; (D) (∃x) (P(x)→Q)=(∃x) P(x)→Q&lt;/p&gt; &lt;p&gt;11,使用归结法证明(∀x) (P(x) ∨Q(x)) ∧ (∀x) (Q(x)→¬R(x)) ∧ (∀x)R(x) =&amp;gt;(∀x)P(x)。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;(三）集合与关系&lt;/strong&gt; &lt;br /&gt; 1,在集合运算中是否满足类似命题逻辑中的摩根律?&lt;br /&gt; 2,自然数在集合论中应如何表示?0又是如何表示的?&lt;br /&gt; 3.集合与二元关系存在哪些共同点?一个具有n个元素的集合可以定义多少个二元关系?&lt;br /&gt; 4,二元关系具有哪些主要性质?这些性质应如何定义和判断?&lt;br /&gt; 5.怎样对一个已知关系增加一些原来不具有的特殊性质,从而构成一个新的关系?&lt;br /&gt; 6,一个二元关系是等价关系的条件是什么?是偏序关系的条件又是什么?&lt;br /&gt; 7.一个关系应满足哪些条件才成为函数?任意集合上的函数应如何定义?&lt;br /&gt; 8.从集合A到集合B不同的函数共有多少个?如何构造从集合A到B的一对一且A到B上的函数(双射)?&lt;br /&gt; 9.一个无限集合的无穷子集是否与原集合的基数相同?实数集的基数是否与自然数集的基数相同?&lt;br /&gt; 10.什么是连续统假设?&lt;/p&gt; &lt;p&gt;11,对任意的集合A、B和C,判断下列命题是否为真。&lt;br /&gt; (1)若A∈B且B⊆C,则A∈C&lt;br /&gt; (2)若A∈B且B⊆C,则A⊆C &lt;br /&gt; (3)若A⊆B且B∈C,则A∈C&lt;br /&gt; (4)若A∈B且B⊄C,则A∉C&lt;/p&gt; &lt;p&gt;12.选择正确的答案填入到括号中。设s={∅, {1}, {1,2}},则有&lt;br /&gt; (1)( )∈S (A) {1,2}(B) 1 (2)( )⊆S (A) {{1,2}} (B) {1} (3)P(S)有( )个元素 (A) 3 (B) 6 (C)7 (D) 8 (4)|S|=( ) (A) 3 (B) 6 (C)7 (D) 8 (5)( )既是S的元素,又是S的子集 (A) {1} (B)∅&lt;/p&gt; &lt;p&gt;13,设R={a,b,c},S={1,2},从R到S不同的二元关系共有( )个。&lt;br /&gt; (А) 6 (B)7 (C) 32(D) 64&lt;/p&gt; &lt;p&gt;14,设集合A={1,2,3,4}上的二元关系,R={&amp;lt;1,1&amp;gt;,&amp;lt;2,3&amp;gt;,&amp;lt;2,4&amp;gt;,&amp;lt;3,4&amp;gt;},则R具有( )。&lt;br /&gt; (A)自反性 (B)传递性 (C)对称性 (D)非自反性&lt;/p&gt; &lt;p&gt;15,设集合A={1,2,3,4}上的二元关系&lt;br /&gt; R={&amp;lt;1,1&amp;gt;,&amp;lt;2,2&amp;gt;,&amp;lt;2,3,&amp;lt;4,4&amp;gt;},&lt;br /&gt; S={&amp;lt;1,1&amp;gt;,&amp;lt;2,2&amp;gt;,&amp;lt;2,3,&amp;lt;3,2&amp;gt;,&amp;lt;4,4&amp;gt;}&lt;br /&gt; 则S是R的( )闭包。&lt;br /&gt; (A)自反 (B)传递 (C)对称 (D)以上都不对&lt;/p&gt; &lt;p&gt;16,设集合A={a,b}上的二元关系R={&amp;lt;a, a&amp;gt;, &amp;lt;b, b&amp;gt;},则R( ）。&lt;br /&gt; (A)是等价关系但不是偏序关系&lt;br /&gt; (B)是偏序关系但不是等价关系&lt;br /&gt; (C)既是等价关系又是偏序关系&lt;br /&gt; (D)既不是等价关系也不是偏序关系&lt;/p&gt; &lt;p&gt;17,设A={a,b,c,d},B={1,2,3 },从A到B不同的函数共有( )个。&lt;br /&gt; (A) 12 (B)64 (C)81 (D) 1024&lt;/p&gt; &lt;p&gt;18,设R为实数集,函数f:R-R,f(a) =-a²+2a-1,则f是( )。&lt;br /&gt; (A)单射而非满射 (B)满射而非单射&lt;br /&gt; (C)双射 (D)既不是单射也不是满射&lt;/p&gt; &lt;p&gt;19,对任意的无限基数k,选择合适的关系符: χ₀( )k。&lt;br /&gt; (A) &amp;lt; (B) ≤ (C)= (D)≥ (E) = (F)以上都不对&lt;/p&gt; &lt;p&gt;20,连续统假设的主要内容是:断言x.&amp;lt;k&amp;lt;i,成立的基数k( )。&lt;br /&gt; (A)肯定不存在&lt;br /&gt; (B)猜想存在,但数值待定&lt;br /&gt; (C)猜想这样的不存在,但尚未证明&lt;br /&gt; (D)k已找到&lt;/p&gt; &lt;p&gt;&lt;strong&gt;(四）图论的基本概念、道路与回路&lt;/strong&gt; &lt;br /&gt; 1,图的定义是什么?&lt;br /&gt; 2,图G中V₂、V₄的出度、入度及度各为多少?&lt;br /&gt; 3,简单图G中,若m&amp;gt;½(n-1)(n-2),证明G中不存在孤立顶点。&lt;br /&gt; 4,证明在有向完全图(竞赛图)中&lt;br /&gt; &lt;img src=&quot;https://luowei.github.io/media/15928371864265/15928375852499.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;5.写出图G的邻接矩阵与关联矩阵。&lt;br /&gt; &lt;img src=&quot;https://luowei.github.io/media/15928371864265/15928375686885.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;6.什么是有向途径(链)?有向路与有向迹?它们有什么区别?&lt;br /&gt; 17.欧拉环游(欧拉回路)与汉密尔顿回路的区别是什么?&lt;br /&gt; 8·证明若连通图G有不同的最长路,则它们必定相交。&lt;br /&gt; 9,设G是n 3的简单图,若m(n-1)(n-2)+2,证明G中存在汉密尔顿回路。&lt;br /&gt; 10.求下图中v₁到各点的最短路。&lt;br /&gt; &lt;img src=&quot;https://luowei.github.io/media/15928371864265/15928375465963.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;(五)树、平面图与图的着色&lt;/strong&gt; &lt;br /&gt; 1,树连通吗?有回路吗?树中任意两点间可否有多条不同的路?&lt;br /&gt; 2,若树中度为2的点有n₂个,度为3的点有n₃,个, ,度为k的点&lt;br /&gt; 有nk个。试问有多少个点的度为1? &lt;img src=&quot;https://luowei.github.io/media/15928371864265/15928375231099.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;3.求F图G中&lt;br /&gt; (1)支撑树的数目。&lt;br /&gt; (2)必含(V₂,V₃)的支撑树数目。&lt;br /&gt; (3)不含(V₂,V₃)的支撑树数目。&lt;/p&gt; &lt;p&gt;4.图的块一定是完全图吗?说明理由。&lt;br /&gt; 5,设图G的赋权矩阵是&lt;br /&gt; &lt;img src=&quot;https://luowei.github.io/media/15928371864265/15928374947917.jpg&quot; alt=&quot;&quot; /&gt; &lt;br /&gt; 求它的最短支撑树。&lt;/p&gt; &lt;p&gt;6.证明平面图的欧拉公式是n-m+f=2,其中n、m和f分别表示图G的顶点个数、边数和面数。试问简单平面图中至少有一个顶点的度小于几?&lt;/p&gt; &lt;p&gt;7,证明在n≥4的极大平面图中,每个顶点的度都大于等于3。&lt;/p&gt; &lt;p&gt;8,设G是无割边的平面图,且每两个域(也称“面”)之间最多有一条公共边,证明&lt;br /&gt; (1)G中至少有两个域有相同的边界数。&lt;br /&gt; (2)若各域的最小边界数是5,则G中最少有12个域。&lt;br /&gt; (3)求下图的色数和色多项式。&lt;br /&gt; &lt;img src=&quot;https://luowei.github.io/media/15928371864265/15928374775921.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;(六)代数结构&lt;/strong&gt; &lt;br /&gt; 1.设代数系统V=(x, · )具有单位元e,且适合结合律,若a,b∈X且可逆, 证明a·b也是可逆的,并且(a·b)⁻¹ = b⁻¹ * a⁻¹ 。&lt;br /&gt; 2.设K={e,a,b,c} ,定义二元运算·如下:&lt;br /&gt; &lt;img src=&quot;https://luowei.github.io/media/15928371864265/15928374574216.jpg&quot; alt=&quot;&quot; /&gt;&lt;br /&gt; 试问(K, ·)是否是可结合的?有无单位元?每一个单位元是否可逆?&lt;/p&gt; &lt;p&gt;3.设(s, ·)是半群,且左右消去律都成立,证明S是交换半群的充要条件是对任意a,b∈S有:(ab)² =a²b²&lt;/p&gt; &lt;p&gt;4.已知代数系统(S, *)和(P, ·),其中S={a,b,c}, P={1,2,3}。二元运算分别定义为:&lt;br /&gt; &lt;img src=&quot;https://luowei.github.io/media/15928371864265/15928374421197.jpg&quot; alt=&quot;&quot; /&gt;&lt;br /&gt; 试证明它们是同构的。&lt;/p&gt; &lt;p&gt;5,群、环、域的定义有什么区别?&lt;/p&gt; &lt;table&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;6,令G={km&lt;/td&gt; &lt;td&gt;k∈z},m是取定的自然数,证明(G,+)是群。&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;table&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;7.设H是G的子群,x∈G,令: H₁ = x⁻¹Hx = { x⁻¹hx&lt;/td&gt; &lt;td&gt;h∈H } , 证明H₁是G的子群。&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p&gt;8,说明Klein四元群是否为循环群。&lt;/p&gt; &lt;p&gt;9,试证明Sn中的每个元都可以表示成(12), (13), ···,(1n) 这n-1个对换中若干个的乘积形式。&lt;/p&gt; &lt;p&gt;10,设G是阶为6的群,证明G中一定有且只有一个3阶子群。&lt;/p&gt; &lt;p&gt;11,设H₁、H₂、H是G的正规子群,且H₁⊂H₂, 证明H₁H是H₂H的正规子群。&lt;/p&gt; &lt;p&gt;12.设f是G₁到G₂的同态,g是G₂到G₃的同态, 证明gf是G₁到G₃的同态,且gf的核是f⁻¹g⁻¹(e”) ,其中e”是G₃的单位元。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;(七) 排列与组合&lt;/strong&gt; &lt;br /&gt; 1.什么是加法法则与乘法法则?&lt;br /&gt; 2.1-1 000的整数中共出现了多少个0? 3.6个人分乘2辆4座轿车(座位有区别)有( )种方案。&lt;br /&gt; (A) 720(B) 120(C) 40320 (D) 10800&lt;/p&gt; &lt;p&gt;4.10个男生和5个女生围成一圈,女生两两不相邻,有( )种方案。&lt;br /&gt; (A) 10!5! (B) (10+5)!&lt;br /&gt; (C) 9!10·9·8·7·6 (D) 10·11·12·13·14&lt;/p&gt; &lt;p&gt;5.6个相同的球放入4个不同的盒子里,有多少种方案?&lt;/p&gt; &lt;p&gt;6.红、蓝、橙、黄、绿色珠子各一颗,串成一串项链,有多少种方案?&lt;/p&gt; &lt;p&gt;7.展开(x+y+z)⁴ 。&lt;/p&gt; &lt;p&gt;8.v₁、v₂、v₃、v₄ 这四个顶点构成一棵树,有多少种方案?&lt;/p&gt; &lt;p&gt;9,红、黄、蓝、绿四种颜色的旗帜各四面,这16面旗帜排成一列问有多少种不同的排列方法?&lt;/p&gt; &lt;p&gt;10.能除尽600的正整数的数目是多少?&lt;/p&gt; &lt;p&gt;11.证明&lt;br /&gt; &lt;img src=&quot;https://luowei.github.io/media/15928371864265/15928374110125.jpg&quot; alt=&quot;&quot; /&gt; &lt;br /&gt; 其中rn是正整数。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;(八)母函数与递推关系&lt;/strong&gt; &lt;br /&gt; 1,求n位二进制数中相邻两位不出现11的数的个数。&lt;br /&gt; 2,满足上题要求的所有n位二进制数中一共出现了多少个1?&lt;/p&gt; &lt;p&gt;3,用红、蓝、白三色珠子n颗穿成一串,要求红色珠子在串中出现偶数个(2,4,···),设满足要求的穿成n颗一串的方案数为Cn。&lt;br /&gt; (1)求序列{Cn}的指数型母函数。&lt;br /&gt; (2)计算Cn的值。&lt;/p&gt; &lt;p&gt;4,设x+2y+32=n的非负整数解(x,y,z)的组数为En,求:&lt;br /&gt; (1)En的普通型母函数。&lt;br /&gt; (2)En的通项公式。&lt;/p&gt; &lt;p&gt;5,在同一平面上画一个圆和n条直线,每条直线均与其他直线在圆内相交。若没有三线及以上共点的情形,则这些直线将圆的内部分成多少块区域?&lt;/p&gt; &lt;p&gt;6.求1³+2³+···+n³，n是整数。&lt;/p&gt; &lt;p&gt;7,在由a、b、c、d、e构成的n位字符串中,不允许出现一个字符连续出现3次的情况,这样的n位串有多少个?&lt;/p&gt; &lt;p&gt;8,在上题中,在所有符合要求的串中,一个字符连续出现2次的情况一共有多少次?&lt;/p&gt; &lt;p&gt;9,一个平面上的n条直线无平行及3线共点的情况,一共把平面分成多少个不重叠的域?&lt;/p&gt; &lt;p&gt;10,n个平面中无平行、3平面共线及4平面共点的情况,一共把空间分成多少个不重叠的域?&lt;/p&gt; &lt;p&gt;&lt;strong&gt;(九)容斥原理及鸽巢原理&lt;/strong&gt; &lt;br /&gt; 1,证明n元集合N到m元集合M(n≥m)的满射的个数为&lt;br /&gt; &lt;img src=&quot;https://luowei.github.io/media/15928371864265/15928373888899.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;2.n对(n≥2)夫妇围圆桌而坐,要求每对夫妇不相邻,有多少种方案?&lt;/p&gt; &lt;p&gt;3,在1~n的全排列中,要求从左到右不出现i与i+1 (i=1,2,···,n-1)相邻,这样的排列有多少?&lt;/p&gt; &lt;p&gt;4,在1~n构成的圆排列中,顺时针扫描,要求不出现i与i+1 (i=1 ,···,n-1)相邻及n与1相邻的情况,这样的圆排列有多少?&lt;/p&gt; &lt;p&gt;5,求下列集合中不是n²、n³形式的数的数目,n是正整数: { 1,2,···,10⁴}&lt;/p&gt; &lt;p&gt;6,求下列集合中不是n²、n³形式的数的数目: {10³, 10³+1,···,10⁴}&lt;/p&gt; &lt;p&gt;7,求证:用2种颜色给完全图k₆的边进行着色,则一定存在两个单色三角形。&lt;/p&gt; &lt;p&gt;8,证明2维欧氏空间中:&lt;br /&gt; (1)5个整点中必有2个整点的重心是整点。&lt;br /&gt; (2)9个整点中必有3个整点的重心是整点。&lt;br /&gt; 这里: (xi , yi)(i=1,···,n)的重心是指&lt;br /&gt; &lt;img src=&quot;https://luowei.github.io/media/15928371864265/15928373663572.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;9.17个学生两两之间打乒乓、网球或羽毛球,证明必有3个学生相互之间打同一种球。&lt;/p&gt; &lt;p&gt;10,随意地把一个3x9棋盘的每个方格涂成红色或蓝色,求证:必有两列方格,它们的涂色方法是一样的。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;(十) Polya 定理&lt;/strong&gt; &lt;br /&gt; 1,写出对称群S₅,每种置换格式的个数。&lt;/p&gt; &lt;p&gt;2,写出与S₅,对应的以5个顶点完全图的边为目标集的置换群的不同格式的置换的个数。&lt;/p&gt; &lt;p&gt;3.G是有限群,x是G的元素,则 的阶必除尽G的阶。&lt;/p&gt; &lt;p&gt;4,设v₁、v₂、v₃是圆周上3等分点,要在v₁、v₂、v₃每点处镶上一个珠子。用红、蓝、绿3种颜色的珠子镶上,试问有多少种不同的方案?&lt;/p&gt; &lt;p&gt;5,在正六面体的每个面上任意作一条对角线,有多少种方案?&lt;/p&gt; &lt;p&gt;6,对正四面体的顶点3着色、棱2着色、面4着色有多少种方案?&lt;/p&gt; &lt;p&gt;7,正六面体的6个面分别用红、蓝两种颜色着色,问有多少种不同的方案?&lt;/p&gt; &lt;p&gt;8、将一个立方体的8个顶点中的5个涂红色,其余3个涂蓝色,试问有多少种涂色方案?&lt;/p&gt; &lt;h3 id=&quot;四参考书目&quot;&gt;四、参考书目&lt;/h3&gt; &lt;p&gt;[1]石纯一,王家廊,数理逻辑与集合论. 2版.北京:清华大学出版社, 2000. [2]王宏,杨明,数理逻辑与集合论.精要与题解.北京:清华大学出版,2001.&lt;br /&gt; [3]耿素云,屈婉玲.离散数学.北京:高等教育出版社,1998. [4]卢开澄,卢华明,组合数学.4版.北京:清华大学出版社,2006&lt;br /&gt; [5]王树禾.图论.北京:科学出版社,2004.&lt;br /&gt; [6]Gary Charttrand, Ping Zhang.图论导引,范益政,汪毅,龚世才,等译.北京:人民邮电出版社,2007.&lt;/p&gt; </description> <link>https://luowei.github.io/15928371864265.html</link> <guid>https://luowei.github.io/15928371864265</guid> <pubDate>Sun, 09 Aug 2020 00:00:00 +0800</pubDate> </item> <item> <title>有用也常用的Shell小点</title> <description> &lt;h1 id=&quot;有用也常用的shell小点&quot;&gt;有用也常用的Shell小点&lt;/h1&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/15927749381601/15927749710881.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/15927749381601.html</link> <guid>https://luowei.github.io/15927749381601</guid> <pubDate>Sun, 09 Aug 2020 00:00:00 +0800</pubDate> </item> <item> <title>面试自我介绍方法</title> <description> &lt;h1 id=&quot;面试自我介绍方法&quot;&gt;面试自我介绍方法&lt;/h1&gt; &lt;ol&gt; &lt;li&gt;首先介绍自己的姓名、年龄、爱好、工作经历、家庭概况理想与报负；&lt;/li&gt; &lt;li&gt;自己优点特长的介绍：首先了解自己的特长与优点，便可以开始预备自我介绍的内容∶包括工作模式、优点、技能，突出成就、专业知识、学术背景等。&lt;/li&gt; &lt;li&gt;身体的语言的表达，适当的加入一些才艺作品展现。&lt;/li&gt; &lt;li&gt;自我介绍的结束语。&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;面试如何提问题&quot;&gt;面试如何提问题&lt;/h2&gt; &lt;h3 id=&quot;从几个角度提问&quot;&gt;从几个角度提问&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;哪些事是你最关心重视的，而这些会影响到你对工作的投入、对公司的奉献;&lt;/li&gt; &lt;li&gt;公司的价值观、文化与发展理念，以及人才理念；&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;案例&quot;&gt;案例：&lt;/h3&gt; &lt;ol&gt; &lt;li&gt;我习惯准时上班，所以想了解贵公司的上下班时间?”&lt;/li&gt; &lt;li&gt;对这项职务的工作内容和期望目标 ？&lt;/li&gt; &lt;li&gt;公司组织架构、升迁管道是怎样？&lt;/li&gt; &lt;li&gt;能超越同业的最大利基点为何 ？&lt;/li&gt; &lt;li&gt;公司强调的团队合作中，其它的成员素质和特性如何 ？&lt;/li&gt; &lt;li&gt;能否为我介绍一下工作环境，或者福利措施等问题 ？&lt;/li&gt; &lt;li&gt;这个职位以后的发展道路和未来规划 ？&lt;/li&gt; &lt;li&gt;公司的项目，能否给我简单介绍一下？&lt;/li&gt; &lt;li&gt;目前这个职位最紧要的任务是什么？如果我有幸贵公司，您希望我三个月完成哪些工作？&lt;/li&gt; &lt;li&gt;公司希望通过这个职位实现的长期目标是什么？&lt;/li&gt; &lt;li&gt;在这个职位做出出色业绩的员工，将有什么发展机会？大约多长时间能实现？&lt;/li&gt; &lt;li&gt;公司在产品和服务上的成功之处是什么？&lt;/li&gt; &lt;li&gt;这个职位的工作业绩如何评估？&lt;/li&gt; &lt;/ol&gt; </description> <link>https://luowei.github.io/%E5%85%B6%E4%BB%96/15905932382572.html</link> <guid>https://luowei.github.io/%E5%85%B6%E4%BB%96/15905932382572</guid> <pubDate>Sun, 09 Aug 2020 00:00:00 +0800</pubDate> </item> <item> <title>使用 sqlcipher 加密解密 sqlite3 数据库</title> <description> &lt;h1 id=&quot;使用-sqlcipher-加密解密-sqlite3-数据库&quot;&gt;使用 sqlcipher 加密解密 sqlite3 数据库&lt;/h1&gt; &lt;h2 id=&quot;下载sqlcipher&quot;&gt;下载sqlcipher&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;https://luowei.github.io/https://github.com/sqlcipher/sqlcipher&quot;&gt;https://github.com/sqlcipher/sqlcipher&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;编译sqlcipher&quot;&gt;编译sqlcipher&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ./configure --enable-tempstore=yes CFLAGS=&quot;-DSQLITE_HAS_CODEC&quot; LDFLAGS=&quot;-lcrypto -L/usr/local/opt/openssl/lib&quot; CPPFLAGS=&quot;-I/usr/local/opt/openssl/include&quot; $ make &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;安装sqlcipher&quot;&gt;安装sqlcipher&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;创建一个sqlcipher新的目录；&lt;/li&gt; &lt;li&gt;再把之前编译的 sqlcipher 二进制可执行文件 与 .libs 库文件目录添加到新创建的sqlcipher目录；&lt;/li&gt; &lt;li&gt;再把sqlcipher目录下的sqlcipher文件软链接到path能找得到的目录下，如:/usr/local/bin目录下，如：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ln -s /Users/luowei/developer/sqlcipher/sqlcipher /usr/local/bin/sqlcipher&lt;/code&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;加密已有明文数据库&quot;&gt;加密已有明文数据库&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;~ $ sqlcipher WubiWords.db sqlite&amp;gt; ATTACH DATABASE &apos;encrypted_wbwords.db&apos; AS wubiwords KEY &apos;xxxxxxxx&apos;; sqlite&amp;gt; SELECT sqlcipher_export(&apos;wubiwords&apos;); sqlite&amp;gt; DETACH DATABASE wubiwords; sqlite&amp;gt; .exit &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;解密加密了的数据库&quot;&gt;解密加密了的数据库：&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ./sqlcipher encrypted_wbwords.db sqlite&amp;gt; PRAGMA key = &apos;xxxxxxxx&apos;; sqlite&amp;gt; ATTACH DATABASE &apos;decrypted_wbwords.db&apos; AS wubiwords KEY &apos;&apos;; --空的密码不会加密数据库 sqlite&amp;gt; SELECT sqlcipher_export(&apos;wubiwords&apos;); sqlite&amp;gt; DETACH DATABASE wubiwords; sqlite&amp;gt; .exit &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;集成sqlcipher&quot;&gt;集成sqlcipher&lt;/h2&gt; &lt;p&gt;集成方式可以在Xcode上直接集成源代码，或先编译成静态库文件后，再集成； 要在Xcode上集成，在GitHub上下载的sqlcipher中有个sqlcipher.xcodeproj文件，只要在你的xcode项目根目录右键选择“Add Files To xxx”，然后把sqlcipher.xcodeproj这个文件添加到你的项目，在目标依赖中添加Security.framework 和 libsqlcipher.a 这两个链接库，如果没有找到libsqlcipher.a可以先构建sqlcipher.xcodeproj这个项目。&lt;/p&gt; &lt;h2 id=&quot;合并静态库文件&quot;&gt;合并静态库文件&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;lipo -create Debug-iphoneos/libsqlcipher.a Debug-iphonesimulator/libsqlcipher.a -output libsqlcipher-iOS-Debug.a lipo -create Release-iphoneos/libsqlcipher.a Release-iphonesimulator/libsqlcipher.a -output libsqlcipher-iOS-Release.a &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;使用sqlcipher初始化数据库&quot;&gt;使用SQLCipher初始化数据库&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;NSString *databasePath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent: @&quot;cipher.db&quot;]; sqlite3 *db; if (sqlite3_open([databasePath UTF8String], &amp;amp;db) == SQLITE_OK) { const char* key = [@&quot;BIGSecret&quot; UTF8String]; sqlite3_key(db, key, strlen(key)); int result = sqlite3_exec(db, (const char*) &quot;SELECT count(*) FROM sqlite_master;&quot;, NULL, NULL, NULL); if (result == SQLITE_OK) { NSLog(@&quot;password is correct, or, database has been initialized&quot;); } else { NSLog(@&quot;incorrect password! errCode:%d&quot;,result); } sqlite3_close(db); } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;##参考： &lt;a href=&quot;https://luowei.github.io/http://blog.csdn.net/u010062440/article/details/50077047&quot;&gt;IOS集成SQLCipher加密SQLite数据库&lt;/a&gt; &lt;a href=&quot;https://luowei.github.io/https://github.com/sqlcipher/sqlcipher&quot;&gt;SQLite extension SQLCipher&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/sqlite/15905909302229.html</link> <guid>https://luowei.github.io/sqlite/15905909302229</guid> <pubDate>Sun, 09 Aug 2020 00:00:00 +0800</pubDate> </item> <item> <title>去腾讯面试iOS的几个基础问题回顾</title> <description> &lt;h1 id=&quot;去腾讯面试ios的几个基础问题回顾&quot;&gt;去腾讯面试iOS的几个基础问题回顾&lt;/h1&gt; &lt;h3 id=&quot;数组存储区间是连续的二分查找时间复杂度小为o1寻址容易插入和删除困难&quot;&gt;数组：存储区间是连续的，二分查找时间复杂度小，为O(1)，寻址容易，插入和删除困难；&lt;/h3&gt; &lt;h3 id=&quot;链表存储区间离散时间复杂度很大达on寻址困难插入和删除容易&quot;&gt;链表：存储区间离散，时间复杂度很大，达O（N），寻址困难，插入和删除容易；&lt;/h3&gt; &lt;h3 id=&quot;哈希表是一种寻址容易插入删除也容易的数据结构既满足了数据的查找方便同时不占用太多的内容空间使用也十分方便&quot;&gt;哈希表：是一种寻址容易，插入删除也容易的数据结构，既满足了数据的查找方便，同时不占用太多的内容空间，使用也十分方便。&lt;/h3&gt; &lt;p&gt;Hash表实现原理：使用哈希函数将被查找的Key转换为数组的索引，如果发生hash索引值碰撞冲突，则拉链法(开放定址法)和线性探测法等方法解决冲突，直到找出一个不冲突的哈希地址。&lt;/p&gt; &lt;h3 id=&quot;解决hash冲突的常见办法&quot;&gt;解决hash冲突的常见办法&lt;/h3&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;开放定址法（线性探测再散列，二次探测再散列，伪随机探测再散列）; 再哈希法; 链地址法; 建立一个公共溢出区; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Java中hashmap的解决办法就是采用的链地址法。&lt;/p&gt; &lt;h2 id=&quot;hashmapset实现原理&quot;&gt;HashMap/Set实现原理：&lt;/h2&gt; &lt;p&gt;HashMap对应的哈希表是由数组+链表组成的; HashSet:它是基于 HashMap 实现的，HashSet 底层使用 HashMap 来保存所有元素，因此 HashSet 的实现比较简单，相关 HashSet 的操作，基本上都是直接调用底层 HashMap 的相关方法来完成，我们应该为保存到 HashSet 中的对象覆盖 hashCode() 和 equals()。&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;&lt;a href=&quot;https://luowei.github.io/http://blog.csdn.net/tanggao1314/article/details/51457585&quot;&gt;hash算法原理详解&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/http://blog.jobbole.com/106733/&quot;&gt;常见hash算法的原理&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/http://blog.csdn.net/vking_wang/article/details/14166593&quot;&gt;HashMap实现原理分析&lt;/a&gt;&lt;/p&gt; &lt;/blockquote&gt; &lt;h2 id=&quot;图片文件压缩原理&quot;&gt;图片、文件压缩原理：&lt;/h2&gt; &lt;h3 id=&quot;几种常见文件压缩算法原理介绍&quot;&gt;几种常见文件压缩算法原理介绍&lt;/h3&gt; &lt;ol&gt; &lt;li&gt;&lt;strong&gt;字典算法：&lt;/strong&gt;字典算法是最为简单的压缩算法之一。它是把文本中出现频率比较多的单词或词汇组合做成一个对应的字典列表，并用特殊代码来表示这个单词或词汇。例如，有字典列表：&lt;/li&gt; &lt;/ol&gt; &lt;blockquote&gt; &lt;p&gt;00=Chinese 01=People 02=China&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;源文本：I am a Chinese people,I am from China 压缩后的编码为：I am a 00 01,I am from 02。&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;固定位长算法（Fixed Bit Length Packing）:&lt;/strong&gt;这种算法是把文本用需要的最少的位来进行压缩编码。&lt;br /&gt; 比如八个十六进制数：1，2，3，4，5，6，7，8。转换为二进制为：00000001，00000010，00000011，00000100， 00000101，00000110，00000111，00001000。每个数只用到了低4位，而高4位没有用到（全为0），因此对低4位进行压缩编 码后得到：0001，0010，0011，0100，0101，0110，0111，1000。然后补充为字节得到：00010010， 00110100，01010110，01111000。所以原来的八个十六进制数缩短了一半，得到4个十六进制数：12，34，56，78。这也是比较常见的压缩算法之一。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;行程算法（RLE（Run Length Encoding））&lt;/strong&gt;：是一个针对无损压缩的非常简单的算法。它用重复字节和重复的次数来简单描述来代替重复的字节。尽管简单并且对于通常的压缩非常低效，但它有的时候却非常有用。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;霍夫曼编码（Huffman Encoding）：&lt;/strong&gt;哈夫曼编码是无损压缩当中最好的方法。它使用预先二进制描述来替换每个符号，长度由特殊符号出现的频率决定。常见的符号需要很少的位来表示，而不常见的符号需要很多为来表示。哈夫曼算法在改变任何符号二进制编码引起少量密集表现方面是最佳的。然而，它并不处理符号的顺序和重复或序号的序列。&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;h3 id=&quot;图像可压缩的原因&quot;&gt;图像可压缩的原因&lt;/h3&gt; &lt;p&gt;因为有很多冗余信息，所以可压缩。常见图像、视频、音频数据中存在的冗余类型如下：&lt;/p&gt; &lt;ol&gt; &lt;li&gt;空间冗余:一幅图像表面上各采样点的颜色之间往往存在着空间连贯性，存在大量颜色相同或相近的区域；&lt;/li&gt; &lt;li&gt;时间冗余:这种冗余主要针对视频,运动图像（视频）一般为位于一时间轴区间的一组连续画面，其中的相邻帧往往包含相同的背景和移动物体，只不过移动物体所在的空间位置略有不同，所以后一帧的数据与前一帧的数据有许多共同的地方，这种共同性是由于相邻帧记录了相邻时刻的同一场景画面，所以称为时间冗余。&lt;/li&gt; &lt;li&gt;视觉冗余:人类的视觉系统由于受生理特性的限制，对于图像场的注意是非均匀的，人对细微的颜色差异感觉不明显。例如，人类视觉的一般分辨能力为26灰度等级，而一般的图像的量化采用的是28灰度等级，即存在视觉冗余。人类的听觉对某些信号反映不太敏感，使得压缩后再还原有允许范围的变化，人也感觉不出来。&lt;/li&gt; &lt;/ol&gt; &lt;h3 id=&quot;数据压缩方法的分类&quot;&gt;数据压缩方法的分类&lt;/h3&gt; &lt;ol&gt; &lt;li&gt;按照压缩方法是否产生失真分类 &lt;br /&gt; &lt;strong&gt;无失真压缩&lt;/strong&gt; &lt;ul&gt; &lt;li&gt;无失真压缩要求解压以后的数据和原始数据完全一致。解压后得到的数据是原数据的复制，是一种可逆压缩。&lt;/li&gt; &lt;li&gt;无失真压缩法去掉或减少数据中的冗余，恢复时再重新插到数据中，因此是可逆过程根据目前的技术水平，无损压缩算法一般可以把普通文件的数据压缩到原来的1/2－1/4。&lt;/li&gt; &lt;li&gt;一些常用的无损压缩算法有赫夫曼(Huffman)算法和LZW(Lenpel-Ziv &amp;amp; Welch)压缩算法。&lt;br /&gt; &lt;strong&gt;有失真压缩&lt;/strong&gt;&lt;/li&gt; &lt;li&gt;解压以后的数据和原始数据不完全一致，是不可逆压缩方式。有失真压缩还原后，不影响信息的表达 &lt;br /&gt; 例如，图像、视频、音频数据的压缩就可以采用有损压缩方法，因为其中包含的数据往往多于我们的视觉系统和听觉系统所能接收的信息，丢掉一些数据而不至于对声音或者图像所表达的意思产生误解，但可大大提高压缩比。图像、视频、音频数据的压缩比可高达100:1，但人的主观感受仍不会对原始信息产生误解。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;按照压缩方法的原理分类 &lt;br /&gt; &lt;strong&gt;预测编码:&lt;/strong&gt;基本思想是利用已被编码的点的数据值，预测邻近的一个像素点的数据值. &lt;br /&gt; &lt;strong&gt;变换编码:&lt;/strong&gt;基本思想是将图像的光强矩阵变换到系数空间上，然后对系数进行编码压缩. &lt;br /&gt; &lt;strong&gt;统计编码:&lt;/strong&gt;根据信息出现概率的分布特性而进行的压缩编码。比如霍夫曼编码。&lt;/li&gt; &lt;/ol&gt; &lt;h3 id=&quot;图像压缩编码&quot;&gt;图像压缩编码&lt;/h3&gt; &lt;ol&gt; &lt;li&gt;行程编码（RLE）:这是最好理解的一种编码了。现实中有许多这样的图像，在一幅图像中具有许多颜色相同的图块。在这些图块中，许多行上都具有相同的颜色，或者在一行上有许多连续的像素都具有相同的颜色值。在这种情况下就不需要存储每一个像素的颜色值，而仅仅存储一个像素的颜色值，以及具有相同颜色的像素数目就可以，或者存储像素的颜色值，以及具有相同颜色值的行数。 &lt;ul&gt; &lt;li&gt;这种压缩编码称为行程编码(run length encoding，RLE)，具有相同颜色并且是连续的像素数目称为行程长度。例如,字符串&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AAABCDDDDDDDDBBBBB&lt;/code&gt;,利用RLE原理可以压缩为&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;3ABC8D5B&lt;/code&gt;；&lt;/li&gt; &lt;li&gt;RLE编码简单直观，编码/解码速度快，因此许多图形和视频文件，如.BMP .TIFF及AVI等格式文件的压缩均采用此方法；&lt;/li&gt; &lt;li&gt;RLE适用于计算机生成的图像，例如。BMP、TIF等，灰度图像等，不适于颜色丰富的自然图像。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;哈夫曼编码（Huffman)：由于图像中表示颜色的数据出现的概率不同，对于出现频率高的赋（编）予较短字长的码，对出现频率小的编于较长字长的码，从而减少总的代码量，但不减少总的信息量。&lt;/li&gt; &lt;li&gt;DCT编码：将在空域上描述的图象，经过某种变换（通常采用，余弦变换、傅立叶变换、沃尔什变换等），在某种变换域里进行描述。在变换域里，首先降低了图象的相关性；其次通过某种图象处理（如频域的二维滤波）以及熵编码，则可进一步压缩图象的编码比特率。这种变换常用于JPEG图像压缩。&lt;/li&gt; &lt;/ol&gt; &lt;h3 id=&quot;24位bmp&quot;&gt;24位bmp&lt;/h3&gt; &lt;p&gt;24位bmp是公认最好的图片存储格式,存储了图片所有的信息，24位bmp是每像素用24位二进制存储该像素点的图像信息，相当于3字节。所以，图像占用空间大小就可以算了。&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;将图像长宽单位换位像素（比如：1024X960 800X600），则文件大小为（长X宽X３）字节. 如：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;800X600的图片大小为800X600X3＝1440000字节=1.44兆&lt;/code&gt;,&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1024X960的图像大小为2.95兆&lt;/code&gt;。&lt;br /&gt; 16位bmp则是24为的三分之二大小。&lt;br /&gt; 256色是２的８次方，相当于８位的bmp。&lt;/p&gt; &lt;/blockquote&gt; &lt;h3 id=&quot;jpg的压缩过程jpeg压缩分四个步骤实现&quot;&gt;JPG的压缩过程：jpeg压缩分四个步骤实现&lt;/h3&gt; &lt;ol&gt; &lt;li&gt;颜色模式转换及采样：rgb色彩系统是我们最常用的表示颜色的方式。jpeg采用的是ycbcr色彩系统。 &lt;ul&gt; &lt;li&gt;要用jpeg基本压缩法处理全彩色图像，得先把rgb颜色模式图像数据，转换为ycbcr颜色模式的数据。y代表亮度，cb和cr则代表色度、饱和度。&lt;/li&gt; &lt;li&gt;通过计算公式可完成数据转换。&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;y=0.2990r+0.5870g+0.1140b&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cb=-0.1687r-0.3313g+0.5000b+128&lt;/code&gt;,&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cr=0.5000r-0.4187g-0.0813b＋128&lt;/code&gt;。&lt;/li&gt; &lt;li&gt;人类的眼晴对低频的数据比对高频的数据具有更高的敏感度，事实上，人类的眼睛对亮度的改变也比对色彩的改变要敏感得多，也就是说y成份的数据是比较重要的。&lt;/li&gt; &lt;li&gt;既然cb成份和cr成份的数据比较相对不重要，就可以只取部分数据来处理。以增加压缩的比例。&lt;/li&gt; &lt;li&gt;jpeg通常有两种采样方式：yuv411和yuv422，它们所代表的意义是y、cb和cr三个成份的数据取样比例。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;dct变换:dct变换的全称是离散余弦变换(discrete cosine transform)，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;是指将一组光强数据转换成频率数据，以便得知强度变化的情形&lt;/code&gt;。 &lt;ul&gt; &lt;li&gt;压缩时，将原始图像数据分成8*8数据单元矩阵，例如亮度值的第一个矩阵内容如下：jpeg将整个亮度矩阵与色度cb矩阵，饱和度cr矩阵，视为一个基本单元称作mcu。&lt;/li&gt; &lt;li&gt;每个mcu所包含的矩阵数量不得超过10个。&lt;/li&gt; &lt;li&gt;例如，行和列采样的比例皆为4:2:2，则每个mcu将包含四个亮度矩阵，一个色度矩阵及一个饱和度矩阵。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;量化:图像数据转换为频率系数后，还得接受一项量化程序，才能进入编码阶段。&lt;/li&gt; &lt;li&gt;编码:huffman编码无专利权问题，成为jpeg最常用的编码方式，huffman编码通常是以完整的mcu来进行的。&lt;/li&gt; &lt;/ol&gt; &lt;blockquote&gt; &lt;p&gt;&lt;a href=&quot;https://luowei.github.io/http://www.cnblogs.com/glaivelee/archive/2011/10/10/2205151.html&quot;&gt;bmp/gif/jpg图象最底层原理分析&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/http://blog.csdn.net/newchenxf/article/details/51693753&quot;&gt;图像压缩原理&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/https://www.zhihu.com/question/19925039&quot;&gt;高压缩文件是如何实现的&lt;/a&gt;&lt;/p&gt; &lt;/blockquote&gt; &lt;h2 id=&quot;category和extension&quot;&gt;category和extension&lt;/h2&gt; &lt;p&gt;参考：&lt;a href=&quot;https://luowei.github.io/http://tech.meituan.com/DiveIntoCategory.html&quot;&gt;深入理解Objective-C：Category&lt;/a&gt;&lt;/p&gt; &lt;ol&gt; &lt;li&gt;extension &lt;ul&gt; &lt;li&gt;extension看起来很像一个匿名的category，但是extension和有名字的category几乎完全是两个东西。&lt;/li&gt; &lt;li&gt;extension在编译期决议，它就是类的一部分，在编译期和头文件里的@interface以及实现文件里的@implement一起形成一个完整的类，它伴随类的产生而产生，亦随之一起消亡。&lt;/li&gt; &lt;li&gt;extension一般用来隐藏类的私有信息，你必须有一个类的源码才能为一个类添加extension，所以你无法为系统的类比如NSString添加extension。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;category &lt;ul&gt; &lt;li&gt;category则完全不一样，它是在运行期决议的。&lt;/li&gt; &lt;li&gt;extension可以添加实例变量，而category是无法添加实例变量的(可通过object_associate动态绑定变量)。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;category真面目 &lt;ul&gt; &lt;li&gt;所有的OC类和对象，在runtime层都是用struct表示的，category也不例外，在runtime层，category用结构体category_t（在objc-runtime-new.h中可以找到此定义），它包含了。&lt;br /&gt; ``` 1)、类的名字（name） 2)、类（cls） 3)、category中所有给类添加的实例方法的列表（instanceMethods） 4)、category中所有添加的类方法的列表（classMethods） 5)、category实现的所有协议的列表（protocols） 6)、category中添加的所有属性（instanceProperties）&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;typedef struct category_t { const char *name; classref_t cls; struct method_list_t *instanceMethods; struct method_list_t *classMethods; struct protocol_list_t *protocols; struct property_list_t *instanceProperties; } category_t; ```&lt;/p&gt; &lt;/li&gt; &lt;li&gt;category的加载机制 &lt;ul&gt; &lt;li&gt;首先编译器生成了&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;实例方法列表 &lt;/code&gt;OBJC$_CATEGORY_INSTANCE_METHODSMyClass$_MyAddition和&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;属性列表&lt;/code&gt;OBJC$_PROP_LISTMyClass$_MyAddition。另外category的名字是用来给各种列表以及后面的category结构体本身命名，而且&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;有static来修饰，所以在同一个编译单元里category名不能重复，否则会出现编译错误&lt;/code&gt;。&lt;/li&gt; &lt;li&gt;其次，编译器生成了category本身OBJC$_CATEGORYMyClass$_MyAddition，并用前面生成的列表来初始化category本身。&lt;/li&gt; &lt;li&gt;最后，编译器在DATA段下的objc_catlist section里保存了一个大小为1的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;category_t的数组&lt;/code&gt;L_OBJC_LABELCATEGORY$（当然，如果有多个category，会生成对应长度的数组^_^），用于运行期category的加载。&lt;/li&gt; &lt;li&gt;对于OC运行时，入口方法如下（在objc-os.mm文件中）：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_objc_init(void)&lt;/code&gt;。_objc_init里面的调用的map_images最终会调用objc-runtime-new.mm里面的_read_images方法从而把category被附加到类上面。&lt;/li&gt; &lt;li&gt;在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_read_images&lt;/code&gt;方法里的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;addUnattachedCategoryForClass&lt;/code&gt;会把类和category做一个关联映射，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;remethodizeClass&lt;/code&gt;则通过&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;attachCategoryMethods&lt;/code&gt;把所有category的实例方法列表拼成了一个大的实例方法列表，然后转交给了attachMethodLists方法,从把category的实例方法添加到类上。同样在这个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_read_images&lt;/code&gt;也把category的协议以及属性添加到类上，以及把category的类方法和协议添加到类的metaclass上。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;注意：category的方法没有“完全替换掉”原来类已经有的方法，也就是说如果category和原来类都有methodA，那么category附加完成之后，类的方法列表里会有两个methodA；&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;category的方法被放到了新方法列表的前面，而原来类的方法被放到了新方法列表的后面，这也就是我们平常所说的category的方法会“覆盖”掉原来类的同名方法，这是因为运行时在查找方法的时候是顺着方法列表的顺序查找的&lt;/code&gt;，它只要一找到对应名字的方法，就会停止往下找了。&lt;/li&gt; &lt;li&gt;关于在类和category中都可以有+load方法问题： &lt;ul&gt; &lt;li&gt;在类的+load方法调用的时候，是可以调用category中声明的方法的，因为附加category到类的工作会先于+load方法的执行。&lt;/li&gt; &lt;li&gt;而+load方法，调用顺序是先类，后category，而category的+load执行顺序是根据编译顺序决定的。&lt;/li&gt; &lt;li&gt;虽然对于+load的执行顺序是这样，但是对于“覆盖”掉的方法，则会先找到最后一个编译的category里的对应方法。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;怎么调用到原来类中被category覆盖掉的方法？既然我们已经知道category其实并不是完全替换掉原来类的同名方法，只是category在方法列表的前面而已，所以我们只要顺着方法列表找到最后一个对应名字的方法，就可以调用原来类的方法。&lt;/li&gt; &lt;li&gt;在category里面是无法为category添加实例变量的。但是我们很多时候需要在category中添加和对象关联的值，这个时候可以求助关联对象来实现。所有的关联对象都由&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AssociationsManager&lt;/code&gt;管理，由一个静态&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AssociationsHashMap&lt;/code&gt;来存储所有的关联对象的，并且runtime的销毁对象函数&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_destructInstance&lt;/code&gt;里面会判断这个对象有没有关联对象，如果有，会调用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_object_remove_assocations&lt;/code&gt;做关联对象的清理工作。&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;strong&gt;参考：&lt;/strong&gt; &lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/http://www.jianshu.com/p/922cd6220e4e&quot;&gt;iOS使用Category添加@property变量&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;关于autoreleasepool内存管理&quot;&gt;关于autoreleasepool内存管理&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;OC对象发送一条autorelease消息，就会把这个对象添加到最近的自动释放池中也就是栈顶释放池中，Autorelease实际上是把对release的调用延迟了，对于每一次autorelease，系统只是把对象放入了当前的autorelease pool中，当pool被释放时，pool中所有的对象都会被调用release。&lt;/li&gt; &lt;li&gt;不要把大量循环放在autoreleasepool中，这样会造成内存峰值上升，因为里面创建的对象要等释放池销毁了才能释放，这种情况应该手动管理内存。&lt;/li&gt; &lt;li&gt;尽量避免大内存使用该方法，对于这种延迟释放机制，尽量少用。&lt;/li&gt; &lt;li&gt;SDK中利用静态方法创建并返回的对象都已经autorelease，不需要我们自己手动release。&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;参考：&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/http://www.jianshu.com/p/d46f390db1f5&quot;&gt;黑幕背后的Autorelease&lt;/a&gt;&lt;/p&gt; &lt;h3 id=&quot;objective-c-associated-objects-的实现原理&quot;&gt;Objective-C Associated Objects 的实现原理&lt;/h3&gt; &lt;p&gt;每一个对象地址对应一个 ObjectAssociationMap 对象，而一个 ObjectAssociationMap 对象保存着这个对象的若干个关联记录。&lt;/p&gt; &lt;blockquote&gt; &lt;ol&gt; &lt;li&gt;AssociationsManager 是顶级的对象，维护了一个从 spinlock_t 锁到 AssociationsHashMap 哈希表的单例键值对映射；&lt;/li&gt; &lt;li&gt;AssociationsHashMap 是一个无序的哈希表，维护了从对象地址到 ObjectAssociationMap 的映射；&lt;/li&gt; &lt;li&gt;ObjectAssociationMap 是一个 C++ 中的 map ，维护了从 key 到 ObjcAssociation 的映射，即关联记录； 4.ObjcAssociation 是一个 C++ 的类，表示一个具体的关联结构，主要包括两个实例变量，_policy 表示关联策略，_value 表示关联对象。&lt;/li&gt; &lt;li&gt;一个对象的所有关联对象是在这个对象被释放时调用的 _object_remove_assocations 函数中被移除；&lt;/li&gt; &lt;/ol&gt; &lt;/blockquote&gt; &lt;blockquote&gt; &lt;ol&gt; &lt;li&gt;关联对象与被关联对象本身的存储并没有直接的关系，它是存储在单独的哈希表中的；&lt;/li&gt; &lt;li&gt;关联对象的五种关联策略与属性的限定符非常类似，在绝大多数情况下，我们都会使用 OBJC_ASSOCIATION_RETAIN_NONATOMIC 的关联策略，这可以保证我们持有关联对象； 关联对象的释放时机与移除时机并不总是一致，比如实验中用关联策略 OBJC_ASSOCIATION_ASSIGN 进行关联的对象，很早就已经被释放了，但是并没有被移除，而再使用这个关联对象时就会造成 Crash 。&lt;/li&gt; &lt;/ol&gt; &lt;/blockquote&gt; &lt;p&gt;&lt;strong&gt;参考：&lt;/strong&gt; &lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/http://blog.leichunfeng.com/blog/2015/06/26/objective-c-associated-objects-implementation-principle/&quot;&gt;bjective-C Associated Objects 的实现原理&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;runloop相关&quot;&gt;Runloop相关&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;https://luowei.github.io/http://blog.ibireme.com/2015/05/18/runloop/&quot;&gt;深入理解RunLoop&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;kvo原理基于kvc及观察者模式实现&quot;&gt;KVO原理：基于KVC及观察者模式实现&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;Key-Value Coding(KVC)，即是指NSKeyValueCoding，一个非正式的Protocol，提供一种机制来间接访问对象的属性。KVO就是基于KVC实现的关键技术之一。&lt;/li&gt; &lt;li&gt;KVC里的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;valueForKey&lt;/code&gt; 和 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;valueForKeyPath&lt;/code&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;NSString *personsName = [p valueForKey:@&quot;name&quot;]; NSString *spousesName = [p valueForKeyPath:@&quot;spouse.name&quot;]; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt;Key-Value Observing (KVO),Key-Value Observing (KVO) 建立在 KVC 之上，它能够观察一个对象的 KVC key path 值的变化。以下实现步骤：&lt;/li&gt; &lt;/ul&gt; &lt;blockquote&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[p addObserver:self forKeyPath:@&quot;address&quot; options:0 context:KVO_CONTEXT_ADDRESS_CHANGED];&lt;/code&gt;添加观察者，即注册监听； 回调方法：observeValueForKeyPath:ofObject:change:context: 在被观察的 key path 的值变化时调用； dealloc 记得停止观察；&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;参考：&lt;a href=&quot;https://luowei.github.io/https://magicalboy.com/kvc_and_kvo/&quot;&gt;KVC 与 KVO 理解&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;ios中集合遍历方法的比较和技巧&quot;&gt;iOS中集合遍历方法的比较和技巧&lt;/h2&gt; &lt;p&gt;参考：&lt;a href=&quot;https://luowei.github.io/http://blog.sunnyxx.com/2014/04/30/ios_iterator/&quot;&gt;iOS中集合遍历方法的比较和技巧&lt;/a&gt;&lt;/p&gt; &lt;h3 id=&quot;ios中常用的遍历运算方法&quot;&gt;ios中常用的遍历运算方法&lt;/h3&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;经典for循环 for in (NSFastEnumeration) (参考：http://nshipster.com/enumerators/) makeObjectsPerformSelector kvc集合运算符(参考：http://www.jianshu.com/p/7675709d14a7) enumerateObjectsUsingBlock enumerateObjectsWithOptions(NSEnumerationConcurrent) dispatch_apply &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h3 id=&quot;比较后的结论&quot;&gt;比较后的结论&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;对于集合中对象数很多的情况下，for in (NSFastEnumeration)的遍历速度非常之快，但小规模的遍历并不明显（还没普通for循环快）；&lt;/li&gt; &lt;li&gt;使用kvc集合运算符运算很大规模的集合时，效率明显下降（100万的数组离谱的21秒多），同时占用了大量内存和cpu；&lt;/li&gt; &lt;li&gt;enumerateObjectsWithOptions(NSEnumerationConcurrent)和dispatch_apply(Concurrent)的遍历执行可以利用到多核cpu的优势（实验中在双核cpu上效率基本上x2）；&lt;/li&gt; &lt;li&gt;enumerateObjectsWithOptions，对于遍历的外部是保持同步的（遍历都完成后才继续执行下一行），猜想内部大概是gcd的dispatch_group或者信号量控制。&lt;/li&gt; &lt;li&gt;虽然说上面的测试结果表明，在集合内元素不多时，经典for循环的效率要比forin要高，但是从代码可读性上来看，就远不如forin看着更顺畅；&lt;/li&gt; &lt;li&gt;同样的还有kvc的集合运算符，一些内置的操作以keypath的方式声明，相比自己用for循环实现，一行代码就能搞定，清楚明了，还省去了重复工作；&lt;/li&gt; &lt;li&gt;在framework中增加了集合遍历的block支持后，对于需要index的遍历再也不需要经典for循环的写法了。&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;同步异步的的实现方法总结&quot;&gt;同步/异步的的实现方法总结&lt;/h3&gt; &lt;p&gt;同步：&lt;/p&gt; &lt;ol&gt; &lt;li&gt;gcd的dispatch_group、或者信号量控制、或加锁(NSLock)；&lt;/li&gt; &lt;li&gt;dispatch_barrier_sync和dispatch_barrier_async;&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;异步：…&lt;/p&gt; &lt;h3 id=&quot;几个gcd相关&quot;&gt;几个GCD相关&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;dispatch_barrier_sync和dispatch_barrier_async其实是类似的(除了sync与async的区别), 所以本文重点讨论其中的一个接口&lt;/strong&gt; * 通过dispatch_barrier_async添加的block会等到之前添加所有的block执行完毕再执行； * 在dispatch_barrier_async之后添加的block会等到dispatch_barrier_async添加的block执行完毕再执行； * dispatch_barrier_async的上述特点只在自己创建的concurrent queue有效, 在serial queue和global concurrent queues中的作用和dispatch_sync完全相同；&lt;/p&gt; &lt;h2 id=&quot;设计模式相关&quot;&gt;设计模式相关&lt;/h2&gt; &lt;p&gt;###继承相对于组合模式的缺点；&lt;/p&gt; &lt;h3 id=&quot;策略模式&quot;&gt;策略模式：&lt;/h3&gt; &lt;ol&gt; &lt;li&gt;策略模式的用意是针对一组算法，将每一个算法封装到具有共同接口的独立的类中，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;从而使得它们可以相互替换&lt;/code&gt;。&lt;/li&gt; &lt;li&gt;策略模式使得算法可以在不影响到客户端的情况下发生变化。&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;使用策略模式可以把行为和环境分割开来&lt;/code&gt;。&lt;/li&gt; &lt;li&gt;环境类负责维持和查询行为类，各种算法则在具体策略中提供。由于算法和环境独立开。&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;算法的修改都不会影响环境和客户&lt;/code&gt;。&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;strong&gt;策略模式应用：&lt;/strong&gt;对象的比较、排序方法的实现,java中的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Sortable接口&lt;/code&gt;,OC里的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSSortDescriptor&lt;/code&gt;。&lt;/p&gt; &lt;p&gt;参考：&lt;a href=&quot;https://luowei.github.io/http://liumh.com/2016/01/06/ios-object-equal/&quot;&gt;iOS中的对象等同性&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt; &lt;p&gt;参考：&lt;a href=&quot;https://luowei.github.io/http://www.jianshu.com/p/d46f390db1f5&quot;&gt;iOS面试题小结&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/15905890897817.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/15905890897817</guid> <pubDate>Sun, 09 Aug 2020 00:00:00 +0800</pubDate> </item> <item> <title>《用简单的方式打破坏习惯》英文演讲稿字幕</title> <description> &lt;h1 id=&quot;用简单的方式打破坏习惯英文演讲稿字幕&quot;&gt;《用简单的方式打破坏习惯》英文演讲稿字幕&lt;/h1&gt; &lt;h3 id=&quot;a-simple-way-to-break-a-bad-habit&quot;&gt;A simple way to break a bad habit&lt;/h3&gt; &lt;p&gt;00:00 When I was first learning to meditate, the instruction was to simply pay attention to my breath, and when my mind wandered, to bring it back.&lt;/p&gt; &lt;p&gt;00:08 Sounded simple enough. Yet I’d sit on these silent retreats, sweating through T-shirts in the middle of winter. I’d take naps every chance I got because it was really hard work. Actually, it was exhausting. The instruction was simple enough but I was missing something really important.&lt;/p&gt; &lt;p&gt;00:28 So why is it so hard to pay attention? Well, studies show that even when we’re really trying to pay attention to something – like maybe this talk – at some point, about half of us will drift off into a daydream, or have this urge to check our Twitter feed.&lt;/p&gt; &lt;p&gt;00:44 So what’s going on here? It turns out that we’re fighting one of the most evolutionarily-conserved learning processes currently known in science, one that’s conserved back to the most basic nervous systems known to man.&lt;/p&gt; &lt;p&gt;00:57 This reward-based learning process is called positive and negative reinforcement, and basically goes like this. We see some food that looks good, our brain says, “Calories! … Survival!” We eat the food, we taste it – it tastes good. And especially with sugar, our bodies send a signal to our brain that says, “Remember what you’re eating and where you found it.” We lay down this context-dependent memory and learn to repeat the process next time. See food, eat food, feel good, repeat. Trigger, behavior, reward.&lt;/p&gt; &lt;p&gt;01:31 Simple, right? Well, after a while, our creative brains say, “You know what? You can use this for more than just remembering where food is. You know, next time you feel bad, why don’t you try eating something good so you’ll feel better?” We thank our brains for the great idea, try this and quickly learn that if we eat chocolate or ice cream when we’re mad or sad, we feel better.&lt;/p&gt; &lt;p&gt;01:56 Same process, just a different trigger. Instead of this hunger signal coming from our stomach, this emotional signal – feeling sad – triggers that urge to eat.&lt;/p&gt; &lt;p&gt;02:07 Maybe in our teenage years, we were a nerd at school, and we see those rebel kids outside smoking and we think, “Hey, I want to be cool.” So we start smoking. The Marlboro Man wasn’t a dork, and that was no accident. See cool, smoke to be cool, feel good. Repeat. Trigger, behavior, reward. And each time we do this, we learn to repeat the process and it becomes a habit. So later, feeling stressed out triggers that urge to smoke a cigarette or to eat something sweet.&lt;/p&gt; &lt;p&gt;02:41 Now, with these same brain processes, we’ve gone from learning to survive to literally killing ourselves with these habits. Obesity and smoking are among the leading preventable causes of morbidity and mortality in the world.&lt;/p&gt; &lt;p&gt;02:55 So back to my breath. What if instead of fighting our brains, or trying to force ourselves to pay attention, we instead tapped into this natural, reward-based learning process … but added a twist? What if instead we just got really curious about what was happening in our momentary experience?&lt;/p&gt; &lt;p&gt;03:13 I’ll give you an example. In my lab, we studied whether mindfulness training could help people quit smoking. Now, just like trying to force myself to pay attention to my breath, they could try to force themselves to quit smoking. And the majority of them had tried this before and failed – on average, six times.&lt;/p&gt; &lt;p&gt;03:31 Now, with mindfulness training, we dropped the bit about forcing and instead focused on being curious. In fact, we even told them to smoke. What? Yeah, we said, “Go ahead and smoke, just be really curious about what it’s like when you do.”&lt;/p&gt; &lt;p&gt;03:46 And what did they notice? Well here’s an example from one of our smokers. She said, “Mindful smoking: smells like stinky cheese and tastes like chemicals, YUCK!” Now, she knew, cognitively that smoking was bad for her, that’s why she joined our program. What she discovered just by being curiously aware when she smoked was that smoking tastes like shit.&lt;/p&gt; &lt;p&gt;04:11 (Laughter)&lt;/p&gt; &lt;p&gt;04:14 Now, she moved from knowledge to wisdom. She moved from knowing in her head that smoking was bad for her to knowing it in her bones, and the spell of smoking was broken. She started to become disenchanted with her behavior.&lt;/p&gt; &lt;p&gt;04:30 Now, the prefrontal cortex, that youngest part of our brain from an evolutionary perspective, it understands on an intellectual level that we shouldn’t smoke. And it tries its hardest to help us change our behavior, to help us stop smoking, to help us stop eating that second, that third, that fourth cookie. We call this cognitive control. We’re using cognition to control our behavior. Unfortunately, this is also the first part of our brain that goes offline when we get stressed out, which isn’t that helpful.&lt;/p&gt; &lt;p&gt;05:02 Now, we can all relate to this in our own experience. We’re much more likely to do things like yell at our spouse or kids when we’re stressed out or tired, even though we know it’s not going to be helpful. We just can’t help ourselves.&lt;/p&gt; &lt;p&gt;05:15 When the prefrontal cortex goes offline, we fall back into our old habits, which is why this disenchantment is so important. Seeing what we get from our habits helps us understand them at a deeper level – to know it in our bones so we don’t have to force ourselves to hold back or restrain ourselves from behavior. We’re just less interested in doing it in the first place.&lt;/p&gt; &lt;p&gt;05:34 And this is what mindfulness is all about: Seeing really clearly what we get when we get caught up in our behaviors, becoming disenchanted on a visceral level and from this disenchanted stance, naturally letting go.&lt;/p&gt; &lt;p&gt;05:48 This isn’t to say that, poof, magically we quit smoking. But over time, as we learn to see more and more clearly the results of our actions, we let go of old habits and form new ones.&lt;/p&gt; &lt;p&gt;06:00 The paradox here is that mindfulness is just about being really interested in getting close and personal with what’s actually happening in our bodies and minds from moment to moment. This willingness to turn toward our experience rather than trying to make unpleasant cravings go away as quickly as possible. And this willingness to turn toward our experience is supported by curiosity, which is naturally rewarding.&lt;/p&gt; &lt;p&gt;06:23 What does curiosity feel like? It feels good. And what happens when we get curious? We start to notice that cravings are simply made up of body sensations – oh, there’s tightness, there’s tension, there’s restlessness – and that these body sensations come and go. These are bite-size pieces of experiences that we can manage from moment to moment rather than getting clobbered by this huge, scary craving that we choke on.&lt;/p&gt; &lt;p&gt;06:50 In other words, when we get curious, we step out of our old, fear-based, reactive habit patterns, and we step into being. We become this inner scientist where we’re eagerly awaiting that next data point.&lt;/p&gt; &lt;p&gt;07:06 Now, this might sound too simplistic to affect behavior. But in one study, we found that mindfulness training was twice as good as gold standard therapy at helping people quit smoking. So it actually works.&lt;/p&gt; &lt;p&gt;07:19 And when we studied the brains of experienced meditators, we found that parts of a neural network of self-referential processing called the default mode network were at play. Now, one current hypothesis is that a region of this network, called the posterior cingulate cortex, is activated not necessarily by craving itself but when we get caught up in it, when we get sucked in, and it takes us for a ride.&lt;/p&gt; &lt;p&gt;07:41 In contrast, when we let go – step out of the process just by being curiously aware of what’s happening – this same brain region quiets down.&lt;/p&gt; &lt;p&gt;07:51 Now we’re testing app and online-based mindfulness training programs that target these core mechanisms and, ironically, use the same technology that’s driving us to distraction to help us step out of our unhealthy habit patterns of smoking, of stress eating and other addictive behaviors.&lt;/p&gt; &lt;p&gt;08:09 Now, remember that bit about context-dependent memory? We can deliver these tools to peoples’ fingertips in the contexts that matter most. So we can help them tap into their inherent capacity to be curiously aware right when that urge to smoke or stress eat or whatever arises.&lt;/p&gt; &lt;p&gt;08:26 So if you don’t smoke or stress eat, maybe the next time you feel this urge to check your email when you’re bored, or you’re trying to distract yourself from work, or maybe to compulsively respond to that text message when you’re driving, see if you can tap into this natural capacity, just be curiously aware of what’s happening in your body and mind in that moment. It will just be another chance to perpetuate one of our endless and exhaustive habit loops … or step out of it.&lt;/p&gt; &lt;p&gt;08:54 Instead of see text message, compulsively text back, feel a little bit better – notice the urge, get curious, feel the joy of letting go and repeat.&lt;/p&gt; &lt;p&gt;09:05 Thank you.&lt;/p&gt; &lt;p&gt;09:06 (Applause)&lt;/p&gt; </description> <link>https://luowei.github.io/%E8%8B%B1%E8%AF%AD/15905890897443.html</link> <guid>https://luowei.github.io/%E8%8B%B1%E8%AF%AD/15905890897443</guid> <pubDate>Sun, 09 Aug 2020 00:00:00 +0800</pubDate> </item> <item> <title>我的几个APP 1.0版本上架的文案及描述</title> <description> &lt;h2 id=&quot;我的几个app-10版本上架的文案及描述&quot;&gt;我的几个APP 1.0版本上架的文案及描述&lt;/h2&gt; &lt;h3 id=&quot;开发者app&quot;&gt;开发者App&lt;/h3&gt; &lt;p&gt;https://itunes.apple.com/cn/developer/wei-luo/id990121194&lt;/p&gt; &lt;h3 id=&quot;万能输入法&quot;&gt;万能输入法&lt;/h3&gt; &lt;p&gt;https://itunes.apple.com/cn/app/id1227288468&lt;br /&gt; https://itunes.apple.com/us/app/id1227288468&lt;/p&gt; &lt;h4 id=&quot;中文描述&quot;&gt;中文描述&lt;/h4&gt; &lt;p&gt;＝＝＝万能输入法宿主App功能介绍＝＝＝&lt;br /&gt; 万能输入法宿主App界面简法、动画淡雅；&lt;br /&gt; 万能输入法宿主App内置简版Web浏览器支持关键词搜索；&lt;br /&gt; 万能输入法宿主App内置软笔画板支持自定义笔触大小及颜色，并笔锋效果；&lt;br /&gt; 万能输入法宿主App内置拼音转换、翻译、书法字典、汉语查询、以及学术查询入口；&lt;/p&gt; &lt;p&gt;＝＝＝万能输入法键盘功能介绍＝＝＝&lt;br /&gt; 万能输入法的拼音键盘：支持全键盘拼音、九键盘拼音；&lt;br /&gt; 万能输入法的五笔键盘：支持86五笔单字和常用词组输入；&lt;br /&gt; 万能输入法的笔画键盘：九宫格的笔画输入键盘；&lt;br /&gt; 万能输入法的手写键盘：支持中文、日文、韩文手写识别；&lt;/p&gt; &lt;p&gt;＝＝＝万能输入法丰富多彩的功能＝＝＝&lt;br /&gt; 万能输入法可以打开支持五笔、拼音、翻译快捷查询；&lt;br /&gt; 万能输入法还可以打字过程中长按候选词即可快捷查询五笔编码、拼音以及翻译；&lt;br /&gt; 万能输入法便捷的粘贴键可以随时粘贴剪粘板的内容；&lt;br /&gt; 万能输入法的预览输入框内容功能可以随时翻译转换输入框内容；&lt;br /&gt; 万能输入法支持搜索联系人、快捷复制联系人信息及给搜索到的联系人打电话；&lt;br /&gt; 万能输入法支持搜索图片、GIF动画；&lt;br /&gt; 万能输入法支持保存、分享、以及收藏图片、GIF动画；&lt;br /&gt; 万能输入法同样也支持快速定位文本插入点位置；&lt;/p&gt; &lt;p&gt;万能输入法的涂鸭功能让你随进随地画图圈图做标记；&lt;br /&gt; 万能输入法的实时翻译与快捷翻译让外语输入更便捷；&lt;br /&gt; 万能输入法的拼音转换可以帮助你快捷的输入拼音；&lt;br /&gt; 万能输入法的繁简转换使在手机上输入繁体字也变得轻而易举；&lt;br /&gt; 万能输入法的火星文字让你的输入更标新立异，彰显个性；&lt;br /&gt; 万能输入法的捏合截图可便捷截取自定义键盘效果图；&lt;br /&gt; 万能输入法的快捷短语你可分类设置平时经常输入的；&lt;br /&gt; 万能输入法的丰富的Emoji与颜文字让输入更加出彩；&lt;br /&gt; 万能输入法的斗图玩法的可以让你在输入法里玩转你喜欢的斗图；&lt;/p&gt; &lt;p&gt;万能输入法可以任意从相册选择一张图片调整模糊程度作为键盘皮肤；&lt;br /&gt; 万能输入法可以任意选择一种颜色作为键盘皮肤；&lt;br /&gt; 万能输入法可以任意自定义键盘的按键的样式主题，比如背景色/边框/字体/圆角/阴影/间距等；&lt;/p&gt; &lt;hr /&gt; &lt;h3 id=&quot;我的浏览器---可个性化的自定义浏览器&quot;&gt;我的浏览器 - 可个性化的自定义浏览器&lt;/h3&gt; &lt;p&gt;https://itunes.apple.com/cn/app/id1019594424&lt;br /&gt; https://itunes.apple.com/us/app/id1019594424&lt;/p&gt; &lt;h4 id=&quot;中文描述-1&quot;&gt;中文描述&lt;/h4&gt; &lt;p&gt;我的浏览器 - 一个可个性化的自定义浏览器&lt;/p&gt; &lt;p&gt;我的浏览器是一款基于WKWebview的上网浏览器；&lt;/p&gt; &lt;p&gt;我的浏览器特点:&lt;br /&gt; 我的浏览器名字独特可作为你的个性浏览器；&lt;br /&gt; 我的浏览器的自动全屏功能让你在看内容时更加全神贯注；&lt;br /&gt; 我的浏览器夜间模式有效保护你的眼睛；&lt;br /&gt; 我的浏览器的无图模式可以屏蔽掉网页中的图片；&lt;br /&gt; 我的浏览器的清除痕迹功能让上网更加安全放心；&lt;br /&gt; 我的浏览器的拦截广告功能让网页更干净；&lt;br /&gt; 我的浏览器同样也支持多窗口、书签管理和历史记录；&lt;br /&gt; 我的浏览器支持扫描二维码打开页面；&lt;br /&gt; 我的浏览器支持用系统自带的浏览器打开网页；&lt;br /&gt; 我的浏览器支持将浏览的网页直接导出成PDF电子纸文件；&lt;/p&gt; &lt;p&gt;我的浏览器自定义功能:&lt;br /&gt; 我的浏览器内置静态WebServer，支持在手机上搭建简单的静态web站点；&lt;br /&gt; 我的浏览器新增的ShareExtension，支持任意文件的导入和打开；&lt;/p&gt; &lt;p&gt;我的浏览器内置Web DAV，可以更方便快捷实现从电脑上传或下载文件到web容器；&lt;/p&gt; &lt;p&gt;我的浏览器内置的Web Uploader，可以很方便的上传手机上的已有的照片或文件到Web容器；&lt;/p&gt; &lt;p&gt;我的浏览器的配置文件都在web容器的Config目录下，用户可以修改HomeContent.json文件内容来自定义浏览器首页；用户可修改AdblockRules.txt文件内容来添加或修改广告拦截的规则；&lt;/p&gt; &lt;p&gt;因为我在做这个浏览器之初就要求了目标是做一个极轻量、极快的的、可自定义配置的浏览器，几个版下来，每次加任何功能都要再三考虑斟酌。才得已让现在的这个”我的浏览器”在集众多功能于一身的同时并保证了安装包在5M左右，为用户省下更多存储空间，真正做到身轻如燕；&lt;/p&gt; &lt;p&gt;我的浏览器，也是你的可个性化的自定义浏览器，你值得拥有！&lt;/p&gt; &lt;h4 id=&quot;英文描述&quot;&gt;英文描述&lt;/h4&gt; &lt;p&gt;MyBrowser - a customizable browser&lt;/p&gt; &lt;p&gt;MyBrowser is a web browser based on WKWebview;&lt;/p&gt; &lt;p&gt;MyBrowser features:&lt;br /&gt; MyBrowser name unique as your personality browser;&lt;br /&gt; MyBrowser’s full auto-full functionality gives you more immersion when you look at content;&lt;br /&gt; MyBrowser night mode effectively protects your eyes;&lt;br /&gt; MyBrowser’s no-picture mode can screen out the picture;&lt;br /&gt; Clear traces of my browser to make the Internet more secure and secure;&lt;br /&gt; MyBrowser’s blocking ad feature makes web pages cleaner;&lt;br /&gt; MyBrowser also supports multiple windows, bookmark management and history;&lt;br /&gt; MyBrowser supports scanning QR code to open the page;&lt;br /&gt; MyBrowser supports using the system’s own browser to open the page;&lt;br /&gt; MyBrowser supports browsing web pages directly into PDF electronic paper files;&lt;/p&gt; &lt;p&gt;MyBrowser custom features:&lt;br /&gt; MyBrowser built-in static WebServer, support for mobile phones to build a simple static web site;&lt;/p&gt; &lt;p&gt;MyBrowser has built-in Web DAV, which makes it quick and easy to upload or download files from your computer to web containers.&lt;/p&gt; &lt;p&gt;MyBrowser built-in Web Uploader, you can easily upload the phone’s existing photos or files to the Web container;&lt;/p&gt; &lt;p&gt;MyBrowser’s configuration file in the web container Config directory, the user can modify the HomeContent.json file content to customize the browser home page; Users can modify AdblockRules.txt file content to add or modify the rules of ad blocking;&lt;/p&gt; &lt;p&gt;Because I was the beginning of this browser requires the goal is to do a very lightweight, very fast, customizable browser, a few versions down, every time you add any feature should be considered again and again. Only then have this “my browser” in the collection of many functions at the same time and ensure that the installation package within 5M, to save users more storage space, truly lightweight as Yan;&lt;/p&gt; &lt;p&gt;MyBrowser, but also your customizable custom browser, you deserve it!&lt;/p&gt; &lt;hr /&gt; &lt;h3 id=&quot;美图王---mywallpaper&quot;&gt;美图王 - MyWallPaper&lt;/h3&gt; &lt;p&gt;https://itunes.apple.com/cn/app/id1281496162&lt;br /&gt; https://itunes.apple.com/us/app/id1281496162&lt;/p&gt; &lt;h4 id=&quot;中文描述-2&quot;&gt;中文描述&lt;/h4&gt; &lt;p&gt;一款高清的意向图和壁纸图片应用&lt;/p&gt; &lt;p&gt;美图王又名MyWallPaper，是一款非常好用的图片App;&lt;/p&gt; &lt;p&gt;美图王是一款很棒的壁纸应用，有丰富多彩的高清图片可以用作背景。&lt;/p&gt; &lt;p&gt;美图王支持高清图片编辑、各种滤镜美化，保存分享等功能；&lt;/p&gt; &lt;p&gt;美图王每天会有新鲜高清美图更新，可满足无限的创意需求；&lt;/p&gt; &lt;p&gt;美图王是设计师们的好帮手，内置搜索各素材和高清图片功能，有着无限的灵感来源；&lt;/p&gt; &lt;p&gt;美图王的接入了Unsplash，以搜索Unsplash上任意的图片，资源都是经过用户精心挑选的。&lt;/p&gt; &lt;h4 id=&quot;英文描述-1&quot;&gt;英文描述&lt;/h4&gt; &lt;p&gt;MyWallPaper is a great wallpaper app, a rich and colorful picture for you to use as a wallpaper.&lt;/p&gt; &lt;p&gt;If you like to use a beautiful picture as a wallpaper, then MyWallPaper is the best choice;&lt;/p&gt; &lt;p&gt;If you like photography or like to collect all kinds of beautiful pictures, then MyWallPaper can meet your requirements;&lt;/p&gt; &lt;p&gt;If you are a designer usually like to find material and high-definition pictures, then MyWallPaper is your source of inspiration;&lt;/p&gt; &lt;p&gt;MyWallPaper is also a simple version of Unsplash, you can search any picture like on Unsplash.&lt;/p&gt; &lt;hr /&gt; &lt;h3 id=&quot;markdown---markdown万能记事本&quot;&gt;MarkDown - Markdown万能记事本&lt;/h3&gt; &lt;p&gt;https://itunes.apple.com/cn/app/id1274459069&lt;br /&gt; https://itunes.apple.com/us/app/id1274459069&lt;/p&gt; &lt;h4 id=&quot;中文描述-3&quot;&gt;中文描述&lt;/h4&gt; &lt;p&gt;一款支持从文本图片导入及导出PDF的Markdown记事本&lt;/p&gt; &lt;p&gt;Markdown万能记事本是一个快捷记事的好工具，可以作为笔记本或日记本或图文备忘录使用。&lt;/p&gt; &lt;p&gt;Markdown万能记事本是一个为编辑Markdwon格式文档而生的支持Markdown格式的记事本。&lt;/p&gt; &lt;p&gt;MarkDown万能记事本支持各样的信纸背景、格式良好的进行预览。&lt;/p&gt; &lt;p&gt;MarkDown万能记事本可以快速导出生成PDF文档,预览PDF,以及分享PDF文档。&lt;/p&gt; &lt;p&gt;MarkDown万能记事本可以设置个性化的字体，有系统推荐字体以及中文字体，如细体、草书、行书、隶书、幼圆、雅痞、雅黑供你选择；&lt;/p&gt; &lt;p&gt;MarkDown万能记事本自定义个性化的皮肤让记事本更加丰富多彩。既可以选择传统的黑白主题，也可以选反摩托发动机主题。还有保护眼主题皮肤可以更好的保护你的眼睛，生活主题可以让人感受优雅的生活画面。&lt;/p&gt; &lt;p&gt;更加让人意外的是，通过MarkDown万能记事本的Share Extension可以从其他应用导入文本和图片，支持导入word、excel、powerpoint、pages、numbers、key以及rtf等文本文件内容。&lt;/p&gt; &lt;h4 id=&quot;英文描述-2&quot;&gt;英文描述&lt;/h4&gt; &lt;p&gt;Markdown Notepad is a great tool for quick notes that can be used as a notebook or diary or graphic memorandum.&lt;/p&gt; &lt;p&gt;Markdown Notepad is a Notepad that supports the Markdown format for editing Markdwon format documents.&lt;/p&gt; &lt;p&gt;MarkDown Notepad supports a variety of stationery background, well-formatted preview.&lt;/p&gt; &lt;p&gt;MarkDown Notepad can quickly generate PDF documents generated, preview PDF, and share PDF documents.&lt;/p&gt; &lt;p&gt;MarkDown Notepad can be customized to set the font, the system recommended fonts and Chinese fonts, such as detailed, cursive, Xingshu, official script, Yuanyuan, yuppie, elegant Black for your choice;&lt;/p&gt; &lt;p&gt;MarkDown Notepad custom personalized skin to make Notepad more colorful. You can choose the traditional black and white theme, you can also choose anti-motorcycle engine theme. There are eye protection theme of the eye can better protect your eyes, life theme can make people feel elegant life picture.&lt;/p&gt; &lt;p&gt;Even more surprising is that through MarkDown Notepad Share Extension can import text and images from other applications, support for importing word, excel, powerpoint, pages, numbers, key and rtf text file content.&lt;/p&gt; &lt;hr /&gt; &lt;h3 id=&quot;照片diy&quot;&gt;照片DIY&lt;/h3&gt; &lt;p&gt;https://itunes.apple.com/cn/app/id1198477850&lt;br /&gt; https://itunes.apple.com/us/app/id1198477850&lt;/p&gt; &lt;h4 id=&quot;中文描述-4&quot;&gt;中文描述&lt;/h4&gt; &lt;p&gt;一款可以对图片加滤镜、各种涂鸭、打码塞克、裁剪的APP&lt;/p&gt; &lt;p&gt;照片DIY也叫MyPhotoDIY，是一款很不错的照片处理应用，除了能对照片进行一些翻转、旋转、裁剪等基本的图片操作外，还可以随意调整照片的色阶、对比度、白平衡，对人物还有美白的功能，以及打码塞克，各种涂鸭功能。&lt;/p&gt; &lt;p&gt;照片DIY内置了二十种常用的滤镜，想要什么效果都可以随意自由发挥。&lt;/p&gt; &lt;p&gt;照片DIY同时也内置的强大涂鸭功能，各种几何形状随意画，各种自由画笔也可随意挑，还有丰富的颜色选择盒、底纹选择盒、以及字体选择盒。也可以自己选择相册照片作为画笔底纹可以让画笔更佳神奇。&lt;/p&gt; &lt;p&gt;照片DIY的分享组件支持从其他应用导入照片到照片DIY中编辑，比如你可以从相册选择一张照片进行编辑。&lt;/p&gt; &lt;h4 id=&quot;英文描述-3&quot;&gt;英文描述&lt;/h4&gt; &lt;p&gt;MyPhotoDIY also called photo DIY, is a very good photo processing applications, in addition to the photo some flip, rotate, crop and other basic picture operations, but also free to adjust the photo color scale, contrast, white balance, As well as whitening features, as well as playing yards, a variety of coated duck function.&lt;/p&gt; &lt;p&gt;MyPhotoDIY built-in 20 kinds of commonly used filters, you want what effects are free to play.&lt;/p&gt; &lt;p&gt;MyPhotoDIY also built a powerful Tu duck function, a variety of geometric shapes at random, a variety of free brush can also be free to pick, there are a wealth of color selection box, shading box, as well as font selection box. You can also choose your own photo albums as brush shading can make the brush better magic.&lt;/p&gt; &lt;p&gt;In short, this a powerful image processing tools, it is worth your try.&lt;/p&gt; &lt;hr /&gt; &lt;h3 id=&quot;斗图王---用照片及视频制作斗图&quot;&gt;斗图王 - 用照片及视频制作斗图&lt;/h3&gt; &lt;p&gt;https://itunes.apple.com/cn/app/id1335365550&lt;br /&gt; https://itunes.apple.com/us/app/id1335365550&lt;/p&gt; &lt;h4 id=&quot;中文描述-5&quot;&gt;中文描述&lt;/h4&gt; &lt;p&gt;一个GIF斗图动画表情制作和搜索APP&lt;/p&gt; &lt;p&gt;斗图王是一个GIF斗图动画表情制作及搜索工具，兼具斗图浏览器与斗图编辑器的功能。&lt;/p&gt; &lt;p&gt;斗图制作：&lt;br /&gt; 斗图王支持对GIF帧率调整；&lt;br /&gt; 斗图王支持对GIF缩放大小；&lt;br /&gt; 斗图王支持对GIF编辑截剪部分区域；&lt;br /&gt; 斗图王支持批量导出GIF的图片帧的集合；&lt;br /&gt; 斗图王支持对GIF图片指定一帧的图片保存和分享；&lt;/p&gt; &lt;p&gt;斗图编辑：&lt;br /&gt; 斗图王支持选择多张照片生成GIF动画；&lt;br /&gt; 斗图王支持对生成的GIF斗图编辑进行截剪、缩放大小、调整帧率；&lt;/p&gt; &lt;p&gt;LivePhoto导出：&lt;br /&gt; 斗图王支持将LivePhoto生成为GIF动画图片；&lt;br /&gt; 斗图王支持将LivePhoto导出短视频；&lt;br /&gt; 斗图王支持将LivePhoto导出成图片帧；&lt;br /&gt; 斗图王支持对LivePhoto内的短视频播放、保存及分享；&lt;/p&gt; &lt;p&gt;短视频转斗画：&lt;br /&gt; 斗图王支持将短视频制作为GIF动画图片；&lt;br /&gt; 斗图王支持从其他App分享导出视频生成GIF;&lt;br /&gt; 斗图王支持将短视频导出成图片帧；&lt;br /&gt; 斗图王支持对短视频指定一帧的图片保存和分享；&lt;/p&gt; &lt;p&gt;斗图搜索、斗图浏览及斗图收藏：&lt;br /&gt; 斗图王支持海量的图片搜索，编辑、分享、保存以及收藏；&lt;br /&gt; 斗图王支持复制搜索到的GIF斗图图片网址以及打开对应的GIF斗图；&lt;br /&gt; 斗图王支持将喜欢或常用的图片及斗图动画添加到自定义的收藏分类里；&lt;br /&gt; 斗图王支持对收藏分类的添加、修改及删除；&lt;br /&gt; 斗图王支持对收藏的图片进行修改及删除；&lt;br /&gt; 斗图王强大的ShareExtension可快速导入视频和图片制作斗图；&lt;/p&gt; &lt;p&gt;支持网站：wodedata.com&lt;/p&gt; &lt;h4 id=&quot;英文描述-4&quot;&gt;英文描述&lt;/h4&gt; &lt;p&gt;GIF make and search&lt;/p&gt; &lt;p&gt;GIFMaster is a GIF bucket animation expression production and search tools, both GIF browser and Doudu editor features.&lt;/p&gt; &lt;p&gt;GIF Make:&lt;br /&gt; GIFMaster support GIF frame rate adjustment;&lt;br /&gt; GIFMaster support GIF zoom size;&lt;br /&gt; GIFMaster support GIF editing cut part of the region;&lt;br /&gt; GIFMaster support batch export GIF picture frame collection;&lt;br /&gt; GIFMaster support GIF images to specify a picture of the picture preservation and sharing;&lt;/p&gt; &lt;p&gt;GIF edit:&lt;br /&gt; GIFMaster support the choice of multiple photos generated GIF animation;&lt;br /&gt; GIFMaster support for the generation of GIF bucket diagram editing cut, zoom size, adjust the frame rate;&lt;/p&gt; &lt;p&gt;LivePhoto Export:&lt;br /&gt; GIFMaster supports LivePhoto generated as animated GIF images;&lt;br /&gt; GIFMaster support LivePhoto export short video;&lt;br /&gt; GIFMaster support LivePhoto exported into a picture frame;&lt;br /&gt; GIFMaster supports short video playback within LivePhoto, save and share;&lt;/p&gt; &lt;p&gt;Short video transfer to GIF:&lt;br /&gt; GIFMaster support short video production as animated GIF images;&lt;br /&gt; GIFMaster support the short video export to a picture frame;&lt;br /&gt; GIFMaster supports the short video to specify a picture to save and share;&lt;/p&gt; &lt;p&gt;GIF search, browsing and collection:&lt;br /&gt; GIFMaster supports massive image search, editing, sharing, preservation and collection;&lt;br /&gt; GIFMaster support copy search to the GIF bucket map image URL and open the corresponding GIF bucket map;&lt;br /&gt; GIFMaster supports the favorite or commonly used pictures and bucket animation added to the custom collection category;&lt;br /&gt; GIFMaster support for the collection of add, modify and delete;&lt;br /&gt; GIFMaster support for the collection of pictures to be modified and deleted;&lt;/p&gt; &lt;p&gt;Support Website: wodedata.com&lt;/p&gt; </description> <link>https://luowei.github.io/app/15905890897401.html</link> <guid>https://luowei.github.io/app/15905890897401</guid> <pubDate>Sun, 09 Aug 2020 00:00:00 +0800</pubDate> </item> <item> <title>SQLite 常用查询语句</title> <description> &lt;h1 id=&quot;sqlite-常用查询语句&quot;&gt;SQLite 常用查询语句&lt;/h1&gt; &lt;h2 id=&quot;创建表&quot;&gt;创建表&lt;/h2&gt; &lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;DROP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IF&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;EXISTS&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;tb_chizhu&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;tb_chizhu&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;id&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;integer&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;PRIMARY&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;KEY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AUTOINCREMENT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;hanZi&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;pingYin&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;wuBiBianMa&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;leiXing&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;wuBiQuanMa&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;wuBiBianMa98&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;frequency&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;number&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;pingYin2&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;45&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;查询与更新&quot;&gt;查询与更新&lt;/h2&gt; &lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;UPDATE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tb_word&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SET&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;imgChaiJie86&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;REPLACE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imgChaiJie86&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&apos;cjt/own/&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;imgChaiJie86&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;IS&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tb_word&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12018&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;REPLACE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&apos;ctj/own/一.gif&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&apos;ctj/own/&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tb_word&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;LENGTH&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imgChaiJie86&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COUNT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tb_word&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;LENGTH&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wuBiQuanMa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COUNT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tb_word&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;LENGTH&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wuBiQuanMa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COUNT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tb_word&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wuBiQuanMa&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;IS&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tb_chizhu&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wuBiQuanMa&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;IS&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;LENGTH&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wuBiQuanMa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;UPDATE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tb_chizhu&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SET&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wuBiQuanMa&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;LENGTH&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wuBiQuanMa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;查询和更新一级简码&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;SELECT COUNT(*) FROM T_98CodeTable; -- 1. 查询和更新一级简码 SELECT * FROM T_86CodeTable WHERE LENGTH(Code)=1 AND Word IN(&apos;一&apos;,&apos;地&apos;,&apos;在&apos;,&apos;要&apos;,&apos;工&apos;,&apos;上&apos;,&apos;是&apos;,&apos;中&apos;,&apos;国&apos;,&apos;同&apos;,&apos;和&apos;,&apos;的&apos;,&apos;有&apos;,&apos;人&apos;,&apos;我&apos;,&apos;主&apos;,&apos;产&apos;,&apos;不&apos;,&apos;为&apos;,&apos;这&apos;,&apos;民&apos;,&apos;了&apos;,&apos;发&apos;,&apos;以&apos;,&apos;经&apos;) SELECT * FROM T_98CodeTable WHERE LENGTH(Code)=1 AND Word IN(&apos;一&apos;,&apos;地&apos;,&apos;在&apos;,&apos;要&apos;,&apos;工&apos;,&apos;上&apos;,&apos;是&apos;,&apos;中&apos;,&apos;国&apos;,&apos;同&apos;,&apos;和&apos;,&apos;的&apos;,&apos;有&apos;,&apos;人&apos;,&apos;我&apos;,&apos;主&apos;,&apos;产&apos;,&apos;不&apos;,&apos;为&apos;,&apos;这&apos;,&apos;民&apos;,&apos;了&apos;,&apos;发&apos;,&apos;以&apos;,&apos;经&apos;) UPDATE T_86CodeTable SET UserCnt=100 WHERE LENGTH(Code)=1 AND Word IN(&apos;一&apos;,&apos;地&apos;,&apos;在&apos;,&apos;要&apos;,&apos;工&apos;,&apos;上&apos;,&apos;是&apos;,&apos;中&apos;,&apos;国&apos;,&apos;同&apos;,&apos;和&apos;,&apos;的&apos;,&apos;有&apos;,&apos;人&apos;,&apos;我&apos;,&apos;主&apos;,&apos;产&apos;,&apos;不&apos;,&apos;为&apos;,&apos;这&apos;,&apos;民&apos;,&apos;了&apos;,&apos;发&apos;,&apos;以&apos;,&apos;经&apos;) UPDATE T_98CodeTable SET UserCnt=100 WHERE LENGTH(Code)=1 AND Word IN(&apos;一&apos;,&apos;地&apos;,&apos;在&apos;,&apos;要&apos;,&apos;工&apos;,&apos;上&apos;,&apos;是&apos;,&apos;中&apos;,&apos;国&apos;,&apos;同&apos;,&apos;和&apos;,&apos;的&apos;,&apos;有&apos;,&apos;人&apos;,&apos;我&apos;,&apos;主&apos;,&apos;产&apos;,&apos;不&apos;,&apos;为&apos;,&apos;这&apos;,&apos;民&apos;,&apos;了&apos;,&apos;发&apos;,&apos;以&apos;,&apos;经&apos;) &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;查询和更新二级简码&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-- 查询和更新二级简码 -- SELECT `hanZi` FROM tb_word where `leiXing` = 2 and LENGTH(wuBiBianMa)=2; SELECT * FROM T_86CodeTable WHERE LENGTH(Code)=2 AND Code NOT LIKE &apos;%z%&apos; AND Word NOT IN(&apos;一&apos;,&apos;地&apos;,&apos;在&apos;,&apos;要&apos;,&apos;工&apos;,&apos;上&apos;,&apos;是&apos;,&apos;中&apos;,&apos;国&apos;,&apos;同&apos;,&apos;和&apos;,&apos;的&apos;,&apos;有&apos;,&apos;人&apos;,&apos;我&apos;,&apos;主&apos;,&apos;产&apos;,&apos;不&apos;,&apos;为&apos;,&apos;这&apos;,&apos;民&apos;,&apos;了&apos;,&apos;发&apos;,&apos;以&apos;,&apos;经&apos;) SELECT * FROM T_98CodeTable WHERE LENGTH(Code)=2 AND Code NOT LIKE &apos;%z%&apos; AND Word NOT IN(&apos;一&apos;,&apos;地&apos;,&apos;在&apos;,&apos;要&apos;,&apos;工&apos;,&apos;上&apos;,&apos;是&apos;,&apos;中&apos;,&apos;国&apos;,&apos;同&apos;,&apos;和&apos;,&apos;的&apos;,&apos;有&apos;,&apos;人&apos;,&apos;我&apos;,&apos;主&apos;,&apos;产&apos;,&apos;不&apos;,&apos;为&apos;,&apos;这&apos;,&apos;民&apos;,&apos;了&apos;,&apos;发&apos;,&apos;以&apos;,&apos;经&apos;) UPDATE T_86CodeTable SET UserCnt=1 WHERE LENGTH(Code)=2 AND Code NOT LIKE &apos;%z%&apos; AND Word NOT IN(&apos;一&apos;,&apos;地&apos;,&apos;在&apos;,&apos;要&apos;,&apos;工&apos;,&apos;上&apos;,&apos;是&apos;,&apos;中&apos;,&apos;国&apos;,&apos;同&apos;,&apos;和&apos;,&apos;的&apos;,&apos;有&apos;,&apos;人&apos;,&apos;我&apos;,&apos;主&apos;,&apos;产&apos;,&apos;不&apos;,&apos;为&apos;,&apos;这&apos;,&apos;民&apos;,&apos;了&apos;,&apos;发&apos;,&apos;以&apos;,&apos;经&apos;) UPDATE T_98CodeTable SET UserCnt=1 WHERE LENGTH(Code)=2 AND Code NOT LIKE &apos;%z%&apos; AND Word NOT IN(&apos;一&apos;,&apos;地&apos;,&apos;在&apos;,&apos;要&apos;,&apos;工&apos;,&apos;上&apos;,&apos;是&apos;,&apos;中&apos;,&apos;国&apos;,&apos;同&apos;,&apos;和&apos;,&apos;的&apos;,&apos;有&apos;,&apos;人&apos;,&apos;我&apos;,&apos;主&apos;,&apos;产&apos;,&apos;不&apos;,&apos;为&apos;,&apos;这&apos;,&apos;民&apos;,&apos;了&apos;,&apos;发&apos;,&apos;以&apos;,&apos;经&apos;) &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/%E5%85%B6%E4%BB%96/15945414403299.html</link> <guid>https://luowei.github.io/%E5%85%B6%E4%BB%96/15945414403299</guid> <pubDate>Mon, 03 Aug 2020 00:00:00 +0800</pubDate> </item> <item> <title>添加万能输入法</title> <description> &lt;h4 id=&quot;添加万能输入法&quot;&gt;添加万能输入法&lt;/h4&gt; &lt;ul&gt; &lt;li&gt;去AppStore安装好&lt;a href=&quot;https://luowei.github.io/https://itunes.apple.com/cn/app/id1227288468?mt=8&quot;&gt;万能输入法&lt;/a&gt;后，打开 &lt;strong&gt;设置&lt;/strong&gt;-&amp;gt;&lt;strong&gt;通用&lt;/strong&gt;-&amp;gt;&lt;strong&gt;键盘&lt;/strong&gt;-&amp;gt;&lt;strong&gt;键盘&lt;/strong&gt;-&amp;gt;&lt;strong&gt;添加键盘&lt;/strong&gt;，然后再选择&lt;strong&gt;万能输入法&lt;/strong&gt;即可。&lt;/li&gt; &lt;/ul&gt; &lt;video style=&quot;display:block; margin: 0 auto;&quot; poster=&quot;http://wonderkibod.wodedata.com/images/add_wonderkibod.png&quot; src=&quot;http://wonderkibod.wodedata.com/mp4/add_wonderkibod.mp4&quot; width=&quot;303&quot; height=&quot;540&quot; controls=&quot;&quot; preload=&quot;none&quot;&gt;&lt;/video&gt; </description> <link>https://luowei.github.io/%E4%B8%87%E8%83%BD%E8%BE%93%E5%85%A5%E6%B3%95/15928631429512.html</link> <guid>https://luowei.github.io/%E4%B8%87%E8%83%BD%E8%BE%93%E5%85%A5%E6%B3%95/15928631429512</guid> <pubDate>Sat, 04 Jul 2020 00:00:00 +0800</pubDate> </item> <item> <title>FFmpeg常用命令</title> <description> &lt;h1 id=&quot;ffmpeg常用命令&quot;&gt;FFmpeg常用命令&lt;/h1&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/15905889001131/15786535949475.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15786540152688.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15786543432809.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15786576148356.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15786578125603.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15786629375518.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15786631812905.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15786632354609.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15786636616531.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15786636919739.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15786639594038.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15787350487073.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15787357264943.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15787358924360.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15787359722697.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15787369174835.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15787370697231.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15787389992687.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15787409842843.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15787409614260.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15787420627040.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15787421364561.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15787430133993.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15787446999953.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15787475406501.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788070446245.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788072354670.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788073498575.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788079670826.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788082200092.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788082379460.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788082539714.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788083627879.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788084282251.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788084816794.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788087681765.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788116776382.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788162818171.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788164293585.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788164946119.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788167898494.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788167538208.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788171999863.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788173109188.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788177313920.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788177799579.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788178451929.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788184191962.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788184595426.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788194329383.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788195073774.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788195643132.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788270014627.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788289631704.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788289933588.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788290145653.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788290601094.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788292012672.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788292893108.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788331658241.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788351179447.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788351359357.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788351914607.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788352623324.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15905889001131/15788353509756.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;参考&quot;&gt;参考：&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;https://luowei.github.io/https://www.jianshu.com/p/64b017e08ca8&quot;&gt;《FFmpeg Basics》中文版-04-调整和伸缩视频&lt;/a&gt; &lt;a href=&quot;https://luowei.github.io/https://www.jianshu.com/c/5cef16ba6351&quot;&gt;音视频专辑&lt;/a&gt; &lt;a href=&quot;https://luowei.github.io/https://blog.p2hp.com/archives/5515&quot;&gt;ffmpeg缩放视频尺寸&lt;/a&gt; &lt;a href=&quot;https://luowei.github.io/https://juejin.im/post/5a59993cf265da3e4f0a1e4b&quot;&gt;ffprobe,ffplay ffmpeg常用的命令行命令&lt;/a&gt; &lt;a href=&quot;https://luowei.github.io/http://einverne.github.io/post/2015/02/ffprobe-show-media-info.html&quot;&gt;每天学习一个命令：ffprobe 查看多媒体信息&lt;/a&gt; &lt;a href=&quot;https://luowei.github.io/https://www.linmao.dev/joy/868/&quot;&gt;ffmpeg常用命令&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/ffmpeg/15905889001131.html</link> <guid>https://luowei.github.io/ffmpeg/15905889001131</guid> <pubDate>Mon, 22 Jun 2020 00:00:00 +0800</pubDate> </item> <item> <title>最美色卡</title> <description> &lt;h1 id=&quot;最美色卡&quot;&gt;最美色卡&lt;/h1&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914585271787.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914585373726.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914585533041.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914585598495.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914585643529.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914585705685.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914585829391.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914585894338.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914585973080.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914586032231.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914586312166.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914586341077.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914586482326.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914586734674.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914586841162.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914586986765.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914587067425.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914587201216.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914587290275.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914587389076.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914587482940.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914587560689.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914587645649.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914588729613.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914588966477.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914589381530.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914589531483.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914589636519.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914589756910.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914589812794.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914589915959.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914590062880.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914590153140.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914590260270.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914590343377.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914590414801.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914590492659.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914590587302.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914590691917.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914591460644.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914591529274.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914591590531.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914591660866.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914591780615.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914591933653.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914592005521.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914592824938.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914592989282.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914593133953.jpg&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;https://luowei.github.io/media/15914585021613/15914593248344.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;^_^,谢谢支持！&lt;/p&gt; </description> <link>https://luowei.github.io/%E8%89%B2%E5%8D%A1/15914585021613.html</link> <guid>https://luowei.github.io/%E8%89%B2%E5%8D%A1/15914585021613</guid> <pubDate>Sun, 21 Jun 2020 00:00:00 +0800</pubDate> </item> <item> <title>生成iOS App Preview的几种方案</title> <description> &lt;h2 id=&quot;生成ios-app-preview的几种方案&quot;&gt;生成iOS App Preview的几种方案&lt;/h2&gt; &lt;p&gt;参考：&lt;a href=&quot;https://stackoverflow.com/questions/25797990/capture-ios-simulator-video-for-app-preview&quot;&gt;Capture iOS Simulator video for App Preview &lt;/a&gt;&lt;/p&gt; &lt;h3 id=&quot;xcode自带的command-tools&quot;&gt;xcode自带的command tools&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;For Xcode 8.2 or later&lt;/strong&gt;&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;You can take videos and screenshots of Simulator using the xcrun Xcode command-line utility.&lt;/p&gt; &lt;/blockquote&gt; &lt;ol&gt; &lt;li&gt;Run your app on the simulator.&lt;/li&gt; &lt;li&gt;Open Terminal.app&lt;/li&gt; &lt;li&gt;Run the command &lt;ul&gt; &lt;li&gt;To take a screenshot, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcrun simctl io booted screenshot &amp;lt;filename&amp;gt;.&amp;lt;file extension&amp;gt;&lt;/code&gt;&lt;/li&gt; &lt;li&gt;To take a video, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcrun simctl io booted recordVideo &amp;lt;filename&amp;gt;.&amp;lt;file extension&amp;gt;&lt;/code&gt;.&lt;br /&gt; For example screenshot: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcrun simctl io booted screenshot myScreenshot.png&lt;/code&gt;&lt;br /&gt; For example video:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcrun simctl io booted recordVideo appVideo.mov&lt;/code&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;Press &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ctrl + c&lt;/code&gt; to stop recording the video. &lt;blockquote&gt; &lt;p&gt;The default location for the created file is the current directory.&lt;/p&gt; &lt;/blockquote&gt; &lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;strong&gt;Xcode 11.2 gives extra options.&lt;/strong&gt;&lt;br /&gt; From Xcode 11.2 Beta Release Notes&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;simctl video recording now produces smaller video files, supports HEIC compression, and takes advantage of hardware encoding support where available. In addition, the ability to record video on iOS 13, tvOS 13, and watchOS 6 devices has been restored.&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;Now you could use additional flags for video recording:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;–codec Specifies the codec type: “h264” or “hevc”. Default is “hevc”.&lt;/li&gt; &lt;li&gt;–display iOS: supports “internal” or “external”. Default is “internal”. tvOS: supports only “external”, watchOS: supports only “internal”.&lt;/li&gt; &lt;li&gt;–mask For non-rectangular displays, handle the mask by policy: &lt;ul&gt; &lt;li&gt;ignored: The mask is ignored and the unmasked framebuffer is saved.&lt;/li&gt; &lt;li&gt;alpha: Not supported, but retained for compatibility; the mask is rendered black.&lt;/li&gt; &lt;li&gt;black: The mask is rendered black.&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;–force Force the output file to be written to, even if the file already exists.&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Now you can record a video in h264 codec, with mask (for non-rectangular displays) and some other flags:&lt;/p&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcrun simctl io booted recordVideo --codec=h264 --mask=black --force appVideo.mov&lt;/code&gt;&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;&lt;strong&gt;然后再使用Handbreak转码&lt;/strong&gt;&lt;br /&gt; Download Handbreak: &lt;a href=&quot;https://handbrake.fr/downloads.php&quot;&gt;https://handbrake.fr/downloads.php&lt;/a&gt;&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;And resize the high res video:&lt;/p&gt; &lt;ol&gt; &lt;li&gt;Drag your high res video to Handbreak&lt;/li&gt; &lt;li&gt;Select “Picture Settings” icon&lt;/li&gt; &lt;li&gt;Resize to the correct size - close and press “Start” icon - gets saved to desktop&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;strong&gt;and for screenshoting:&lt;/strong&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;–type Can be “png”, “tiff”, “bmp”, “gif”, “jpeg”. Default is png.&lt;/li&gt; &lt;li&gt;–display iOS: supports “internal” or “external”. Default is “internal”. tvOS: supports only “external”, watchOS: supports only “internal”.&lt;/li&gt; &lt;li&gt;–mask For non-rectangular displays, handle the mask by policy: &lt;ul&gt; &lt;li&gt;ignored: The mask is ignored and the unmasked framebuffer is saved.&lt;/li&gt; &lt;li&gt;alpha: Not supported, but retained for compatibility; the mask is rendered black.&lt;/li&gt; &lt;li&gt;black: The mask is rendered black. You may also specify a port by UUID.&lt;br /&gt; Now you can take a screenshot in jpeg, with mask (for non-rectangular displays) and some other flags:&lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcrun simctl io booted screenshot --type=jpeg --mask=black screenshot.jpeg&lt;/code&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;使用quicktime-player&quot;&gt;使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;QuickTime Player&lt;/code&gt;&lt;/h3&gt; &lt;ol&gt; &lt;li&gt;Open QuickTime Player.&lt;/li&gt; &lt;li&gt;Select File from the menu.&lt;/li&gt; &lt;li&gt;Select New Screen recording.&lt;/li&gt; &lt;li&gt;Record, edit and finish the App Preview with the device you have.&lt;/li&gt; &lt;li&gt;Export as a file.&lt;/li&gt; &lt;li&gt;Go to your Simulators and print screen 1 shot on each the different sizes of iPhone.&lt;/li&gt; &lt;li&gt;Create new App Preview in iMovie.&lt;/li&gt; &lt;li&gt;Insert the screenshot of the desired size FIRST, then add the file of the App Preview you’ve already made.&lt;/li&gt; &lt;li&gt;Export using Share -&amp;gt; App Preview.&lt;/li&gt; &lt;li&gt;Repeat step 7 to 9 for new sizes.&lt;/li&gt; &lt;/ol&gt; &lt;h3 id=&quot;使用系统内置的截屏工具&quot;&gt;使用系统内置的截屏工具&lt;/h3&gt; &lt;ol&gt; &lt;li&gt;Press Shift-Command-5 to show a control panel.&lt;/li&gt; &lt;li&gt;Select 录制所选部分 按钮.&lt;/li&gt; &lt;li&gt;Select a portion of the screen you want to record. That would be the iPhone simulator.&lt;/li&gt; &lt;li&gt;Click 停止录制 按钮 to stop recording.&lt;/li&gt; &lt;li&gt;A thumbnail will appear at the bottom right corner of the screen. You can edit it before saving.&lt;br /&gt; If you want to visualize mouse clicks, after step 1 select Options control and enable Show Mouse Clicks.&lt;/li&gt; &lt;/ol&gt; </description> <link>https://luowei.github.io/ios/make-ios-app-preview.html</link> <guid>https://luowei.github.io/ios/make-ios-app-preview</guid> <pubDate>Tue, 26 May 2020 00:00:00 +0800</pubDate> </item> <item> <title>macOS下生成icns图标命令</title> <description> &lt;h3 id=&quot;macos下生成icns图标命令&quot;&gt;macOS下生成icns图标命令&lt;/h3&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mkdir me.iconset sips -z 16 16 icon1024.png --out me.iconset/icon_16x16.png sips -z 32 32 icon1024.png --out me.iconset/icon_16x16@2x.png sips -z 32 32 icon1024.png --out me.iconset/icon_32x32.png sips -z 64 64 icon1024.png --out me.iconset/icon_32x32@2x.png sips -z 128 128 icon1024.png --out me.iconset/icon_128x128.png sips -z 256 256 icon1024.png --out me.iconset/icon_128x128@2x.png sips -z 256 256 icon1024.png --out me.iconset/icon_256x256.png sips -z 512 512 icon1024.png --out me.iconset/icon_256x256@2x.png sips -z 512 512 icon1024.png --out me.iconset/icon_512x512.png cp icon1024.png me.iconset/icon_512x512@2x.png iconutil --convert icns --output me.icns me.iconset rm -R me.iconset &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/linux/macOS-icns-command.html</link> <guid>https://luowei.github.io/linux/macOS-icns-command</guid> <pubDate>Mon, 18 May 2020 00:00:00 +0800</pubDate> </item> <item> <title>终端代理命令</title> <description> &lt;h3 id=&quot;常用终端命令&quot;&gt;常用终端命令&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;ClashX终端代理命令&lt;/strong&gt;&lt;br /&gt; export https_proxy=http://127.0.0.1:7890 http_proxy=http://127.0.0.1:7890 all_proxy=socks5://127.0.0.1:7891&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Shadow2Ray终端代理命令&lt;/strong&gt;&lt;br /&gt; export https_proxy=http://127.0.0.1:1087 http_proxy=http://127.0.0.1:1087 all_proxy=socks5://127.0.0.1:1080&lt;/p&gt; </description> <link>https://luowei.github.io/linux/terminal-proxy-command.html</link> <guid>https://luowei.github.io/linux/terminal-proxy-command</guid> <pubDate>Sun, 17 May 2020 00:00:00 +0800</pubDate> </item> <item> <title>FFMPeg常用转码命令</title> <description> &lt;h3 id=&quot;ffmpeg常用转码命令&quot;&gt;FFMPeg常用转码命令&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;设置变量&lt;/strong&gt;&lt;br /&gt; filename=xxx.mov&lt;/p&gt; &lt;p&gt;&lt;strong&gt;导出元数据文件&lt;/strong&gt;&lt;br /&gt; ffmpeg -i “$filename” -y -c copy -map_metadata 0 -map_metadata:s:v 0:s:v -map_metadata:s:a 0:s:a -f ffmetadata “${filename}.metadata”&lt;/p&gt; &lt;p&gt;&lt;strong&gt;转换成mp4&lt;/strong&gt;&lt;br /&gt; ffmpeg -i “$filename” -y -f ffmetadata -i “${filename}.metadata” -map_metadata 1 -vcodec libx264 -preset fast -r 20 -acodec aac -ab 64k “${filename}_out.mp4”&lt;/p&gt; &lt;p&gt;&lt;strong&gt;转换到1280大小的mp4&lt;/strong&gt;&lt;br /&gt; ffmpeg -i “$filename” -y -f ffmetadata -i “${filename}.metadata” -map_metadata 1 -vcodec libx264 -preset fast -r 20 -vf scale=”1280:ceil(1280/a/2)*2” -acodec aac -ab 64k “${filename}_out.mp4”&lt;/p&gt; &lt;p&gt;&lt;strong&gt;转换成2倍速&lt;/strong&gt;&lt;br /&gt; ffmpeg -i “$filename” -filter_complex “[0:v]setpts=0.5*PTS[v];[0:a]atempo=2.0[a]” -map “[v]” -map “[a]” “${filename}_out.mp4”&lt;/p&gt; </description> <link>https://luowei.github.io/ffmpeg/ffmpeg-useful-command.html</link> <guid>https://luowei.github.io/ffmpeg/ffmpeg-useful-command</guid> <pubDate>Sun, 10 May 2020 00:00:00 +0800</pubDate> </item> <item> <title>东革阿里的食用方法以及主要功效</title> <description> &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/images/post/life/tongkat-ali-longjack.jpg&quot; alt=&quot;a&quot; /&gt;&lt;/p&gt; &lt;p&gt;东革阿里（Tongkat Ali）是生长在东南亚靠近赤道的原始热带雨林中，生长在潮湿砂质土壤里的一种野生乔木植物，成熟期为 5 年以上。其树高4-6米，树干直径8-10厘米，最粗可达15厘米。树枝几乎没有分叉，树叶长在顶部呈伞状。其根亦不分叉，入地最深可达 2 米，东革阿里的根部有多种功效。东革阿里全株均可入药,但药用部分主要来源于根部,在东南亚民间作为传统药材和滋补品已有数百年历史, 既可作单味药、也可作药方中的重要配药。东革阿里有红、黄、黑三种颜色之分，其中红东革阿里最为珍稀，其产量最少，药用价值也是最高，味道甘甜，带有淡淡的人参味道。其次是黑东，味道甘醇，在烹煮之前闻起来会有淡淡的鱼腥味，煮水之后会变淡。最后是黄东革阿里，它是三种之中比较常见的一种，但其味道偏苦。&lt;/p&gt; &lt;p&gt;据东南亚地区常年食用经验和研究表明，该植物根部提取物可提高男性血睾酮水平。另外，因其独特的抗疟疾、抗癌、解热、抗溃疡、抗菌以及促进性功能作用，而被当地人用作传统药物。定期服用东革阿里根部提取物可提高血睾酮水平，越来越多的健身爱好者服用它以增加肌肉量和力量。在大多数情况下，它是被用作保健营养补剂。睾酮作为雄性激素的代表，生理作用非常广泛，主要是发动和维持主副性器官（腺体）的发育和功能；此外，睾酮具有同化作用，能刺激组织摄取氨基酸，促进 RNA、DNA和蛋白质合成，促进骨骼肌和骨骼生长，刺激红细胞生成，增加肌糖原储备，降低脂肪含量，以及保持雄性攻击性行为意识等作用，因此，睾酮在增强体质，消除疲劳和提高运动成绩方面有着重要作用。优秀运动成绩的出现在一定程度上与体内高水平的雄性激素所起的生理作用密切相关，而运动训练也会对血睾酮水平产生明显影响。大量研究表明长期大运动量训练或疲劳累积，会引起运动员血睾酮水平大幅度下降，国外学者将这种现象称为“运动性性腺机能减退”，国内学者则习惯称之为“运动性低血睾酮”。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/images/post/life/tongali01.jpg&quot; alt=&quot;b&quot; /&gt;&lt;/p&gt; &lt;h3 id=&quot;食用方法&quot;&gt;食用方法&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;东革阿里原片可以煮水、泡水、炖汤泡酒。&lt;/strong&gt;&lt;/p&gt; &lt;h4 id=&quot;1原片煮水法&quot;&gt;1、原片煮水法&lt;/h4&gt; &lt;p&gt;煮水是标准用法，有效成分提取充分，浓度高，效果好、见效快。东革阿里切片6克，加清水300ml，小火熬煮20分钟，将汤水（100ml）倒入茶杯饮用。剩余残渣可再重复加水回煮1—2次，大约第三次苦味渐淡之后就可丢弃。三次的汤倒出放置冷却后，装入大可乐瓶，放进冰箱保存，每天倒出一杯，加热饮用，3天用完。这样就是每天用了2g的量。可加入冰糖或蜂蜜来调和东革阿里的特有苦味。&lt;/p&gt; &lt;h4 id=&quot;2泡水法&quot;&gt;2、泡水法&lt;/h4&gt; &lt;p&gt;原片泡水法：早上用半片放到杯子里，加开水焖泡，即可饮用，可以泡上一整天。如果泡过后还有药性，可取出晒干后重复使用。 粉末泡水法：东革阿里粉末泡水比较方便，用烧开的热水冲泡，待东革阿里的纤维沉淀到底部时候，就可以喝了，因为是粉末，所以有效成分在热水里能迅速溶解，粉末量小，浓度低，冲泡两次就没有味道了。汤水非常的苦，可加入冰糖或蜂蜜来调和苦味。三次煮好的汤都有效，要在一天内喝完。&lt;/p&gt; &lt;h4 id=&quot;3浸泡高度酒&quot;&gt;3、浸泡高度酒&lt;/h4&gt; &lt;p&gt;50克原片可浸6斤左右的白酒，浓度越高越好，最好是45度以上的白酒，酒的用量只要盖过东革阿里就可以了，最少浸泡一个月以上，才能充分的把东革阿里有效成分提取出来，每晚临睡前饮服一小杯，功效是补肾，补腰(注意如果糖尿病、高血压、前列腺肿胀者请勿浸酒饮服)。&lt;/p&gt; &lt;h4 id=&quot;4炖汤&quot;&gt;4、炖汤&lt;/h4&gt; &lt;p&gt;将两三片东革阿里原片或10克粉末加入鸡汤里一起炖，待鸡肉熟时候就可以食用，适宜一家大小享用，常饮可保健强身，固本陪元。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;https://luowei.github.io/images/post/life/tongali02.jpg&quot; alt=&quot;c&quot; /&gt;&lt;/p&gt; &lt;h3 id=&quot;主要功效&quot;&gt;主要功效&lt;/h3&gt; &lt;h4 id=&quot;1改善痛风降低尿酸&quot;&gt;1、改善痛风，降低尿酸&lt;/h4&gt; &lt;p&gt;牛雨红东革阿里所含有的天然成分，对高尿酸、痛风性关节炎有很大的作用，能够有效的抑制住尿酸的合成，溶解关节、软骨等组织的尿酸盐晶体，减少尿酸含量，促进尿酸的排泄量让尿酸能够顺畅的随尿液排出体外，达到降低尿酸，改善痛风的作用。&lt;/p&gt; &lt;h4 id=&quot;2强肾补肾&quot;&gt;2、强肾补肾&lt;/h4&gt; &lt;p&gt;牛雨红东革阿里能够促进大量的荷尔蒙、雄性激素等分泌量，增强肾动力，提高人体里的游离睾酮，解决因游离睾酮含量低所造成的障碍，有效促进生育，可以大幅的提高人体睾酮水平，达到提高人体免疫力，增强和滋补人体性腺机能作用，可以加强人体血液循环。&lt;/p&gt; &lt;h4 id=&quot;3强身健体&quot;&gt;3、强身健体&lt;/h4&gt; &lt;p&gt;东革阿里含有一种Antioxidant Enzyme（抗氧化酶），这种酶能抵制对身体有害的自由基产生的连锁反应，增加体能、消除疲劳。除此之外，还具有提高人体免疫力，预防疾病入侵，促进新陈代谢，加速血液循环等作用。同时也有助于药效进入前列腺部位，促进药效发挥，真正实现对前列腺炎症状的消除。&lt;/p&gt; &lt;h4 id=&quot;4抗癌功能&quot;&gt;4、抗癌功能&lt;/h4&gt; &lt;p&gt;东革阿里中的 beta-carboline 物质对肺癌、乳腺癌有强有力的治疗作用；所含的 Auassinoid 化学成分可以抗肿瘤和抗发热。&lt;/p&gt; &lt;h4 id=&quot;5退热功能&quot;&gt;5、退热功能&lt;/h4&gt; &lt;p&gt;东革阿里中提取的 Quissinoid 物质有退热和抗发烧功能， Quissinoid 的退烧作用比阿斯匹林强一倍。&lt;/p&gt; </description> <link>https://luowei.github.io/life/tongkat-ali-function.html</link> <guid>https://luowei.github.io/life/tongkat-ali-function</guid> <pubDate>Thu, 28 Nov 2019 00:00:00 +0800</pubDate> </item> <item> <title>广告配置脚本及分析配置脚本</title> <description> &lt;h3 id=&quot;网站seo优化常用的方法与技巧&quot;&gt;网站SEO优化常用的方法与技巧&lt;/h3&gt; &lt;h2 id=&quot;adsense&quot;&gt;Adsense&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;自动广告&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; (adsbygoogle = window.adsbygoogle || []).push({ google_ad_client: &quot;ca-pub-8760692904992206&quot;, enable_page_level_ads: true }); &amp;lt;/script&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;广告单元-文字展示&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;!-- 文字展示 --&amp;gt; &amp;lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block&quot; data-ad-client=&quot;ca-pub-8760692904992206&quot; data-ad-slot=&quot;4098189890&quot; data-ad-format=&quot;auto&quot; data-full-width-responsive=&quot;true&quot;&amp;gt;&amp;lt;/ins&amp;gt; &amp;lt;script&amp;gt; (adsbygoogle = window.adsbygoogle || []).push({}); &amp;lt;/script&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;广告单元-文章内嵌&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-8760692904992206&quot; data-ad-slot=&quot;2948937366&quot;&amp;gt;&amp;lt;/ins&amp;gt; &amp;lt;script&amp;gt; (adsbygoogle = window.adsbygoogle || []).push({}); &amp;lt;/script&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;广告单元-图文信息流&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block&quot; data-ad-format=&quot;fluid&quot; data-ad-layout-key=&quot;-fb+5w+4e-db+86&quot; data-ad-client=&quot;ca-pub-8760692904992206&quot; data-ad-slot=&quot;9121154541&quot;&amp;gt;&amp;lt;/ins&amp;gt; &amp;lt;script&amp;gt; (adsbygoogle = window.adsbygoogle || []).push({}); &amp;lt;/script&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;广告单元-图文信息流(左图右文)&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block&quot; data-ad-format=&quot;fluid&quot; data-ad-layout-key=&quot;-fb+5w+4e-db+86&quot; data-ad-client=&quot;ca-pub-8760692904992206&quot; data-ad-slot=&quot;9121154541&quot;&amp;gt;&amp;lt;/ins&amp;gt; &amp;lt;script&amp;gt; (adsbygoogle = window.adsbygoogle || []).push({}); &amp;lt;/script&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;广告单元-图文信息流(带标题左图右文)&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block&quot; data-ad-format=&quot;fluid&quot; data-ad-layout-key=&quot;-ef+6k-30-ac+ty&quot; data-ad-client=&quot;ca-pub-8760692904992206&quot; data-ad-slot=&quot;3404959287&quot;&amp;gt;&amp;lt;/ins&amp;gt; &amp;lt;script&amp;gt; (adsbygoogle = window.adsbygoogle || []).push({}); &amp;lt;/script&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;广告单元-图文信息流(上图下文)&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block&quot; data-ad-format=&quot;fluid&quot; data-ad-layout-key=&quot;-6t+ed+2i-1n-4w&quot; data-ad-client=&quot;ca-pub-8760692904992206&quot; data-ad-slot=&quot;3597365121&quot;&amp;gt;&amp;lt;/ins&amp;gt; &amp;lt;script&amp;gt; (adsbygoogle = window.adsbygoogle || []).push({}); &amp;lt;/script&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;广告单元-图文信息流(文字)&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block&quot; data-ad-format=&quot;fluid&quot; data-ad-layout-key=&quot;-gw-3+1f-3d+2z&quot; data-ad-client=&quot;ca-pub-8760692904992206&quot; data-ad-slot=&quot;1367444141&quot;&amp;gt;&amp;lt;/ins&amp;gt; &amp;lt;script&amp;gt; (adsbygoogle = window.adsbygoogle || []).push({}); &amp;lt;/script&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;cnzz&quot;&gt;CNZZ&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;luowei.github.io&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;script type=&quot;text/javascript&quot;&amp;gt;var cnzz_protocol = ((&quot;https:&quot; == document.location.protocol) ? &quot;https://&quot; : &quot;http://&quot;);document.write(unescape(&quot;%3Cspan id=&apos;cnzz_stat_icon_1277627361&apos;%3E%3C/span%3E%3Cscript src=&apos;&quot; + cnzz_protocol + &quot;s96.cnzz.com/z_stat.php%3Fid%3D1277627361%26show%3Dpic1&apos; type=&apos;text/javascript&apos;%3E%3C/script%3E&quot;));&amp;lt;/script&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;wodedata.com&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;script type=&quot;text/javascript&quot;&amp;gt;var cnzz_protocol = ((&quot;https:&quot; == document.location.protocol) ? &quot;https://&quot; : &quot;http://&quot;);document.write(unescape(&quot;%3Cspan id=&apos;cnzz_stat_icon_1277629362&apos;%3E%3C/span%3E%3Cscript src=&apos;&quot; + cnzz_protocol + &quot;s96.cnzz.com/z_stat.php%3Fid%3D1277629362%26show%3Dpic1&apos; type=&apos;text/javascript&apos;%3E%3C/script%3E&quot;));&amp;lt;/script&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;google-analytics&quot;&gt;Google Analytics&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;wodedata.com&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;!-- Global site tag (gtag.js) - Google Analytics --&amp;gt; &amp;lt;script async src=&quot;https://www.googletagmanager.com/gtag/js?id=UA-31488864-3&quot;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag(&apos;js&apos;, new Date()); gtag(&apos;config&apos;, &apos;UA-31488864-3&apos;); &amp;lt;/script&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;luowei.github.io&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;!-- Global site tag (gtag.js) - Google Analytics --&amp;gt; &amp;lt;script async src=&quot;https://www.googletagmanager.com/gtag/js?id=UA-31488864-2&quot;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag(&apos;js&apos;, new Date()); gtag(&apos;config&apos;, &apos;UA-31488864-2&apos;); &amp;lt;/script&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;disqus&quot;&gt;Disqus&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;luowei.github.io&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;Place the following code where you’d like Disqus to load:&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;div id=&quot;disqus_thread&quot;&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;script&amp;gt; /** * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS. * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/ /* var disqus_config = function () { this.page.url = PAGE_URL; // Replace PAGE_URL with your page&apos;s canonical URL variable this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page&apos;s unique identifier variable }; */ (function() { // DON&apos;T EDIT BELOW THIS LINE var d = document, s = d.createElement(&apos;script&apos;); s.src = &apos;https://wei-wei-wei-wei.disqus.com/embed.js&apos;; s.setAttribute(&apos;data-timestamp&apos;, +new Date()); (d.head || d.body).appendChild(s); })(); &amp;lt;/script&amp;gt; &amp;lt;noscript&amp;gt;Please enable JavaScript to view the &amp;lt;a href=&quot;https://disqus.com/?ref_noscript&quot;&amp;gt;comments powered by Disqus.&amp;lt;/a&amp;gt;&amp;lt;/noscript&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Place the following code before your site’s closing &amp;lt;/body&amp;gt; tag:&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;script id=&quot;dsq-count-scr&quot; src=&quot;//wei-wei-wei-wei.disqus.com/count.js&quot; async&amp;gt;&amp;lt;/script&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/seo/website-ad-analytics-config.html</link> <guid>https://luowei.github.io/seo/website-ad-analytics-config</guid> <pubDate>Wed, 01 May 2019 00:00:00 +0800</pubDate> </item> <item> <title>网站SEO优化常用的方法与技巧</title> <description> &lt;h3 id=&quot;网站seo优化常用的方法与技巧&quot;&gt;网站SEO优化常用的方法与技巧&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;Google&lt;/strong&gt;&lt;br /&gt; &lt;strong&gt;Google SearchConsole&lt;/strong&gt;&lt;br /&gt; &lt;a href=&quot;https://search.google.com/search-console&quot;&gt;https://search.google.com/search-console&lt;/a&gt;&lt;br /&gt; &lt;strong&gt;Google Adsense&lt;/strong&gt;&lt;br /&gt; &lt;a href=&quot;https://www.google.com/adsense&quot;&gt;https://www.google.com/adsense&lt;/a&gt;&lt;br /&gt; &lt;strong&gt;Google Analytics&lt;/strong&gt;&lt;br /&gt; &lt;a href=&quot;https://analytics.google.com&quot;&gt;https://analytics.google.com&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Bing&lt;/strong&gt; &lt;strong&gt;Bing Search&lt;/strong&gt;&lt;br /&gt; &lt;a href=&quot;https://www.bing.com/webmaster/configure&quot;&gt;https://www.bing.com/webmaster/configure&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;百度&lt;/strong&gt;&lt;br /&gt; &lt;strong&gt;百度站点管理&lt;/strong&gt;&lt;br /&gt; &lt;a href=&quot;https://ziyuan.baidu.com/site/index&quot;&gt;https://ziyuan.baidu.com/site/index&lt;/a&gt;&lt;br /&gt; &lt;strong&gt;百度链接收录&lt;/strong&gt;&lt;br /&gt; &lt;a href=&quot;https://ziyuan.baidu.com/linksubmit/index&quot;&gt;https://ziyuan.baidu.com/linksubmit/index&lt;/a&gt;&lt;br /&gt; &lt;strong&gt;百度网站统计&lt;/strong&gt; &lt;a href=&quot;https://tongji.baidu.com/web/6143656/homepage/index&quot;&gt;https://tongji.baidu.com/web&lt;/a&gt; &lt;strong&gt;百度联盟&lt;/strong&gt; &lt;a href=&quot;http://union.baidu.com&quot;&gt;http://union.baidu.com&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;搜狗&lt;/strong&gt; &lt;a href=&quot;http://zhanzhang.sogou.com/index.php/statistics/index&quot;&gt;http://zhanzhang.sogou.com/index.php/statistics/index&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;友盟数据&lt;/strong&gt;&lt;br /&gt; &lt;a href=&quot;https://web.umeng.com/main.php?c=site&amp;amp;a=show&quot;&gt;https://web.umeng.com/main.php?c=site&amp;amp;a=show&lt;/a&gt;&lt;/p&gt; &lt;h3 id=&quot;相关站点&quot;&gt;相关站点&lt;/h3&gt; &lt;p&gt;&lt;a href=&quot;https://luowei.github.io/&quot;&gt;https://luowei.github.io/&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/archive.html&quot;&gt;https://luowei.github.io/archive.html&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/mywiki&quot;&gt;https://luowei.github.io/mywiki&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://www.zhihu.com/people/wodedata/posts&quot;&gt;https://www.zhihu.com/people/wodedata/posts&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;http://app.wodedata.com/&quot;&gt;http://app.wodedata.com/&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;http://app.wodedata.com/myapp/myinputmethod.html&quot;&gt;http://app.wodedata.com/myapp/myinputmethod.html&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;http://app.wodedata.com/myapp/mybrowser.html&quot;&gt;http://app.wodedata.com/myapp/mybrowser.html&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;http://app.wodedata.com/myapp/photodiy.html&quot;&gt;http://app.wodedata.com/myapp/photodiy.html&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;http://app.wodedata.com/myapp/gifemoji.html&quot;&gt;http://app.wodedata.com/myapp/gifemoji.html&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;http://app.wodedata.com/myapp/mymarkdown.html&quot;&gt;http://app.wodedata.com/myapp/mymarkdown.html&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;http://app.wodedata.com/myapp/mywallpaper.html&quot;&gt;http://app.wodedata.com/myapp/mywallpaper.html&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;http://app.wodedata.com/myapp/qrcoderobot.html&quot;&gt;http://app.wodedata.com/myapp/qrcoderobot.html&lt;/a&gt;&lt;/p&gt; &lt;h3 id=&quot;网站地图&quot;&gt;网站地图&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;wodedata.com&lt;/strong&gt;&lt;br /&gt; &lt;a href=&quot;http://wodedata.com/sitemap.xml&quot;&gt;http://wodedata.com/sitemap.xml&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;http://app.wodedata.com/sitemap.xml&quot;&gt;http://app.wodedata.com/sitemap.xml&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;http://music.wodedata.com/sitemap.xml&quot;&gt;http://music.wodedata.com/sitemap.xml&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;luowei.github.io&lt;/strong&gt;&lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/rss.xml&quot;&gt;https://luowei.github.io/rss.xml&lt;/a&gt; &lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/sitemap.txt&quot;&gt;https://luowei.github.io/sitemap.txt&lt;/a&gt; &lt;br /&gt; &lt;a href=&quot;https://luowei.github.io/mywiki/sitemap.xml&quot;&gt;https://luowei.github.io/mywiki/sitemap.xml&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/seo/website-seo.html</link> <guid>https://luowei.github.io/seo/website-seo</guid> <pubDate>Tue, 30 Apr 2019 00:00:00 +0800</pubDate> </item> <item> <title>Github Pages 之 Jekyll 与 Liquid 模板的应用</title> <description> &lt;h3 id=&quot;github-pages-之-jekyll-与-liquid-模板的应用&quot;&gt;Github Pages 之 Jekyll 与 Liquid 模板的应用&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;参考文章&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://poychang.github.io/generating-sitemap-in-jekyll-without-plugin/&quot;&gt;不使用套件直接產生 Jekyll 的 sitemap.xml&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://shopify.github.io/liquid/&quot;&gt;安全且面向用户定制的WebApp模板语言&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://longqian.me/2017/02/09/github-jekyll-tag/&quot;&gt;Jekyll Tags on Github Pages&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://jekyllrb.com/docs/liquid/filters/&quot;&gt;Jekyll Liquid Filters&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;参考代码&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &amp;lt;p id=&quot;items&quot;&amp;gt; &amp;lt;ul class=&quot;posts&quot;&amp;gt; {% assign list = site.pages | reverse %} {% for page in list %} {% if page.title and page.title != blank and page.title != &quot;知不知&quot; %} &amp;lt;li&amp;gt;&amp;lt;a target=&quot;_blank&quot; href=&quot;{{ page.url | absolute_url}}&quot;&amp;gt;{{ page.title }}&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt; {% endif %} {% endfor %} &amp;lt;/ul&amp;gt; &amp;lt;/p&amp;gt; &amp;lt;hr&amp;gt;&amp;lt;br/&amp;gt; &amp;lt;!-- 动态加载列表 &amp;lt;p id=&quot;list&quot;&amp;gt;&amp;lt;/p&amp;gt; &amp;lt;script src=&quot;https://code.jquery.com/jquery-3.2.1.min.js&quot;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script src=&quot;index.js&quot;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; document.getElementById(&quot;list&quot;).innerHTML = &quot;加载中...&quot;; loadPageList(); &amp;lt;/script&amp;gt; --&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;Github Page配置相关文档&lt;/strong&gt;&lt;br /&gt; &lt;a href=&quot;https://jekyllrb.com/docs/github-pages/&quot;&gt;GitHub Pages&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://github.com/github/pages-gem&quot;&gt;Github-pages Gem&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://pages.github.com/versions/&quot;&gt;Jekyll and its dependencies on GitHub Pages&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://help.github.com/en/articles/configuring-jekyll-plugins#default-plugins&quot;&gt;GitHub Pages runs in safe mode and only allows a set of whitelisted plugins&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://jekyllrb.com/docs/configuration/&quot;&gt;Jekyll configuration documentation&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://jekyllrb.com/docs/liquid/filters/&quot;&gt;Liquid Filters&lt;/a&gt;&lt;/p&gt; &lt;h3 id=&quot;运行&quot;&gt;运行&lt;/h3&gt; &lt;p&gt;运行github page 需要安装 GitHub Pages Ruby Gem,以下步骤：&lt;/p&gt; &lt;ol&gt; &lt;li&gt;创建Gemfile，并添加：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gem &apos;github-pages&apos;, group: :jekyll_plugins&lt;/code&gt;;&lt;/li&gt; &lt;li&gt;Run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bundle install&lt;/code&gt;，再运行&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bundle exec jekyll build --incremental&lt;/code&gt; 及 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bundle exec jekyll serve --incremental&lt;/code&gt;;&lt;/li&gt; &lt;/ol&gt; </description> <link>https://luowei.github.io/jekyll/github-pages-jekyll-liquid.html</link> <guid>https://luowei.github.io/jekyll/github-pages-jekyll-liquid</guid> <pubDate>Sun, 27 Jan 2019 00:00:00 +0800</pubDate> </item> <item> <title>绝妙的声音</title> <description> &lt;h3 id=&quot;绝妙的音乐播放&quot;&gt;绝妙的音乐播放&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;music&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://music.wodeata.com&quot;&gt;精彩的英文演讲&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://music.wodedata.com/x-ted&quot;&gt;TED英文演讲&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://music.wodedata.com/x-guoxue&quot;&gt;国学&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://music.wodedata.com/x-music&quot;&gt;抖音热曲&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/audio/wonderful-audio.html</link> <guid>https://luowei.github.io/audio/wonderful-audio</guid> <pubDate>Sat, 26 Jan 2019 00:00:00 +0800</pubDate> </item> <item> <title>常用的sql命令</title> <description> &lt;h3 id=&quot;mysql命令&quot;&gt;MySQL命令&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;替数据表中某个字段中的部份内容&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;UPDATE `topic` SET `preImage` = REPLACE (`preImage`, &apos;7xstyo.com2.z0.glb.clouddn.com&apos;, &apos;wdyzj.wodedata.com&apos;) WHERE id IN ( select id from ( SELECT id FROM `topic` WHERE `preImage` LIKE &apos;%7xstyo.com2.z0.glb.clouddn.com%&apos; ) tempC ) &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/%E5%B7%A5%E5%85%B7/useful-sql-command.html</link> <guid>https://luowei.github.io/%E5%B7%A5%E5%85%B7/useful-sql-command</guid> <pubDate>Fri, 25 Jan 2019 00:00:00 +0800</pubDate> </item> <item> <title>技术研究课题参考点</title> <description> &lt;h1 id=&quot;技术研究课题参考点&quot;&gt;技术研究课题参考点&lt;/h1&gt; &lt;h3 id=&quot;在线视频及图片处理方案&quot;&gt;在线视频及图片处理方案&lt;/h3&gt; &lt;p&gt;该方案基于Nginx的RTMP模块与FFMpeg结全的视频编解码处理，以及与ImageMagick结合的图片处理系统。&lt;/p&gt; &lt;h3 id=&quot;普通pc上视视频录制直播的方案&quot;&gt;普通PC上视视频录制直播的方案&lt;/h3&gt; &lt;p&gt;该方案是利用OpenBroadcaster、XSplit视频录制直播工具及 Auto-Duck in Real Time 实现声音闪避效果。&lt;/p&gt; &lt;h3 id=&quot;流行的音视频app的音视频资源文件抓取方案&quot;&gt;流行的音视频App的音视频资源文件抓取方案&lt;/h3&gt; &lt;p&gt;在越狱的机器上，喜玛拉雅FM、蜻蜓FM、抖音、火山小视频App等可通过iMazing导出音视频文件和sqlite数据库文件件，再通过简单的python脚本处理抓取到的资源文件与外链。&lt;/p&gt; &lt;h3 id=&quot;浏览器内的广告拦截方案&quot;&gt;浏览器内的广告拦截方案&lt;/h3&gt; &lt;p&gt;该方案通过加载简化版的AdBlock黑名单及白名单规则，利用web的js注入的对网页中的内容与拦截黑名单规则作正则匹配处理，隐藏或删除网页中的广告标签；通过拦截网络请求过滤掉黑名单规则当中的包含广告域名及其特征路径的网络请求。&lt;/p&gt; &lt;h3 id=&quot;基于airdrop实现ios设备在app内的文件及文件夹传输及管理方案&quot;&gt;基于AirDrop实现iOS设备在App内的文件及文件夹传输及管理方案&lt;/h3&gt; &lt;p&gt;此方案是利用iOS与macOS设备自身拥有的AirDrop为文件传输通道，创建iOS普通App利用其沙盒空间，通过iOS分享扩展配置自定义扩展应用规则，并自定义的规则为子查询格式，以支持全UTI格式的文件类型的传输与管理。&lt;br /&gt; 应用：我的浏览器中文件及文件夹的AirDrop接收功能&lt;/p&gt; &lt;h3 id=&quot;手写艺术字方案&quot;&gt;手写艺术字方案&lt;/h3&gt; &lt;p&gt;该方案是实现在手机屏幕上对手写速度和力度做物理拟合，并书写过程中不断做贝赛尔三角点集的聚合修正，实现富有真实感的笔锋笔迹效果的手写艺术字。应用：万能输入法主App里的软件画板。&lt;/p&gt; &lt;h3 id=&quot;hsv色块及色轮的实现&quot;&gt;HSV色块及色轮的实现&lt;/h3&gt; &lt;p&gt;基于HSV颜色模型的色调H、饱和度S、明度V三个维度的直观特性，实现可灵活调节色调、饱和度及明度来选择颜色的颜色选择器。&lt;br /&gt; 应用：万能输入法中自定义的RSColorPicker。&lt;/p&gt; &lt;h3 id=&quot;gif动态图处理方案&quot;&gt;GIF动态图处理方案&lt;/h3&gt; &lt;p&gt;通过GIF图片生成与导出算法，从livePhoto或视频生成可自定义水印、帧率、压缩率及尺寸的GIF图片；并支持从GIF和短视频中导出多张图片。应用：斗图王。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;持续更新中……&lt;/strong&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E8%AF%BE%E9%A2%98/technology-research-topic.html</link> <guid>https://luowei.github.io/%E8%AF%BE%E9%A2%98/technology-research-topic</guid> <pubDate>Sun, 16 Sep 2018 00:00:00 +0800</pubDate> </item> <item> <title>常用的软件工具</title> <description> &lt;p&gt;&lt;strong&gt;Mathematica :&lt;/strong&gt; &lt;a href=&quot;http://www.wolfram.com/mathematica/&quot;&gt;http://www.wolfram.com/mathematica/&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Gephi :&lt;/strong&gt; &lt;a href=&quot;https://gephi.org/&quot;&gt;https://gephi.org/&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;NetLogo :&lt;/strong&gt; &lt;a href=&quot;http://ccl.northwestern.edu/netlogo/&quot;&gt;http://ccl.northwestern.edu/netlogo/&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E5%B7%A5%E5%85%B7/useful-recommand-tools.html</link> <guid>https://luowei.github.io/%E5%B7%A5%E5%85%B7/useful-recommand-tools</guid> <pubDate>Mon, 27 Aug 2018 00:00:00 +0800</pubDate> </item> <item> <title>工作生活中常碰到的问题的总结与思考</title> <description> &lt;p&gt;每个人在工作与生活中难免都会碰到各种各样的烦恼，这里来总结一下我在工作生活中碰到的问题作一下思考和分析。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;1. 问题：执行人负责人不明确的问题。&lt;/strong&gt;&lt;br /&gt; 解决方案：安排事情或任务时，事情本身和事情执行人的安排要具体明确；&lt;/p&gt; &lt;p&gt;事情本身不明确导致：做错返工，影响工期，造成人力浪费…&lt;br /&gt; 执行人不明确导致：各种相互推卸责任的事发生，造成团队不和谐。可能出现做的人若是做的做好，则功劳可能是别人或大家的，要是做不好，则做事的人就背锅，反而不做事的人轻巧了。&lt;/p&gt; &lt;p&gt;例如：如果有领导把一个项目同时分配给两个或多个团队去实行，如果没有具体指明主负责人或实际推动人，那么这个项目也就很难有所进展。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;2. 问题：任务拆分与分配不透明的问题&lt;/strong&gt;&lt;br /&gt; 解决方案：把任务需求拆分与分配的权力分离，或执行人共同参与来规避。即如果多人合作执行，拆分任务和分配任务不能一个人包办，应把拆分与分配人的权力分离，或者执行人共同参与，从而可以达到各尽其长、各尽其能。&lt;/p&gt; &lt;p&gt;不然导致：任务职责划分不明，导致各执行人相互不满，甚至最后相互诋毁，产生内乱。任务执行人都无法尽其责、尽其长。&lt;/p&gt; &lt;p&gt;例如：某次某项目的任务的拆分与分配都是XX包办的，进而在执行过程中出现YY认为XX没做多少实事，XX认为YY也并没做什么只不过做了一点简单的事，从而各自都不满，产生内乱；如果这里XX品德不高或稍有徇私，就极有可能产生任务的拆分与分配出现不合理的问题。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;3. 问题：多任务模块间关联演生的共同问题。&lt;/strong&gt;&lt;br /&gt; 在问题发生或未发生时，应该要有各模块关联人的评估，再由主要职责人直接作处理或再作分配处理。&lt;/p&gt; &lt;p&gt;不然导致：”各人自扫门前雪,不管他人瓦上霜”。而后又回到了第1个问题说的：问题执行人不明确，导致在不明确的地方出现你赖我去做、我赖你去做，我认为是你应该做的，你觉得是我应该做的。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;4. 问题：上梁不正下梁歪&lt;/strong&gt;&lt;br /&gt; 俗话说：长树先长根，立人先立德；根是树之基，德乃人之本；&lt;br /&gt; 这里就强调作为leader品德至关重要。&lt;strong&gt;德乃人之本，亦为将帅之至要，不可不察也。&lt;/strong&gt;&lt;br /&gt; 如果自己作为团队leader或手下有一波人跟着自己一起做事，如果自己德行不高，不足够努力，或自私自利，或贪图轻松，或弄虚作假偷肩耍滑，或喜勾心斗角之事，或擅诋毁构陷他人，肯定是留不住优秀人为自己做事的。因为底下做事的人看到了就会想其自己每天吭哧吭哧做事的功劳，结果很大一部分都归了那些不做事又品德不高的人，肯定心生抱怒，没了积极性，最后就是这个做事人也会懒散怠慢下来。同样如果其他共事人察觉到或看到这个情况后也一样会产生这样的想法，最后整个团队就会涣散、离心离德，出现各种争功诿过或勾心斗角，或内斗频生。团队leader的先锋作用是整个团队凝聚力、积极性和战斗力的基石，团队leader的德行是整个团队的灵魂。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;总结&lt;/strong&gt;：各种内乱不和谐的问题，在很大程度上也是管理的问题，在根本上还是人的品德问题，虽然它是伴随利益价值的分配而产生的。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;5. 问题：对于外来的标签和帽子&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;这个问题我稍多展开说一下，因为从另一个角度来看也蛮有意思。&lt;/p&gt; &lt;p&gt;例如:时常可能会听到有人说：”沟通不行”，”没有成长”，”内向”，”只知道干某事”等，先不说这是为打压别人或为别人好，抑或给别人贴标签戴帽子，先不说这背后的目的和原因是什么，先主要来思考分析这个问题。&lt;/p&gt; &lt;p&gt;首先我们至少能想到它本身带来的作用会是消极的，会造成不和谐，也会隐性或显性的带来更多争斗，或相互之间打压瞧不起，影响彼此的生活或工作的质量，那这对彼此都有害而无益的。&lt;/p&gt; &lt;p&gt;先就沟通来说，下面说说我对沟通的理解，相信很少有人能把沟通是什么定义清楚，如果自己不清楚，也没作调查就没必要妄下定义，也许别人在这一点上与自己的认识和价值观本就不一样。我认为沟通可从几个方面来定义：狭义上来讲沟通主要是交谈互动；广义上来说一切存在联系的事物之间都存在沟通；一般我认为与人的沟通是说话、发信息、甩眼神、分享自己的作品文章、自己的穿着打扮等等让别人了解你或你的事情的所有的形式。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;如果自己对遇到的每个问题有了真正的认识，无谓的烦恼就要少很多&lt;/strong&gt;。同样在给别人或别人给自己贴其他的标签帽子时也是如此。&lt;/p&gt; &lt;p&gt;再说成长：如果要说某人没成长进步，先问问自己有没有真的在进步，每天都在干嘛，有多努力，回家都干嘛了，有做了什么东西或什么作品，有看多少书，都什么时候睡觉，有没有静下心来学点东西。&lt;/p&gt; &lt;p&gt;内向：如果能真正正确的认识内向，内向根本就不是什么缺点，关于内向就不多展开来说了，能说的太多了。如果要给内向与外向一个比较的话，科学的调查可以证明：偏内向的人总体来说要比偏外向的人成就更大。&lt;/p&gt; &lt;p&gt;最后谈一下’只知道干某事’，随意说这种话的，首先要问一下自己对他人有多了解，有没有做过深入的调查，抑或只是自己看到的表象，释家还常说：相由心生,世间万物皆是化相，万物皆空,唯心所致。&lt;/p&gt; &lt;p&gt;另外对待某事”说不好说不清”，我总结了下，原因主要有三：1.自己没想好思路不清或确实没什么说的。2.缺少训练，容易被外界的事物、情境或他人情绪干扰影响而乱掉。3.说者与听者认知面相差太大，不在相同的认知世界里(跟从不玩游戏的讲游戏，和产品经理讲代码实现，与老外讲孔孟之道等)&lt;/p&gt; &lt;p&gt;&lt;strong&gt;俗话说：&lt;/strong&gt; 说人是非者必是是非人。这里举例尽可能避开具体的人和事，不说具体人之是非，若妄加臆测者必有不正之心。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;6. 问题：毫无奉献精神&lt;/strong&gt;&lt;br /&gt; 这个问题还是回到了『立德』的问题上来了。这里再说大一点。&lt;br /&gt; 记得小时候重点学习过毛主席在1939年写的『纪念白求恩』中有讲到：”白求恩同志毫不利己专门利人的精神，表现在他对工作的极端的负责任，对同志对人民的极端的热忱。每个共产党员都要学习他。不少的人对工作不负责任，拈轻怕重，把重担子推给人家，自己挑轻的。一事当前，先替自己打算，然后再替别人打算。出了一点力就觉得了不起，喜欢自吹，生怕人家不知道。对同志对人民不是满腔热忱，而是冷冷清清，漠不关心，麻木不仁。这种人其实不是共产党员，至少不能算一个纯粹的共产党员。” “我们大家要学习他毫无自私自利之心的精神。从这点出发，就可以变为大有利于人民的人。&lt;strong&gt;一个人能力有大小，但只要有这点精神，就是一个高尚的人，一个纯粹的人，一个有道德的人，一个脱离了低级趣味的人，一个有益于人民的人。&lt;/strong&gt;”&lt;/p&gt; &lt;p&gt;可见真正成功的人说话行事都是以德立根立本的，而且也都是倡导底下的人立德的。大成者现大德，小成者现小德，不成者多败德。虽然今天的商业社会靠法规制度和先进的科技达到了空前繁荣的状态，但如果抛弃德而仅靠法规科技，也肯定是无法长远长久发展的。&lt;/p&gt; </description> <link>https://luowei.github.io/life/work-sumary.html</link> <guid>https://luowei.github.io/life/work-sumary</guid> <pubDate>Fri, 27 Jul 2018 00:00:00 +0800</pubDate> </item> <item> <title>常用的终端命令</title> <description> &lt;h2 id=&quot;常用的终端命令&quot;&gt;常用的终端命令&lt;/h2&gt; &lt;h3 id=&quot;文件重命名&quot;&gt;文件重命名&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;批量改文件：&lt;/strong&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;for i in *; do mv $i $i.mp3; done;&lt;/code&gt;&lt;br /&gt; &lt;strong&gt;去掉多余的mp3后缀：&lt;/strong&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;for i in *; do mv $i ${i/.mp3.mp3/.mp3}; done;&lt;/code&gt;&lt;br /&gt; &lt;strong&gt;*文件名全改成小写:&lt;/strong&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;for i in *; do mv $i ` echo &quot;print &apos;$i&apos;.lower()&quot; | python `; done;&lt;/code&gt; &lt;br /&gt; 或 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;for i in *; do mv $i ` echo &quot;print &apos;$i&apos;.downcase()&quot; | ruby `; done;&lt;/code&gt;&lt;br /&gt; 或 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;for i in *; do mv $i ` perl -e &quot;print lc(&apos;$i&apos;);&quot; `; done;&lt;/code&gt;&lt;br /&gt; 或 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;for i in *; do mv $i ` php -r &quot;print strtolower(&apos;$i&apos;);&quot; `; done;&lt;/code&gt;&lt;br /&gt; 或 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;for i in *; do mv $i ` echo &quot;$i&quot; | awk &apos;{ print tolower($1) }&apos; `; done;&lt;/code&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;文件名全改成大写:&lt;/strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;for i in *; do mv $i ` echo &quot;print &apos;$i&apos;.upper()&quot; | python `; done;&lt;/code&gt; &lt;br /&gt; 或 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;for i in *; do mv $i ` echo &quot;print &apos;$i&apos;.upcase()&quot; | ruby `; done;&lt;/code&gt;&lt;br /&gt; 或 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;for i in *; do mv $i ` perl -e &quot;print uc(&apos;$i&apos;);&quot; `; done;&lt;/code&gt;&lt;br /&gt; 或 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;for i in *; do mv $i ` php -r &quot;print strtoupper(&apos;$i&apos;);&quot; `; done;&lt;/code&gt;&lt;br /&gt; 或 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;for i in *; do mv $i ` echo &quot;$i&quot; | awk &apos;{ print toupper($1) }&apos; `; done;&lt;/code&gt;&lt;br /&gt; &lt;strong&gt;按升序重命名：&lt;/strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;num=0;for i in *; do mv &quot;$i&quot; &quot;$(printf &apos;%03d&apos; $num).${i#*.}&quot;; ((num++)); done;&lt;/code&gt;&lt;/p&gt; &lt;p&gt;参考：&lt;a href=&quot;https://stackoverflow.com/questions/2264428/how-to-convert-a-string-to-lower-case-in-bash&quot;&gt;https://stackoverflow.com/questions/2264428/how-to-convert-a-string-to-lower-case-in-bash&lt;/a&gt;&lt;/p&gt; &lt;h3 id=&quot;python-httpserver-和-ftpserver&quot;&gt;Python HTTPServer 和 FTPServer&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;HTTPServer:&lt;/strong&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;python -m SimpleHTTPServer 80&lt;/code&gt;&lt;br /&gt; &lt;strong&gt;FTPServer:&lt;/strong&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;python -m pyftpdlib -p 21&lt;/code&gt;&lt;/p&gt; &lt;h3 id=&quot;scp&quot;&gt;SCP&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;从本地拷贝到远程&lt;/strong&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;scp ./.gitignore luowei@wodedata.com:/var/www/music.wodedata.com/.gitignore&lt;/code&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;从远程拷贝到本地&lt;/strong&gt;&lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;scp luowei@wodedata.com:~/aaaa.txt ./aaaa.txt&lt;/code&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;scp 文件夹加上 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-r&lt;/code&gt; 参数&lt;/strong&gt;&lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;scp -r ./xxx uowei@wodedata.com:~/xxx&lt;/code&gt;&lt;/p&gt; &lt;h3 id=&quot;文件及磁盘大小&quot;&gt;文件及磁盘大小&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;查看文件大小&lt;/strong&gt;&lt;br /&gt; 显示总量:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;du -sh&lt;/code&gt;&lt;br /&gt; 分别显示每个文件大小:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;du -h&lt;/code&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;查看磁盘空间大小命令:&lt;/strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;df -h&lt;/code&gt; 或 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;df -hl&lt;/code&gt;&lt;/p&gt; &lt;h3 id=&quot;压缩与解压&quot;&gt;压缩与解压&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;zip压缩&lt;/strong&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;zip -r -e myfile.zip someThing&lt;/code&gt;&lt;br /&gt; -e:表示压缩文件需要加密 或 直接加密：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;zip -r -P Password01! aaaa.zip SomeDir&lt;/code&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;unzip解压&lt;/strong&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;unzip aaaa.zip&lt;/code&gt; 或 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;unzip -P Password01! aaaa.zip&lt;/code&gt; 在指定目录/tmp下解压缩,如果已有相同的文件存在，要求unzip命令不覆盖原先的文件:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;unzip -n aaaa.zip -d /tmp&lt;/code&gt; 查看压缩文件目录，但不解压:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;unzip -v aaaa.zip&lt;/code&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/linux/general-command.html</link> <guid>https://luowei.github.io/linux/general-command</guid> <pubDate>Tue, 10 Jul 2018 00:00:00 +0800</pubDate> </item> <item> <title>常用的特殊符号</title> <description> &lt;h2 id=&quot;常用的特殊符号&quot;&gt;常用的特殊符号&lt;/h2&gt; &lt;h3 id=&quot;常用的数学符号&quot;&gt;常用的数学符号&lt;/h3&gt; &lt;p&gt;＋－×÷﹢﹣±／＝≈≡≠∧∨∑∏∪∩∈⊙⌒⊥∥∠∽≌＜＞≤≥≮≯∧∨√﹙﹚[]﹛﹜∫∮∝∞⊙∏º¹²³⁴ⁿ₁₂₃₄·∶½⅓⅔¼¾⅛⅜⅝⅞∴∵∷αβγδεζηθικλμνξοπρστυφχψω％‰℅°℃℉′″￠〒¤○㎎㎏㎜㎝㎞㎡㎥㏄㏎mlmol㏕Pa＄￡￥㏒㏑壹贰叁肆伍陆柒捌玖拾微毫厘分百千万亿兆吉&lt;/p&gt; &lt;p&gt;＋ ± － × ‧÷ ± ＝ ≠ ≒ ≡ ≦ ≧&lt;br /&gt; ≌ ∞ ∝ Σ π ㎡ ％ ℃ ℉ √&lt;br /&gt; ∴ ∵ ∈ ∉∩ ∪ ⊂ ⊆ ∅ ㏒ ㏑&lt;br /&gt; ⊥ ∠ ° △ □ ⊙∫ ∮∂ ∇&lt;br /&gt; ¼ , ½ , ¾ , ⅓ , ⅔ ,⅛, ⅜,⅝, ⅞&lt;br /&gt; Ⅰ Ⅱ Ⅲ Ⅳ Ⅴ Ⅵ Ⅶ Ⅷ Ⅸ Ⅹ □ ■&lt;br /&gt; ♠ ♥ ♣ ♦&lt;br /&gt; Α Β Γ Δ Ε Ζ Η Θ Ι Κ Λ Μ Ν Ο&lt;br /&gt; Π Ρ Σ Τ Ξ Υ Φ Χ Ψ Ω&lt;br /&gt; α β γ δ ε ζ η θ ι κ λ μ ν ξ&lt;br /&gt; ο π ρ σ τ υ φ χ ψ ω&lt;/p&gt; &lt;h3 id=&quot;几何符号&quot;&gt;几何符号&lt;/h3&gt; &lt;p&gt;⊥ ‖ ∠ ⌒ ⊙ ≡ ≌ △&lt;/p&gt; &lt;h3 id=&quot;代数符号&quot;&gt;代数符号&lt;/h3&gt; &lt;p&gt;∝ ∧ ∨ ～ ∫ ≠ ≤ ≥ ≈ ∞ ∶&lt;/p&gt; &lt;h3 id=&quot;运算符号&quot;&gt;运算符号&lt;/h3&gt; &lt;p&gt;× ÷ √ ±&lt;/p&gt; &lt;h3 id=&quot;集合符号&quot;&gt;集合符号&lt;/h3&gt; &lt;p&gt;∪ ∩ ∈ ∉ ⊆ ⊂ ⊇ ⊃ ¬ ⊂ ⊃ ⊆ ⊇ ∃ ∀ ∅ ⇒ ⇔ ⊂ ⊃ ⊄ ⊅ ⊆ ⊇ ⊈ ⊉ ⊊ ⊋ ⊌ ⊍ ⊎ ∈ ∉ ∊ ∋ ∌ ∍&lt;/p&gt; &lt;h3 id=&quot;特殊符号&quot;&gt;特殊符号&lt;/h3&gt; &lt;p&gt;∑ π（圆周率）&lt;/p&gt; &lt;h3 id=&quot;推理符号&quot;&gt;推理符号&lt;/h3&gt; &lt;p&gt;┐ |a| ⊥ ∽ △ ∠ ∩ ∪ ≠ ≡ ± ≥ ≤ ∈ ← ↑ → ↓ ↖ ↗ ↘ ↙ ‖ ∧ ∨ ⇋ ⇌ ↔ ↕ ⇄ ⇅ ⇆ ⇔ ⇒ ∀ ∃&lt;/p&gt; &lt;h3 id=&quot;常用上标&quot;&gt;常用上标&lt;/h3&gt; &lt;p&gt;⁰ ¹ ² ³ ⁴ ⁵ ⁶ ⁷ ⁸ ⁹ ⁺ ⁻ ⁼ ⁽ ⁾ ⁿ º ˙&lt;/p&gt; &lt;h3 id=&quot;常用下标&quot;&gt;常用下标&lt;/h3&gt; &lt;p&gt;₀ ₁ ₂ ₃ ₄ ₅ ₆ ₇ ₈ ₉ ₊ ₋ ₌ ₍ ₎ ₐ ₑ ₒ ₓ ₔ в&lt;/p&gt; &lt;h3 id=&quot;更多上标&quot;&gt;更多上标&lt;/h3&gt; &lt;p&gt;ᵃ ᵇ ᶜ ᵈ ᵉ ᵍ ʰ ⁱ ʲ ᵏ ˡ ᵐ ⁿ ᵒ ᵖ ᵒ⃒ ʳ ˢ ᵗ ᵘ ᵛ ʷ ˣ ʸ ᙆ ᴬ ᴮ ᒼ ᴰ ᴱ ᴳ ᴴ ᴵ ᴶ ᴷ ᴸ ᴹ ᴺ ᴼ ᴾ ᴼ̴ ᴿ ˢ ᵀ ᵁ ᵂ ˣ ᵞ ᙆ ꝰ ˀ ˁ ˤ ꟸ ʱ ʴ ʵ ʶ ˠ ꟹ ᴭ ᴯ ᴲ ᴻ ᴽ ᵄ ᵅ ᵆ ᵊ ᵋ ᵌ ᵑ ᵓ ᵚ ᵝ ᵞ ᵟ ᵠ ᵡ ᵎ ᵔ ᵕ ᵙ ᵜ ᶛ ᶜ ᶝ ᶞ ᶟ ᶡ ᶣ ᶤ ᶥ ᶦ ᶧ ᶨ ᶩ ᶪ ᶫ ᶬ ᶭ ᶮ ᶯ ᶰ ᶱ ᶲ ᶳ ᶴ ᶵ ᶶ ᶷ ᶸ ᶹ ᶺ ᶼ ᶽ ᶾ ᶿ ꚜ ꚝ ჼ ᒃ ᕻ ᑦ ᒄ ᕪ ᑋ ᑊ ᔿ ᐢ ᐤ ᔆ ᙚ ᐡ ᘁ ᐜ ᕽ ᙆ ᙇ ᒼ ᒢ ᒻ ᔿ ᐤ ᙚ ᐪ ᓑ ᘁ ᐜ ᕽ ᙆ ᙇ ⁰ ¹ ² ³ ⁴ ⁵ ⁶ ⁷ ⁸ ⁹ ⁺ ⁻ ⁼ ˂ ˃ ⁽ ⁾ ˙ * º&lt;/p&gt; &lt;h3 id=&quot;更多下标&quot;&gt;更多下标&lt;/h3&gt; &lt;p&gt;ₐ ₔ ₑ ᵢ ⱼ ₒ ᵣ ᵤ ᵥ ₓ ᙮ ᵤ ᵩ ᵦ ˪ ៳ ៷ ₒ ᵨ ៴ ᵤ ᵪ ᵧ&lt;/p&gt; &lt;hr /&gt; &lt;h3 id=&quot;中文&quot;&gt;中文&lt;/h3&gt; &lt;p&gt;， 。 ？ ！ ： ； …… ～ “”-1 “ ” 、 （）-1 （ ） —— ‘’-1 ‘ ’ · ＠ ＆ ＊ ＃ 《》-1 《 》 ￥ 〈〉-1 〈 〉 ＄ ［］-1 ［ ］ ￡ ｛｝-1 ｛ ｝ ￠ 【】-1 【 】 ％ 〖〗-1 〖 〗 ／ 〔〕-1 〔 〕 ＼ 『』-1 『 』 ＾ 「」-1 「 」 ｜ ﹁ ﹂ ｀ ．&lt;/p&gt; &lt;h3 id=&quot;英文&quot;&gt;英文&lt;/h3&gt; &lt;p&gt;, . ? ! : ; … ~ _ - “” ‘ / @ * + ()-1 &amp;lt;&amp;gt;-1 {}-1 []-1 ( ) &amp;lt; &amp;gt; { } [ ] = % &amp;amp; $ | \ ♀ ♂ # ¥ £ ¢ € “ ^ `&lt;/p&gt; &lt;h3 id=&quot;数学&quot;&gt;数学&lt;/h3&gt; &lt;p&gt;= ≠ ≈ ± + － × ÷ &amp;gt; &amp;lt; ≥ ≤ / √ % ‰ π ³√ ℃ ℉ ㎎ ㎏ ㎜ ㎝ ㎞ ㎡ m³ ㏄ ° ¹ ² ³ ⁿ ′ 〃 ∞ ㏒ ㏑ ㏕ ∑ ∈ ≡ ⊥ ∏ ↔ := ¬ ⊕ ￠ Ψ f’ ∥ ≮ ≯ ∝ ∠ ∽ ≌ ∵ ∴ ∫ ∮ ∶ ∷ ∧ ∨ ∩ ∪ ⌒ ⊿ △ Δ ½ ⅓ ¼ ⅛ ¾ ⅜ ℅ ≒ () {} [] || sin cos tan cot ⊂ ⊃ ⊆ ⊇ ∃ ∃! ∅ ∉ ⇒ ⇔ ⊂ ⊃ ⊄ ⊅ ⊆ ⊇ ⊈ ⊉ ⊊ ⊋ ⊌ ⊍ ⊎ ∈ ∉ ∊ ∋ ∌ ∍ ∂ ∀ sec csc arcsin arccos arctan arccot&lt;/p&gt; &lt;h3 id=&quot;特殊&quot;&gt;特殊&lt;/h3&gt; &lt;p&gt;♞ ♟ ↣ ♚ ♛ ♝ ♭ ✘ ♤ ♧ ♡ ♢ ♩ ♪ ♫ ♬ ★ ☆ ■ □ ● ○ ♀ ♂ ↓ ↑ ← → ↖ ↗ ↙ ↘ △ ▲ ◇ ◆ ▽ ▼ ※ § ◎ ⊙ ㊣ ⊕ ® © № ℡ ↕ ↔ 卍 ™ ♥ ♠ ♣ ♦ ㈱ 囍 卐 ◈ ◢ ◣ ◤ ◥ « » ︽ ︾ ☜ ☞ ▓ ♪ ⇔ / ╳ ＾ ˇ ︵ ╭ ╮ ⌒ ︶ ╰ ╯ ︹ ︺ ︿ ﹀ ﹁ ﹂ ﹃ ﹄ ︻ ︼ ︷ ︸ ﹏ ― ￣ ︴ ﹌ ﹉ ﹊ ﹍ ﹎ Š Õ ‡ † 〓 ¤ Ψ ∮ ￡ ↹ Θ € ‥ ✎ ✐ ✁ ✄ ➴ ➵ ۞ ۩ ❀ ❂ ❦ ❧ ✲ ❈ ❉ ✪ ✍ ๑ ¶ ✙&lt;/p&gt; &lt;h3 id=&quot;序号&quot;&gt;序号&lt;/h3&gt; &lt;p&gt;① ② ③ ④ ⑤ ⑥ ⑦ ⑧ ⑨ ⑩ Ⅰ Ⅱ Ⅲ Ⅳ Ⅴ Ⅵ Ⅶ Ⅷ Ⅸ Ⅹ ⒈ ⒉ ⒊ ⒋ ⒌ ⒍ ⒎ ⒏ ⒐ ⒑ ０ １ ２ ３ ４ ５ ６ ７ ８ ９ ㈠ ㈡ ㈢ ㈣ ㈤ ㈥ ㈦ ㈧ ㈨ ㈩ ⑴ ⑵ ⑶ ⑷ ⑸ ⑹ ⑺ ⑻ ⑼ ⑽ 壹 贰 叁 肆 伍 陆 柒 捌 玖 拾 佰 仟 萬 億&lt;/p&gt; &lt;h3 id=&quot;希俄&quot;&gt;希俄&lt;/h3&gt; &lt;p&gt;α β γ δ ε ζ η θ ι κ λ μ ν ξ ο π ρ σ τ υ φ χ ψ ω Α Β Γ Δ Ε Ζ Η Θ Ι Κ Λ Μ Ν Ξ Ο Π Ρ Σ Τ Υ Φ Χ Ψ Ω а б в г д е ё ж з и й к л м н о п р с т у ф х ц ч ш щ ъ ы ь э ю я А Б В Г Д Е Ё Ж З И Й К Л М Н О П Р С Т У Ф Х Ц Ч Ш Щ Ъ Ы Ь Э Ю Я&lt;/p&gt; &lt;h3 id=&quot;拼音&quot;&gt;拼音&lt;/h3&gt; &lt;p&gt;ā á ǎ à ō ó ǒ ò ē é ě è ī í ǐ ì ū ú ǔ ù ǖ ǘ ǚ ǜ ü ê ɑ ń ň ɡ&lt;/p&gt; &lt;h3 id=&quot;注音&quot;&gt;注音&lt;/h3&gt; &lt;p&gt;ㄅ ㄆ ㄇ ㄈ ㄉ ㄊ ㄋ ㄌ ㄍ ㄎ ㄏ ㄐ ㄑ ㄒ ㄓ ㄔ ㄕ ㄖ ㄗ ㄘ ㄙ ㄚ ㄛ ㄜ ㄝ ㄞ ㄟ ㄠ ㄡ ㄢ ㄣ ㄤ ㄥ ㄦ ㄧ 丨 ㄨ ㄩ&lt;/p&gt; &lt;h3 id=&quot;部首&quot;&gt;部首&lt;/h3&gt; &lt;p&gt;一 丨 丿 丶 乛 乚 匚 刂 冂 亻 丷 勹 亠 冫 冖 讠 卩 阝 凵 厶 廴 扌 艹 廾 尢 囗 彳 彡 犭 夂 饣 忄 氵 宀 辶 彐 彑 巳 孑 屮 纟 幺 巛 攴 牜 攵 爫 殳 灬 礻 肀 爿 氺 罒 钅 疒 衤 疋 癶 耒 虍 糸 豸 隹&lt;/p&gt; &lt;h3 id=&quot;平假&quot;&gt;平假&lt;/h3&gt; &lt;p&gt;あ い う え お ぁ ぃ ぅ ぇ ぉ か き く け こ が ぎ ぐ げ ご さ し す せ そ ざ じ ず ぜ ぞ た ち つ て と だ ぢ づ で ど っ な に ぬ ね の は ひ ふ へ ほ ば び ぶ べ ぼ ぱ ぴ ぷ ぺ ぽ ま み む め も や ゆ よ ゃ ゅ ょ ら り る れ ろ わ を ん ゎ&lt;/p&gt; &lt;h3 id=&quot;片假&quot;&gt;片假&lt;/h3&gt; &lt;p&gt;ア イ ウ エ オ ァ ィ ゥ ェ ォ カ キ ク ケ コ ガ ギ グ ゲ ゴ サ シ ス セ ソ ザ ジ ズ ゼ ゾ タ チ ツ テ ト ダ ヂ ヅ デ ド ッ ナ ニ ヌ ネ ノ ハ ヒ フ ヘ ホ バ ビ ブ ベ ボ パ ピ プ ペ ポ マ ミ ム メ モ ャ ヤ ュ ユ ョ ヨ ラ リ ル レ ロ ワ ヰ ヱ ヲ ン ヴ ヵ ヶ ー&lt;/p&gt; &lt;h3 id=&quot;制表&quot;&gt;制表&lt;/h3&gt; &lt;p&gt;─ ━ │ ┃ ┄ ┅ ┆ ┇ ┈ ┉ ┊ ┋ ┌ ┍ ┎ ┏ ┐ ┑ ┒ ┓ └ ┕ ┖ ┗ ┘ ┙ ┚ ┛ ├ ┝ ┞ ┟ ┠ ┡ ┢ ┣ ┤ ┥ ┦ ┧ ┨ ┩ ┪ ┫ ┬ ┭ ┮ ┯ ┰ ┱ ┲ ┳ ┴ ┵ ┶ ┷ ┸ ┹ ┶ ┻ ┼ ┽ ┾ ┿ ╀ ╁ ╂ ╃ ╄ ╅ ╆ ╇ ╈ ╉ ╊ ╋ ═ ║ ╒ ╓ ╔ ╕ ╖ ╗ ╘ ╙ ╚ ╛ ╜ ╝ ╞ ╟ ╠ ╡ ╢ ╣ ╤ ╥ ╦ ╧ ╨ ╩ ╪ ╫ ╬ ╭ ╮ ╯ ╰ ╱ ╲ ╳&lt;/p&gt; &lt;h3 id=&quot;拉丁&quot;&gt;拉丁&lt;/h3&gt; &lt;p&gt;Ä Æ Å À Á Â Ã Ç È É Ê Ë Ð Ì Í Î Ï Ö Ø Ò Ó Ô Õ Ñ Ù Ú Û Ü Ý Þ ä æ å à á â ã ç è é ê ë ð ì í î ï ö ø ò ó ô õ ñ ù ú û ü ý þ&lt;/p&gt; &lt;h3 id=&quot;箭头&quot;&gt;箭头&lt;/h3&gt; &lt;p&gt;← ↑ → ↓ ↙ ↘ ↖ ↗ ↰ ↱ ↲ ↳ ↴ ↵ ↶ ↺ ↻ ↷ ➝ ⇄ ⇅ ⇆ ⇇ ⇈ ⇉ ⇊ ⇋ ⇌ ⇍ ⇎ ⇏ ⇐ ⇑ ⇒ ⇓ ⇔ ⇕ ⇖ ⇗ ⇘ ⇙ ⇚ ⇛ ↯ ↹ ↔ ↕ ⇦ ⇧ ⇨ ⇩ ➫ ➬ ➩ ➪ ➭ ➮ ➯ ➱ ⏎ ➜ ➡ ➥ ➦ ➧ ➨ ➷ ➸ ➻ ➼ ➽ ➸ ➹ ➳ ➤ ➟ ➲ ➢ ➣ ➞ ⇪ ➚ ➘ ➙ ➛ ➺ ⇞ ⇟ ⇠ ⇡ ⇢ ⇣ ⇤ ⇥ ↜ ↝ ➴ ➵ ➶ ↼ ↽ ↾ ↿ ⇀ ⇁ ⇂ ⇃ ↞ ↟ ↠ ↡ ↢ ↣ ↤ ↪ ↫ ↬ ↭ ↮ ↯ ↩ ⇜ ⇝ ↸ ↚ ↛ ↥ ↦ ↧ ↨&lt;/p&gt; &lt;h3 id=&quot;数字&quot;&gt;数字&lt;/h3&gt; &lt;p&gt;① ② ③ ④ ⑤ ⑥ ⑦ ⑧ ⑨ ⑩ ⑪ ⑫ ⑬ ⑭ ⑮ ⑯ ⑰ ⑱ ⑲ ⑳ ⓪ ❿ ⓫ ⓬ ⓭ ⓮ ⓯ ⓰ ⓱ ⓲ ⓳ ⓴ ❶ ❷ ❸ ❹ ❺ ❻ ❼ ❽ ❾ ⓐ ⓑ ⓒ ⓓ ⓔ ⓕ ⓖ ⓗ ⓘ ⓙ ⓚ ⓛ ⓜ ⓝ ⓞ ⓟ ⓠ ⓡ ⓢ ⓣ ⓤ ⓥ ⓦ ⓧ ⓨ ⓩ ㊀ ㊁ ㊂ ㊃ ㊄ ㊅ ㊆ ㊇ ㊈ ㊉ 壹 贰 叁 肆 伍 陆 柒 捌 玖 零 ㋀ ㋁ ㋂ ㋃ ㋄ ㋅ ㋆ ㋇ ㋈ ㋉ ㋊ ㋋ ㏠ ㏡ ㏢ ㏣ ㏤ ㏥ ㏦ ㏧ ㏨ ㏩ ㏪ ㏫ ㏬ ㏭ ㏮ ㏯ ㏰ ㏱ ㏲ ㏳ ㏴ ㏵ ㏶ ㏷ ㏸ ㏹ ㏺ ㏻ ㏼ ㏽ ㏾ ㍘ ㍙ ㍚ ㍛ ㍜ ㍝ ㍞ ㍟ ㍠ ㍡ ㍢ ㍣ ㍤ ㍥ ㍦ ㍧ ㍨ ㍩ ㍪ ㍫ ㍬ ㍭ ㍮ ㍯ ㍰&lt;/p&gt; &lt;h3 id=&quot;货币&quot;&gt;货币&lt;/h3&gt; &lt;p&gt;€ £ Ұ ₴ $ ₰ ¢ ₤ ¥ ₳ ₲ ₪ ₵ 元 ₣ ₱ ฿ ¤ ₡ ₮ ₭ ₩ ރ 円 ₢ ₥ ₫ ₦ z ł ﷼ ₠ ₧ ₯ ₨ K č र ₹ ƒ ₸ ￠&lt;/p&gt; &lt;h3 id=&quot;音乐&quot;&gt;音乐&lt;/h3&gt; &lt;p&gt;♩ ♪ ♫ ♬ ¶ ♭ ♯ ∮ ‖ § Ψ&lt;/p&gt; &lt;h3 id=&quot;天气&quot;&gt;天气&lt;/h3&gt; &lt;p&gt;☀ ☼ ♨ ☁ ☂ ☽ ☾ ❄ ❅ ❆ ☃&lt;/p&gt; &lt;h3 id=&quot;其他&quot;&gt;其他&lt;/h3&gt; &lt;p&gt;✐ ✎ ✏ ✑ ✒ ✍ ✉ ✁ ✂ ✃ ✄ ✆ ☎ ☏ ☑ ✓ ✔ √ ☐ ☒ ✗ ✘ ㄨ ✕ ✖ ☢ ☠ ☣ ✈ ★ ☆ ✡ 囍 ㍿ ☯ ☰ ☲ ☱ ☴ ☵ ☶ ☳ ☷ ☜ ☞ ☝ ☚ ☛ ☟ ✌ ♤ ♧ ♡ ♢ ♠ ♣ ♥ ♦ ☀ ☁ ☂ ❄ ☃ ♨ 웃 유 ❖ ☽ ☾ ☪ ✿ ♂ ♀ ✪ ✯ ☭ ➳ 卍 卐 × ■ ◆ ● ○ ◐ ◑ ✙ ☺ ☻ ❀ ⚘ ♔ ♕ ♖ ♗ ♘ ♙ ♚ ♛ ♜ ♝ ♞ ♟ ❤ ⊙ ◎ ☼ ▧ ▨ ↔ ↕ ▪ ▒ ◊ ◦ ▣ ▤ ▥ ▦ ▩ ◘ ◈ ◇ ♬ ♪ ♩ ♭ の → あ ぃ ￡ Ю 〓 § ▶ ¤ ✲ ❈ ➹ 【 】 ┱ ┲ ❣ ✚ ✣ ✤ ✥ ✦ ❉ ❥ ❦ ❧ ❃ ❂ ❁ ღ ▷ ◀ ◁ ☄ ☇ ☈ ☊ ☋ ☌ ☍ ⓛ ⓞ ⓥ ⓔ ╬ 『 』 ∴ ♫ ∷ ﹌ ► ◄ ↘ ▀ ▄ █ ▌ ▬ ۰ • ▫ ① ⊕ Θ ㊣ ◣ ◢ ◥ ▲ ▼ △ ▽ ⊿ ◤ ▐ ░ ◙ ♯ ♮ ♈ º ₪ 큐 « » ™ ◕ ‿ - ｡&lt;/p&gt; &lt;hr /&gt; &lt;h3 id=&quot;表情&quot;&gt;表情&lt;/h3&gt; &lt;p&gt;:) :( :D :P ~&lt;em&gt;~ =&lt;/em&gt;= -&lt;em&gt;-|| ^&lt;/em&gt;^ &amp;gt;o&amp;lt; ^ω^ ^o^ T^T •﹏• &amp;gt;&lt;em&gt;&amp;lt; ╰&lt;/em&gt;╯ T_T →&lt;em&gt;→ ←&lt;/em&gt;← ´&lt;em&gt;&amp;gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; ´&amp;lt;_&lt;/code&gt; ~&amp;gt;&lt;/em&gt;&amp;lt;~ ::&amp;gt;&lt;em&gt;&amp;lt;:: 〒&lt;/em&gt;〒 눈_눈 ⊙▽⊙ (⊙o⊙) (ಥ_ಥ) (´･ω･&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;) (ง •̀_•́)ง ( ͡° ͜ʖ ͡°) (๑´ڡ&lt;/code&gt;๑) (๑•́₃ •̀๑) “(º Д º&lt;em&gt;) (´･ᆺ･&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;) (●´ϖ&lt;/code&gt;●) (´-ι_-｀) (๑¯ω¯๑) (&lt;/em&gt;´艸&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*) (ㅎ‸ㅎ) (๑*◡*๑) ٩(❛ัᴗ❛ั⁎) (˶‾᷄ ⁻̫ ‾᷅˵) (ᵒ̤̑ ₀̑ ᵒ̤̑) ˃̣̣̥᷄⌓˂̣̣̥᷅ (˘̩̩̩ε˘̩ƪ) ( ˃̵̣̣̣̣̆ω˂̵̣̣̣̣̆)﻿ ˚ଂ﻿ ٩(˃̶͈̀௰˂̶͈́)و (;´༎ຶД༎ຶ&lt;/code&gt;) (ᵒ̴̶̷̤́◞౪◟ ᵒ̴̶̷̤̀ ) ༼⍢༽ ≧∇≦ ( •̀∀•́ ) (⁎⁍̴̛ᴗ⁍̴̛⁎) ٩(๑ᵒ̴̶̷͈᷄ᗨᵒ̴̶̷͈᷅)و &lt;em&gt;^o^&lt;/em&gt; &lt;em&gt;罒▽罒&lt;/em&gt; (๑• . •๑) └(^O^)┘ └(^O^)┐ ┌(^O^)┘ ╭(╯^╰)╮ ╭(╯ε╰)╮ ╮(╯&lt;em&gt;╰)╭ ╮(╯▽╰)╭ ╭(￣▽￣)╮ ╮(￣▽￣”)╭ ↖(^ω^)↗ _(:з」∠)&lt;/em&gt; ∠( ᐛ 」∠)＿ &lt;em&gt;(´ཀ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;」 ∠)_ ฅ⁽͑ ˚̀ ˙̭ ˚́ ⁾̉ฅ ⚈้̤͡ ˌ̫̮ ⚈้̤͡&quot; o_O O_O QAQ Orz e_e π_π $_$ @_@ ´▽&lt;/code&gt; ◑▂◐ ◑▂◑ ◐▂◐ ´∀&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; ●_● ●ｖ● ●^● \(^O^)/ ⊙_⊙ ⊙ω⊙ Õ_Õ ∩_∩ ㅍ_ㅍ ￣▽￣ ￣π￣ ︶︿︶ ￣へ￣ ￣﹁￣ ˉ﹃ˉ ﹁_﹂ ╯﹏╰ *^_^* ╰_╯╬ ( ´▽&lt;/code&gt; ) (×&lt;/em&gt;×) (&amp;gt;﹏&amp;lt;) (☆&lt;em&gt;☆) (=^.^=) #^&lt;/em&gt;^# (ˉ(∞)ˉ) &amp;lt;’)))))&amp;gt;&amp;lt; ⁽⁽◝( ˙ ꒳ ˙ )◜⁾⁾ ε==(づ′▽&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;)づ (っ╥╯﹏╰╥c) /(ㄒoㄒ)/~~ ~\(≧▽≦)/~ (๑•̀ㅂ•́)و✧ ✺◟(∗❛ัᴗ❛ั∗)◞✺ ༽΄◞ิ౪◟ิ‵༼ ₍₍⁽⁽(ી( ･◡･ )ʃ)₎₎⁾⁾ ˚‧º·(˚ ˃̣̣̥᷄⌓˂̣̣̥᷅ )‧º·˚ O(∩_∩)O (๑•ั็ω•็ั๑) (๑´ㅂ&lt;/code&gt;๑) (ฅ&amp;gt;ω&amp;lt;&lt;em&gt;ฅ) -(￢∀￢)σ ε-(´∀｀; ) ヽ(〃∀〃)ﾉ ヽ(ﾟ∀ﾟ)ﾉ ( ´•灬•｀) ( •ิ_• ิ) (๑•ี_เ•ี๑) ╭(°A°&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;)╮ (｡ì _ í｡) ԅ(¯﹃¯ԅ) Σ(･ω･ﾉ)ﾉ ヽ(´･д･｀)ﾉ (･ิϖ･ิ)っ (｡•́︿•̀｡) (*°ω°*)ﾉ&quot; ε=(´o｀) (｡･ω･｡)ﾉ♡ (๑ºั╰╯ºั๑) (｡•́__ก̀｡) (´இ皿இ｀) ︽⊙_⊙︽ (づ￣3￣)づ (￣⊥￣) ﹋o﹋ Y(^_^)Y =￣ω￣= (*^．^*) ~*^_^*~ *(∩_∩)* ┏(^ω^)=☞ (~￣△￣)~ Σ( ° △ °|||)︴ ╰(*´︶&lt;/code&gt;&lt;/em&gt;)╯ ヾ(Ő∀Ő)ﾉ ㄟ(▔，▔)ㄏ ヽ(￣д￣;)ノ ヾ(&lt;em&gt;´∀｀&lt;/em&gt;)ﾉ (＊￣︶￣＊) ⊂((・⊥・))⊃ (╯‵□′)╯︵┻━┻ o(&lt;em&gt;≧▽≦)ツ┏━┓ Σ(っ °Д °;)っ ( &lt;/em&gt;・ω・)✄╰ひ╯ (&lt;em&gt;・_・)ノ⌒&lt;/em&gt;丢出去 ─=≡Σ((( つ•̀ω•́)つ超人 (ﾉ”◑ڡ◑)ﾉ”(｡•́︿•̀｡)给爷笑一个~ ╭( ′• o •′ )╭☞警察叔叔！就是这个人！ (￣ε(#￣)☆╰╮o(￣皿￣///) ┻━┻︵╰(‵□′)╯︵┻━┻ ┳━┳ノ(°&lt;em&gt;°ノ) Hi~ o(*￣▽￣*)ブ ヽ(・ω・｀)ノ=з=з=з ～(￣▽￣～)(～￣▽￣)～ ▄︻┻┳═一∵∴(∵&lt;/em&gt;，∵)» (ꐦ ´͈ ᗨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;͈ ) =͟͟͞͞((☞ ՞ਊ ՞)☞ =͟͟͞͞(꒪⌓꒪*) ⁽⁽ƪ(ᵕ᷄≀ ̠˘᷅ )ʃ⁾⁾ᵒᵐᵍᵎᵎ ʅ(´◔౪◔)ʃ ヽ( ຶ▮ ຶ)ﾉ!!!﻿ (۶ૈ ۜ ᵒ̌▱๋ᵒ̌ )۶ૈ=͟͟͞͞ ⌨ ⁝⁞⁝⁞Ϛ⃘๑•͡ ི.ྀ̫•๑꒜☂⁝⁞⁝⁝ (━┳━ _ ━┳━) (～﹃～)~zZ ε=(´o｀)唉 (*^．^*) 亲亲~ ( ^_^ )/~~拜拜 ರ_ರ 心塞 (ಥ_ಥ)妈蛋 (ↂ⃙⃙⃚⃛_ↂ⃙⃙⃚⃛₎嗯! ᕕ(ᐛ)ᕗ变身! (๐•̆ ·̭ •̆๐) 我不 (๑⁼̴̀д⁼̴́๑)干嘛!! ~(=^‥^)_旦~ ⁽⁽◝( ˙ ꒳ ˙ )◜⁾⁾so what ˃̣̣̥᷄⌓˂̣̣̥᷅ 啊～我就要买 ⁽⁽٩( ´͈ ᗨ &lt;/code&gt;͈ )۶⁾⁾快说你爱我 ﾍ(;´Д｀ﾍ)哎呀手折了 (๑╹ڡ╹)╭ ～ ♡&lt;del&gt;耐你&lt;/del&gt; (っ˘̩╭╮˘̩)っ伐开心要抱抱 ( •人• )ԅ(≖‿≖ԅ)耍流氓 ~(≧▽≦)/~啦啦啦 o(︶︿︶)o唉 o(≧v≦)o~~好棒 ╭∩╮（︶︿︶）╭∩╮&lt;/p&gt; &lt;h3 id=&quot;参考链接&quot;&gt;参考链接&lt;/h3&gt; &lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Subscript_and_superscript&quot;&gt;Subscript and superscript&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://en.wikipedia.org/wiki/Unicode_subscripts_and_superscripts&quot;&gt;Unicode subscripts and superscripts&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/linux/math-symbols.html</link> <guid>https://luowei.github.io/linux/math-symbols</guid> <pubDate>Sun, 24 Jun 2018 00:00:00 +0800</pubDate> </item> <item> <title>ssh隧道实现代理上网</title> <description> &lt;h2 id=&quot;ssh隧道实现代理上网&quot;&gt;ssh隧道实现代理上网&lt;/h2&gt; &lt;h3 id=&quot;本地代理&quot;&gt;本地代理&lt;/h3&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ssh -N -D 127.0.0.1:端口 用户名@服务器&lt;/code&gt;&lt;/p&gt; &lt;p&gt;比如：&lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ssh -N -D 127.0.0.1:3128 admin@xxxxxx.com&lt;/code&gt;&lt;/p&gt; &lt;h3 id=&quot;chrome配置&quot;&gt;chrome配置&lt;/h3&gt; &lt;p&gt;&lt;img src=&quot;https://wx4.sinaimg.cn/mw1024/680dfa44gy1fs7dyo6rmuj21kw0s7gs3.jpg&quot; alt=&quot;chrome ssh隧道代理配置&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;terminer设置代理&quot;&gt;Terminer设置代理&lt;/h2&gt; &lt;p&gt;参考： &lt;a href=&quot;https://gist.github.com/fearblackcat/850c6e027d5a03017c44daaa6a7ffc30&quot;&gt;https://gist.github.com/fearblackcat/850c6e027d5a03017c44daaa6a7ffc30 &lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;export http_proxy=&quot;username:password@ip address:port number&quot;&lt;/code&gt; to your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.bash_profile&lt;/code&gt; file&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;export http_proxy=192.168.1.10:8080 export HTTP_PROXY=192.168.1.10:8080 export https_proxy=192.168.1.10:8080 export HTTPS_PROXY=192.168.1.10:8080 export no_proxy=localhost,127.0.0.1,*.my.company.lan &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;为npm设置代理&quot;&gt;为npm设置代理&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;npm config set proxy http://xxx.xxx.xxx.4:8080 npm config set https-proxy http://xxx.xxx.xxx.4:8080 npm config rm proxy npm config rm https-proxy &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/linux/ssh-tunnel.html</link> <guid>https://luowei.github.io/linux/ssh-tunnel</guid> <pubDate>Thu, 07 Jun 2018 00:00:00 +0800</pubDate> </item> <item> <title>做独立开发的一些感想</title> <description> &lt;h2 id=&quot;做独立开发的一些感想&quot;&gt;做独立开发的一些感想&lt;/h2&gt; &lt;p&gt;  想想自己独立开发也有好多年了，从刚毕业做的在线销售系统，再到spring boot做写的my-finances，再后来转iOS做的万能输入法、我的浏览器、照片DIY、斗图王。一路走来，还是写一点感想吧，后面有时间会持续更新的。&lt;/p&gt; &lt;p&gt;  要说起做独立开发，要从我刚学会编程时，我想那时候就应该有这种想法了，总想着除了正常的学习或工作之外，要自己独立做点什么东西，以突显出我与别人的不一样，我需要比别人更坚韧不拔，更能吃苦耐劳。&lt;/p&gt; &lt;p&gt;  其实作为独立开发者，最难的是需要孤独的去面对问题和挑战困难，因为没人与你同行，而且也可能会要没日没夜的加班加点，有可能是1年，也有可能是2、3年，也可能是10年、20年。&lt;/p&gt; &lt;p&gt;  在你前行的路上能理解你的人也不多，可能也没人能有效地给予你帮助与反馈，也可能你身边的亲人、朋友或同事都会反对不支持或不认可你的做法。&lt;/p&gt; &lt;p&gt;  你是在做自己的事情，在别人看来可能毫无意义，另外除了有技术障碍之外，还要克服不少自我心理困难。&lt;/p&gt; &lt;p&gt;  对我来说做独立开发者，可能是我的志趣所在，我喜欢全身心的去做一些事，而正好这事很好让我全身心的投入，加之它与利义不相争，也还很有趣，也有意思。真正在做或认真计划在做的话，会感觉五、六天过的很快，每天的时间都不够用，没时间出玩、没时间陪朋友、也不耐烦聚会，总想着自己的那点事情还没做完、这周的计划又要往后拖了。&lt;/p&gt; &lt;p&gt;  对我来说做独立开发好比做数学研究，虽然不比《数学大师》说的那些数学家，但是在我看来，独立开发者的世界有点像类似伽罗瓦那样经历的也未必没有。&lt;/p&gt; &lt;p&gt;  在不理解你的人看来，程序员有程序员的局限。至于它是局限，还是对于存在意义的选择不同，对我来说可能只是在自己的世界里与不在自己的世界的差别，抑或是不理解你的人爱怎么说了。我想人各有心，也各有志。什么东西对我们来说比较意义，每个人的定义都可能有所不同。生来本无意义，因为要求了自己要做一些事和目标，而赋予或被赋予了一层意义，我只是希望这层意义更多的由自己来赋予，不管它在别人看来这层意义有多大。&lt;/p&gt; &lt;p&gt;  回想有时候喜欢别人怀疑或不认可的眼神和态度时，就会觉得淡然又不想或来不及解释什么，但却知道最终他们是会错的。最后你走过来了，发现他们还在原地做他们喜欢做的，想他们喜欢想的，似乎感觉大家好像也是一样的，只是或许现在已经与自己不在一个频道上了，只是彼此的世界也已经不同，再无所谓评论好坏是非了。&lt;/p&gt; &lt;p&gt;  最后一个得说到累这个词，我只能说：累，但又并不觉得累，只有停下来之后再想去重新起程时才会觉得很累。如果我的身体和心理状态一直年轻健壮，我想我会一直坚持下去。&lt;/p&gt; &lt;p&gt;  Come On。继续前行。继续加油。。&lt;/p&gt; </description> <link>https://luowei.github.io/ios/Indie-Developer-Thoughts.html</link> <guid>https://luowei.github.io/ios/Indie-Developer-Thoughts</guid> <pubDate>Wed, 07 Feb 2018 00:00:00 +0800</pubDate> </item> <item> <title>开发者个人App作品展示</title> <description> &lt;h2 id=&quot;开发者app下载&quot;&gt;开发者App下载&lt;/h2&gt; &lt;h3 id=&quot;开发者app&quot;&gt;开发者App&lt;/h3&gt; &lt;p&gt;&lt;a href=&quot;https://itunes.apple.com/cn/developer/wei-luo/id990121194&quot;&gt;https://itunes.apple.com/cn/developer/wei-luo/id990121194&lt;/a&gt;&lt;/p&gt; &lt;h3 id=&quot;万能输入法&quot;&gt;万能输入法&lt;/h3&gt; &lt;p&gt;&lt;a href=&quot;https://itunes.apple.com/cn/app/id1227288468&quot;&gt;https://itunes.apple.com/cn/app/id1227288468&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://itunes.apple.com/us/app/id1227288468&quot;&gt;https://itunes.apple.com/us/app/id1227288468&lt;/a&gt;&lt;/p&gt; &lt;h4 id=&quot;中文描述&quot;&gt;中文描述&lt;/h4&gt; &lt;p&gt;＝＝＝万能输入法宿主App功能介绍＝＝＝&lt;br /&gt; 万能输入法宿主App界面简法、动画淡雅；&lt;br /&gt; 万能输入法宿主App内置简版Web浏览器支持关键词搜索；&lt;br /&gt; 万能输入法宿主App内置软笔画板支持自定义笔触大小及颜色，并笔锋效果；&lt;br /&gt; 万能输入法宿主App内置拼音转换、翻译、书法字典、汉语查询、以及学术查询入口；&lt;/p&gt; &lt;p&gt;＝＝＝万能输入法键盘功能介绍＝＝＝&lt;br /&gt; 万能输入法的拼音键盘：支持全键盘拼音、九键盘拼音；&lt;br /&gt; 万能输入法的五笔键盘：支持86五笔单字和常用词组输入；&lt;br /&gt; 万能输入法的笔画键盘：九宫格的笔画输入键盘；&lt;br /&gt; 万能输入法的手写键盘：支持中文、日文、韩文手写识别；&lt;/p&gt; &lt;p&gt;＝＝＝万能输入法丰富多彩的功能＝＝＝&lt;br /&gt; 万能输入法可以打开支持五笔、拼音、翻译快捷查询；&lt;br /&gt; 万能输入法还可以打字过程中长按候选词即可快捷查询五笔编码、拼音以及翻译；&lt;br /&gt; 万能输入法便捷的粘贴键可以随时粘贴剪粘板的内容；&lt;br /&gt; 万能输入法的预览输入框内容功能可以随时翻译转换输入框内容；&lt;br /&gt; 万能输入法支持搜索联系人、快捷复制联系人信息及给搜索到的联系人打电话；&lt;br /&gt; 万能输入法支持搜索图片、GIF动画；&lt;br /&gt; 万能输入法支持保存、分享、以及收藏图片、GIF动画；&lt;br /&gt; 万能输入法同样也支持快速定位文本插入点位置；&lt;/p&gt; &lt;p&gt;万能输入法的涂鸭功能让你随进随地画图圈图做标记；&lt;br /&gt; 万能输入法的实时翻译与快捷翻译让外语输入更便捷；&lt;br /&gt; 万能输入法的拼音转换可以帮助你快捷的输入拼音；&lt;br /&gt; 万能输入法的繁简转换使在手机上输入繁体字也变得轻而易举；&lt;br /&gt; 万能输入法的火星文字让你的输入更标新立异，彰显个性；&lt;br /&gt; 万能输入法的捏合截图可便捷截取自定义键盘效果图；&lt;br /&gt; 万能输入法的快捷短语你可分类设置平时经常输入的；&lt;br /&gt; 万能输入法的丰富的Emoji与颜文字让输入更加出彩；&lt;br /&gt; 万能输入法的斗图玩法的可以让你在输入法里玩转你喜欢的斗图；&lt;/p&gt; &lt;p&gt;万能输入法可以任意从相册选择一张图片调整模糊程度作为键盘皮肤；&lt;br /&gt; 万能输入法可以任意选择一种颜色作为键盘皮肤；&lt;br /&gt; 万能输入法可以任意自定义键盘的按键的样式主题，比如背景色/边框/字体/圆角/阴影/间距等；&lt;/p&gt; &lt;hr /&gt; &lt;h3 id=&quot;我的浏览器---可个性化的自定义浏览器&quot;&gt;我的浏览器 - 可个性化的自定义浏览器&lt;/h3&gt; &lt;p&gt;&lt;a href=&quot;https://itunes.apple.com/cn/app/id1019594424&quot;&gt;https://itunes.apple.com/cn/app/id1019594424&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://itunes.apple.com/us/app/id1019594424&quot;&gt;https://itunes.apple.com/us/app/id1019594424&lt;/a&gt;&lt;/p&gt; &lt;h4 id=&quot;中文描述-1&quot;&gt;中文描述&lt;/h4&gt; &lt;p&gt;我的浏览器 - 一个可个性化的自定义浏览器&lt;/p&gt; &lt;p&gt;我的浏览器是一款基于WKWebview的上网浏览器；&lt;/p&gt; &lt;p&gt;我的浏览器特点:&lt;br /&gt; 我的浏览器名字独特可作为你的个性浏览器；&lt;br /&gt; 我的浏览器的自动全屏功能让你在看内容时更加全神贯注；&lt;br /&gt; 我的浏览器夜间模式有效保护你的眼睛；&lt;br /&gt; 我的浏览器的无图模式可以屏蔽掉网页中的图片；&lt;br /&gt; 我的浏览器的清除痕迹功能让上网更加安全放心；&lt;br /&gt; 我的浏览器的拦截广告功能让网页更干净；&lt;br /&gt; 我的浏览器同样也支持多窗口、书签管理和历史记录；&lt;br /&gt; 我的浏览器支持扫描二维码打开页面；&lt;br /&gt; 我的浏览器支持用系统自带的浏览器打开网页；&lt;br /&gt; 我的浏览器支持将浏览的网页直接导出成PDF电子纸文件；&lt;/p&gt; &lt;p&gt;我的浏览器自定义功能:&lt;br /&gt; 我的浏览器内置静态WebServer，支持在手机上搭建简单的静态web站点；&lt;br /&gt; 我的浏览器新增的ShareExtension，支持任意文件的导入和打开；&lt;/p&gt; &lt;p&gt;我的浏览器内置Web DAV，可以更方便快捷实现从电脑上传或下载文件到web容器；&lt;/p&gt; &lt;p&gt;我的浏览器内置的Web Uploader，可以很方便的上传手机上的已有的照片或文件到Web容器；&lt;/p&gt; &lt;p&gt;我的浏览器的配置文件都在web容器的Config目录下，用户可以修改HomeContent.json文件内容来自定义浏览器首页；用户可修改AdblockRules.txt文件内容来添加或修改广告拦截的规则；&lt;/p&gt; &lt;p&gt;因为我在做这个浏览器之初就要求了目标是做一个极轻量、极快的的、可自定义配置的浏览器，几个版下来，每次加任何功能都要再三考虑斟酌。才得已让现在的这个”我的浏览器”在集众多功能于一身的同时并保证了安装包在5M左右，为用户省下更多存储空间，真正做到身轻如燕；&lt;/p&gt; &lt;p&gt;我的浏览器，也是你的可个性化的自定义浏览器，你值得拥有！&lt;/p&gt; &lt;h4 id=&quot;英文描述&quot;&gt;英文描述&lt;/h4&gt; &lt;p&gt;MyBrowser - a customizable browser&lt;/p&gt; &lt;p&gt;MyBrowser is a web browser based on WKWebview;&lt;/p&gt; &lt;p&gt;MyBrowser features:&lt;br /&gt; MyBrowser name unique as your personality browser;&lt;br /&gt; MyBrowser’s full auto-full functionality gives you more immersion when you look at content;&lt;br /&gt; MyBrowser night mode effectively protects your eyes;&lt;br /&gt; MyBrowser’s no-picture mode can screen out the picture;&lt;br /&gt; Clear traces of my browser to make the Internet more secure and secure;&lt;br /&gt; MyBrowser’s blocking ad feature makes web pages cleaner;&lt;br /&gt; MyBrowser also supports multiple windows, bookmark management and history;&lt;br /&gt; MyBrowser supports scanning QR code to open the page;&lt;br /&gt; MyBrowser supports using the system’s own browser to open the page;&lt;br /&gt; MyBrowser supports browsing web pages directly into PDF electronic paper files;&lt;/p&gt; &lt;p&gt;MyBrowser custom features:&lt;br /&gt; MyBrowser built-in static WebServer, support for mobile phones to build a simple static web site;&lt;/p&gt; &lt;p&gt;MyBrowser has built-in Web DAV, which makes it quick and easy to upload or download files from your computer to web containers.&lt;/p&gt; &lt;p&gt;MyBrowser built-in Web Uploader, you can easily upload the phone’s existing photos or files to the Web container;&lt;/p&gt; &lt;p&gt;MyBrowser’s configuration file in the web container Config directory, the user can modify the HomeContent.json file content to customize the browser home page; Users can modify AdblockRules.txt file content to add or modify the rules of ad blocking;&lt;/p&gt; &lt;p&gt;Because I was the beginning of this browser requires the goal is to do a very lightweight, very fast, customizable browser, a few versions down, every time you add any feature should be considered again and again. Only then have this “my browser” in the collection of many functions at the same time and ensure that the installation package within 5M, to save users more storage space, truly lightweight as Yan;&lt;/p&gt; &lt;p&gt;MyBrowser, but also your customizable custom browser, you deserve it!&lt;/p&gt; &lt;hr /&gt; &lt;h3 id=&quot;美图王---mywallpaper&quot;&gt;美图王 - MyWallPaper&lt;/h3&gt; &lt;p&gt;&lt;a href=&quot;https://itunes.apple.com/cn/app/id1281496162&quot;&gt;https://itunes.apple.com/cn/app/id1281496162&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://itunes.apple.com/us/app/id1281496162&quot;&gt;https://itunes.apple.com/us/app/id1281496162&lt;/a&gt;&lt;/p&gt; &lt;h4 id=&quot;中文描述-2&quot;&gt;中文描述&lt;/h4&gt; &lt;p&gt;一款高清的意向图和壁纸图片应用&lt;/p&gt; &lt;p&gt;美图王又名MyWallPaper，是一款非常好用的图片App;&lt;/p&gt; &lt;p&gt;美图王是一款很棒的壁纸应用，有丰富多彩的高清图片可以用作背景。&lt;/p&gt; &lt;p&gt;美图王支持高清图片编辑、各种滤镜美化，保存分享等功能；&lt;/p&gt; &lt;p&gt;美图王每天会有新鲜高清美图更新，可满足无限的创意需求；&lt;/p&gt; &lt;p&gt;美图王是设计师们的好帮手，内置搜索各素材和高清图片功能，有着无限的灵感来源；&lt;/p&gt; &lt;p&gt;美图王的接入了Unsplash，以搜索Unsplash上任意的图片，资源都是经过用户精心挑选的。&lt;/p&gt; &lt;h4 id=&quot;英文描述-1&quot;&gt;英文描述&lt;/h4&gt; &lt;p&gt;MyWallPaper is a great wallpaper app, a rich and colorful picture for you to use as a wallpaper.&lt;/p&gt; &lt;p&gt;If you like to use a beautiful picture as a wallpaper, then MyWallPaper is the best choice;&lt;/p&gt; &lt;p&gt;If you like photography or like to collect all kinds of beautiful pictures, then MyWallPaper can meet your requirements;&lt;/p&gt; &lt;p&gt;If you are a designer usually like to find material and high-definition pictures, then MyWallPaper is your source of inspiration;&lt;/p&gt; &lt;p&gt;MyWallPaper is also a simple version of Unsplash, you can search any picture like on Unsplash.&lt;/p&gt; &lt;hr /&gt; &lt;h3 id=&quot;markdown---markdown万能记事本&quot;&gt;MarkDown - Markdown万能记事本&lt;/h3&gt; &lt;p&gt;&lt;a href=&quot;https://itunes.apple.com/cn/app/id1274459069&quot;&gt;https://itunes.apple.com/cn/app/id1274459069&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://itunes.apple.com/us/app/id1274459069&quot;&gt;https://itunes.apple.com/us/app/id1274459069&lt;/a&gt;&lt;/p&gt; &lt;h4 id=&quot;中文描述-3&quot;&gt;中文描述&lt;/h4&gt; &lt;p&gt;一款支持从文本图片导入及导出PDF的Markdown记事本&lt;/p&gt; &lt;p&gt;Markdown万能记事本是一个快捷记事的好工具，可以作为笔记本或日记本或图文备忘录使用。&lt;/p&gt; &lt;p&gt;Markdown万能记事本是一个为编辑Markdwon格式文档而生的支持Markdown格式的记事本。&lt;/p&gt; &lt;p&gt;MarkDown万能记事本支持各样的信纸背景、格式良好的进行预览。&lt;/p&gt; &lt;p&gt;MarkDown万能记事本可以快速导出生成PDF文档,预览PDF,以及分享PDF文档。&lt;/p&gt; &lt;p&gt;MarkDown万能记事本可以设置个性化的字体，有系统推荐字体以及中文字体，如细体、草书、行书、隶书、幼圆、雅痞、雅黑供你选择；&lt;/p&gt; &lt;p&gt;MarkDown万能记事本自定义个性化的皮肤让记事本更加丰富多彩。既可以选择传统的黑白主题，也可以选反摩托发动机主题。还有保护眼主题皮肤可以更好的保护你的眼睛，生活主题可以让人感受优雅的生活画面。&lt;/p&gt; &lt;p&gt;更加让人意外的是，通过MarkDown万能记事本的Share Extension可以从其他应用导入文本和图片，支持导入word、excel、powerpoint、pages、numbers、key以及rtf等文本文件内容。&lt;/p&gt; &lt;h4 id=&quot;英文描述-2&quot;&gt;英文描述&lt;/h4&gt; &lt;p&gt;Markdown Notepad is a great tool for quick notes that can be used as a notebook or diary or graphic memorandum.&lt;/p&gt; &lt;p&gt;Markdown Notepad is a Notepad that supports the Markdown format for editing Markdwon format documents.&lt;/p&gt; &lt;p&gt;MarkDown Notepad supports a variety of stationery background, well-formatted preview.&lt;/p&gt; &lt;p&gt;MarkDown Notepad can quickly generate PDF documents generated, preview PDF, and share PDF documents.&lt;/p&gt; &lt;p&gt;MarkDown Notepad can be customized to set the font, the system recommended fonts and Chinese fonts, such as detailed, cursive, Xingshu, official script, Yuanyuan, yuppie, elegant Black for your choice;&lt;/p&gt; &lt;p&gt;MarkDown Notepad custom personalized skin to make Notepad more colorful. You can choose the traditional black and white theme, you can also choose anti-motorcycle engine theme. There are eye protection theme of the eye can better protect your eyes, life theme can make people feel elegant life picture.&lt;/p&gt; &lt;p&gt;Even more surprising is that through MarkDown Notepad Share Extension can import text and images from other applications, support for importing word, excel, powerpoint, pages, numbers, key and rtf text file content.&lt;/p&gt; &lt;hr /&gt; &lt;h3 id=&quot;照片diy&quot;&gt;照片DIY&lt;/h3&gt; &lt;p&gt;&lt;a href=&quot;https://itunes.apple.com/cn/app/id1198477850&quot;&gt;https://itunes.apple.com/cn/app/id1198477850&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;https://itunes.apple.com/us/app/id1198477850&quot;&gt;https://itunes.apple.com/us/app/id1198477850&lt;/a&gt;&lt;/p&gt; &lt;h4 id=&quot;中文描述-4&quot;&gt;中文描述&lt;/h4&gt; &lt;p&gt;一款可以对图片加滤镜、各种涂鸭、打码塞克、裁剪的APP&lt;/p&gt; &lt;p&gt;照片DIY也叫MyPhotoDIY，是一款很不错的照片处理应用，除了能对照片进行一些翻转、旋转、裁剪等基本的图片操作外，还可以随意调整照片的色阶、对比度、白平衡，对人物还有美白的功能，以及打码塞克，各种涂鸭功能。&lt;/p&gt; &lt;p&gt;照片DIY内置了二十种常用的滤镜，想要什么效果都可以随意自由发挥。&lt;/p&gt; &lt;p&gt;照片DIY同时也内置的强大涂鸭功能，各种几何形状随意画，各种自由画笔也可随意挑，还有丰富的颜色选择盒、底纹选择盒、以及字体选择盒。也可以自己选择相册照片作为画笔底纹可以让画笔更佳神奇。&lt;/p&gt; &lt;p&gt;照片DIY的分享组件支持从其他应用导入照片到照片DIY中编辑，比如你可以从相册选择一张照片进行编辑。&lt;/p&gt; &lt;h4 id=&quot;英文描述-3&quot;&gt;英文描述&lt;/h4&gt; &lt;p&gt;MyPhotoDIY also called photo DIY, is a very good photo processing applications, in addition to the photo some flip, rotate, crop and other basic picture operations, but also free to adjust the photo color scale, contrast, white balance, As well as whitening features, as well as playing yards, a variety of coated duck function.&lt;/p&gt; &lt;p&gt;MyPhotoDIY built-in 20 kinds of commonly used filters, you want what effects are free to play.&lt;/p&gt; &lt;p&gt;MyPhotoDIY also built a powerful Tu duck function, a variety of geometric shapes at random, a variety of free brush can also be free to pick, there are a wealth of color selection box, shading box, as well as font selection box. You can also choose your own photo albums as brush shading can make the brush better magic.&lt;/p&gt; &lt;p&gt;In short, this a powerful image processing tools, it is worth your try.&lt;/p&gt; &lt;hr /&gt; &lt;h3 id=&quot;斗图王---用照片及视频制作斗图&quot;&gt;斗图王 - 用照片及视频制作斗图&lt;/h3&gt; &lt;p&gt;&lt;a href=&quot;https://itunes.apple.com/cn/app/id1335365550&quot;&gt;https://itunes.apple.com/cn/app/id1335365550&lt;/a&gt; &lt;a href=&quot;https://itunes.apple.com/us/app/id1335365550&quot;&gt;https://itunes.apple.com/us/app/id1335365550&lt;/a&gt;&lt;/p&gt; &lt;h4 id=&quot;中文描述-5&quot;&gt;中文描述&lt;/h4&gt; &lt;p&gt;一个GIF斗图动画表情制作和搜索APP&lt;/p&gt; &lt;p&gt;斗图王是一个GIF斗图动画表情制作及搜索工具，兼具斗图浏览器与斗图编辑器的功能。&lt;/p&gt; &lt;p&gt;斗图制作：&lt;br /&gt; 斗图王支持对GIF帧率调整；&lt;br /&gt; 斗图王支持对GIF缩放大小；&lt;br /&gt; 斗图王支持对GIF编辑截剪部分区域；&lt;br /&gt; 斗图王支持批量导出GIF的图片帧的集合；&lt;br /&gt; 斗图王支持对GIF图片指定一帧的图片保存和分享；&lt;/p&gt; &lt;p&gt;斗图编辑：&lt;br /&gt; 斗图王支持选择多张照片生成GIF动画；&lt;br /&gt; 斗图王支持对生成的GIF斗图编辑进行截剪、缩放大小、调整帧率；&lt;/p&gt; &lt;p&gt;LivePhoto导出：&lt;br /&gt; 斗图王支持将LivePhoto生成为GIF动画图片；&lt;br /&gt; 斗图王支持将LivePhoto导出短视频；&lt;br /&gt; 斗图王支持将LivePhoto导出成图片帧；&lt;br /&gt; 斗图王支持对LivePhoto内的短视频播放、保存及分享；&lt;/p&gt; &lt;p&gt;短视频转斗画：&lt;br /&gt; 斗图王支持将短视频制作为GIF动画图片；&lt;br /&gt; 斗图王支持从其他App分享导出视频生成GIF;&lt;br /&gt; 斗图王支持将短视频导出成图片帧；&lt;br /&gt; 斗图王支持对短视频指定一帧的图片保存和分享；&lt;/p&gt; &lt;p&gt;斗图搜索、斗图浏览及斗图收藏：&lt;br /&gt; 斗图王支持海量的图片搜索，编辑、分享、保存以及收藏；&lt;br /&gt; 斗图王支持复制搜索到的GIF斗图图片网址以及打开对应的GIF斗图；&lt;br /&gt; 斗图王支持将喜欢或常用的图片及斗图动画添加到自定义的收藏分类里；&lt;br /&gt; 斗图王支持对收藏分类的添加、修改及删除；&lt;br /&gt; 斗图王支持对收藏的图片进行修改及删除；&lt;br /&gt; 斗图王强大的ShareExtension可快速导入视频和图片制作斗图；&lt;/p&gt; &lt;p&gt;支持网站：wodedata.com&lt;/p&gt; &lt;h4 id=&quot;英文描述-4&quot;&gt;英文描述&lt;/h4&gt; &lt;p&gt;GIF make and search&lt;/p&gt; &lt;p&gt;GIFMaster is a GIF bucket animation expression production and search tools, both GIF browser and Doudu editor features.&lt;/p&gt; &lt;p&gt;GIF Make:&lt;br /&gt; GIFMaster support GIF frame rate adjustment;&lt;br /&gt; GIFMaster support GIF zoom size;&lt;br /&gt; GIFMaster support GIF editing cut part of the region;&lt;br /&gt; GIFMaster support batch export GIF picture frame collection;&lt;br /&gt; GIFMaster support GIF images to specify a picture of the picture preservation and sharing;&lt;/p&gt; &lt;p&gt;GIF edit:&lt;br /&gt; GIFMaster support the choice of multiple photos generated GIF animation;&lt;br /&gt; GIFMaster support for the generation of GIF bucket diagram editing cut, zoom size, adjust the frame rate;&lt;/p&gt; &lt;p&gt;LivePhoto Export:&lt;br /&gt; GIFMaster supports LivePhoto generated as animated GIF images;&lt;br /&gt; GIFMaster support LivePhoto export short video;&lt;br /&gt; GIFMaster support LivePhoto exported into a picture frame;&lt;br /&gt; GIFMaster supports short video playback within LivePhoto, save and share;&lt;/p&gt; &lt;p&gt;Short video transfer to GIF:&lt;br /&gt; GIFMaster support short video production as animated GIF images;&lt;br /&gt; GIFMaster support the short video export to a picture frame;&lt;br /&gt; GIFMaster supports the short video to specify a picture to save and share;&lt;/p&gt; &lt;p&gt;GIF search, browsing and collection:&lt;br /&gt; GIFMaster supports massive image search, editing, sharing, preservation and collection;&lt;br /&gt; GIFMaster support copy search to the GIF bucket map image URL and open the corresponding GIF bucket map;&lt;br /&gt; GIFMaster supports the favorite or commonly used pictures and bucket animation added to the custom collection category;&lt;br /&gt; GIFMaster support for the collection of add, modify and delete;&lt;br /&gt; GIFMaster support for the collection of pictures to be modified and deleted;&lt;/p&gt; &lt;p&gt;Support Website: wodedata.com&lt;/p&gt; </description> <link>https://luowei.github.io/ios/developer-app.html</link> <guid>https://luowei.github.io/ios/developer-app</guid> <pubDate>Tue, 06 Feb 2018 00:00:00 +0800</pubDate> </item> <item> <title>UTI详解</title> <description> &lt;h2 id=&quot;uti-overview&quot;&gt;UTI Overview&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;参考：&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://www.cocoanetics.com/2012/09/fun-with-uti/&quot;&gt;Fun with UTI&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/understanding_utis/understand_utis_conc/understand_utis_conc.html#//apple_ref/doc/uid/TP40001319-CH202-CHDHIJDE&quot;&gt;Apple UTI Overview&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;https://wx4.sinaimg.cn/mw690/680dfa44ly1fnuei9tlppj20q00zcn07.jpg&quot; alt=&quot;Two Hierarchies&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;mdls&quot;&gt;mdls&lt;/h2&gt; &lt;p&gt;You can use the &lt;strong&gt;mdls&lt;/strong&gt; tool to inspect the UTIs currently attached to any item in your file system. This is also quite useful to see if your UTI definitions for your custom type are correct.&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;LuoWeideMacBook-Pro:Movies luowei$ mdls MyInputMethod.mov kMDItemAudioBitRate = 302 kMDItemAudioChannelCount = 2 kMDItemCodecs = ( AAC, &quot;H.264&quot; ) kMDItemContentCreationDate = 2018-01-18 09:31:15 +0000 kMDItemContentCreationDate_Ranking = 2018-01-18 00:00:00 +0000 kMDItemContentModificationDate = 2018-01-18 09:31:25 +0000 kMDItemContentType = &quot;com.apple.quicktime-movie&quot; kMDItemContentTypeTree = ( &quot;com.apple.quicktime-movie&quot;, &quot;public.item&quot;, &quot;public.movie&quot;, &quot;public.audiovisual-content&quot;, &quot;com.apple.quicktime-movie&quot;, &quot;public.data&quot;, &quot;public.content&quot; ) kMDItemDateAdded = 2018-01-18 09:31:25 +0000 kMDItemDateAdded_Ranking = 2018-01-18 00:00:00 +0000 kMDItemDisplayName = &quot;MyInputMethod.mov&quot; kMDItemDurationSeconds = 738.3980166666666 kMDItemEncodingApplications = ( &quot;Mac OS X 10.13.2 (17C205)&quot; ) kMDItemFSContentChangeDate = 2018-01-18 09:31:25 +0000 kMDItemFSCreationDate = 2018-01-18 09:31:15 +0000 kMDItemFSCreatorCode = &quot;&quot; kMDItemFSFinderFlags = 0 kMDItemFSHasCustomIcon = (null) kMDItemFSInvisible = 0 kMDItemFSIsExtensionHidden = 0 kMDItemFSIsStationery = (null) kMDItemFSLabel = 0 kMDItemFSName = &quot;MyInputMethod.mov&quot; kMDItemFSNodeCount = (null) kMDItemFSOwnerGroupID = 20 kMDItemFSOwnerUserID = 501 kMDItemFSSize = 293063651 kMDItemFSTypeCode = &quot;&quot; kMDItemInterestingDate_Ranking = 2018-01-18 00:00:00 +0000 kMDItemKind = &quot;QuickTime 影片&quot; kMDItemLogicalSize = 293063651 kMDItemMediaTypes = ( Sound, Video ) kMDItemPhysicalSize = 302112768 kMDItemPixelHeight = 1920 kMDItemPixelWidth = 1080 kMDItemStreamable = 0 kMDItemTotalBitRate = 3168 kMDItemVideoBitRate = 2865 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/ios/UTI-type.html</link> <guid>https://luowei.github.io/ios/UTI-type</guid> <pubDate>Fri, 26 Jan 2018 00:00:00 +0800</pubDate> </item> <item> <title>Mime Type 列表全集</title> <description> &lt;h2 id=&quot;mime-types-list&quot;&gt;MIME Types List&lt;/h2&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th style=&quot;text-align: left&quot;&gt;Suffixes applicable&lt;/th&gt; &lt;th style=&quot;text-align: left&quot;&gt;Media type and subtype(s)&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.3dm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;x-world/x-3dmf&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.3dmf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;x-world/x-3dmf&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.a&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/octet-stream&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.aab&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-authorware-bin&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.aam&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-authorware-map&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.aas&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-authorware-seg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.abc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/vnd.abc&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.acgi&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/html&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.afl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/animaflex&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ai&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/postscript&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.aif&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/aiff&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.aif&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-aiff&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.aifc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/aiff&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.aifc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-aiff&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.aiff&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/aiff&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.aiff&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-aiff&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.aim&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-aim&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.aip&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-audiosoft-intra&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ani&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-navi-animation&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.aos&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-nokia-9000-communicator-add-on-software&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.aps&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/mime&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.arc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/octet-stream&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.arj&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/arj&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.arj&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/octet-stream&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.art&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-jg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.asf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/x-ms-asf&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.asm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-asm&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.asp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/asp&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.asx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-mplayer2&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.asx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/x-ms-asf&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.asx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/x-ms-asf-plugin&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.au&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/basic&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.au&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-au&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.avi&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-troff-msvideo&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.avi&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/avi&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.avi&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/msvideo&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.avi&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/x-msvideo&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.avs&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/avs-video&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.bcpio&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-bcpio&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.bin&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/mac-binary&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.bin&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/macbinary&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.bin&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/octet-stream&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.bin&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-binary&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.bin&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-macbinary&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.bm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/bmp&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.bmp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/bmp&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.bmp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-windows-bmp&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.boo&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/book&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.book&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/book&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.boz&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-bzip2&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.bsh&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-bsh&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.bz&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-bzip&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.bz2&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-bzip2&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.c&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.c&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-c&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.c++&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.cat&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.ms-pki.seccat&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.cc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.cc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-c&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ccad&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/clariscad&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.cco&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-cocoa&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.cdf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/cdf&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.cdf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-cdf&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.cdf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-netcdf&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.cer&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/pkix-cert&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.cer&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-x509-ca-cert&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.cha&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-chat&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.chat&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-chat&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.class&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/java&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.class&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/java-byte-code&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.class&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-java-class&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.com&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/octet-stream&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.com&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.conf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.cpio&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-cpio&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.cpp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-c&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.cpt&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/mac-compactpro&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.cpt&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-compactpro&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.cpt&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-cpt&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.crl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/pkcs-crl&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.crl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/pkix-crl&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.crt&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/pkix-cert&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.crt&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-x509-ca-cert&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.crt&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-x509-user-cert&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.csh&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-csh&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.csh&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-script.csh&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.css&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-pointplus&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.css&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/css&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.cxx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.dcr&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-director&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.deepv&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-deepv&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.def&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.der&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-x509-ca-cert&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.dif&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/x-dv&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.dir&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-director&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.dl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/dl&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.dl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/x-dl&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.doc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/msword&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.dot&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/msword&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.dp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/commonground&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.drw&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/drafting&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.dump&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/octet-stream&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.dv&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/x-dv&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.dvi&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-dvi&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.dwf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;drawing/x-dwf (old)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.dwf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;model/vnd.dwf&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.dwg&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/acad&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.dwg&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/vnd.dwg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.dwg&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-dwg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.dxf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/dxf&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.dxf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/vnd.dwg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.dxf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-dwg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.dxr&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-director&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.el&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-script.elisp&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.elc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-bytecode.elisp (compiled elisp)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.elc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-elc&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.env&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-envoy&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.eps&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/postscript&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.es&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-esrehber&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.etx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-setext&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.evy&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/envoy&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.evy&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-envoy&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.exe&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/octet-stream&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.f&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.f&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-fortran&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.f77&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-fortran&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.f90&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.f90&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-fortran&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.fdf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.fdf&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.fif&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/fractals&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.fif&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/fif&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.fli&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/fli&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.fli&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/x-fli&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.flo&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/florian&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.flx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/vnd.fmi.flexstor&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.fmf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/x-atomic3d-feature&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.for&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.for&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-fortran&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.fpx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/vnd.fpx&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.fpx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/vnd.net-fpx&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.frl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/freeloader&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.funk&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/make&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.g&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.g3&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/g3fax&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.gif&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/gif&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.gl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/gl&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.gl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/x-gl&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.gsd&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-gsm&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.gsm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-gsm&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.gsp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-gsp&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.gss&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-gss&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.gtar&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-gtar&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.gz&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-compressed&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.gz&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-gzip&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.gzip&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-gzip&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.gzip&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;multipart/x-gzip&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.h&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.h&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-h&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.hdf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-hdf&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.help&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-helpfile&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.hgl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.hp-hpgl&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.hh&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.hh&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-h&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.hlb&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-script&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.hlp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/hlp&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.hlp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-helpfile&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.hlp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-winhelp&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.hpg&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.hp-hpgl&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.hpgl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.hp-hpgl&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.hqx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/binhex&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.hqx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/binhex4&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.hqx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/mac-binhex&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.hqx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/mac-binhex40&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.hqx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-binhex40&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.hqx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-mac-binhex40&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.hta&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/hta&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.htc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-component&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.htm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/html&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.html&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/html&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.htmls&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/html&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.htt&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/webviewhtml&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.htx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/html&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ice&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;x-conference/x-cooltalk&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ico&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-icon&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.idc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ief&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/ief&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.iefs&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/ief&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.iges&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/iges&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.iges&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;model/iges&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.igs&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/iges&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.igs&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;model/iges&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ima&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-ima&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.imap&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-httpd-imap&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.inf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/inf&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ins&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-internett-signup&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ip&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-ip2&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.isu&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/x-isvideo&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.it&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/it&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.iv&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-inventor&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ivr&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;i-world/i-vrml&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ivy&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-livescreen&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.jam&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-jam&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.jav&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.jav&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-java-source&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.java&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.java&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-java-source&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.jcm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-java-commerce&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.jfif&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/jpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.jfif&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/pjpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.jfif-tbnl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/jpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.jpe&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/jpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.jpe&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/pjpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.jpeg&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/jpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.jpeg&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/pjpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.jpg&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/jpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.jpg&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/pjpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.jps&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-jps&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.js&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-javascript&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.js&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/javascript&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.js&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/ecmascript&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.js&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/javascript&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.js&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/ecmascript&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.jut&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/jutvision&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.kar&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/midi&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.kar&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;music/x-karaoke&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ksh&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-ksh&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ksh&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-script.ksh&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.la&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/nspaudio&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.la&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-nspaudio&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.lam&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-liveaudio&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.latex&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-latex&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.lha&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/lha&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.lha&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/octet-stream&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.lha&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-lha&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.lhx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/octet-stream&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.list&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.lma&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/nspaudio&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.lma&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-nspaudio&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.log&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.lsp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-lisp&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.lsp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-script.lisp&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.lst&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.lsx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-la-asf&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ltx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-latex&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.lzh&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/octet-stream&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.lzh&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-lzh&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.lzx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/lzx&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.lzx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/octet-stream&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.lzx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-lzx&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.m&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.m&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-m&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.m1v&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/mpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.m2a&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/mpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.m2v&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/mpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.m3u&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-mpequrl&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.man&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-troff-man&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.map&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-navimap&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mar&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mbd&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/mbedlet&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mc$&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-magic-cap-package-1.0&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mcd&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/mcad&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mcd&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-mathcad&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mcf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/vasa&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mcf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/mcf&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mcp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/netmc&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.me&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-troff-me&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mht&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;message/rfc822&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mhtml&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;message/rfc822&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mid&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-midi&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mid&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/midi&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mid&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-mid&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mid&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-midi&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mid&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;music/crescendo&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mid&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;x-music/x-midi&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.midi&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-midi&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.midi&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/midi&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.midi&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-mid&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.midi&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-midi&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.midi&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;music/crescendo&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.midi&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;x-music/x-midi&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mif&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-frame&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mif&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-mif&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mime&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;message/rfc822&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mime&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;www/mime&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mjf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-vnd.audioexplosion.mjuicemediafile&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mjpg&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/x-motion-jpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/base64&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-meme&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mme&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/base64&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mod&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/mod&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mod&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-mod&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.moov&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/quicktime&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mov&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/quicktime&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.movie&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/x-sgi-movie&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mp2&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/mpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mp2&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-mpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mp2&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/mpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mp2&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/x-mpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mp2&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/x-mpeq2a&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mp3&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/mpeg3&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mp3&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-mpeg-3&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mp3&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/mpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mp3&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/x-mpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mpa&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/mpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mpa&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/mpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mpc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-project&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mpe&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/mpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mpeg&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/mpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mpg&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/mpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mpg&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/mpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mpga&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/mpeg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mpp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.ms-project&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mpt&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-project&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mpv&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-project&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mpx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-project&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mrc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/marc&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ms&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-troff-ms&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mv&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/x-sgi-movie&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.my&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/make&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.mzz&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-vnd.audioexplosion.mzz&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.nap&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/naplps&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.naplps&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/naplps&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.nc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-netcdf&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ncm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.nokia.configuration-message&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.nif&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-niff&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.niff&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-niff&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.nix&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-mix-transfer&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.nsc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-conference&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.nvd&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-navidoc&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.o&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/octet-stream&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.oda&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/oda&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.omc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-omc&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.omcd&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-omcdatamaker&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.omcr&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-omcregerator&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.p&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-pascal&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.p10&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/pkcs10&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.p10&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-pkcs10&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.p12&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/pkcs-12&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.p12&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-pkcs12&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.p7a&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-pkcs7-signature&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.p7c&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/pkcs7-mime&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.p7c&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-pkcs7-mime&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.p7m&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/pkcs7-mime&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.p7m&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-pkcs7-mime&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.p7r&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-pkcs7-certreqresp&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.p7s&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/pkcs7-signature&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.part&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/pro_eng&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pas&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/pascal&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pbm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-portable-bitmap&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pcl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.hp-pcl&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pcl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-pcl&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pct&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-pict&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pcx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-pcx&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pdb&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;chemical/x-pdb&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pdf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/pdf&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pfunk&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/make&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pfunk&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/make.my.funk&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pgm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-portable-graymap&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pgm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-portable-greymap&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pic&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/pict&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pict&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/pict&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pkg&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-newton-compatible-pkg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pko&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.ms-pki.pko&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-script.perl&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.plx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-pixclscript&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-xpixmap&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-script.perl-module&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pm4&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-pagemaker&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pm5&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-pagemaker&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.png&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/png&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pnm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-portable-anymap&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pnm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-portable-anymap&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pot&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/mspowerpoint&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pot&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.ms-powerpoint&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pov&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;model/x-pov&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ppa&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.ms-powerpoint&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ppm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-portable-pixmap&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pps&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/mspowerpoint&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pps&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.ms-powerpoint&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ppt&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/mspowerpoint&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ppt&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/powerpoint&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ppt&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.ms-powerpoint&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ppt&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-mspowerpoint&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ppz&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/mspowerpoint&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pre&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-freelance&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.prt&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/pro_eng&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ps&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/postscript&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.psd&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/octet-stream&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pvu&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;paleovu/x-pv&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pwz&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.ms-powerpoint&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.py&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-script.phyton&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.pyc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-bytecode.python&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.qcp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/vnd.qcelp&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.qd3&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;x-world/x-3dmf&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.qd3d&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;x-world/x-3dmf&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.qif&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-quicktime&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.qt&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/quicktime&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.qtc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/x-qtc&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.qti&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-quicktime&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.qtif&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-quicktime&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ra&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-pn-realaudio&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ra&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-pn-realaudio-plugin&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ra&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-realaudio&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ram&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-pn-realaudio&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ras&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-cmu-raster&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ras&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/cmu-raster&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ras&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-cmu-raster&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.rast&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/cmu-raster&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.rexx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-script.rexx&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.rf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/vnd.rn-realflash&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.rgb&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-rgb&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.rm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.rn-realmedia&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.rm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-pn-realaudio&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.rmi&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/mid&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.rmm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-pn-realaudio&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.rmp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-pn-realaudio&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.rmp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-pn-realaudio-plugin&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.rng&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/ringing-tones&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.rng&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.nokia.ringing-tone&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.rnx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.rn-realplayer&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.roff&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-troff&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.rp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/vnd.rn-realpix&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.rpm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-pn-realaudio-plugin&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.rt&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/richtext&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.rt&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/vnd.rn-realtext&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.rtf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/rtf&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.rtf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-rtf&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.rtf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/richtext&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.rtx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/rtf&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.rtx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/richtext&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.rv&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/vnd.rn-realvideo&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.s&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-asm&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.s3m&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/s3m&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.saveme&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/octet-stream&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sbk&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-tbook&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.scm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-lotusscreencam&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.scm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-script.guile&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.scm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-script.scheme&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.scm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/x-scm&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sdml&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sdp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/sdp&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sdp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-sdp&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sdr&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/sounder&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sea&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/sea&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sea&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-sea&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.set&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/set&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sgm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/sgml&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sgm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-sgml&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sgml&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/sgml&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sgml&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-sgml&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sh&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-bsh&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sh&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-sh&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sh&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-shar&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sh&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-script.sh&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.shar&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-bsh&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.shar&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-shar&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.shtml&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/html&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.shtml&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-server-parsed-html&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sid&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-psid&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sit&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-sit&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sit&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-stuffit&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.skd&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-koan&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.skm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-koan&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.skp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-koan&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.skt&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-koan&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-seelogo&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.smi&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/smil&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.smil&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/smil&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.snd&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/basic&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.snd&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-adpcm&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sol&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/solids&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.spc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-pkcs7-certificates&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.spc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-speech&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.spl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/futuresplash&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.spr&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-sprite&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sprite&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-sprite&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.src&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-wais-source&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ssi&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-server-parsed-html&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ssm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/streamingmedia&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sst&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.ms-pki.certstore&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.step&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/step&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.stl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/sla&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.stl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.ms-pki.stl&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.stl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-navistyle&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.stp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/step&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sv4cpio&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-sv4cpio&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.sv4crc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-sv4crc&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.svf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/vnd.dwg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.svf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-dwg&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.svr&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-world&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.svr&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;x-world/x-svr&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.swf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-shockwave-flash&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.t&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-troff&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.talk&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-speech&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.tar&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-tar&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.tbk&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/toolbook&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.tbk&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-tbook&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.tcl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-tcl&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.tcl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-script.tcl&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.tcsh&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-script.tcsh&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.tex&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-tex&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.texi&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-texinfo&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.texinfo&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-texinfo&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.text&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.text&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.tgz&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/gnutar&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.tgz&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-compressed&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.tif&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/tiff&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.tif&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-tiff&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.tiff&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/tiff&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.tiff&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-tiff&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.tr&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-troff&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.tsi&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/tsp-audio&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.tsp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/dsptype&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.tsp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/tsplayer&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.tsv&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/tab-separated-values&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.turbot&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/florian&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.txt&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/plain&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.uil&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-uil&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.uni&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/uri-list&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.unis&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/uri-list&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.unv&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/i-deas&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.uri&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/uri-list&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.uris&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/uri-list&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ustar&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-ustar&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.ustar&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;multipart/x-ustar&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.uu&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/octet-stream&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.uu&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-uuencode&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.uue&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-uuencode&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.vcd&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-cdlink&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.vcs&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-vcalendar&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.vda&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vda&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.vdo&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/vdo&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.vew&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/groupwise&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.viv&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/vivo&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.viv&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/vnd.vivo&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.vivo&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/vivo&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.vivo&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/vnd.vivo&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.vmd&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vocaltec-media-desc&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.vmf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vocaltec-media-file&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.voc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/voc&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.voc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-voc&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.vos&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/vosaic&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.vox&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/voxware&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.vqe&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-twinvq-plugin&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.vqf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-twinvq&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.vql&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-twinvq-plugin&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.vrml&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-vrml&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.vrml&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;model/vrml&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.vrml&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;x-world/x-vrml&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.vrt&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;x-world/x-vrt&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.vsd&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-visio&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.vst&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-visio&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.vsw&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-visio&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.w60&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/wordperfect6.0&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.w61&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/wordperfect6.1&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.w6w&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/msword&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wav&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/wav&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wav&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/x-wav&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wb1&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-qpro&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wbmp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/vnd.wap.wbmp&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.web&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.xara&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wiz&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/msword&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wk1&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-123&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wmf&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;windows/metafile&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wml&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/vnd.wap.wml&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wmlc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.wap.wmlc&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wmls&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/vnd.wap.wmlscript&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wmlsc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.wap.wmlscriptc&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.word&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/msword&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wp&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/wordperfect&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wp5&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/wordperfect&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wp5&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/wordperfect6.0&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wp6&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/wordperfect&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wpd&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/wordperfect&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wpd&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-wpwin&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wq1&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-lotus&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wri&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/mswrite&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wri&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-wri&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wrl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-world&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wrl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;model/vrml&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wrl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;x-world/x-vrml&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wrz&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;model/vrml&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wrz&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;x-world/x-vrml&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wsc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/scriplet&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wsrc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-wais-source&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.wtk&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-wintalk&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xbm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-xbitmap&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xbm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-xbm&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xbm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/xbm&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xdr&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/x-amt-demorun&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xgz&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;xgl/drawing&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xif&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/vnd.xiff&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xl&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xla&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xla&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xla&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-msexcel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xlb&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xlb&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.ms-excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xlb&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xlc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xlc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.ms-excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xlc&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xld&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xld&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xlk&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xlk&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xll&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xll&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.ms-excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xll&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xlm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xlm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.ms-excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xlm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xls&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xls&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.ms-excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xls&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xls&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-msexcel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xlt&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xlt&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xlv&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xlv&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xlw&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xlw&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/vnd.ms-excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xlw&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-excel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xlw&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-msexcel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;audio/xm&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xml&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/xml&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xml&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/xml&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xmz&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;xgl/movie&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xpix&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-vnd.ls-xpix&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xpm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-xpixmap&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xpm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/xpm&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.x-png&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/png&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xsr&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;video/x-amt-showrun&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xwd&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-xwd&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xwd&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;image/x-xwindowdump&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.xyz&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;chemical/x-pdb&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.z&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-compress&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.z&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-compressed&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.zip&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-compressed&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.zip&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/x-zip-compressed&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.zip&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/zip&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.zip&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;multipart/x-zip&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.zoo&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;application/octet-stream&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;.zsh&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;text/x-script.zsh&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; </description> <link>https://luowei.github.io/tutorials/mime-type-list.html</link> <guid>https://luowei.github.io/tutorials/mime-type-list</guid> <pubDate>Thu, 25 Jan 2018 00:00:00 +0800</pubDate> </item> <item> <title>手机连接Mac共享的WiFi的hosts配置问题</title> <description> &lt;h1 id=&quot;手机连接mac共享的wifi的hosts配置问题&quot;&gt;手机连接Mac共享的WiFi的hosts配置问题&lt;/h1&gt; &lt;h2 id=&quot;安装homebrew&quot;&gt;安装Homebrew&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;Get Xcode;&lt;/li&gt; &lt;li&gt;Get Command Line Tools. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcode-select --install&lt;/code&gt;;&lt;/li&gt; &lt;li&gt;Install Homebrew. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;&lt;/code&gt;;&lt;/li&gt; &lt;li&gt;其他辅助命令:&lt;/li&gt; &lt;/ol&gt; &lt;blockquote&gt; &lt;p&gt;check install issue : &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brew doctor&lt;/code&gt;;&lt;/p&gt; &lt;p&gt;To search for an application:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brew search &lt;/code&gt;;&lt;/p&gt; &lt;p&gt;To install : &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brew install &amp;lt;application-name&amp;gt;&lt;/code&gt;;&lt;/p&gt; &lt;p&gt;To list all apps installed by Homebrew:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brew list&lt;/code&gt;;&lt;/p&gt; &lt;p&gt;To remove an installed application:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brew remove &amp;lt;application-name&amp;gt;&lt;/code&gt;;&lt;/p&gt; &lt;p&gt;To update Homebrew:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brew update&lt;/code&gt;;&lt;/p&gt; &lt;p&gt;To see what else you can do: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;man brew&lt;/code&gt;;&lt;/p&gt; &lt;p&gt;Where does Homebrew install stuff …. in the Cellar:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/Cellar/&lt;/code&gt;;&lt;/p&gt; &lt;/blockquote&gt; &lt;ol&gt; &lt;li&gt;Updating from previous OSX Version&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;If you are updating from a previous OSX version you may run into file permission issues with El Capitan’s new SIP process .&lt;/p&gt; &lt;p&gt;To get around this you can change ownership on the Homebrew directory &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo chown -R $(whoami):admin /usr/local&lt;/code&gt;.&lt;/p&gt; &lt;h2 id=&quot;安装dnsmasq&quot;&gt;安装dnsmasq&lt;/h2&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brew install dnsmasq&lt;/code&gt;&lt;/p&gt; &lt;p&gt;安装完成后，在/usr/local/文件下新建一个etc文件夹。&lt;/p&gt; &lt;p&gt;把/usr/local/opt/dnsmasq/dnsmasq.conf.example文件拷贝至并重命名为/usr/local/etc/dnsmasq.conf。&lt;/p&gt; &lt;p&gt;编辑dnsmasq.conf，内容如下：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;resolv-file=/etc/resolv.conf strict-order addn-hosts=/etc/hosts cache-size=32768 listen-address=127.0.0.1,192.168.xx.154 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;其中，listen-address后面的可以是多个IP用英文逗号隔开。这里以我自己的IP地址为例，192.168.xx.154是我的Mac mini的内网IP，这样就可以实现同一个局域网内的设备，通过设置DNS为这个IP，来实现都通过我的Mac mini上的dnsmasq来查询dns，即局域网范围内的DNS泛解析。&lt;/p&gt; &lt;h2 id=&quot;重启dnsmasq应用&quot;&gt;重启dnsmasq应用&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo launchctl stop homebrew.mxcl.dnsmasq sudo launchctl start homebrew.mxcl.dnsmasq sudo killall -HUP mDNSResponder &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;可通过以下代码设置开机自动运行dnsmasq：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo cp -fv /usr/local/opt/dnsmasq/*.plist /Library/LaunchDaemons sudo launchctl load /Library/LaunchDaemons/homebrew.mxcl.dnsmasq.plist &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;最后，使用iPhone连接Mac mini共享的wifi，同时设置dns为我的Mac mini的内网IP地址，即192.168.xx.154。这样再ping以下，就能看到效果&lt;/p&gt; &lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;https://coolestguidesontheplanet.com/installing-homebrew-on-os-x-el-capitan-10-11-package-manager-for-unix-apps/&quot;&gt;Installing Homebrew on OS X El Capitan 10.11&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://blog.netsh.org/posts/mac-os-x-dnsmasq_1762.netsh.html&quot;&gt;在Mac OS X上安装dnsmasq来支持hosts泛解析&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/ios/mac-share-wifi-host-config.html</link> <guid>https://luowei.github.io/ios/mac-share-wifi-host-config</guid> <pubDate>Sun, 27 Aug 2017 00:00:00 +0800</pubDate> </item> <item> <title>在阿里云ECS上使用Docker快速搭建Gitlab</title> <description> &lt;h1 id=&quot;在阿里云ecs上使用docker快速搭建gitlab&quot;&gt;在阿里云ECS上使用Docker快速搭建Gitlab&lt;/h1&gt; &lt;h2 id=&quot;安装docker&quot;&gt;安装Docker&lt;/h2&gt; &lt;p&gt;安装命令： &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apt-get install docker.io&lt;/code&gt;&lt;/p&gt; &lt;p&gt;检查版本： &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker -v&lt;/code&gt;&lt;/p&gt; &lt;h2 id=&quot;添加docker加速器&quot;&gt;添加Docker加速器&lt;/h2&gt; &lt;p&gt;可以自己配置加速器：&lt;a href=&quot;https://dashboard.daocloud.io/mirror&quot;&gt;https://dashboard.daocloud.io/mirror&lt;/a&gt;&lt;/p&gt; &lt;p&gt;或者使用阿里去的加速器，登录阿里云，进入&lt;a href=&quot;https://cr.console.aliyun.com/?spm=5176.100239.blogcont29941.12.ZHezpK&quot;&gt;容器Hub服务控制台&lt;/a&gt;,初始化加速器后，阿里云会为我们创建一个专属加速器地址，复制这个地址。&lt;/p&gt; &lt;p&gt;在/etc/docker/daemon.json中添加一段配置，如果没有该文件则创建。&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;{ &quot;registry-mirrors&quot;: [&quot;&amp;lt;your accelerate address&amp;gt;&quot;] } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;下载gitlab&quot;&gt;下载Gitlab&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;http://wx1.sinaimg.cn/large/680dfa44gy1fhbaadux11j21h80vin54.jpg&quot;&gt;在阿里云的镜像仓库搜索镜像&lt;/a&gt;&lt;/p&gt; &lt;p&gt;去在阿里云的镜像仓库搜索镜像，然后选一个镜像复制名称，如：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;registry.cn-hangzhou.aliyuncs.com/lab99/gitlab-ce-zh&lt;/code&gt;&lt;/p&gt; &lt;p&gt;前面配置好加速器后，Docker下载Gitlab镜像就很快了，执行命令：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker pull registry.cn-hangzhou.aliyuncs.com/lab99/gitlab-ce-zh&lt;/code&gt;，即下载刚刚选的镜像。&lt;/p&gt; &lt;h2 id=&quot;启动gitlab&quot;&gt;启动Gitlab&lt;/h2&gt; &lt;p&gt;创建容器并启动，使用以下命令加载镜像&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;registry.cn-hangzhou.aliyuncs.com/lab99/gitlab-ce-zh&lt;/code&gt;,并以&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gitlab&lt;/code&gt;为容器名，并指定容器暴露的端口为:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;44333&lt;/code&gt;,&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;6060&lt;/code&gt;,&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;2222&lt;/code&gt;，更多命令参数参考：&lt;a href=&quot;http://www.jianshu.com/p/ea4a00c6c21c&quot;&gt;Docker run 命令参数及使用&lt;/a&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker run --detach \ --hostname gitlab.example.com \ --publish 44333:443 --publish 6060:80 --publish 2222:22 \ --name gitlab \ --restart always \ --volume /srv/gitlab/config:/etc/gitlab \ --volume /srv/gitlab/logs:/var/log/gitlab \ --volume /srv/gitlab/data:/var/opt/gitlab \ registry.cn-hangzhou.aliyuncs.com/lab99/gitlab-ce-zh:latest &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;或者使用docker-compose来定义和运行Docker容器，参考：&lt;a href=&quot;http://www.jianshu.com/p/94a61ab25e6e&quot;&gt;Docker Compose 概览&lt;/a&gt;&lt;/p&gt; &lt;p&gt;参考示例&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;web: image: &apos;registry.cn-hangzhou.aliyuncs.com/lab99/gitlab-ce-zh:latest&apos; restart: always hostname: &apos;gitlab.wodedata.com&apos; environment: GITLAB_OMNIBUS_CONFIG: | external_url &apos;http://gitlab.wodedata.com:8929&apos; gitlab_rails[&apos;gitlab_shell_ssh_port&apos;] = 2289 # Add any other gitlab.rb configuration here, each on its own line ports: - &apos;8929:80&apos; - &apos;2289:22&apos; volumes: - config:/etc/gitlab - data:/var/opt/gitlab - logs:/var/log/gitlab &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;登录&quot;&gt;登录&lt;/h2&gt; &lt;p&gt;第一次启动 GitLab 后，使用下列默认用户和密码登录，并修改密码：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;用户名: `root` 密码: `5iveL!fe` &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;配置gitlab&quot;&gt;配置gitlab&lt;/h2&gt; &lt;p&gt;配置&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/srv/gitlab/config/gitlab.rb&lt;/code&gt;文件,修改以下几个重要选项：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;external_url &apos;http://gitlab.wodedata.com&apos; gitlab_rails[&apos;gitlab_ssh_host&apos;] = &apos;gitlab.wodedata.com&apos; gitlab_rails[&apos;gitlab_shell_ssh_port&apos;] = 2222 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;配置apache做端口转发&quot;&gt;配置Apache做端口转发&lt;/h2&gt; &lt;p&gt;执行命令：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/apache2/sites-available/gitlab.wodedata.com.conf&lt;/code&gt;,添加以下内容：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;VirtualHost *:80&amp;gt; ServerName gitlab.wodedata.com ProxyIOBufferSize 8192 ProxyRequests Off ProxyVia Full ProxyPass / http://wodedata.com:6060/ smax=5 max=20 ttl=120 retry=300 ProxyPassReverse / http://wodedata.com:6060/ ErrorLog ${APACHE_LOG_DIR}/error.log CustomLog ${APACHE_LOG_DIR}/access.log combined &amp;lt;/VirtualHost&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;并复制一份到：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/apache2/sites-enabled/gitlab.wodedata.com.conf&lt;/code&gt;,然后&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apachectl configtest&lt;/code&gt;检查配置是否正确,再&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apachectl restart&lt;/code&gt;重启Apache。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Tips&lt;/strong&gt;&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;使用下面的命令进入 docker 环境中名为 gitlabe 的 bash中: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker exec -it gitlab bash&lt;/code&gt;&lt;/p&gt; &lt;/blockquote&gt; &lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/24959481340e?utm_campaign=maleskine&amp;amp;utm_content=note&amp;amp;utm_medium=reader_share&amp;amp;utm_source=weibo&quot;&gt;用Docker安装Gitlab&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://github.com/twang2218/gitlab-ce-zh/&quot;&gt;GitLab 中文社区版&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://gitlab.com/larryli/gitlab&quot;&gt;基于 Docker 搭建Gitlab + ContainerRegistry&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/ea4a00c6c21c&quot;&gt;Docker run 命令参数及使用&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/b983db7e7c90?utm_campaign=maleskine&amp;amp;utm_content=note&amp;amp;utm_medium=reader_share&amp;amp;utm_source=weibo&quot;&gt;Mac通过Docker部署Gitlab实践&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/docker/docker-gitlab-config.html</link> <guid>https://luowei.github.io/docker/docker-gitlab-config</guid> <pubDate>Wed, 12 Jul 2017 00:00:00 +0800</pubDate> </item> <item> <title>macOS下Tomcat项目的布署及8080端口转发</title> <description> &lt;h1 id=&quot;macos下java-web项目的布署及8080端口转发的配置&quot;&gt;macOS下Java Web项目的布署及8080端口转发的配置&lt;/h1&gt; &lt;h2 id=&quot;下载安装jdk-与-tomcat&quot;&gt;下载安装JDK 与 Tomcat&lt;/h2&gt; &lt;p&gt;下载JDK8: http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html&lt;/p&gt; &lt;p&gt;下载Tomcat8: http://mirror.bit.edu.cn/apache/tomcat/tomcat-8/v8.5.15/bin/apache-tomcat-8.5.15.zip&lt;/p&gt; &lt;h2 id=&quot;配置-java_home-与-tomcat&quot;&gt;配置 JAVA_HOME 与 Tomcat&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;编辑：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;vi ~/.bash_profile&lt;/code&gt;&lt;/li&gt; &lt;li&gt;添加以下命令：&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;export JAVA_HOME=$(/usr/libexec/java_home) # Tomcat解压目录 export CATALINA_HOME=~/developer/tomcat-8.5.15 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;然后执行： &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;source ~/.bash_profile&lt;/code&gt;&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;修改Tomcat bin目录权限,并启动Tomcat&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;chmod -R 755 ~/developer/tomcat-8.5.15/bin ~/developer/tomcat-8.5.15/bin/startup.sh &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;配置Tomcat App Manager 与 Host Manager 用户 编辑 Tomcat的config目录下的tomcat-users.xml,在tomcat-users节点下添加以下代码：&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &amp;lt;role rolename=&quot;manager-gui&quot;/&amp;gt; &amp;lt;role rolename=&quot;admin-gui&quot;/&amp;gt; &amp;lt;user username=&quot;tomcat&quot; password=&quot;123456&quot; roles=&quot;manager-gui,admin-gui&quot;/&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;布署war包&quot;&gt;布署war包&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;下载&lt;a href=&quot;http://wodedata.com/h5/demo.war&quot;&gt;demo.war&lt;/a&gt;&lt;/li&gt; &lt;li&gt;demo.war放到tomcat主目录下，并解压到demo目录下.&lt;/li&gt; &lt;li&gt;配置Tomcat目录下的config/server.xml,在Engine节点下添加一个Host&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &amp;lt;Host name=&quot;demo.wodedata.com&quot; appBase=&quot;&quot; unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot;&amp;gt; &amp;lt;Context path=&quot;&quot; docBase=&quot;demo&quot; reloadable=&quot;false&quot; privileged=&quot;true&quot; debug=&quot;0&quot;/&amp;gt; &amp;lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; directory=&quot;logs&quot; prefix=&quot;demo_access_log&quot; suffix=&quot;.txt&quot; pattern=&quot;%h %l %u %t &amp;amp;quot;%r&amp;amp;quot; %s %b&quot; /&amp;gt; &amp;lt;/Host&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;修改Tomcat默认监听端口8080改为80&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &amp;lt;Connector port=&quot;80&quot; protocol=&quot;HTTP/1.1&quot; connectionTimeout=&quot;20000&quot; redirectPort=&quot;8443&quot; /&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;启动Tomcat&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;~/developer/tomcat-8.5.15/bin/shutdown.sh ~/developer/tomcat-8.5.15/bin/startup.sh &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;80-到-8080-端口转发配置&quot;&gt;80 到 8080 端口转发配置&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;编辑httpd.conf：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo vi /etc/apache2/httpd.conf&lt;/code&gt;&lt;/li&gt; &lt;li&gt;开启httpd-vhosts.conf，去掉前面的注释：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Include /private/etc/apache2/extra/httpd-vhosts.conf&lt;/code&gt;&lt;/li&gt; &lt;li&gt;开启proxy_module和proxy_http_module，也是去掉前面的注释即可：&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;LoadModule proxy_module libexec/apache2/mod_proxy.so LoadModule proxy_http_module libexec/apache2/mod_proxy_http.so &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;编辑httpd-vhosts.conf，删除没用的VirtalHost配置，添加以下配置：&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &amp;lt;VirtualHost *:80&amp;gt; ProxyPreserveHost On ProxyRequests Off ServerName demo.wodedata.com ServerAlias demo.wodedata.com ProxyPass / http://demo.wodedata.com:8080/ ProxyPassReverse / http://demo.wodedata.com:8080/ &amp;lt;/VirtualHost&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;或者编辑&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/apache2/users&lt;/code&gt;下的对应用户的conf,添加proxy转发即可&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ProxyPass / http://demo.wodedata.com:8080/ ProxyPassReverse / http://demo.wodedata.com:8080/ &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/lamp/tomcat-deploy-and-port-proxy.html</link> <guid>https://luowei.github.io/lamp/tomcat-deploy-and-port-proxy</guid> <pubDate>Mon, 12 Jun 2017 00:00:00 +0800</pubDate> </item> <item> <title>万能输入法实现原理及代码结构</title> <description> &lt;h1 id=&quot;万能输入法实现原理及代码结构&quot;&gt;万能输入法实现原理及代码结构&lt;/h1&gt; &lt;p&gt;&lt;img src=&quot;http://wx3.sinaimg.cn/large/680dfa44ly1fumbmpx41qj21d87aux6q.jpg&quot; alt=&quot;万能输入法实现原理及代码结构&quot; /&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/life/myinputmethod-structure.html</link> <guid>https://luowei.github.io/life/myinputmethod-structure</guid> <pubDate>Sun, 28 May 2017 00:00:00 +0800</pubDate> </item> <item> <title>为iOS App子模块创建桌面快捷方式</title> <description> &lt;h1 id=&quot;为ios-app-子模块创建桌面快捷方式&quot;&gt;为iOS App 子模块创建桌面快捷方式&lt;/h1&gt; &lt;ol&gt; &lt;li&gt;前提是App配置了自己的URLSchem,并且通过url可以打开App的相应的子模块；&lt;/li&gt; &lt;li&gt;安装Apple Configurator,选择”文件-&amp;gt;新建描述文件”；&lt;/li&gt; &lt;li&gt; &lt;p&gt;填写描述文件通用信息，和添加一个Webclip并配置好相应的信息； &lt;img src=&quot;http://wx3.sinaimg.cn/large/680dfa44ly1ffr9y4hrm2j218811yajj.jpg&quot; alt=&quot;描述文件通用信息&quot; /&gt; &lt;img src=&quot;http://wx4.sinaimg.cn/large/680dfa44ly1ffr9y40kmij216815u7f0.jpg&quot; alt=&quot;配置Webclip&quot; /&gt;&lt;/p&gt; &lt;/li&gt; &lt;li&gt;然后将描述文件存储到磁盘，我这里文件名为：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Drawboard_Webclip_sign&lt;/code&gt;;&lt;/li&gt; &lt;li&gt;再给这个iOS 的 mobileconfig文件进行签名，命令如下，其中双引号中的为钥匙串里证书的常用名称； &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/bin/security cms -S -N &quot;iPhone Developer: luowei@wodedata.com (VDQK253B4Q)&quot; -i Drawboard_Webclip.mobileconfig -o Drawboard_Webclip_sign.mobileconfig&lt;/code&gt;&lt;/li&gt; &lt;li&gt;用AirDrop或用其他传输方式发送给iOS设备,然后安装即可。也可以在服务器上部署描述文件，以分发给用户安装，&lt;/li&gt; &lt;li&gt;效果截图: &lt;img src=&quot;http://wx1.sinaimg.cn/large/680dfa44ly1ffraqo4zpdg206o0bvtga.gif&quot; alt=&quot;效果截图&quot; /&gt;&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;strong&gt;在服务器上部署描述文件&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;以下是两种简单的分发方式：&lt;/p&gt; &lt;ul&gt; &lt;li&gt;需要设置一个MIME Content-Type： application/x-apple-aspen-config. 可以通过在.htaccess文件中添加如下一行实现，再上传mobileconfig文件即可，配置如下：&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &amp;lt;IfModule mod_mime.c&amp;gt; AddType application/x-apple-aspen-config .mobileconfig &amp;lt;/IfModule&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;也可以创建一个php文件设置Content-Type,并读取mobileconfig文件内容，我这php代码如下：&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &amp;lt;?php header(&apos;Content-type: application/x-apple-aspen-config; chatset=utf-8&apos;); header(&apos;Content-Disposition: attachment; filename=&quot;drawboard.mobileconfig&quot;&apos;); $mobileconfig = file_get_contents(&apos;drawboard.mobileconfig&apos;); echo $mobileconfig; ?&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/ios/iOS-config-webclip.html</link> <guid>https://luowei.github.io/ios/iOS-config-webclip</guid> <pubDate>Fri, 19 May 2017 00:00:00 +0800</pubDate> </item> <item> <title>使用 sqlcipher 加密解密 sqlite3 数据库</title> <description> &lt;h1 id=&quot;使用-sqlcipher-加密解密-sqlite3-数据库&quot;&gt;使用 sqlcipher 加密解密 sqlite3 数据库&lt;/h1&gt; &lt;h2 id=&quot;下载sqlcipher&quot;&gt;下载sqlcipher&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;https://github.com/sqlcipher/sqlcipher&quot;&gt;https://github.com/sqlcipher/sqlcipher&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;编译sqlcipher&quot;&gt;编译sqlcipher&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ./configure --enable-tempstore=yes CFLAGS=&quot;-DSQLITE_HAS_CODEC&quot; LDFLAGS=&quot;-lcrypto -L/usr/local/opt/openssl/lib&quot; CPPFLAGS=&quot;-I/usr/local/opt/openssl/include&quot; $ make &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;安装sqlcipher&quot;&gt;安装sqlcipher&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;创建一个sqlcipher新的目录；&lt;/li&gt; &lt;li&gt;再把之前编译的 sqlcipher 二进制可执行文件 与 .libs 库文件目录添加到新创建的sqlcipher目录；&lt;/li&gt; &lt;li&gt;再把sqlcipher目录下的sqlcipher文件软链接到path能找得到的目录下，如:/usr/local/bin目录下，如：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ln -s /Users/luowei/developer/sqlcipher/sqlcipher /usr/local/bin/sqlcipher&lt;/code&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;加密已有明文数据库&quot;&gt;加密已有明文数据库&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sqlcipher WubiWords.db sqlite&amp;gt; ATTACH DATABASE &apos;encrypted_wbwords.db&apos; AS wubiwords KEY &apos;wodedata.com&apos;; sqlite&amp;gt; SELECT sqlcipher_export(&apos;wubiwords&apos;); sqlite&amp;gt; DETACH DATABASE wubiwords; sqlite&amp;gt; .exit &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;解密加密了的数据库&quot;&gt;解密加密了的数据库：&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ./sqlcipher encrypted_wbwords.db sqlite&amp;gt; PRAGMA key = &apos;wodedata.com&apos;; sqlite&amp;gt; ATTACH DATABASE &apos;decrypted_wbwords.db&apos; AS wubiwords KEY &apos;&apos;; --空的密码不会加密数据库 sqlite&amp;gt; SELECT sqlcipher_export(&apos;wubiwords&apos;); sqlite&amp;gt; DETACH DATABASE wubiwords; sqlite&amp;gt; .exit &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;集成sqlcipher&quot;&gt;集成sqlcipher&lt;/h2&gt; &lt;p&gt;集成方式可以在Xcode上直接集成源代码，或先编译成静态库文件后，再集成； 要在Xcode上集成，在GitHub上下载的sqlcipher中有个sqlcipher.xcodeproj文件，只要在你的xcode项目根目录右键选择“Add Files To xxx”，然后把sqlcipher.xcodeproj这个文件添加到你的项目，在目标依赖中添加Security.framework 和 libsqlcipher.a 这两个链接库，如果没有找到libsqlcipher.a可以先构建sqlcipher.xcodeproj这个项目。&lt;/p&gt; &lt;h2 id=&quot;合并静态库文件&quot;&gt;合并静态库文件&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;lipo -create Debug-iphoneos/libsqlcipher.a Debug-iphonesimulator/libsqlcipher.a -output libsqlcipher-iOS-Debug.a lipo -create Release-iphoneos/libsqlcipher.a Release-iphonesimulator/libsqlcipher.a -output libsqlcipher-iOS-Release.a &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;使用sqlcipher初始化数据库&quot;&gt;使用SQLCipher初始化数据库&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;NSString *databasePath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent: @&quot;cipher.db&quot;]; sqlite3 *db; if (sqlite3_open([databasePath UTF8String], &amp;amp;db) == SQLITE_OK) { const char* key = [@&quot;BIGSecret&quot; UTF8String]; sqlite3_key(db, key, strlen(key)); int result = sqlite3_exec(db, (const char*) &quot;SELECT count(*) FROM sqlite_master;&quot;, NULL, NULL, NULL); if (result == SQLITE_OK) { NSLog(@&quot;password is correct, or, database has been initialized&quot;); } else { NSLog(@&quot;incorrect password! errCode:%d&quot;,result); } sqlite3_close(db); } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;参考&quot;&gt;参考：&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/u010062440/article/details/50077047&quot;&gt;IOS集成SQLCipher加密SQLite数据库&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://github.com/sqlcipher/sqlcipher&quot;&gt;SQLite extension SQLCipher&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E6%95%B0%E6%8D%AE%E5%BA%93/sqlite-encrypt-with-sqlcipher.html</link> <guid>https://luowei.github.io/%E6%95%B0%E6%8D%AE%E5%BA%93/sqlite-encrypt-with-sqlcipher</guid> <pubDate>Tue, 25 Apr 2017 00:00:00 +0800</pubDate> </item> <item> <title>机器学习/数据挖掘/神经网络相关资料</title> <description> &lt;h1 id=&quot;机器学习数据挖掘神经网络相关资料&quot;&gt;机器学习/数据挖掘/神经网络相关资料&lt;/h1&gt; &lt;p&gt;##学习入口链接&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/20704651&quot;&gt;解读AlphaGo论文&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/longxinchen_ml/article/details/50900070&quot;&gt; 机器学习系列(8)_读《Nature》论文，看AlphaGo养成&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/longxinchen_ml?viewmode=contents&quot;&gt;龙心尘的CSDN博客&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/han_xiaoyang?viewmode=contents&quot;&gt;寒小阳的CSDN博客&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/lsldd/article/details/41084043&quot;&gt;用Python开始机器学习（1：配置windows平台）&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/qq_30490125&quot;&gt;Feng某人迟到的技术专栏&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/u013390476/article/details/50925347&quot;&gt;AlphaGo论文的译文，用深度神经网络和树搜索征服围棋：Mastering the game of Go with deep neural networks and tree search&lt;/a&gt;&lt;/p&gt; &lt;p&gt;持续更新中。。。&lt;/p&gt; </description> <link>https://luowei.github.io/ai/machine-learning-data-mining-neural-network.html</link> <guid>https://luowei.github.io/ai/machine-learning-data-mining-neural network</guid> <pubDate>Sat, 18 Mar 2017 00:00:00 +0800</pubDate> </item> <item> <title>正则表达式所有元字符及其使用方法一览表</title> <description> &lt;h1 id=&quot;正则表达式所有元字符及其使用方法一览表&quot;&gt;正则表达式所有元字符及其使用方法一览表&lt;/h1&gt; &lt;p&gt;参考：&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://c.biancheng.net/cpp/html/1427.html&quot;&gt;正则表达式所有元字符及其使用方法一览表&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://deerchao.net/tutorials/regex/regex.htm&quot;&gt;正则表达式30分钟入门教程&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://tool.oschina.net/regex/&quot;&gt;在线正则表达式测试&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.pagecolumn.com/tool/all_about_html_tags.htm&quot;&gt;9 Regular Expressions to strip HTML tags&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.pagecolumn.com/tool/url_regex.htm&quot;&gt;7 URL regular expressions to retrieve all parts of URL&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Mark一下方便日常使用查询&lt;/code&gt;&lt;/p&gt; &lt;h2 id=&quot;元字符列表&quot;&gt;元字符列表&lt;/h2&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;字符&lt;/th&gt; &lt;th style=&quot;text-align: left&quot;&gt;描述&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;\&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;将下一个字符标记为一个特殊字符、或一个原义字符、或一个 后向引用、或一个八进制转义符。例如，’n’ 匹配字符 “n”。’\n’ 匹配一个换行符。序列 ‘\’ 匹配 “&quot; 而 “(” 则匹配 “(“。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;^&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配输入字符串的开始位置。如果设置了 RegExp 对象的 Multiline 属性，^ 也匹配 ‘\n’ 或 ‘\r’ 之后的位置。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;$&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配输入字符串的结束位置。如果设置了RegExp 对象的 Multiline 属性，$ 也匹配 ‘\n’ 或 ‘\r’ 之前的位置。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;*&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配前面的子表达式零次或多次。例如，zo* 能匹配 “z” 以及 “zoo”。 * 等价于{0,}。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;+&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配前面的子表达式一次或多次。例如，’zo+’ 能匹配 “zo” 以及 “zoo”，但不能匹配 “z”。+ 等价于 {1,}。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;?&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配前面的子表达式零次或一次。例如，”do(es)?” 可以匹配 “do” 或 “does” 中的”do” 。? 等价于 {0,1}。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;{n}&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;n 是一个非负整数。匹配确定的 n 次。例如，’o{2}’ 不能匹配 “Bob” 中的 ‘o’，但是能匹配 “food” 中的两个 o。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;{n,}&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;n 是一个非负整数。至少匹配n 次。例如，’o{2,}’ 不能匹配 “Bob” 中的 ‘o’，但能匹配 “foooood” 中的所有 o。’o{1,}’ 等价于 ‘o+’。’o{0,}’ 则等价于 ‘o*‘。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;{n,m}&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;m 和 n 均为非负整数，其中n &amp;lt;= m。最少匹配 n 次且最多匹配 m 次。刘， “o{1,3}” 将匹配 “fooooood” 中的前三个o。’o{0,1}’ 等价于 ‘o?’。请注意在逗号和两个数之间不能有空格。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;?&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;当该字符紧跟在任何一个其他限制符 (*, +, ?, {n}, {n,}, {n,m}) 后面时，匹配模式是非贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串。例如，对于字符串 “oooo”，’o+?’ 将匹配单个 “o”，而 ‘o+’ 将匹配所有 ‘o’。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;.&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配除 “\n” 之外的任何单个字符。要匹配包括 ‘\n’ 在内的任何字符，请使用象 ‘[.\n]’ 的模式。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;(pattern)&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配pattern 并获取这一匹配。所获取的匹配可以从产生的 Matches 集合得到，在VBScript 中使用 SubMatches 集合，在Visual Basic Scripting Edition 中则使用 $0…$9 属性。要匹配圆括号字符，请使用 ‘(’ 或 ‘)‘。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;(?:pattern)&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配 pattern 但不获取匹配结果，也就是说这是一个非获取匹配，不进行存储供以后使用。这在使用 “或” 字符 (¦) 来组合一个模式的各个部分是很有用。例如， ‘industr(?:y¦ies) 就是一个比 ‘industry ¦ industries’ 更简略的表达式。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;(?=pattern)&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;正向预查，在任何匹配 pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如， ‘Windows (?=95 ¦98¦NT¦2000)’ 能匹配 “Windows 2000” 中的 “Windows” ，但不能匹配 “Windows 3.1” 中的 “Windows”。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;(?!pattern)&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;负向预查，在任何不匹配Negative lookahead matches the search string at any point where a string not matching pattern 的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如’Windows (?!95¦98¦NT¦2000)’ 能匹配 “Windows 3.1” 中的 “Windows”，但不能匹配 “Windows 2000” 中的 “Windows”。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;x ¦ y&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配 x 或 y。例如，’z¦food’ 能匹配 “z” 或 “food”。’(z¦f)ood’ 则匹配 “zood” 或 “food”。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;[xyz]&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;字符集合。匹配所包含的任意一个字符。例如， ‘[abc]’ 可以匹配 “plain” 中的 ‘a’。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;[^xyz]&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;负值字符集合。匹配未包含的任意字符。例如， ‘[^abc]’ 可以匹配 “plain” 中的’p’。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;[a-z]&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;字符范围。匹配指定范围内的任意字符。例如，’[a-z]’ 可以匹配 ‘a’ 到 ‘z’ 范围内的任意小写字母字符。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;[^a-z]&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;负值字符范围。匹配任何不在指定范围内的任意字符。例如，’[^a-z]’ 可以匹配任何不在 ‘a’ 到 ‘z’ 范围内的任意字符。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;\b&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配一个单词边界，也就是指单词和空格间的位置。例如， ‘er\b’ 可以匹配”never” 中的 ‘er’，但不能匹配 “verb” 中的’er’。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;\B&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配非单词边界。’er\B’ 能匹配 “verb” 中的 ‘er’，但不能匹配 “never” 中的 ‘er’。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;\cx&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配由x指明的控制字符。例如， \cM 匹配一个 Control-M 或回车符。 x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 ‘c’ 字符。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;\d&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配一个数字字符。等价于 [0-9]。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;\D&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配一个非数字字符。等价于 [^0-9]。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;\f&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配一个换页符。等价于 \x0c 和 \cL。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;\n&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配一个换行符。等价于 \x0a 和 \cJ。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;\r&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配一个回车符。等价于 \x0d 和 \cM。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;\s&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [ \f\n\r\t\v]。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;\S&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配任何非空白字符。等价于 [^ \f\n\r\t\v]。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;\t&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配一个制表符。等价于 \x09 和 \cI。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;\v&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配一个垂直制表符。等价于 \x0b 和 \cK。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;\w&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配包括下划线的任何单词字符。等价于’[A-Za-z0-9_]’。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;\W&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配任何非单词字符。等价于 ‘[^A-Za-z0-9_]‘。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;\xn&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配 n，其中 n 为十六进制转义值。十六进制转义值必须为确定的两个数字长。例如， ‘\x41’ 匹配 “A”。’\x041’ 则等价于’\x04’ &amp;amp; “1”。正则表达式中可以使用 ASCII 编码。.&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;\num&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配 num，其中 num 是一个正整数。对所获取的匹配的引用。例如，’(.)\1’ 匹配两个连续的相同字符。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;\n&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;标识一个八进制转义值或一个后向引用。如果 \n 之前至少 n 个获取的子表达式，则 n 为后向引用。否则，如果 n 为八进制数字 (0-7)，则 n 为一个八进制转义值。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;\nm&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;标识一个八进制转义值或一个后向引用。如果 \nm 之前至少有is preceded by at least nm 个获取得子表达式，则 nm 为后向引用。如果 \nm 之前至少有 n 个获取，则 n 为一个后跟文字 m 的后向引用。如果前面的条件都不满足，若 n 和 m 均为八进制数字 (0-7)，则 \nm 将匹配八进制转义值 nm。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;\nml&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;如果 n 为八进制数字 (0-3)，且 m 和 l 均为八进制数字 (0-7)，则匹配八进制转义值 nml。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;\un&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配 n，其中 n 是一个用四个十六进制数字表示的 Unicode 字符。例如， \u00A9 匹配版权符号 (?)。&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;h2 id=&quot;html标签相关的regex-expression&quot;&gt;HTML标签相关的Regex Expression&lt;/h2&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th style=&quot;text-align: left&quot;&gt;正则&lt;/th&gt; &lt;th style=&quot;text-align: left&quot;&gt;描述&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;\s*h4[^&amp;gt;]*&amp;gt;(.*?)&amp;lt;\s*/\s*h4&amp;gt;&lt;/code&gt;&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配指定类型标签对及其内容&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;(.&amp;amp;#166;\n)*?&amp;gt;&lt;/code&gt;&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配所有标签对&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;\s*\w.*?&amp;gt;&lt;/code&gt;&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配所有开始标签&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;\s*\/\s*\w\s*.*?&amp;gt;|&amp;lt;\s*br\s*&amp;gt;&lt;/code&gt;&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配所有结尾标签(包含&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;br&amp;gt;&lt;/code&gt;)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;\s*div.*?&amp;gt;&lt;/code&gt;&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配指定类型的开始标签&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;\s*\/\s*div\s*.*?&amp;gt;&lt;/code&gt;&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配指定类型的结尾标签&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;\s*\/?\s*span\s*.*?&amp;gt;&lt;/code&gt;&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配指定类型的标签对&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;\s*\w*\s*style.*?&amp;gt;&lt;/code&gt;&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配指定属性的开始标签&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;\s*\w*\s*href\s*=\s*&quot;?\s*([\w\s%#\/\.;:_-]*)\s*&quot;?.*?&amp;gt;&lt;/code&gt;&lt;/td&gt; &lt;td style=&quot;text-align: left&quot;&gt;匹配指定属性的开始标签&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;h2 id=&quot;7个与url相关的正则表达示&quot;&gt;7个与URL相关的正则表达示&lt;/h2&gt; &lt;ol&gt; &lt;li&gt; &lt;blockquote&gt; &lt;p&gt;&lt;strong&gt;Using match to retrieve all values of parameters. Remove = with replace(/=/,””).&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Using split to retrieve all names of parameters. Remove &amp;amp; with replace(/&amp;amp;/,””).&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;RegEx Expression:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(?:=)[^&amp;amp;]*&lt;/code&gt;&lt;/p&gt; &lt;p&gt;Method: match,split&lt;/p&gt; &lt;/blockquote&gt; &lt;/li&gt; &lt;li&gt; &lt;blockquote&gt; &lt;p&gt;&lt;strong&gt;Using match to retrieve address part of url.&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Using split to retrieve parameter part of url.&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;RegEx Expression: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.*?(?=\?)|.*&lt;/code&gt;&lt;/p&gt; &lt;p&gt;Method:match&lt;/p&gt; &lt;/blockquote&gt; &lt;/li&gt; &lt;li&gt; &lt;blockquote&gt; &lt;p&gt;&lt;strong&gt;matches file name.&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;RegEx Expression: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[\w_.-]*?(?=\?)|[\w_.-]*$&lt;/code&gt;&lt;/p&gt; &lt;p&gt;Method:match&lt;/p&gt; &lt;/blockquote&gt; &lt;/li&gt; &lt;li&gt; &lt;blockquote&gt; &lt;p&gt;&lt;strong&gt;matches file name extension.&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;RegEx Expression: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[\w]*?(?=\?)|[\w]*$&lt;/code&gt;&lt;/p&gt; &lt;p&gt;Method: match&lt;/p&gt; &lt;/blockquote&gt; &lt;/li&gt; &lt;li&gt; &lt;blockquote&gt; &lt;p&gt;&lt;strong&gt;matches file name, remember name part and extension.&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;RegEx Expression:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;([\w_-]*)\.(\w*)?(?=\?)&lt;/code&gt;&lt;/p&gt; &lt;p&gt;Method: exec, match&lt;/p&gt; &lt;/blockquote&gt; &lt;/li&gt; &lt;li&gt; &lt;blockquote&gt; &lt;p&gt;&lt;strong&gt;matches website address, remember domain name.&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;RegEx Expression:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\w*:\/\/w*\.?([\w-_]*\.?[A-Za-z]*):?\d*\/&lt;/code&gt;&lt;/p&gt; &lt;p&gt;Method:exec, match&lt;/p&gt; &lt;/blockquote&gt; &lt;/li&gt; &lt;li&gt; &lt;blockquote&gt; &lt;p&gt;&lt;strong&gt;matches the whole url, remember url address, names and values of all parameters. Add the string &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[\&amp;amp;]?([\w-_]*)?=?([\/\w-_\?\)%\.\(\*\[\]\^&amp;lt;&amp;gt;\\]*)? &lt;/code&gt; if you have more parameters.&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;RegEx Expression: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(?:\w*:\/\/)?((?:[\w-_]*\.?)+:?\d*(?:\/?[\w-_.]+\/?)*)[\?]?[\&amp;amp;]?([\w- _]*)?=?([\/\w-_\?\)%\.\(\*\[\]\^&amp;lt;&amp;gt;\\]*)?[\&amp;amp;]?([\w-_]*)?=?([\/\w-_\?\)% \.\(\*\[\]\^&amp;lt;&amp;gt;\\]*)?[\&amp;amp;]?([\w-_]*)?=?([\/\w-_\?\)%\.\(\*\[\]\^&amp;lt;&amp;gt;\\]*)?[\&amp;amp;] ?([\w-_]*)?=?([\/\w-_\?\)%\.\(\*\[\]\^&amp;lt;&amp;gt;\\]*)?&lt;/code&gt;&lt;/p&gt; &lt;p&gt;Method:exec, match&lt;/p&gt; &lt;/blockquote&gt; &lt;/li&gt; &lt;/ol&gt; </description> <link>https://luowei.github.io/regex/regex-tutorial.html</link> <guid>https://luowei.github.io/regex/regex-tutorial</guid> <pubDate>Fri, 24 Feb 2017 00:00:00 +0800</pubDate> </item> <item> <title>CallKit使用实现总结</title> <description> &lt;h1 id=&quot;callkit使用实现总结&quot;&gt;CallKit使用实现总结&lt;/h1&gt; &lt;p&gt;CallKit不仅让VoIP应用具有系统电话一样的功能，还能帮助系统实现来电识别等功能；但本身并不具备voip功能。&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;引入库PushKit.framework、CallKit.framework；&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;AppDelegate.h添加&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#import &amp;lt;PushKit/PushKit.h&amp;gt; @class ProviderDelegate; @class SpeakerboxCallManager; @property (nonatomic, strong) ProviderDelegate *providerDelegate NS_AVAILABLE_IOS(10_0); @property (nonatomic, strong) SpeakerboxCallManager *callManager NS_AVAILABLE_IOS(10_0); @property (nonatomic, strong) PKPushRegistry* pushRegistry; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;hr /&gt; &lt;ul&gt; &lt;li&gt;AppDelegate.m添加&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#import &quot;AppName-Swift.h&quot; //在didFinishLaunchingWithOptions方法里添加如下代码 if (SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@&quot;10.0&quot;)) { //初始化pushRegistry self.pushRegistry = [[PKPushRegistry alloc] initWithQueue:dispatch_get_main_queue()]; self.pushRegistry.delegate = self; self.pushRegistry.desiredPushTypes = [NSSet setWithObject:PKPushTypeVoIP]; self.callManager = [SpeakerboxCallManager new]; self.providerDelegate = [[ProviderDelegate alloc] initWithCallManager:self.callManager]; } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;hr /&gt; &lt;ul&gt; &lt;li&gt;创建AppDelegateExtension.swift, 让AppDelegate实现PKPushRegistryDelegate协议,如下：&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import UIKit import PushKit extension AppDelegate : PKPushRegistryDelegate{ // MARK: PKPushRegistryDelegate Implementation public func pushRegistry(_ registry: PKPushRegistry, didUpdate credentials: PKPushCredentials, forType type: PKPushType) { /* Store push credentials on server for the active user. For sample app purposes, do nothing since everything is being done locally. */ } public func pushRegistry(_ registry: PKPushRegistry, didReceiveIncomingPushWith payload: PKPushPayload, forType type: PKPushType) { guard type == .voIP else { return } if let uuidString = payload.dictionaryPayload[&quot;UUID&quot;] as? String, let handle = payload.dictionaryPayload[&quot;handle&quot;] as? String, let hasVideo = payload.dictionaryPayload[&quot;hasVideo&quot;] as? Bool, let uuid = UUID(uuidString: uuidString) { displayIncomingCall(uuid: uuid, handle: handle, hasVideo: hasVideo) } } /// Display the incoming call to the user func displayIncomingCall(uuid: UUID, handle: String, hasVideo: Bool = false, completion: ((NSError?) -&amp;gt; Void)? = nil) { if #available(iOS 10.0, *) { self.providerDelegate?.reportIncomingCall(uuid: uuid, handleValue: handle, hasVideo: hasVideo, completion: completion) } else { // Fallback on earlier versions } } } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;hr /&gt; &lt;ul&gt; &lt;li&gt;AppName-Bridging-Header.h文件里添加&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#import &quot;AppDelegate.h&quot; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;hr /&gt; &lt;ul&gt; &lt;li&gt;ProviderDelegate.swift实现&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import UIKit import CallKit import AVFoundation let NotificationName_CallStart = Notification.Name(&quot;callStart&quot;) let NotificationName_CallEnd = Notification.Name(&quot;callEnd&quot;) @available(iOS 10.0, *) class ProviderDelegate: NSObject,CXProviderDelegate { private let provider:CXProvider private let callController = CXCallController() /// The app&apos;s provider configuration, representing its CallKit capabilities static var providerConfiguration: CXProviderConfiguration { let localizedName = (Bundle.main.infoDictionary?[&quot;CFBundleDisplayName&quot;] as? String) ?? &quot;CallKit示例&quot; let providerConfiguration = CXProviderConfiguration(localizedName: localizedName) providerConfiguration.supportsVideo = true providerConfiguration.maximumCallsPerCallGroup = 1 providerConfiguration.supportedHandleTypes = [.generic,.phoneNumber,.emailAddress] if let iconMaskImage = UIImage(named: &quot;IconMask&quot;) { providerConfiguration.iconTemplateImageData = UIImagePNGRepresentation(iconMaskImage) } providerConfiguration.ringtoneSound = &quot;my_calling.caf&quot; return providerConfiguration } override init() { provider = CXProvider(configuration: type(of: self).providerConfiguration) super.init() provider.setDelegate(self, queue: nil) } //MARK: - Call func call(handleValue:String) { let startCallAction = CXStartCallAction(call: UUID(),handle: CXHandle(type: .phoneNumber, value: handleValue)) let transaction = CXTransaction() transaction.addAction(startCallAction) callController.request(transaction) { (err: Error?) in print(err ?? &quot;CallController Request Error&quot;) } } //MARK: - Ending Call func endCall(uuids : [UUID],completion: @escaping (UUID) -&amp;gt; Void) { let uuid = uuids.first let action = CXEndCallAction(call: uuid!) let trans = CXTransaction() trans.addAction(action) callController.request(trans, completion: { (err) in print(err ?? &quot;CallController Request Error&quot;) completion(action.uuid) }) } // MARK: Incoming Calls /// Use CXProvider to report the incoming call to the system func reportIncomingCall(uuid: UUID, handleValue: String, hasVideo: Bool = false, completion: ((NSError?) -&amp;gt; Void)? = nil) { // Construct a CXCallUpdate describing the incoming call, including the caller. let update = CXCallUpdate() update.remoteHandle = CXHandle(type: .phoneNumber, value: handleValue) update.hasVideo = hasVideo // Report the incoming call to the system provider.reportNewIncomingCall(with: uuid, update: update) { error in /* Only add incoming call to the app&apos;s list of calls if the call was allowed (i.e. there was no error) since calls may be &quot;denied&quot; for various legitimate reasons. See CXErrorCodeIncomingCallError. */ if error == nil { print(&quot;calling&quot;) } } } func providerDidReset(_ provider: CXProvider) { print(&quot;Provider did reset&quot;) } func provider(_ provider: CXProvider, perform action: CXStartCallAction) { let update = CXCallUpdate() update.remoteHandle = action.handle provider.reportOutgoingCall(with: action.uuid, startedConnectingAt: Date()) NotificationCenter.default.post(name: NotificationName_CallStart, object: self, userInfo: [&quot;uuid&quot;:action.uuid]) action.fulfill(withDateStarted: Date()) } func provider(_ provider: CXProvider, perform action: CXAnswerCallAction) { NotificationCenter.default.post(name: NotificationName_CallStart, object: self, userInfo: [&quot;uuid&quot;:action.uuid]) action.fulfill(withDateConnected: Date()) } func provider(_ provider: CXProvider, perform action: CXEndCallAction) { action.fulfill() NotificationCenter.default.post(name: NotificationName_CallEnd, object: self, userInfo: [&quot;uuid&quot;:action.uuid.uuidString]) } func provider(_ provider: CXProvider, perform action: CXSetHeldCallAction) { action.fulfill() } func provider(_ provider: CXProvider, timedOutPerforming action: CXAction) { action.fulfill() print(&quot;Timed out \(#function)&quot;) // React to the action timeout if necessary, such as showing an error UI. } func provider(_ provider: CXProvider, didActivate audioSession: AVAudioSession) { print(&quot;Received \(#function)&quot;) } func provider(_ provider: CXProvider, didDeactivate audioSession: AVAudioSession) { print(&quot;Received \(#function)&quot;) /* Restart any non-call related audio now that the app&apos;s audio session has been de-activated after having its priority restored to normal. */ } } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;hr /&gt; &lt;p&gt;其他的实现参考：&lt;a href=&quot;https://developer.apple.com/library/content/samplecode/Speakerbox/SpeakerboxUsingCallKittocreateaVoIPapp.zip&quot;&gt;Apple官方示例&lt;/a&gt;&lt;/p&gt; &lt;p&gt;参考文章：&lt;/p&gt; &lt;p&gt;CallKit的使用介绍：http://www.jianshu.com/p/2bf4f186dfd9&lt;/p&gt; &lt;p&gt;iOS10新特性之CallKit开发VoIP详解：http://www.jianshu.com/p/35b59089134e&lt;/p&gt; &lt;p&gt;iOS Call Kit for VOIP：http://www.jianshu.com/p/3bf73a293535&lt;/p&gt; &lt;p&gt;iOS10适配之 CallKit：http://www.jianshu.com/p/305bd923c1ae&lt;/p&gt; &lt;p&gt;苹果官方文档：https://developer.apple.com/reference/callkit&lt;/p&gt; </description> <link>https://luowei.github.io/ios/ios-callkit-guide.html</link> <guid>https://luowei.github.io/ios/ios-callkit-guide</guid> <pubDate>Sat, 14 Jan 2017 00:00:00 +0800</pubDate> </item> <item> <title>使用自建证书配置HTTPS服务器</title> <description> &lt;h1 id=&quot;使用自建证书配置https服务器&quot;&gt;使用自建证书配置HTTPS服务器&lt;/h1&gt; &lt;h2 id=&quot;安装升级openssl&quot;&gt;安装升级openssl&lt;/h2&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;首先，查看下当前设备的openssl版本，如果版本在openssl1.0.1g以上，请略过。查看命令：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;openssl version -a&lt;/code&gt;。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;下载：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;wget https://www.openssl.org/source/openssl-1.0.2j.tar.gz&lt;/code&gt;。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;下载完之后，解压并进行安装：&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tar -zxvf openssl-1.0.2j.tar.gz cd openssl-1.0.1g ./config shared zlib make &amp;amp;&amp;amp; make install &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;安装后再进行相应的设置：&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#修改历史的OpenSSL文件设置备份 mv /usr/bin/openssl /usr/bin/openssl.old mv /usr/include/openssl /usr/include/openssl.old #设置软连接使其使用新的OpenSSL版本 刚刚安装的OpenSSL默认安装在/usr/local/ssl ln -s /usr/local/ssl/bin/openssl /usr/bin/openssl ln -s /usr/local/ssl/include/openssl /usr/include/openssl #更新动态链接库数据 echo &quot;/usr/local/ss &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;blockquote&gt; &lt;p&gt;在Mac El Capitan 加入了Rootless机制，以上命令可能不失败，需要重启按住 Command+R，进入恢复模式，在实用工具菜单栏中打开终端设置：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;csrutil disable&lt;/code&gt;，再重启即可。 设置好后，后面如果要恢复默认，执行：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;csrutil enable&lt;/code&gt;。&lt;/p&gt; &lt;/blockquote&gt; &lt;ul&gt; &lt;li&gt;最后查看一下版本：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;openssl version&lt;/code&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;创建ca相关的证书&quot;&gt;创建CA相关的证书&lt;/h2&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;首先，可以查看openssl配置文件，了解 CA 环境。&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/ssl/openssl.cnf&lt;/code&gt; 。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;创建 demoCA 目录，命令：&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cd /etc/ssl mkdir demoCA &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;进入 demoCA 目录 ，在其下创建：private 目录、newcerts 目录、crl 目录及 index.txt、serial 文件。&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cd demoCA mkdir private newcerts crl touch index.txt serial echo 01 &amp;gt; serial #设定编号初始值 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;生成根密钥&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;命令： cd /etc/ssl/demoCA openssl genrsa -out private/cakey.pem 2048 genrsa :生成私钥 -out ：输出到那里 rsa :提取公钥 注: 使用命令：( umask 077; openssl genrsa -out private/cakey.pem 2048 ) 可以使 cakey.pem 私钥文件权限为700 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;生成根证书&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;命令： cd /etc/ssl/demoCA [可省略] openssl req -new -x509 -key private/cakey.pem -out cacert.pem 命令解析： req: 生成证书签署请求 -news : 新请求 -key : 指定私钥文件 -out : 指定生成证书位置 -x509 : 生成自签署证书，并指定证书类型 -days n : 有效天数 命令效果：（：后为填写内容） Country Name (2 letter code) [XX]:CN #国家（大写缩写） State or Province Name (full name) []:shannxi #省份或洲 Locality Name (eg, city) [Default City]:xian #城市 Organization Name (eg, company) [Default Company Ltd]:xiyou #公司 Organizational Unit Name (eg, section) []:linux #部门 Common Name (eg, your name or your server&apos;s hostname) []:xxx.xxx.xxx.xxx.#主机 主机必须注意：必须与证书所有者能解析到的名字保持一致（即：你服务器的 IP 地址或域名），否则将无法通过验证 Email Address []: #邮箱（可以不填） 附：以上操作默认选项可通过修改配置文件（/etc/pki/tls/openssl.cnf）修改 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;创建配置apache相关的证书&quot;&gt;创建配置apache相关的证书&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;为服务器生成 ssl 密钥，首先创建 ssl 目录：&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;命令： cd /etc/apache2 mkdir ssl cd ssl openssl genrsa -out apache.key 2048 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;为apache服务器生成证书签署请求&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;命令：openssl req -new -key apache.key -out apache.csr 命令解释如下 注：如果证书的使用者是自己，所填项必须与上面填的一样，负责最后 CA 根据证书请求来签署证书时报错 若是证书的使用者是别人，除了 Commone Name 一定要是你要授予证书的服务器域名或主机名，其它内容随便 请注意：两者在最后 CA 根据证书请求来签署证书时，使用的方法不同 命令效果：（：后为填写内容） Country Name (2 letter code) [AU]:CN State or Province Name (full name) [Some-State]:shannxi Locality Name (eg, city) []:xian Organization Name (eg, company) [Internet Widgits Pty Ltd]:xiyou Organizational Unit Name (eg, section) []:linux Common Name (e.g. server FQDN or YOUR name) []:xxx.xxx.xxx.xxx Email Address []: Please enter the following &apos;extra&apos; attributes to be sent with your certificate request A challenge password []:（不填） #证书请求需要加密存放 An optional company name []:（不填） &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;根据请求从CA来签署证书 &lt;ul&gt; &lt;li&gt;证书的使用者是自己的情况&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;把上一步生成的证书请求 csr 文件，发到 CA 服务器上，在CA上执行&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; 命令： cp apache.csr /etc/ssl cd /etc/ssl openssl ca -in apache.csr -out apache.crt 命令解析： ca ： CA 证书相关子命令 openssl ca 默认使用了-cert cacert.pem -keyfile cakey.pem 命令效果： Using configuration from /etc/ssl/openssl.cnf Check that the request matches the signature Signature ok Certificate Details: Serial Number: 1 (0x1) Validity Not Before: Dec 30 08:49:17 2015 GMT Not After : Dec 27 08:49:17 2025 GMT Subject: countryName = CN stateOrProvinceName = shannxi organizationName = xiyou organizationalUnitName = linux commonName = xxx.xxx.xxx.xxx X509v3 extensions: X509v3 Basic Constraints: CA:FALSE Netscape Comment: OpenSSL Generated Certificate X509v3 Subject Key Identifier: D4:83:D5:B4:54:00:C2:FD:BC:70:52:FD:CF:74:0A:69:56:7E:54:02 X509v3 Authority Key Identifier: keyid:1B:DB:DC:36:5A:82:A5:AF:1A:A9:9C:7B:71:51:54:44:10:31:C3:4B Certificate is to be certified until Dec 27 08:49:17 2025 GMT (3650 days) Sign the certificate? [y/n]:y 1 out of 1 certificate requests certified, commit? [y/n]y Write out database with 1 new entries Data Base Updated &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;ul&gt; &lt;li&gt;证书的使用者是别人的情况&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;把上一步生成的证书请求 csr 文件，发到 CA 服务器上，在CA上执行&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; 命令： cp apache.csr /etc/ssl cd /etc/ssl openssl x509 -req -in apache.csr -CA /etc/ssl/demoCA/cacert.pem -CAkey /etc/ssl/demoCA/private/cakey.pem -CAcreateserial -out apache.crt 命令效果： Check that the request matches the signature Signature ok Getting private key &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;p&gt;最后将生成的 crt 证书发回 apache 服务器使用&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; 命令： cp apache.crt /etc/apache2/ssl cd /etc/apache2/ssl cat apache.crt cd /etc/apache2 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;配置-apache-以使用-ssl&quot;&gt;配置 Apache 以使用 SSL&lt;/h2&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;首先启用ssl模块：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a2enmod ssl&lt;/code&gt;&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;配置default-ssl.conf&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;p&gt;修改 sites-available 子目录中的 default-ssl.conf 文件&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;命令： cd /etc/apache2/sites-available sudo vim default-ssl.conf &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;修改内容如下：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;IfModule mod_ssl.c&amp;gt; &amp;lt;VirtualHost _default_:443&amp;gt; DocumentRoot /var/www/html ErrorLog ${APACHE_LOG_DIR}/error.log CustomLog ${APACHE_LOG_DIR}/access.log combined SSLEngine on SSLCertificateFile /etc/apache2/ssl/apache.crt ***** 需要修改部分 SSLCertificateKeyFile /etc/apache2/ssl/apache.key ***** 需要修改部分 &amp;lt;FilesMatch &quot;\.(cgi|shtml|phtml|php)$&quot;&amp;gt; SSLOptions +StdEnvVars &amp;lt;/FilesMatch&amp;gt; &amp;lt;Directory /usr/lib/cgi-bin&amp;gt; SSLOptions +StdEnvVars &amp;lt;/Directory&amp;gt; BrowserMatch &quot;MSIE [2-6]&quot; \ nokeepalive ssl-unclean-shutdown \ downgrade-1.0 force-response-1.0 BrowserMatch &quot;MSIE [17-9]&quot; ssl-unclean-shutdown &amp;lt;/VirtualHost&amp;gt; &amp;lt;/IfModule&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;启用default-ssl.conf,执行：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a2ensite default-ssl.conf&lt;/code&gt;。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;VirtualHost的SSL配置&lt;strong&gt;(以wodedata.com为例)&lt;/strong&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;修改wodedata.com.conf文件：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;vi /etc/apache2/sites-available/wodedata.com.conf&lt;/code&gt;，添加以下内容：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;IfModule mod_ssl.c&amp;gt; &amp;lt;VirtualHost *:443&amp;gt; ServerAdmin webmaster@localhost ServerName wodedata.com DocumentRoot /var/www/wodedata.com # SSL Engine Switch: # Enable/Disable SSL for this virtual host. SSLEngine on # A self-signed (snakeoil) certificate can be created by installing # the ssl-cert package. See # /usr/share/doc/apache2.2-common/README.Debian.gz for more info. # If both key and certificate are stored in the same file, only the # SSLCertificateFile directive is needed. SSLCertificateFile /etc/apache2/ssl/apache.crt SSLCertificateKeyFile /etc/apache2/ssl/apache.key &amp;lt;/VirtualHost&amp;gt; &amp;lt;/IfModule&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;最后重启Apache服务：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;service apache2 restart&lt;/code&gt;&lt;/li&gt; &lt;/ul&gt; &lt;hr /&gt; &lt;p&gt;以上参考：&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://ningxiaobao.cn/?p=29&quot;&gt;基于 Ubuntu 系统下，自建 CA 及颁发 SSL 证书&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.liuchungui.com/blog/2015/09/25/zi-jian-zheng-shu-pei-zhi-httpsfu-wu-qi/&quot;&gt;自建证书配置HTTPS服务器&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://www.digitalocean.com/community/tutorials/how-to-set-up-multiple-ssl-certificates-on-one-ip-with-apache-on-ubuntu-12-04&quot;&gt;How To Set Up Multiple SSL Certificates on One IP with Apache on Ubuntu 12.04&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/d600bd2ef440&quot;&gt;https：自建证书 &amp;amp;&amp;amp; iOS使用自签名证书&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://medium.com/@katopz/how-to-upgrade-openssl-8d005554401#.ierfuxgly&quot;&gt;How to upgrade OpenSSL (macOS)&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/22b89f19afd6&quot;&gt;Mac OS X 11中的/usr/bin 的“Operation not permitted”&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/gx_1983/article/details/47866537&quot;&gt;openssl自签名证书生成与单双向验证&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://seanlook.com/2015/01/18/openssl-self-sign-ca/&quot;&gt;基于OpenSSL自建CA和颁发SSL证书&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://linux.cn/article-4901-1.html&quot;&gt;如何在Ubuntu 14.04 上为Apache 2.4 安装SSL支持&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000002569859&quot;&gt;基于OpenSSL自建CA和颁发SSL证书&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.178linux.com/10705&quot;&gt;openssl总结及私有CA的搭建&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/linuxnews/article/details/51011443&quot;&gt;搭建私有CA服务器&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/ae047991d40b&quot;&gt;Ubuntu Apache2 下配置 SSL 证书及全局 HTTPS 强制跳转&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/lamp/https-config.html</link> <guid>https://luowei.github.io/lamp/https-config</guid> <pubDate>Sat, 24 Dec 2016 00:00:00 +0800</pubDate> </item> <item> <title>iOS安防及越狱开发相关知识总结</title> <description> &lt;h1 id=&quot;ios安防及越狱开发相关知识总结&quot;&gt;iOS安防及越狱开发相关知识总结&lt;/h1&gt; &lt;p&gt;首先要有一个越狱设备，没得说的。&lt;/p&gt; &lt;h2 id=&quot;脱壳&quot;&gt;脱壳&lt;/h2&gt; &lt;p&gt;因为从AppStore下载的ipa都是加了壳的(苹果把开发者上传的ipa进行了加壳后财放到AppStore的)，所以加壳的ipa要先去壳。因为通过xcode打的包是没有加壳的，所以在第三方渠道如PP助手、itools等应用市场有很多ipa是开发者直接分发没有加壳的。&lt;/p&gt; &lt;p&gt;脱壳可以用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;clutch&lt;/code&gt;、&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dumpdecrypted&lt;/code&gt;或者&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;使用gdb調試&lt;/code&gt;等解密去壳&lt;/p&gt; &lt;p&gt;Clutch脱壳破解：&lt;a href=&quot;http://www.jianshu.com/p/eec61e680513&quot;&gt;iOS逆向之ipa破解&lt;/a&gt;&lt;/p&gt; &lt;p&gt;iOS逆向之App脱壳:&lt;a href=&quot;http://www.jianshu.com/p/47836c78eb0a&quot;&gt;http://www.jianshu.com/p/47836c78eb0a&lt;/a&gt;&lt;/p&gt; &lt;p&gt;App脱壳及ipa破解：&lt;a href=&quot;http://www.mottoin.com/92530.html&quot;&gt;iOS逆向：App脱壳/ipa破解&lt;/a&gt;&lt;/p&gt; &lt;p&gt;iOS逆向工程之App脱壳:&lt;a href=&quot;http://www.cnblogs.com/ludashi/p/5725743.html&quot;&gt;http://www.cnblogs.com/ludashi/p/5725743.html&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;gdb命令行调试&quot;&gt;GDB命令行调试&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;gdb&lt;/strong&gt;iOS下动态调试的利器。(llvm对应gcc),(lldb对应gdb)，lldb里面对应的调试命令跟gdb里没太大区别。 gdb的安装：在cydia中添加源：cydia.radare.org 。搜索 GNU Debugger，安装即可。&lt;/p&gt; &lt;p&gt;更多的详情介绍参考：&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.cnblogs.com/jailbreaker/p/4212997.html&quot;&gt;iOS安全攻防(二十)动态调试利器—gdb基础篇&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://wiki.jikexueyuan.com/project/ios-security-defense/prevent-gdb.html&quot;&gt;阻止 GDB 依附&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;进程注入工具cycript&quot;&gt;进程注入工具cycript&lt;/h2&gt; &lt;p&gt;Cycript安装可以前往Cydia下载安装。&lt;/p&gt; &lt;p&gt;更多关于Cycript：&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/7c41b03c9eb3&quot;&gt;iOS逆向工程(Cycript脚本语言使用与实战)&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://wiki.jikexueyuan.com/project/ios-security-defense/cycript.html&quot;&gt;使用 Cycript 修改支付宝 App 运行时&lt;/a&gt;&lt;/p&gt; &lt;h3 id=&quot;脱壳工具dumpdecrypted&quot;&gt;脱壳工具dumpdecrypted&lt;/h3&gt; &lt;p&gt;&lt;a href=&quot;https://github.com/stefanesser/dumpdecrypted/archive/master.zip&quot;&gt;dumpdecrypted：&lt;/a&gt;https://github.com/stefanesser/dumpdecrypted/archive/master.zip&lt;/p&gt; &lt;p&gt;下载后，解压运行make编译，就会在当前目录下生成dumpdecrypted.dylib文件&lt;/p&gt; &lt;h2 id=&quot;头文件导出&quot;&gt;头文件导出&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;class-dump：&lt;/strong&gt;&lt;a href=&quot;http://stevenygard.com&quot;&gt;class-dump&lt;/a&gt;用于导出头文件。 &lt;strong&gt;导出头文件步骤：&lt;/strong&gt; 1. 上传dumpdecrypted.dylib到目标APP的Documents下(使用iFunBox或scp都可以)； 2. 把目标应用运行起来，然后通过SSH连接到越犾的设备上，运行ps -e来打印所有进程信息，并找出具体要脱壳的应用目录。 3. 进入到dumpdecrypted.dylib所在目录下，执行脱壳命令：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DYLD_INSERT_LIBRARIES=dumpdecrypted.dylib /var/mobile/Containers/Bundle/Application/EDBFAB4B-A976-400F-932C-0A5B0FDA3D24/calligraphy.app/calligraphy&lt;/code&gt; ,此时就会在Documents下，生成一个xxx..decrypted的文件，这就是脱壳的文件了。 4. 使用class-dump导出头文件,把calligraphy.decrypted复制到mac上执行命令&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;class-dump --arch armv7 -H calligraphy.decrypted -o calligraphy.h&lt;/code&gt;。&lt;/p&gt; &lt;p&gt;更深入详细的相关参考：&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://wiki.jikexueyuan.com/project/ios-security-defense/&quot;&gt;iOS 安全攻防&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://wiki.jikexueyuan.com/project/ios-security-defense/class-dump-z.html&quot;&gt;使用 class-dump-z 分析支付宝 App&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://wiki.jikexueyuan.com/project/ios-security-defense/inalyzer.html&quot;&gt;使用 iNalyzer 分析应用程序&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://wiki.jikexueyuan.com/project/ios-security-defense/introspy.html&quot;&gt;使用 introspy 追踪分析应用程序&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;移动版的reveal工具--flex&quot;&gt;移动版的Reveal工具 — FLEX&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;生成flex的.dylib库，Xcode安装iOSOpenDev插件即可创建iOS的dylib动态库；&lt;/li&gt; &lt;li&gt;通过越狱后提供的 MobileSubstrate 框架帮助我们加载动态库中的代码，&lt;/li&gt; &lt;li&gt; &lt;p&gt;拷贝到真机&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;scp -r libFlex.dylib root@192.168.2.2:/Library/MobileSubstrate/DynamicLibraries&lt;/code&gt;,再重启真机或者 ssh 到真机执行命令：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;killall SpringBoard&lt;/code&gt;。&lt;/p&gt; &lt;p&gt;它将会在每个 App 加载后动态载入显示，如果你不想这样，可以在/Library/MobileSubstrate/DynamicLibraries目录下新建同名配置文件libFlex.plist，使其在指定 App 中才会自动加载，例子如下：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;{ Filter = { Bundles = (&quot;com.sina.weibo&quot;); Bundles = (&quot;com.burbn.instagram&quot;); Bundles = (&quot;com.apple.podcasts&quot;); Bundles = (&quot;com.atebits.Tweetie2&quot;); Bundles = (&quot;com.360buy.jdmobile&quot;); }; } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;p&gt;其中填入的 BundlesID 可以在目标 App 根目录下的 iTunesMetadata.plist 文件中获取到&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;p&gt;更多相关资源：&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://github.com/Flipboard/FLEX&quot;&gt;Flipboard/FLEX&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://github.com/danylokostyshyn/DKFLEXLoader&quot;&gt;FLEX .dylib生成脚本&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://github.com/onmyway133/Paramount&quot;&gt;一个自定义的允许添加事件响应的Flipboard FLEX&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/749f63d6f8e6&quot;&gt;iOS建立动态库工程&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/hursing/article/details/8951958&quot;&gt;Xcode4.6创建和使用iOS的dylib动态库&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;ios程序逆向相关三个强大的工具revealhopperdisassembleida&quot;&gt;iOS程序逆向相关三个强大的工具——Reveal、HopperDisassemble、IDA&lt;/h2&gt; &lt;p&gt;详情见：&lt;a href=&quot;http://www.cnblogs.com/mddblog/p/4960505.html&quot;&gt;http://www.cnblogs.com/mddblog/p/4960505.html&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.zendei.com/article/10355.html&quot;&gt;逆向工程 - Reveal、IDA、Hopper、https抓包&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://security.ios-wiki.com/issue-3-7/&quot;&gt;IDA：强大的反汇编工具&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/10873c5c1e08&quot;&gt;手把手教你反编译别人的app&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;theos越狱开发利器&quot;&gt;TheOS越狱开发利器&lt;/h2&gt; &lt;p&gt;TheOS 被设计为一个在基于 Unix 平台 (Mac OS X、IOS…) 和大多数 的Linux 平台下开发 iOS 程序的集成开发环境。当然除了 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TheOS&lt;/code&gt; 之外，还有另外一种方法，就是用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;iOSOpenDev&lt;/code&gt; 界面化开进行 iOS 越狱开发。&lt;/p&gt; &lt;p&gt;详细参考：&lt;/p&gt; &lt;p&gt;iOS越狱开发-TheOS 介绍：&lt;a href=&quot;https://cnbin.github.io/blog/2015/05/21/iosyue-yu-kai-fa-theos-jie-shao/&quot;&gt;iOS越狱开发-TheOS 介绍&lt;/a&gt;&lt;/p&gt; &lt;p&gt;Theos：iOS越狱程序开发框架:&lt;a href=&quot;http://security.ios-wiki.com/issue-3-6/&quot;&gt;http://security.ios-wiki.com/issue-3-6/&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;machoview介绍&quot;&gt;MachOView介绍&lt;/h2&gt; &lt;p&gt;Mach-O格式全称为Mach Object文件格式的缩写，是mac上可执行文件的格式，类似于windows上的PE格式 (Portable Executable ), linux上的elf格式 (Executable and Linking Format)。&lt;/p&gt; &lt;p&gt;更多信息参考：&lt;a href=&quot;http://www.jianshu.com/p/175925ab3355&quot;&gt;Macho文件浏览器—MachOView&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;参考链接&quot;&gt;参考链接&lt;/h2&gt; &lt;p&gt;极客学院完美的资源：&lt;a href=&quot;http://wiki.jikexueyuan.com/project/ios-security-defense/hacktools.html&quot;&gt;Hack 必备的命令与工具&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/ios/ios-security-reverse-jailbreak-skills-summary.html</link> <guid>https://luowei.github.io/ios/ios-security-reverse-jailbreak-skills-summary</guid> <pubDate>Fri, 21 Oct 2016 00:00:00 +0800</pubDate> </item> <item> <title>iOS中图形的绘制基础</title> <description> &lt;h1 id=&quot;ios中图形的绘制基础&quot;&gt;iOS中图形的绘制基础&lt;/h1&gt; &lt;h2 id=&quot;uiview的drawrect方法&quot;&gt;UIView的drawRect方法&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;override func drawRect(rect: CGRect) { //绘制代码 } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;bézier-curve贝赛尔曲线&quot;&gt;Bézier Curve（贝赛尔曲线）&lt;/h2&gt; &lt;p&gt;1.1962年法国工程师Pierre Bézier发表; 2.计算机图形图像造形基本工具,运用最多的基本线条之一;&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;http://wx1.sinaimg.cn/large/680dfa44gy1fczd6q4g2zg20ft09415t.gif&quot; alt=&quot;贝赛尔曲线Wiki&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;画一根线段&quot;&gt;画一根线段&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;let linePath = UIBezierPath() linePath.move(to: CGPoint(x: 30, y: 50)) linePath.addLine(to: CGPoint(x: 190, y: 50)) UIColor.black.setStroke() //设置边框颜色 linePath.lineWidth = 2 //设置线宽 linePath.stroke() //绘制边框 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;画一根虚线段&quot;&gt;画一根虚线段&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;//MARK:画一根虚线段 let dashLinePath = UIBezierPath() dashLinePath.move(to: CGPoint(x: 30, y: 50)) dashLinePath.addLine(to: CGPoint(x: 190, y: 50)) UIColor.black.setStroke() dashLinePath.lineWidth = 2 guard let context = UIGraphicsGetCurrentContext() as CGContext? else{ return } context.saveGState() context.setLineDash(phase: 0, lengths: [10,5]) //从0开始,循环地画:10个点跳5个点 dashLinePath.stroke() context.restoreGState() &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;画一根折线&quot;&gt;画一根折线&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;let breakenLinPath = UIBezierPath() breakenLinPath.move(to: CGPoint(x: 30, y: 120)) breakenLinPath.addLine(to: CGPoint(x: 109.5, y: 90)) breakenLinPath.addLine(to: CGPoint(x: 190, y: 120)) UIColor.black.setStroke() breakenLinPath.lineWidth = 2 breakenLinPath.stroke() &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;画一根曲线&quot;&gt;画一根曲线&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;let curvePath = UIBezierPath() curvePath.move(to: CGPoint(x: 30, y: 180)) curvePath.addCurve(to: CGPoint(x: 110, y: 140), controlPoint1: CGPoint(x: 30, y: 180), controlPoint2: CGPoint(x: 70, y: 140)) curvePath.addCurve(to: CGPoint(x: 190, y: 180), controlPoint1: CGPoint(x: 150, y: 140), controlPoint2: CGPoint(x: 190, y: 180)) UIColor.black.setStroke() curvePath.lineWidth = 2 curvePath.stroke() &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;绘制一个矩形&quot;&gt;绘制一个矩形&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;let rectangleRect = UIEdgeInsetsInsetRect(self.bounds, UIEdgeInsetsMake(20, 20, 20, 20)) let rectanglePath = UIBezierPath(rect: rectangleRect) //填充颜色 UIColor.gray.setFill() rectanglePath.fill() &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;绘制三角形&quot;&gt;绘制三角形&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;let polygonRect = UIEdgeInsetsInsetRect(self.bounds, UIEdgeInsetsMake(20, 20, 20, 20)) let polygon3Path = UIBezierPath() polygon3Path.move(to: CGPoint(x: polygonRect.minX + 100, y: polygonRect.minY + 40.5)) polygon3Path.addLine(to: CGPoint(x: polygonRect.minX + 151.53, y: polygonRect.minY + 129.75)) polygon3Path.addLine(to: CGPoint(x: polygonRect.minX + 48.47, y: polygonRect.minY + 129.75)) polygon3Path.close() UIColor.green.setFill() polygon3Path.fill() &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;绘制一个圆形&quot;&gt;绘制一个圆形&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;let ovalRect = UIEdgeInsetsInsetRect(self.bounds, UIEdgeInsetsMake(20, 20, 20, 20)) let ovalPath = UIBezierPath(ovalIn: ovalRect) //MARK:填充颜色 UIColor.darkGray.setFill() ovalPath.fill() &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;填充图片加边框&quot;&gt;填充图片&amp;amp;加边框&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;//填充图片 guard let context = UIGraphicsGetCurrentContext() as CGContext?, let image = UIImage(named: &quot;image.png&quot;) as UIImage? else{ return } context.saveGState() ovalPath.addClip() image.draw(in: ovalRect) context.restoreGState() //加边框 UIColor.green.setStroke() ovalPath.lineWidth = 1 ovalPath.stroke() &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;绘制一段文字&quot;&gt;绘制一段文字&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;let rectangleStyle = NSMutableParagraphStyle() //段落样式集 rectangleStyle.alignment = .center let rectangleFontAttributes = [NSFontAttributeName: UIFont(name: &quot;HelveticaNeue&quot;, size: 12)!, NSForegroundColorAttributeName: UIColor.blue, NSParagraphStyleAttributeName: rectangleStyle] //文字属性集 let textRect = UIEdgeInsetsInsetRect(self.bounds, UIEdgeInsetsMake(90, 20, 90, 20)) &quot;Hello\nWorld&quot;.draw(in:textRect, withAttributes: rectangleFontAttributes) //绘制到矩形框内 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;demo&quot;&gt;Demo&lt;/h2&gt; &lt;p&gt;&lt;img src=&quot;http://wx2.sinaimg.cn/large/680dfa44gy1fczd6sec4og20ab0ihe81.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;paintcode--sketch&quot;&gt;PaintCode &amp;amp; Sketch&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;&lt;a href=&quot;www.sketchappsources.com/&quot;&gt;sketchappsources&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://designcode.io/&quot;&gt;designcode&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;http://wx1.sinaimg.cn/large/680dfa44gy1fczd6qj2v1g20ab0ihq56.gif&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;http://wx1.sinaimg.cn/large/680dfa44gy1fczd6nqtc0g20ab0ihagg.gif&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;http://wx3.sinaimg.cn/large/680dfa44gy1fczd6p73vqg20ab0ihdzu.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;附&quot;&gt;附：&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;http://wodedata.com/tutorial/graphicdraw/%E5%9B%BE%E5%BD%A2%E7%9A%84%E7%BB%98%E5%88%B6.pdf&quot;&gt;图形的绘制演示文稿-pdf&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://wodedata.com/tutorial/graphicdraw&quot;&gt;图形的绘制演示文稿-WebPPT&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://github.com/luowei/PaintCodeSamples&quot;&gt;源代码&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/ios-graphic-draw.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/ios-graphic-draw</guid> <pubDate>Sat, 10 Sep 2016 00:00:00 +0800</pubDate> </item> <item> <title>iOS面试相关基础问题点</title> <description> &lt;h1 id=&quot;ios面试相关基础问题点&quot;&gt;iOS面试相关基础问题点&lt;/h1&gt; &lt;h2 id=&quot;ios程序的执行顺序&quot;&gt;iOS程序的执行顺序&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;AppDelegate执行顺序&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1 进入程序的入口，进入main函数, 设置AppDelegate称为函数的代理 2 程序完成加载：-[AppDelegate application:didFinishLaunchingWithOptions:] 3 创建window窗口 4 程序被激活：-[AppDelegate applicationDidBecomeActive:] 5 当点击command+H时： 程序取消激活状态：-[AppDelegate applicationWillResignActive:] 程序进入后台：-[AppDelegate applicationDidEnterBackground:] 6 点击进入工程： 程序进入前台：-[AppDelegate applicationWillEnterForeground:] 程序被激活：-[AppDelegate applicationDidBecomeActive:] &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;参考：&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.lai18.com/content/1558580.html&quot;&gt;viewController执行顺序及生命周期详解&lt;/a&gt; &lt;a href=&quot;http://www.cnblogs.com/tian-sun/p/4199840.html&quot;&gt;iOS程序的执行顺序&lt;/a&gt;&lt;/p&gt; &lt;hr /&gt; &lt;ul&gt; &lt;li&gt;要点 applicationDidBecomeActive、applicationDidEnterBackground、applicationWillResignActive等方法背后做了哪些事情？&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;参考：&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/totogo2010/article/details/8048652&quot;&gt;iOS应用程序生命周期(前后台切换,应用的各种状态)详解&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.cnblogs.com/wayne23/p/3868441.html&quot;&gt;应用程序执行的生命周期&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/b6efce03e628&quot;&gt;iOS App生命周期初识&lt;/a&gt;&lt;/p&gt; &lt;hr /&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;xcode编译器为什么能识别语法错误等问题？&lt;/p&gt; &lt;/li&gt; &lt;li&gt;编译:将C源程序翻译成计算机能识别的0和1; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cc -c 文件名.c&lt;/code&gt;&lt;/li&gt; &lt;li&gt;连接:将.o文件和C语言函数库组合在一起,生成可执行文件;&lt;/li&gt; &lt;li&gt; &lt;p&gt;Xcode中的编译过程分为四个步骤:&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; 1. 预处理（Pre-process）：把宏替换，删除注释，展开头文件，产生 .i 文件。 2. 编译（Compliling）：把之前的 .i 文件转换成汇编语言，产生 .s文件。 3. 汇编（Asembly）：把汇编语言文件转换为机器码文件，产生 .o 文件。 4. 链接（Link）：对.o文件中的对于其他的库的引用的地方进行引用，生成最后的可执行文件（同时也包括多个 .o 文件进行 link）。 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt;GCC编译的四大过程: 预处理(Pre-processing) -&amp;gt; 编译阶段(Compiling) -&amp;gt; 汇编阶段(Assembling) -&amp;gt; 链接阶段(Link)。&lt;/li&gt; &lt;/ul&gt; &lt;hr /&gt; &lt;ul&gt; &lt;li&gt;@synthesize 与 @dynamic区别 ? 参考：&lt;a href=&quot;http://stackoverflow.com/questions/1160498/synthesize-vs-dynamic-what-are-the-differences&quot;&gt;http://stackoverflow.com/questions/1160498/synthesize-vs-dynamic-what-are-the-differences&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;@synthesize：为属性生成读写方法；@dynamic：告诉编译器自己不实现读写方法，而是在其他地方实现(比如父类实现或运行时实现)；&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;http://ww4.sinaimg.cn/large/680dfa44jw1fcdhmxhoo4j212e0lsagt.jpg&quot; alt=&quot;@synthesize 与 @dynamic区别 ​​​​&quot; /&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/ios-basic-interview-question.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/ios-basic-interview-question</guid> <pubDate>Tue, 23 Aug 2016 00:00:00 +0800</pubDate> </item> <item> <title>C/S系统通信相关解决方案</title> <description> &lt;h1 id=&quot;cs系统通信相关解决方案&quot;&gt;C/S系统通信相关解决方案&lt;/h1&gt; &lt;h2 id=&quot;即时消息im&quot;&gt;&lt;strong&gt;即时消息IM&lt;/strong&gt;&lt;/h2&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;目前主流的四种IM（IM：instant messaging,即时消息）协议：XMPP（Extensible Messageing and Presence Protocol：可扩展消息与表示协议）、即时信息和空间协议(IMPP)、空间和即时信息协议(PRIM)、针对即时通讯和空间平衡扩充的进程开始协议SIP(SIMPLE)。在这四种协议中，XMPP是最灵活的。XMPP是一种基于XML的协议，它继承了在XML环境中灵活的发展性。&lt;/p&gt; &lt;/li&gt; &lt;li&gt;XMPP官网：&lt;a href=&quot;https://xmpp.org&quot;&gt;https://xmpp.org&lt;/a&gt; &lt;ul&gt; &lt;li&gt;客户端：https://xmpp.org/software/clients.html&lt;/li&gt; &lt;li&gt;服务端：&lt;a href=&quot;http://process-one.net/&quot;&gt;ejabberd&lt;/a&gt;、&lt;a href=&quot;http://igniterealtime.org/&quot;&gt;Openfire&lt;/a&gt;等&lt;/li&gt; &lt;li&gt;SDK库:https://xmpp.org/software/libraries.html，OC库主要使用：&lt;a href=&quot;http://github.com/&quot;&gt;xmppframework&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;客户端的开发使用：&lt;a href=&quot;http://www.jianshu.com/p/eb273cb8ac94&quot;&gt;http://www.jianshu.com/p/eb273cb8ac94&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;li&gt;第三方IM服务，百川IM、Leancloud等&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;socket编程&quot;&gt;&lt;strong&gt;Socket编程&lt;/strong&gt;&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;套接字（socket）概念 &lt;ul&gt; &lt;li&gt;Socket是对TCP/IP协议的封装，Socket本身并不是协议，而是一个调用接口（API），通过Socket，我们才能使用TCP/IP协议。&lt;/li&gt; &lt;li&gt;套接字（socket）是通信的基石，是支持TCP/IP协议的网络通信的基本操作单元。它是网络通信过程中端点的抽象表示，包含进行网络通信必须的五种信息：连接使用的协议，本地主机的IP地址，本地进程的协议端口，远地主机的IP地址，远地进程的协议端口。&lt;/li&gt; &lt;li&gt;多个TCP连接或多个应用程序进程可能需要通过同一个TCP协议端口传输数据。为了区别不同的应用程序进程和连接，许多计算机操作系统为应用程序与TCP／IP协议交互提供了套接字(Socket)接口。&lt;/li&gt; &lt;li&gt;建立Socket连接至少需要一对套接字，其中一个运行于客户端，称为ClientSocket，另一个运行于服务器端，称为ServerSocket。套接字之间的连接过程分为三个步骤：服务器监听，客户端请求，连接确认。&lt;/li&gt; &lt;li&gt;创建Socket连接时，可以指定使用的传输层协议，Socket可以支持不同的传输层协议（TCP或UDP），当使用TCP协议进行连接时，该Socket连接就是一个TCP连接。&lt;/li&gt; &lt;li&gt;于通常情况下Socket连接就是TCP连接，因此Socket连接一旦建立，通信双方即可开始相互发送数据内容，直到双方连接断开。但在实际网络应用中，客户端到服务器之间的通信往往需要穿越多个中间节点，例如路由器、网关、防火墙等，大部分防火墙默认会关闭长时间处于非活跃状态的连接而导致Socket 连接断连，因此需要通过轮询告诉网络(所谓的心跳)，该连接处于活跃状态。&lt;/li&gt; &lt;li&gt;HTTP连接使用的是“请求—响应”的方式，不仅在请求时需要先建立连接，而且需要客户端向服务器发出请求后，服务器端才能回复数据。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Socket使用流程&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;使用开源的cocoaasyncsocket：&lt;a href=&quot;https://github.com/robbiehanson/CocoaAsyncSocket&quot;&gt;https://github.com/robbiehanson/CocoaAsyncSocket&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;创建一个socket对象：&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()]; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;ul&gt; &lt;li&gt;连接:&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; NSError *error = nil; [_socket connectToHost:host onPort:(uint16_t) port.intValue error:&amp;amp;error]; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;ul&gt; &lt;li&gt;连接成功:&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; -(void)socket:(GCDAsyncSocket *)sock didConnectToHost:(NSString *)host port:(uint16_t)port &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;ul&gt; &lt;li&gt;断开了连接:&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; -(void)socketDidDisconnect:(GCDAsyncSocket *)sock withError:(NSError *)err &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;ul&gt; &lt;li&gt;发送数据：&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; [_socket writeData:data withTimeout:-1 tag:0]; - (void)socket:(GCDAsyncSocket *)sock didWriteDataWithTag:(long)tag &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;ul&gt; &lt;li&gt;读取数据：&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; [_socket readDataWithTimeout:-1 tag:0]; - (void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;ios应用程序间共享数据&quot;&gt;&lt;strong&gt;iOS应用程序间共享数据&lt;/strong&gt;&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;利用剪贴板(UIPasteboard)；&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;剪贴板是应用程序之间传递数据的简单方式，建议不要使用全局的粘贴板，而是自己根据名字创建一个新的粘贴板，防止其它地方全局拷贝的影响。然后把需要共享的内容复制到粘贴板，粘贴板的内容可以是文本、URL、图片和UIColor等，另一个app就可以根据粘贴板的名字去读取相关的信息。&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;//Example1设置粘贴板的内容: UIPasteboard *pasteboard = [UIPasteboard pasteboardWithName:@&quot;myPasteboard&quot; create:YES]; pasteboard.string = @&quot;myShareData&quot;; //Example2读取粘贴板的内容: UIPasteboard *pasteboard = [UIPasteboard pasteboardWithName:@&quot;myPasteboard&quot; create:NO]; NSString *content = pasteboard.string; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;使用自定义的URL Scheme；&lt;/li&gt; &lt;li&gt;通过共享开钥匙串。启Keychain Sharing，然后添加设置相同的Keychain Group，并添加Security.framework；&lt;/li&gt; &lt;li&gt;通过App Groups。开启app groups，需要添加一个group name，app之间通过这个group共享数据；&lt;/li&gt; &lt;/ul&gt; &lt;hr /&gt; &lt;p&gt;&lt;strong&gt;以上参考：&lt;/strong&gt;&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/4edbae55a07f&quot;&gt;iOS中XMPP简单聊天实现 注册和登录&lt;/a&gt;&lt;/p&gt; &lt;/blockquote&gt; &lt;blockquote&gt; &lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/eb273cb8ac94&quot;&gt;IM开发-XMPP iOS开发&lt;/a&gt;&lt;/p&gt; &lt;/blockquote&gt; &lt;blockquote&gt; &lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/169e31cacf42&quot;&gt;iOS应用程序间共享数据&lt;/a&gt;&lt;/p&gt; &lt;/blockquote&gt; &lt;blockquote&gt; &lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/3e4f3de18e3b&quot;&gt;关于iOS socket都在这里了&lt;/a&gt;&lt;/p&gt; &lt;/blockquote&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/client-server-communication-solution.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/client-server-communication-solution</guid> <pubDate>Mon, 27 Jun 2016 00:00:00 +0800</pubDate> </item> <item> <title>JsonServer,lowdb,hotel为开发者打造轻服务器</title> <description> &lt;h1 id=&quot;jsonserverlowdbhotel为开发者打造轻服务器&quot;&gt;JsonServer,lowdb,hotel为开发者打造轻服务器&lt;/h1&gt; &lt;h2 id=&quot;jsonserver模拟api服务端&quot;&gt;JsonServer模拟Api服务端&lt;/h2&gt; &lt;p&gt;JsonServer:&lt;a href=&quot;https://github.com/typicode/json-server&quot;&gt;https://github.com/typicode/json-server&lt;/a&gt;&lt;/p&gt; &lt;p&gt;本文示例：&lt;a href=&quot;http://wodedata.com:3000&quot;&gt;http://wodedata.com:3000&lt;/a&gt;&lt;/p&gt; &lt;h3 id=&quot;为api生成模拟数据&quot;&gt;为api生成模拟数据&lt;/h3&gt; &lt;p&gt;&lt;img src=&quot;http://ww4.sinaimg.cn/large/680dfa44jw1fbpqr8uzuyj214e0vsagr.jpg&quot; alt=&quot;模拟数据生成&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;js写的轻量级数据库lowdb&quot;&gt;js写的轻量级数据库lowdb&lt;/h2&gt; &lt;p&gt;lowdb:&lt;a href=&quot;https://github.com/typicode/lowdb&quot;&gt;https://github.com/typicode/lowdb&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;hotel一个非常好用的server管理器&quot;&gt;hotel一个非常好用的Server管理器&lt;/h2&gt; &lt;p&gt;hotel:&lt;a href=&quot;https://github.com/typicode/hotel&quot;&gt;https://github.com/typicode/hotel&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;安装全局作用域的module&quot;&gt;安装全局作用域的module&lt;/h2&gt; &lt;p&gt;添加json-server模块:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;npm install -g json-server&lt;/code&gt; 添加faker、lodash模块:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;npm install -g faker lodash&lt;/code&gt;&lt;/p&gt; &lt;p&gt;Ubuntu在.bashrc中添加NODE_PATH环境变量：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;export NODE_PATH=/usr/lib/node_modules&lt;/code&gt; Mac OS在profile中添加NODE_PATH环境变量：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;export NODE_PATH=/usr/local/lib/node_modules&lt;/code&gt;&lt;/p&gt; &lt;h2 id=&quot;hotel相关操作&quot;&gt;Hotel相关操作&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;npm install -g hotel hotel add &apos;jekyll serve --port 4000&apos; --name luowei.github.io -p 4000 hotel add &apos;python -m SimpleHTTPServer 8000&apos; --name websites -p 8000 hotel add &apos;php -S 127.0.0.1:5000&apos; --name &apos;php sites&apos; -p 5000 hotel add &apos;hexo server&apos; --name &apos;hexo site&apos; -p 4000 hotel add &apos;ember server&apos; --name &apos;ember site&apos; -p 4200 hotel add &apos;nginx&apos; --name &apos;nginx server&apos; -p 8000 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/linux/JsonServer-lowdb-hotel-for-mock-api-server.html</link> <guid>https://luowei.github.io/linux/JsonServer-lowdb-hotel-for-mock-api-server</guid> <pubDate>Mon, 27 Jun 2016 00:00:00 +0800</pubDate> </item> <item> <title>NSURLConnection 与 NSURLSession 区别</title> <description> &lt;h1 id=&quot;nsurlconnection-与-nsurlsession-区别&quot;&gt;NSURLConnection 与 NSURLSession 区别&lt;/h1&gt; &lt;h2 id=&quot;nsurlsession-官方说法&quot;&gt;NSURLSession 官方说法&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLSession&lt;/code&gt; 是iOS7后出来的替代 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLConnection&lt;/code&gt; 的API;&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLSession&lt;/code&gt; 通过绑定一个 delegate 在一个网络会话的生命周期里调用某些事件；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLSession&lt;/code&gt; 对象是线程安全的；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLSession&lt;/code&gt; 默认使用系统提供的delegate，并适当的使用现有的代码使用；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLSession&lt;/code&gt; 通过创建 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLSessionTask&lt;/code&gt; 代表资源被加载的任务，类似 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLConnection&lt;/code&gt;对象，但相比有更多可控制和定制的 delegate 模型；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLSessionTask&lt;/code&gt; 对象创建后是处于挂起状态，只有发&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-resume&lt;/code&gt;消息才会执行；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLSessionTask&lt;/code&gt; 的子类 在加载 Data 和 文件下载的使用上有所不同；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLSessionDataTask&lt;/code&gt; 接收到资源时会回调 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RLSession:dataTask:didReceiveData:&lt;/code&gt; 代理method；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLSessionUploadTask&lt;/code&gt; 与 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLSessionDataTask&lt;/code&gt; 的构造方法不同，他需求显示的引用file或data object；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLSessionDownloadTask&lt;/code&gt; 会直接把response data写入到临时文件，网络会话结束后，delegate 会发送一个 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;URLSession:downloadTask:didFinishDownloadingToURL:&lt;/code&gt; 消息来处理下载文件，如果中途取消则会生成一个Blob Data以便下次恢复下载；&lt;/li&gt; &lt;li&gt;从iOS9开始，使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLSessionStream&lt;/code&gt;可以通过一个给定的主机和端口直接建立TCP/IP连接；&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;nsurlsession的优点参考为什么要使用nsurlsession&quot;&gt;NSURLSession的优点(参考:&lt;a href=&quot;http://www.jianshu.com/p/045cdfdaaf6e&quot;&gt;为什么要使用NSURLSession&lt;/a&gt;)&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;后台上传和下载：&lt;/code&gt;只需在创建NSURLSession的时候配置一个选项，就能得到后台网络的所有好处;&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;能够暂停和恢复网络操作：&lt;/code&gt;使用NSURLSession API能够暂停，停止，恢复所有的网络任务，再也完全不需要子类化NSOperation;&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;可配置的容器：&lt;/code&gt;对于NSURLSession里面的requests来说，每个NSURLSession都是可配置的容器。举个例来说，假如你需要设置HTTP header选项，你只用做一次，session里面的每个request就会有同样的配置。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;提高认证处理：&lt;/code&gt;认证是在一个指定的连接基础上完成的。在使用NSURLConnection时，如果发出一个访问，会返回一个任意的request。此时，你就不能确切的知道哪个request收到了访问。而在NSURLSession中，就能用代理处理认证。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;丰富的代理模式：&lt;/code&gt;在处理认证的时候，NSURLConnection有一些基于异步的block方法，但是它的代理方法就不能处理认证，不管请求是成功或是失败。在NSURLSession中，可以混合使用代理和block方法处理认证。&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;nsurlsession-简单使用&quot;&gt;NSURLSession 简单使用&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;NSURLSession *session = [NSURLSession sharedSession]; [[session dataTaskWithURL:[NSURL URLWithString:londonWeatherUrl] completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) { // handle response }] resume]; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;nsurlsession-相关的类体系&quot;&gt;NSURLSession 相关的类体系&lt;/h2&gt; &lt;p&gt;&lt;img src=&quot;http://wx1.sinaimg.cn/mw690/680dfa44ly1ff0jygi5hfj20go0dwtaf.jpg&quot; alt=&quot;NSURLSession 类套&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;http://wx1.sinaimg.cn/mw690/680dfa44ly1ff0jz7cl7kj20go0d5gn2.jpg&quot; alt=&quot;NSURLSessionTask&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;参考：&lt;/strong&gt; &lt;a href=&quot;http://www.jianshu.com/p/04050398c602&quot;&gt;NSURLSession的基本使用&lt;/a&gt; &lt;a href=&quot;http://www.jianshu.com/p/fafc67475c73&quot;&gt;使用NSURLSession&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;nsurlconnection-官方说法&quot;&gt;NSURLConnection 官方说法&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLConnection&lt;/code&gt;本身对网络会话可用操作很少，仅提供了对异步加载 URL request 启动和取消操作；&lt;/li&gt; &lt;li&gt;利用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLConnectionDataDelegate&lt;/code&gt;协议，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLConnection&lt;/code&gt;可以把资源数据直接加载到内存；使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLConnectionDownloadDelegate&lt;/code&gt;协议，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLConnection&lt;/code&gt;可以把资源数据加载到文件；这两个协议都是&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLConnectionDelegate&lt;/code&gt;子协议；&lt;/li&gt; &lt;li&gt;网络请求结束后，若失败会向delegate发送&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;connection:didFailWithError:&lt;/code&gt;消息，若成功或下载成功则会发送&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;connectiondidFinishLoading:&lt;/code&gt;或&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;connectionDidFinishDownloading&lt;/code&gt;消息；&lt;/li&gt; &lt;li&gt;发送一个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-cancel&lt;/code&gt;消息会取消当前的网络加载器,但是不能保证其delegate的消息不被继续传递，所以这里要注意当取消了网络加载后其delegate释放后的问题；&lt;/li&gt; &lt;li&gt;当Connection被建立后，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLConnection&lt;/code&gt; 会执行一个对&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLRequest&lt;/code&gt;的深拷贝，这个request有可能因对NSURLProtocol 的 canonicalization 或 redirects 而发生改变；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLConnection&lt;/code&gt;通过&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;+connectionWithRequest:delegate:&lt;/code&gt;a或&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-initWithRequest:delegate:&lt;/code&gt;创建后会在当前的runloop立即执行，没必要发送&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-start&lt;/code&gt;消息；&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSURLConnection&lt;/code&gt;通过&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-initWithRequest:delegate:startImmediately:创建不会立马执，调用&lt;/code&gt;-scheduleWithRunLoop:forMode:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;或-setDelegateQueue:&lt;/code&gt;可指定delegate回调的执行上下文,然后调用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-start&lt;/code&gt;启动加载. 在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-start&lt;/code&gt;之前如果没有显式的指runloop,就在当前的runloop模式下默认执行；&lt;/li&gt; &lt;li&gt;NSURLConnectionSynchronousLoading 分类的同步方法&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;+sendSynchronousRequest:returningResponse:error&lt;/code&gt;会阻塞当前主线程run loop;NSURLConnectionQueuedLoading 分类的异步方法&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; +sendAsynchronousRequest:queue:completionHandler&lt;/code&gt;提供了异步机制，不会阻塞当前主线程的run loop。同时苹果不建意在加载自定资源时使用这两方法。&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;strong&gt;使用案例参考：&lt;/strong&gt;&lt;a href=&quot;http://www.jianshu.com/p/e72622831747&quot;&gt;iOS网络篇-NSURLConnection&lt;/a&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;同步请求: &lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;//发送同步请求(sendSynchronousRequest) NSData *data = [NSURLConnection sendSynchronousRequest:requst returningResponse:&amp;amp;response error:&amp;amp;error]; &lt;/code&gt;&lt;/pre&gt; &lt;/li&gt; &lt;li&gt;异步请求: &lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;//发送异步请求(sendAsynchronousRequest) [NSURLConnection sendAsynchronousRequest:requst queue:[[NSOperationQueue alloc]init] completionHandler:^(NSURLResponse * _Nullable response, NSData * _Nullable data, NSError * _Nullable connectionError) { NSLog(@&quot;----%@&quot;,[NSThread currentThread]); //解析数据 NSLog(@&quot;%@&quot;,[[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding]); }]; &lt;/code&gt;&lt;/pre&gt; &lt;/li&gt; &lt;li&gt;代理请求:&lt;/li&gt; &lt;/ul&gt; &lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;@interface ViewController ()&amp;lt;NSURLConnectionDataDelegate&amp;gt; ... @end @implementation //实现代理中的四个方法 //1.当接受到服务器响应的时候会调用:response(响应头) -(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {...} //2.当接受到服务器返回数据的时候调用(会调用多次) -(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {...} //3.当请求失败的时候调用 -(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error{...} //4.当请求结束(成功|失败)的时候调用 -(void)connectionDidFinishLoading:(NSURLConnection *)connection {...} //最后编写点击时调用的方法 -(void)sendRequestWithDelegate{ ... NSURLConnection *connect = [[NSURLConnection alloc]initWithRequest:request delegate:self startImmediately:NO]; //[connect cancel]; 取消 [connect start]; } @end &lt;/code&gt;&lt;/pre&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/ios-nsurlconnection-and-nsurlsession.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/ios-nsurlconnection-and-nsurlsession</guid> <pubDate>Mon, 20 Jun 2016 00:00:00 +0800</pubDate> </item> <item> <title>常见的基础原理相关的面试问题</title> <description> &lt;h1 id=&quot;常见的基础原理相关的问题&quot;&gt;常见的基础原理相关的问题&lt;/h1&gt; &lt;h2 id=&quot;数组&quot;&gt;数组：&lt;/h2&gt; &lt;p&gt;数组存储区间是连续的，二分查找时间复杂度小，为O(1)，寻址容易，插入和删除困难；&lt;/p&gt; &lt;h2 id=&quot;链表&quot;&gt;链表：&lt;/h2&gt; &lt;p&gt;链表存储区间离散，时间复杂度很大，达O（N），寻址困难，插入和删除容易；&lt;/p&gt; &lt;h2 id=&quot;哈希表&quot;&gt;哈希表：&lt;/h2&gt; &lt;p&gt;哈希表是一种寻址容易，插入删除也容易的数据结构，既满足了数据的查找方便，同时不占用太多的内容空间，使用也十分方便。 Hash表实现原理：使用哈希函数将被查找的Key转换为数组的索引，如果发生hash索引值碰撞冲突，则拉链法(开放定址法)和线性探测法等方法解决冲突，直到找出一个不冲突的哈希地址。&lt;/p&gt; &lt;h3 id=&quot;解决hash冲突的常见办法&quot;&gt;解决hash冲突的常见办法&lt;/h3&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;开放定址法（线性探测再散列，二次探测再散列，伪随机探测再散列）; 再哈希法; 链地址法; 建立一个公共溢出区; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Java中hashmap的解决办法就是采用的链地址法。&lt;/p&gt; &lt;h2 id=&quot;hashmapset实现原理&quot;&gt;HashMap/Set实现原理：&lt;/h2&gt; &lt;p&gt;HashMap对应的哈希表是由数组+链表组成的; HashSet:它是基于 HashMap 实现的，HashSet 底层使用 HashMap 来保存所有元素，因此 HashSet 的实现比较简单，相关 HashSet 的操作，基本上都是直接调用底层 HashMap 的相关方法来完成，我们应该为保存到 HashSet 中的对象覆盖 hashCode() 和 equals()。&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/tanggao1314/article/details/51457585&quot;&gt;hash算法原理详解&lt;/a&gt; &lt;a href=&quot;http://blog.jobbole.com/106733/&quot;&gt;常见hash算法的原理&lt;/a&gt; &lt;a href=&quot;http://blog.csdn.net/vking_wang/article/details/14166593&quot;&gt;HashMap实现原理分析&lt;/a&gt;&lt;/p&gt; &lt;/blockquote&gt; &lt;h2 id=&quot;图片文件压缩原理&quot;&gt;图片、文件压缩原理：&lt;/h2&gt; &lt;h3 id=&quot;几种常见文件压缩算法原理介绍&quot;&gt;几种常见文件压缩算法原理介绍&lt;/h3&gt; &lt;ol&gt; &lt;li&gt;&lt;strong&gt;字典算法：&lt;/strong&gt;字典算法是最为简单的压缩算法之一。它是把文本中出现频率比较多的单词或词汇组合做成一个对应的字典列表，并用特殊代码来表示这个单词或词汇。例如，有字典列表： &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;00=Chinese 01=People 02=China &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;p&gt;源文本：I am a Chinese people,I am from China 压缩后的编码为：I am a 00 01,I am from 02。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;固定位长算法（Fixed Bit Length Packing）:&lt;/strong&gt;这种算法是把文本用需要的最少的位来进行压缩编码。 比如八个十六进制数：1，2，3，4，5，6，7，8。转换为二进制为：00000001，00000010，00000011，00000100， 00000101，00000110，00000111，00001000。每个数只用到了低4位，而高4位没有用到（全为0），因此对低4位进行压缩编 码后得到：0001，0010，0011，0100，0101，0110，0111，1000。然后补充为字节得到：00010010， 00110100，01010110，01111000。所以原来的八个十六进制数缩短了一半，得到4个十六进制数：12，34，56，78。这也是比较常见的压缩算法之一。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;行程算法（RLE（Run Length Encoding））&lt;/strong&gt;：是一个针对无损压缩的非常简单的算法。它用重复字节和重复的次数来简单描述来代替重复的字节。尽管简单并且对于通常的压缩非常低效，但它有的时候却非常有用。&lt;/p&gt; &lt;/li&gt; &lt;li&gt;&lt;strong&gt;霍夫曼编码（Huffman Encoding）：&lt;/strong&gt;哈夫曼编码是无损压缩当中最好的方法。它使用预先二进制描述来替换每个符号，长度由特殊符号出现的频率决定。常见的符号需要很少的位来表示，而不常见的符号需要很多为来表示。哈夫曼算法在改变任何符号二进制编码引起少量密集表现方面是最佳的。然而，它并不处理符号的顺序和重复或序号的序列。&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;作者：加刘景长 链接：https://www.zhihu.com/question/19925039/answer/19738033 来源：知乎 著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。&lt;/p&gt; &lt;h3 id=&quot;图像可压缩的原因&quot;&gt;图像可压缩的原因&lt;/h3&gt; &lt;p&gt;因为有很多冗余信息，所以可压缩。常见图像、视频、音频数据中存在的冗余类型如下：&lt;/p&gt; &lt;ol&gt; &lt;li&gt;空间冗余:一幅图像表面上各采样点的颜色之间往往存在着空间连贯性，存在大量颜色相同或相近的区域；&lt;/li&gt; &lt;li&gt;时间冗余:这种冗余主要针对视频,运动图像（视频）一般为位于一时间轴区间的一组连续画面，其中的相邻帧往往包含相同的背景和移动物体，只不过移动物体所在的空间位置略有不同，所以后一帧的数据与前一帧的数据有许多共同的地方，这种共同性是由于相邻帧记录了相邻时刻的同一场景画面，所以称为时间冗余。&lt;/li&gt; &lt;li&gt;视觉冗余:人类的视觉系统由于受生理特性的限制，对于图像场的注意是非均匀的，人对细微的颜色差异感觉不明显。例如，人类视觉的一般分辨能力为26灰度等级，而一般的图像的量化采用的是28灰度等级，即存在视觉冗余。人类的听觉对某些信号反映不太敏感，使得压缩后再还原有允许范围的变化，人也感觉不出来。&lt;/li&gt; &lt;/ol&gt; &lt;h3 id=&quot;数据压缩方法的分类&quot;&gt;数据压缩方法的分类&lt;/h3&gt; &lt;ol&gt; &lt;li&gt;按照压缩方法是否产生失真分类 &lt;strong&gt;无失真压缩&lt;/strong&gt; &lt;ul&gt; &lt;li&gt;无失真压缩要求解压以后的数据和原始数据完全一致。解压后得到的数据是原数据的复制，是一种可逆压缩。&lt;/li&gt; &lt;li&gt;无失真压缩法去掉或减少数据中的冗余，恢复时再重新插到数据中，因此是可逆过程根据目前的技术水平，无损压缩算法一般可以把普通文件的数据压缩到原来的1/2－1/4。&lt;/li&gt; &lt;li&gt;一些常用的无损压缩算法有赫夫曼(Huffman)算法和LZW(Lenpel-Ziv &amp;amp; Welch)压缩算法。 &lt;strong&gt;有失真压缩&lt;/strong&gt;&lt;/li&gt; &lt;li&gt;解压以后的数据和原始数据不完全一致，是不可逆压缩方式。有失真压缩还原后，不影响信息的表达 例如，图像、视频、音频数据的压缩就可以采用有损压缩方法，因为其中包含的数据往往多于我们的视觉系统和听觉系统所能接收的信息，丢掉一些数据而不至于对声音或者图像所表达的意思产生误解，但可大大提高压缩比。图像、视频、音频数据的压缩比可高达100:1，但人的主观感受仍不会对原始信息产生误解。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;按照压缩方法的原理分类 &lt;strong&gt;预测编码:&lt;/strong&gt;基本思想是利用已被编码的点的数据值，预测邻近的一个像素点的数据值. &lt;strong&gt;变换编码:&lt;/strong&gt;基本思想是将图像的光强矩阵变换到系数空间上，然后对系数进行编码压缩. &lt;strong&gt;统计编码:&lt;/strong&gt;根据信息出现概率的分布特性而进行的压缩编码。比如霍夫曼编码。&lt;/li&gt; &lt;/ol&gt; &lt;h3 id=&quot;图像压缩编码&quot;&gt;图像压缩编码&lt;/h3&gt; &lt;ol&gt; &lt;li&gt;行程编码（RLE）:这是最好理解的一种编码了。现实中有许多这样的图像，在一幅图像中具有许多颜色相同的图块。在这些图块中，许多行上都具有相同的颜色，或者在一行上有许多连续的像素都具有相同的颜色值。在这种情况下就不需要存储每一个像素的颜色值，而仅仅存储一个像素的颜色值，以及具有相同颜色的像素数目就可以，或者存储像素的颜色值，以及具有相同颜色值的行数。 &lt;ul&gt; &lt;li&gt;这种压缩编码称为行程编码(run length encoding，RLE)，具有相同颜色并且是连续的像素数目称为行程长度。例如,字符串&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AAABCDDDDDDDDBBBBB&lt;/code&gt;,利用RLE原理可以压缩为&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;3ABC8D5B&lt;/code&gt;；&lt;/li&gt; &lt;li&gt;RLE编码简单直观，编码/解码速度快，因此许多图形和视频文件，如.BMP .TIFF及AVI等格式文件的压缩均采用此方法；&lt;/li&gt; &lt;li&gt;RLE适用于计算机生成的图像，例如。BMP、TIF等，灰度图像等，不适于颜色丰富的自然图像。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;哈夫曼编码（Huffman)：由于图像中表示颜色的数据出现的概率不同，对于出现频率高的赋（编）予较短字长的码，对出现频率小的编于较长字长的码，从而减少总的代码量，但不减少总的信息量。&lt;/li&gt; &lt;li&gt;DCT编码：将在空域上描述的图象，经过某种变换（通常采用，余弦变换、傅立叶变换、沃尔什变换等），在某种变换域里进行描述。在变换域里，首先降低了图象的相关性；其次通过某种图象处理（如频域的二维滤波）以及熵编码，则可进一步压缩图象的编码比特率。这种变换常用于JPEG图像压缩。&lt;/li&gt; &lt;/ol&gt; &lt;h3 id=&quot;24位bmp&quot;&gt;24位bmp&lt;/h3&gt; &lt;p&gt;24位bmp是公认最好的图片存储格式,存储了图片所有的信息，24位bmp是每像素用24位二进制存储该像素点的图像信息，相当于3字节。所以，图像占用空间大小就可以算了。&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;将图像长宽单位换位像素（比如：1024X960 800X600），则文件大小为（长X宽X３）字节. 如：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;800X600的图片大小为800X600X3＝1440000字节=1.44兆&lt;/code&gt;,&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1024X960的图像大小为2.95兆&lt;/code&gt;。 16位bmp则是24为的三分之二大小。 256色是２的８次方，相当于８位的bmp。&lt;/p&gt; &lt;/blockquote&gt; &lt;h3 id=&quot;jpg的压缩过程jpeg压缩分四个步骤实现&quot;&gt;JPG的压缩过程：jpeg压缩分四个步骤实现&lt;/h3&gt; &lt;ol&gt; &lt;li&gt;颜色模式转换及采样：rgb色彩系统是我们最常用的表示颜色的方式。jpeg采用的是ycbcr色彩系统。 &lt;ul&gt; &lt;li&gt;要用jpeg基本压缩法处理全彩色图像，得先把rgb颜色模式图像数据，转换为ycbcr颜色模式的数据。y代表亮度，cb和cr则代表色度、饱和度。&lt;/li&gt; &lt;li&gt;通过计算公式可完成数据转换。&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;y=0.2990r+0.5870g+0.1140b&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cb=-0.1687r-0.3313g+0.5000b+128&lt;/code&gt;,&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cr=0.5000r-0.4187g-0.0813b＋128&lt;/code&gt;。&lt;/li&gt; &lt;li&gt;人类的眼晴对低频的数据比对高频的数据具有更高的敏感度，事实上，人类的眼睛对亮度的改变也比对色彩的改变要敏感得多，也就是说y成份的数据是比较重要的。&lt;/li&gt; &lt;li&gt;既然cb成份和cr成份的数据比较相对不重要，就可以只取部分数据来处理。以增加压缩的比例。&lt;/li&gt; &lt;li&gt;jpeg通常有两种采样方式：yuv411和yuv422，它们所代表的意义是y、cb和cr三个成份的数据取样比例。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;dct变换:dct变换的全称是离散余弦变换(discrete cosine transform)，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;是指将一组光强数据转换成频率数据，以便得知强度变化的情形&lt;/code&gt;。 &lt;ul&gt; &lt;li&gt;压缩时，将原始图像数据分成8*8数据单元矩阵，例如亮度值的第一个矩阵内容如下：jpeg将整个亮度矩阵与色度cb矩阵，饱和度cr矩阵，视为一个基本单元称作mcu。&lt;/li&gt; &lt;li&gt;每个mcu所包含的矩阵数量不得超过10个。&lt;/li&gt; &lt;li&gt;例如，行和列采样的比例皆为4:2:2，则每个mcu将包含四个亮度矩阵，一个色度矩阵及一个饱和度矩阵。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;量化:图像数据转换为频率系数后，还得接受一项量化程序，才能进入编码阶段。&lt;/li&gt; &lt;li&gt;编码:huffman编码无专利权问题，成为jpeg最常用的编码方式，huffman编码通常是以完整的mcu来进行的。&lt;/li&gt; &lt;/ol&gt; &lt;blockquote&gt; &lt;p&gt;&lt;a href=&quot;http://www.cnblogs.com/glaivelee/archive/2011/10/10/2205151.html&quot;&gt;bmp/gif/jpg图象最底层原理分析&lt;/a&gt; &lt;a href=&quot;http://blog.csdn.net/newchenxf/article/details/51693753&quot;&gt;图像压缩原理&lt;/a&gt; &lt;a href=&quot;https://www.zhihu.com/question/19925039&quot;&gt;高压缩文件是如何实现的&lt;/a&gt;&lt;/p&gt; &lt;/blockquote&gt; &lt;h2 id=&quot;category和extension&quot;&gt;category和extension&lt;/h2&gt; &lt;p&gt;参考：&lt;a href=&quot;http://tech.meituan.com/DiveIntoCategory.html&quot;&gt;深入理解Objective-C：Category&lt;/a&gt;&lt;/p&gt; &lt;ol&gt; &lt;li&gt;extension &lt;ul&gt; &lt;li&gt;extension看起来很像一个匿名的category，但是extension和有名字的category几乎完全是两个东西。&lt;/li&gt; &lt;li&gt;extension在编译期决议，它就是类的一部分，在编译期和头文件里的@interface以及实现文件里的@implement一起形成一个完整的类，它伴随类的产生而产生，亦随之一起消亡。&lt;/li&gt; &lt;li&gt;extension一般用来隐藏类的私有信息，你必须有一个类的源码才能为一个类添加extension，所以你无法为系统的类比如NSString添加extension。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;category &lt;ul&gt; &lt;li&gt;category则完全不一样，它是在运行期决议的。&lt;/li&gt; &lt;li&gt;extension可以添加实例变量，而category是无法添加实例变量的(可通过object_associate动态绑定变量)。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;category真面目 &lt;ul&gt; &lt;li&gt;所有的OC类和对象，在runtime层都是用struct表示的，category也不例外，在runtime层，category用结构体category_t（在objc-runtime-new.h中可以找到此定义），它包含了。 ``` 1)、类的名字（name） 2)、类（cls） 3)、category中所有给类添加的实例方法的列表（instanceMethods） 4)、category中所有添加的类方法的列表（classMethods） 5)、category实现的所有协议的列表（protocols） 6)、category中添加的所有属性（instanceProperties）&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;typedef struct category_t { const char *name; classref_t cls; struct method_list_t *instanceMethods; struct method_list_t *classMethods; struct protocol_list_t *protocols; struct property_list_t *instanceProperties; } category_t; ```&lt;/p&gt; &lt;/li&gt; &lt;li&gt;category的加载机制 &lt;ul&gt; &lt;li&gt;首先编译器生成了&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;实例方法列表&lt;/code&gt;OBJC$_CATEGORY_INSTANCE_METHODSMyClass$_MyAddition和&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;属性列表&lt;/code&gt;OBJC$_PROP_LISTMyClass$_MyAddition。另外category的名字是用来给各种列表以及后面的category结构体本身命名，而且&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;有static来修饰，所以在同一个编译单元里category名不能重复，否则会出现编译错误&lt;/code&gt;。&lt;/li&gt; &lt;li&gt;其次，编译器生成了category本身OBJC$_CATEGORYMyClass$_MyAddition，并用前面生成的列表来初始化category本身。&lt;/li&gt; &lt;li&gt;最后，编译器在DATA段下的objc_catlist section里保存了一个大小为1的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;category_t的数组&lt;/code&gt;L_OBJC_LABELCATEGORY$（当然，如果有多个category，会生成对应长度的数组^_^），用于运行期category的加载。&lt;/li&gt; &lt;li&gt;对于OC运行时，入口方法如下（在objc-os.mm文件中）：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_objc_init(void)&lt;/code&gt;。_objc_init里面的调用的map_images最终会调用objc-runtime-new.mm里面的_read_images方法从而把category被附加到类上面。&lt;/li&gt; &lt;li&gt;在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_read_images&lt;/code&gt;方法里的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;addUnattachedCategoryForClass&lt;/code&gt;会把类和category做一个关联映射，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;remethodizeClass&lt;/code&gt;则通过&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;attachCategoryMethods&lt;/code&gt;把所有category的实例方法列表拼成了一个大的实例方法列表，然后转交给了attachMethodLists方法,从把category的实例方法添加到类上。同样在这个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_read_images&lt;/code&gt;也把category的协议以及属性添加到类上，以及把category的类方法和协议添加到类的metaclass上。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;注意：category的方法没有“完全替换掉”原来类已经有的方法，也就是说如果category和原来类都有methodA，那么category附加完成之后，类的方法列表里会有两个methodA；&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;category的方法被放到了新方法列表的前面，而原来类的方法被放到了新方法列表的后面，这也就是我们平常所说的category的方法会“覆盖”掉原来类的同名方法，这是因为运行时在查找方法的时候是顺着方法列表的顺序查找的&lt;/code&gt;，它只要一找到对应名字的方法，就会停止往下找了。&lt;/li&gt; &lt;li&gt;关于在类和category中都可以有+load方法问题： &lt;ul&gt; &lt;li&gt;在类的+load方法调用的时候，是可以调用category中声明的方法的，因为附加category到类的工作会先于+load方法的执行。&lt;/li&gt; &lt;li&gt;而+load方法，调用顺序是先类，后category，而category的+load执行顺序是根据编译顺序决定的。&lt;/li&gt; &lt;li&gt;虽然对于+load的执行顺序是这样，但是对于“覆盖”掉的方法，则会先找到最后一个编译的category里的对应方法。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;怎么调用到原来类中被category覆盖掉的方法？既然我们已经知道category其实并不是完全替换掉原来类的同名方法，只是category在方法列表的前面而已，所以我们只要顺着方法列表找到最后一个对应名字的方法，就可以调用原来类的方法。&lt;/li&gt; &lt;li&gt;在category里面是无法为category添加实例变量的。但是我们很多时候需要在category中添加和对象关联的值，这个时候可以求助关联对象来实现。所有的关联对象都由&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AssociationsManager&lt;/code&gt;管理，由一个静态&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AssociationsHashMap&lt;/code&gt;来存储所有的关联对象的，并且runtime的销毁对象函数&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_destructInstance&lt;/code&gt;里面会判断这个对象有没有关联对象，如果有，会调用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_object_remove_assocations&lt;/code&gt;做关联对象的清理工作。&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;strong&gt;参考：&lt;/strong&gt; &lt;a href=&quot;http://www.jianshu.com/p/922cd6220e4e&quot;&gt;iOS使用Category添加@property变量&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;关于autoreleasepool内存管理&quot;&gt;关于autoreleasepool内存管理&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;OC对象发送一条autorelease消息，就会把这个对象添加到最近的自动释放池中也就是栈顶释放池中，Autorelease实际上是把对release的调用延迟了，对于每一次autorelease，系统只是把对象放入了当前的autorelease pool中，当pool被释放时，pool中所有的对象都会被调用release。&lt;/li&gt; &lt;li&gt;不要把大量循环放在autoreleasepool中，这样会造成内存峰值上升，因为里面创建的对象要等释放池销毁了才能释放，这种情况应该手动管理内存。&lt;/li&gt; &lt;li&gt;尽量避免大内存使用该方法，对于这种延迟释放机制，尽量少用。&lt;/li&gt; &lt;li&gt;SDK中利用静态方法创建并返回的对象都已经autorelease，不需要我们自己手动release。&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;参考： &lt;a href=&quot;http://www.jianshu.com/p/d46f390db1f5&quot;&gt;黑幕背后的Autorelease&lt;/a&gt;&lt;/p&gt; &lt;h3 id=&quot;objective-c-associated-objects-的实现原理&quot;&gt;Objective-C Associated Objects 的实现原理&lt;/h3&gt; &lt;p&gt;每一个对象地址对应一个 ObjectAssociationMap 对象，而一个 ObjectAssociationMap 对象保存着这个对象的若干个关联记录。&lt;/p&gt; &lt;blockquote&gt; &lt;ol&gt; &lt;li&gt;AssociationsManager 是顶级的对象，维护了一个从 spinlock_t 锁到 AssociationsHashMap 哈希表的单例键值对映射；&lt;/li&gt; &lt;li&gt;AssociationsHashMap 是一个无序的哈希表，维护了从对象地址到 ObjectAssociationMap 的映射；&lt;/li&gt; &lt;li&gt;ObjectAssociationMap 是一个 C++ 中的 map ，维护了从 key 到 ObjcAssociation 的映射，即关联记录； 4.ObjcAssociation 是一个 C++ 的类，表示一个具体的关联结构，主要包括两个实例变量，_policy 表示关联策略，_value 表示关联对象。&lt;/li&gt; &lt;li&gt;一个对象的所有关联对象是在这个对象被释放时调用的 _object_remove_assocations 函数中被移除；&lt;/li&gt; &lt;/ol&gt; &lt;/blockquote&gt; &lt;blockquote&gt; &lt;ol&gt; &lt;li&gt;关联对象与被关联对象本身的存储并没有直接的关系，它是存储在单独的哈希表中的；&lt;/li&gt; &lt;li&gt;关联对象的五种关联策略与属性的限定符非常类似，在绝大多数情况下，我们都会使用 OBJC_ASSOCIATION_RETAIN_NONATOMIC 的关联策略，这可以保证我们持有关联对象； 关联对象的释放时机与移除时机并不总是一致，比如实验中用关联策略 OBJC_ASSOCIATION_ASSIGN 进行关联的对象，很早就已经被释放了，但是并没有被移除，而再使用这个关联对象时就会造成 Crash 。&lt;/li&gt; &lt;/ol&gt; &lt;/blockquote&gt; &lt;p&gt;&lt;strong&gt;参考：&lt;/strong&gt; &lt;a href=&quot;http://blog.leichunfeng.com/blog/2015/06/26/objective-c-associated-objects-implementation-principle/&quot;&gt;bjective-C Associated Objects 的实现原理&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;runloop相关&quot;&gt;Runloop相关&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;http://blog.ibireme.com/2015/05/18/runloop/&quot;&gt;深入理解RunLoop&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;kvo原理基于kvc及观察者模式实现&quot;&gt;KVO原理：基于KVC及观察者模式实现&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;Key-Value Coding(KVC)，即是指NSKeyValueCoding，一个非正式的Protocol，提供一种机制来间接访问对象的属性。KVO就是基于KVC实现的关键技术之一。&lt;/li&gt; &lt;li&gt;KVC里的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;valueForKey&lt;/code&gt; 和 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;valueForKeyPath&lt;/code&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;NSString *personsName = [p valueForKey:@&quot;name&quot;]; NSString *spousesName = [p valueForKeyPath:@&quot;spouse.name&quot;]; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt;Key-Value Observing (KVO),Key-Value Observing (KVO) 建立在 KVC 之上，它能够观察一个对象的 KVC key path 值的变化。以下实现步骤：&lt;/li&gt; &lt;/ul&gt; &lt;blockquote&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[p addObserver:self forKeyPath:@&quot;address&quot; options:0 context:KVO_CONTEXT_ADDRESS_CHANGED];&lt;/code&gt;添加观察者，即注册监听； 回调方法：observeValueForKeyPath:ofObject:change:context: 在被观察的 key path 的值变化时调用； dealloc 记得停止观察；&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;参考：&lt;a href=&quot;https://magicalboy.com/kvc_and_kvo/&quot;&gt;KVC 与 KVO 理解&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;ios中集合遍历方法的比较和技巧&quot;&gt;iOS中集合遍历方法的比较和技巧&lt;/h2&gt; &lt;p&gt;参考：&lt;a href=&quot;http://blog.sunnyxx.com/2014/04/30/ios_iterator/&quot;&gt;iOS中集合遍历方法的比较和技巧&lt;/a&gt;&lt;/p&gt; &lt;h3 id=&quot;ios中常用的遍历运算方法&quot;&gt;ios中常用的遍历运算方法&lt;/h3&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;经典for循环 for in (NSFastEnumeration) (参考：http://nshipster.com/enumerators/) makeObjectsPerformSelector kvc集合运算符(参考：http://www.jianshu.com/p/7675709d14a7) enumerateObjectsUsingBlock enumerateObjectsWithOptions(NSEnumerationConcurrent) dispatch_apply &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h3 id=&quot;比较后的结论&quot;&gt;比较后的结论&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;对于集合中对象数很多的情况下，for in (NSFastEnumeration)的遍历速度非常之快，但小规模的遍历并不明显（还没普通for循环快）；&lt;/li&gt; &lt;li&gt;使用kvc集合运算符运算很大规模的集合时，效率明显下降（100万的数组离谱的21秒多），同时占用了大量内存和cpu；&lt;/li&gt; &lt;li&gt;enumerateObjectsWithOptions(NSEnumerationConcurrent)和dispatch_apply(Concurrent)的遍历执行可以利用到多核cpu的优势（实验中在双核cpu上效率基本上x2）；&lt;/li&gt; &lt;li&gt;enumerateObjectsWithOptions，对于遍历的外部是保持同步的（遍历都完成后才继续执行下一行），猜想内部大概是gcd的dispatch_group或者信号量控制。&lt;/li&gt; &lt;li&gt;虽然说上面的测试结果表明，在集合内元素不多时，经典for循环的效率要比forin要高，但是从代码可读性上来看，就远不如forin看着更顺畅；&lt;/li&gt; &lt;li&gt;同样的还有kvc的集合运算符，一些内置的操作以keypath的方式声明，相比自己用for循环实现，一行代码就能搞定，清楚明了，还省去了重复工作；&lt;/li&gt; &lt;li&gt;在framework中增加了集合遍历的block支持后，对于需要index的遍历再也不需要经典for循环的写法了。&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;同步异步的的实现方法总结&quot;&gt;同步/异步的的实现方法总结&lt;/h3&gt; &lt;p&gt;同步：&lt;/p&gt; &lt;ol&gt; &lt;li&gt;gcd的dispatch_group、或者信号量控制、或加锁(NSLock)；&lt;/li&gt; &lt;li&gt;dispatch_barrier_sync和dispatch_barrier_async;&lt;/li&gt; &lt;li&gt;&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;异步：&lt;/p&gt; &lt;h3 id=&quot;几个gcd相关&quot;&gt;几个GCD相关&lt;/h3&gt; &lt;p&gt;&lt;strong&gt;dispatch_barrier_sync和dispatch_barrier_async其实是类似的(除了sync与async的区别), 所以本文重点讨论其中的一个接口&lt;/strong&gt; * 通过dispatch_barrier_async添加的block会等到之前添加所有的block执行完毕再执行； * 在dispatch_barrier_async之后添加的block会等到dispatch_barrier_async添加的block执行完毕再执行； * dispatch_barrier_async的上述特点只在自己创建的concurrent queue有效, 在serial queue和global concurrent queues中的作用和dispatch_sync完全相同；&lt;/p&gt; &lt;h2 id=&quot;设计模式相关&quot;&gt;设计模式相关&lt;/h2&gt; &lt;p&gt;###继承相对于组合模式的缺点；&lt;/p&gt; &lt;h3 id=&quot;策略模式&quot;&gt;策略模式：&lt;/h3&gt; &lt;ol&gt; &lt;li&gt;策略模式的用意是针对一组算法，将每一个算法封装到具有共同接口的独立的类中，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;从而使得它们可以相互替换&lt;/code&gt;。&lt;/li&gt; &lt;li&gt;策略模式使得算法可以在不影响到客户端的情况下发生变化。&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;使用策略模式可以把行为和环境分割开来&lt;/code&gt;。&lt;/li&gt; &lt;li&gt;环境类负责维持和查询行为类，各种算法则在具体策略中提供。由于算法和环境独立开。&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;算法的修改都不会影响环境和客户&lt;/code&gt;。&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;strong&gt;策略模式应用：&lt;/strong&gt;对象的比较、排序方法的实现,java中的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Sortable接口&lt;/code&gt;,OC里的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSSortDescriptor&lt;/code&gt;。&lt;/p&gt; &lt;p&gt;参考：&lt;a href=&quot;http://liumh.com/2016/01/06/ios-object-equal/&quot;&gt;iOS中的对象等同性&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt; &lt;p&gt;参考：&lt;a href=&quot;http://www.jianshu.com/p/d46f390db1f5&quot;&gt;iOS面试题小结&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/ios-base-principle-qa.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/ios-base-principle-qa</guid> <pubDate>Sun, 19 Jun 2016 00:00:00 +0800</pubDate> </item> <item> <title>iOS 中 UIView 的 Layout 相关概念</title> <description> &lt;h1 id=&quot;ios-中-uiview-的-layout-相关概念&quot;&gt;iOS 中 UIView 的 Layout 相关概念&lt;/h1&gt; &lt;h2 id=&quot;autolayout机制相关方法&quot;&gt;Autolayout机制相关方法&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;- (CGSize)sizeThatFits:(CGSize)size&lt;/code&gt;&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;- (void)sizeToFit&lt;/code&gt;&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;- (void)layoutSubviews&lt;/code&gt;&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;- (void)layoutIfNeeded&lt;/code&gt;&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;- (void)setNeedsLayout&lt;/code&gt;&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;- (void)setNeedsDisplay&lt;/code&gt;&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;- (void)drawRect&lt;/code&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;layoutsubviews在以下情况下会被调用&quot;&gt;layoutSubviews在以下情况下会被调用：&lt;/h3&gt; &lt;ol&gt; &lt;li&gt;init初始化不会触发layoutSubviews,但是是用initWithFrame进行初始化时，当rect的值不为CGRectZero时,也会触发;&lt;/li&gt; &lt;li&gt;addSubview会触发layoutSubviews;&lt;/li&gt; &lt;li&gt;设置view 的 Frame会触发layoutSubviews，当然前提是frame的值设置前后发生了变化;&lt;/li&gt; &lt;li&gt;滚动一个UIScrollView会触发layoutSubviews;&lt;/li&gt; &lt;li&gt;旋转Screen会触发父UIView上的layoutSubviews事件;&lt;/li&gt; &lt;li&gt;改变一个UIView大小的时候也会触发父UIView上的layoutSubviews事件;&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;em&gt;在苹果的官方文档中强调:&lt;/em&gt;&lt;/p&gt; &lt;p&gt;//当autoresizing 属性达不到你想要的 你就需要重写该方法&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; You should override this method only if the autoresizing behaviors of the subviews do not offer the behavior you want. &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;layoutSubviews, 当我们在某个类的内部调整子视图位置时，需要调用。 反过来的意思就是说：如果你想要在外部设置subviews的位置，就不要重写。&lt;/p&gt; &lt;h3 id=&quot;刷新子对象布局&quot;&gt;刷新子对象布局&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;-layoutSubviews方法：这个方法，默认没有做任何事情，需要子类进行重写。&lt;/li&gt; &lt;li&gt;-setNeedsLayout方法： 标记为需要重新布局，异步调用layoutIfNeeded刷新布局，不立即刷新，但layoutSubviews一定会被调用。&lt;/li&gt; &lt;li&gt; &lt;p&gt;-layoutIfNeeded方法：如果，有需要刷新的标记，立即调用layoutSubviews进行布局（如果没有标记，不会调用layoutSubviews）。&lt;/p&gt; &lt;/li&gt; &lt;li&gt;如果要立即刷新，要先调用[view setNeedsLayout]，把标记设为需要布局，然后马上调用[view layoutIfNeeded]，实现布局；&lt;/li&gt; &lt;li&gt; &lt;p&gt;在视图第一次显示之前，标记总是“需要刷新”的，可以直接调用[view layoutIfNeeded]；&lt;/p&gt; &lt;/li&gt; &lt;li&gt;sizeToFit会自动调用sizeThatFits方法；&lt;/li&gt; &lt;li&gt;sizeToFit不应该在子类中被重写，应该重写sizeThatFits；&lt;/li&gt; &lt;li&gt;sizeThatFits传入的参数是receiver当前的size，返回一个适合的size；&lt;/li&gt; &lt;li&gt;sizeToFit可以被手动直接调用；&lt;/li&gt; &lt;li&gt;sizeToFit和sizeThatFits方法都没有递归，对subviews也不负责，只负责自己；&lt;/li&gt; &lt;li&gt;layoutSubviews 对 subviews重新布局；&lt;/li&gt; &lt;li&gt;layoutSubviews方法调用先于drawRect；&lt;/li&gt; &lt;li&gt;setNeedsLayout在receiver标上一个需要被重新布局的标记，在系统runloop的下一个周期自动调用layoutSubviews；&lt;/li&gt; &lt;li&gt;layoutIfNeeded方法如其名，UIKit会判断该receiver是否需要layout.根据Apple官方文档,layoutIfNeeded方法应该是这样的；&lt;/li&gt; &lt;li&gt;layoutIfNeeded遍历的不是superview链，应该是subviews链；&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;重绘&quot;&gt;重绘&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;-drawRect:(CGRect)rect方法：重写此方法，执行重绘任务。&lt;/li&gt; &lt;li&gt;-setNeedsDisplay方法：标记为需要重绘，异步调用drawRect。&lt;/li&gt; &lt;li&gt; &lt;p&gt;-setNeedsDisplayInRect:(CGRect)invalidRect方法：标记为需要局部重绘。&lt;/p&gt; &lt;/li&gt; &lt;li&gt;drawRect是对receiver的重绘，能获得context。&lt;/li&gt; &lt;li&gt;setNeedDisplay在receiver标上一个需要被重新绘图的标记，在下一个draw周期自动重绘，iphone device的刷新频率是60hz，也就是1/60秒后重绘。&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;viewcontroller的关键流程&quot;&gt;ViewController的关键流程&lt;/h2&gt; &lt;p&gt;总结：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;loadView -&amp;gt; viewDidLoad -&amp;gt; viewWillAppear -&amp;gt; viewWillLayoutSubviews -&amp;gt; viewDidLayoutSubviews -&amp;gt; viewDidAppear -&amp;gt; viewWillDisappear -&amp;gt; viewDidDisappear -&amp;gt; dealloc &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;img src=&quot;http://wx1.sinaimg.cn/mw690/680dfa44ly1ff082e257fj207o0eg3ys.jpg&quot; alt=&quot;一般UIViewController的生命周期&quot; /&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;view{Will,Did}LayoutSubviews:&lt;/strong&gt; frame改变之前会调用viewWillLayoutSubviews(例如，横向iPhone时候frame就改变了。),同理可得viewDidLayoutSubviews是frame改变之后调用。&lt;/p&gt; &lt;h2 id=&quot;view层的组织与调用方案参考view层的组织和调用方案&quot;&gt;View层的组织与调用方案(参考：&lt;a href=&quot;http://www.infoq.com/cn/articles/ios-app-arch-2-1&quot;&gt;View层的组织和调用方案&lt;/a&gt;)&lt;/h2&gt; &lt;h3 id=&quot;一般来说一个不够好的view层架构主要原因有&quot;&gt;一般来说，一个不够好的View层架构，主要原因有：&lt;/h3&gt; &lt;ol&gt; &lt;li&gt;过多继承导致的复杂依赖关系；&lt;/li&gt; &lt;li&gt;模块化程度不够高，组件粒度不够细；&lt;/li&gt; &lt;li&gt;横向依赖；&lt;/li&gt; &lt;/ol&gt; &lt;h3 id=&quot;viewcontroller的代码规范&quot;&gt;viewController的代码规范：&lt;/h3&gt; &lt;p&gt;&lt;img src=&quot;http://wx3.sinaimg.cn/mw690/680dfa44ly1ff0kk8q3bmj20go0iktde.jpg&quot; alt=&quot;viewController的代码规范&quot; /&gt;&lt;/p&gt; &lt;h3 id=&quot;所有的属性都使用getter和setter&quot;&gt;所有的属性都使用getter和setter&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;不要在viewDidLoad里面初始化你的view然后再add，这样代码就很难看。&lt;/li&gt; &lt;li&gt;在viewDidload里面只做addSubview的事情，然后在viewWillAppear里面做布局的事情（这里在最后还会讨论）&lt;/li&gt; &lt;li&gt;最后在viewDidAppear里面做Notification的监听之类的事情。&lt;/li&gt; &lt;li&gt;至于属性的初始化，则交给getter去做。&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;使用派生实现统一配置的缺点&quot;&gt;使用派生实现统一配置的缺点：&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;派生属于藕合，会增加使用成本和集成成本；&lt;/li&gt; &lt;li&gt;上手接受成本高，新人不能按照常规原生的做法去做事情，需要额外学习；&lt;/li&gt; &lt;li&gt;使用AOP方式： &lt;ul&gt; &lt;li&gt;对于方法拦截，很容易想到Method Swizzling，那么我们可以写一个实例，在App启动的时候添加针对UIViewController的方法拦截；&lt;/li&gt; &lt;li&gt;使用NSObject的load函数，在应用启动时自动监听；&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;Category是最典型的化继承为组合的手段；&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;关于constraints在哪添加的问题&quot;&gt;关于Constraints在哪添加的问题&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;苹果在文档中指出，updateViewConstraints是用来做add constraints的地方；&lt;/li&gt; &lt;li&gt;各种测试和各种文档，在viewDidLoad里面开一个layoutPageSubviews的方法，然后在这个里面创建Constraints并添加，会比较好；&lt;/li&gt; &lt;/ol&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/ios-view-layout-circle.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/ios-view-layout-circle</guid> <pubDate>Sat, 18 Jun 2016 00:00:00 +0800</pubDate> </item> <item> <title>OC中的运行时及Swift中的结构体及值类型</title> <description> &lt;h1 id=&quot;oc中的运行时及swift中的结构体及值类型&quot;&gt;OC中的运行时及Swift中的结构体及值类型&lt;/h1&gt; &lt;h2 id=&quot;oc中的运行时&quot;&gt;&lt;strong&gt;OC中的运行时&lt;/strong&gt;&lt;/h2&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;OC本身是一种强类型语言，但其运行时功能让它又有了动态语言的特点。OC中对象的类型和对象所执行的方法都是在运行时阶段进行查找并确认的，这种机制被称为动态绑定。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;在很多语言，比如 C ，调用一个方法其实就是跳到内存中的某一点并开始执行一段代码。没有任何动态的特性，因为这在编译时就决定好了。而在 Objective-C 中，[object foo] 语法并不会立即执行 foo 这个方法的代码。它是在运行时给 object 发送一条叫 foo 的消息。这个消息，也许会由 object 来处理，也许会被转发给另一个对象，或者不予理睬假装没收到这个消息。多条不同的消息也可以对应同一个方法实现。这些都是在程序运行的时候决定的。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Objective-C 是一个动态语言，这意味着它不仅需要一个编译器，也需要一个运行时系统来动态得创建类和对象、进行消息传递和转发。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;OC是C语言的超集，所以OC中面向对象的功能在底层也是使用C语言来实现，是通过引入特有的运行时库，形成一门支持面向对象特性的语言。即一个动态链接库——libobjc.A.dylib。这个动态库里面提供了Objective-C语言所需的各种动态特性。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;想要支持运行时多态，代码中一定包含有运行时所需的判断数据。Java的运行时信息都在.class文件中按规范格式保留下来；编译后的C++代码也一样保有RTTI，而Objective-C代码中的运行时信息都保留在编译过后的目标文件中（.o）。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;在OC中，由于动态绑定机制使得程序直到运行时才能清楚那个方法需要被执行，甚至通过使用底层的运行时函数，就可以更改调用的方法或改变方法内部的功能实现，这些特性使得OC成为一门真正的动态语言。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;objc_msgSend是一个可变参数函数，其中第一个参数代表消息的接收者，第二个参数代表消息的选择器，后续参数表示消息发送时附带的参数。编译器在编译期间就会将发送消息的代码转换为objc_msgSend函数。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;消息传递&lt;/p&gt; &lt;ul&gt; &lt;li&gt;在编译时你写的 Objective-C 函数调用的语法都会被翻译成一个 C 的函数调用 - objc_msgSend() 。比如，下面两行代码就是等价的：&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; [array insertObject:foo atIndex:5]; objc_msgSend(array, @selector(insertObject:atIndex:), foo, 5); &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;ul&gt; &lt;li&gt;消息传递的关键藏于 objc_object 中的 isa 指针和 objc_class 中的class dispatch table。objc_object,objc_class以及Ojbc_method。在 Objective-C 中，类、对象和方法都是一个 C 的结构体，从 objc/objc.h 头文件中，我们可以找到他们的定义:&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; struct objc_object { Class isa OBJC_ISA_AVAILABILITY; }; struct objc_class { Class isa OBJC_ISA_AVAILABILITY; #if !__OBJC2__ Class super_class; const char *name; long version; long info; long instance_size; struct objc_ivar_list *ivars; **struct objc_method_list **methodLists**; **struct objc_cache *cache**; struct objc_protocol_list *protocols; #endif }; struct objc_method_list { struct objc_method_list *obsolete; int method_count; #ifdef __LP64__ int space; #endif /* variable length structure */ struct objc_method method_list[1]; }; struct objc_method { SEL method_name; char *method_types; /* a string representing argument/return types */ IMP method_imp; }; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;ul&gt; &lt;li&gt;发送一条消息也就 objc_msgSend 做了什么事。举 objc_msgSend(obj, foo) 这个例子来说： &lt;ol&gt; &lt;li&gt;首先，通过 obj 的 isa 指针找到它的 class ;&lt;/li&gt; &lt;li&gt;在 class 的 method list 找 foo ;&lt;/li&gt; &lt;li&gt;如果 class 中没到 foo，继续往它的 superclass 中找 ;&lt;/li&gt; &lt;li&gt;一旦找到 foo 这个函数，就去执行它的实现IMP .&lt;/li&gt; &lt;/ol&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;Message Forward 消息转发： &lt;ul&gt; &lt;li&gt;当消息派发流程最终在对象的类和父类中都没有找到对应选择器的方法时，就会开启消息转发流程。&lt;/li&gt; &lt;li&gt;首先，第一步会先调用消息接收者所在类的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;resolveInstanceMethod:&lt;/code&gt;方法，该方法返回一个BOOL值，表示是否动态添加一个方法来响应当前消息选择器。如果发送的消息是一个类方法，则会调用另一个类似的方法&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;resolveClassMethod:&lt;/code&gt;。&lt;/li&gt; &lt;li&gt;消息接收者所在类重写了&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;resolveInstanceMethod:&lt;/code&gt;方法并返回YES，也就意味着想要动态添加一个方法来响应当前的消息选择器，可以在重写的方法内使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;class_addMethod&lt;/code&gt;函数来为当前类添加方法。&lt;/li&gt; &lt;li&gt;如果上面过程中，并没有新方法能响应消息选择器，则会进入消息转发流程的第二步。在第二步中系统会调用当前消息接收者所在类的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;forwardingTargetForSelector:&lt;/code&gt;方法，用以询问能否将该条消息发送给其他接收者来处理，方法的返回值就代表这个新的接收者，如果不允许将消息转发给其他接收者则返回nil。&lt;/li&gt; &lt;li&gt;如果&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;forwardingTargetForSelector:&lt;/code&gt;方法的返回值为nil，那么消息转发机制还要继续进行最后一步。在这一步中，系统会将尚未处理的消息包装成一个NSInvocation对象，其内部包含与该消息相关的所有信息，比如消息的选择器、目标接收者、参数等。之后系统会调用消息接收者所在类的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;forwardInvocation:&lt;/code&gt;方法，并将生成的NSInvocation对象作为参数传入。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;Method Swizzing 方法调配 &lt;ul&gt; &lt;li&gt;OC中方法和消息选择器之间的关系,在运行时头文件中，我们可以找到方法的底层结构定义;&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; struct objc_method { SEL method_name; char *method_types; IMP method_imp; } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;可以看出，每一个方法内部都包含三个成员，第一个是选择器代表方法的名字，第二个是方法的类型，其值是一个C语言字符串，可以参考前文讲过类型编码，最后一个是C语言中的函数指针，用以指向方法具体执行的函数。我们可以把方法的内部结构理解为每一个SEL选择器（可以当做是方法名）对应一个具体的IMP函数（可以当做是方法的实现），这也是SEL被称为选择器的原因。这样我们就可以更加清楚地理解消息派发时，系统是如何根据消息选择器来查找对应的方法并跳转到方法的具体实现的了。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;因为消息选择器和方法实现之间的一对一关系后，我们接下来开始介绍方法调配技术，它其实就是利用运行时提供的函数来动态修改选择器和方法实现之间的对应关系的一种技术。利用这种技术，我们可以在运行时为某个类添加选择器或更改选择器所对应的方法实现&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;hr /&gt; &lt;p&gt;以上参考： &lt;a href=&quot;http://wxgbridgeq.github.io/blog/2015/07/09/effective-oc-note-second/&quot;&gt;理解OC运行时&lt;/a&gt; &lt;a href=&quot;http://www.molotang.com/articles/1912.html&quot;&gt;Objective-C的对象模型与运行时&lt;/a&gt; &lt;a href=&quot;http://tech.glowing.com/cn/objective-c-runtime/&quot;&gt;Objective-C Runtime&lt;/a&gt;&lt;/p&gt; &lt;hr /&gt; &lt;h2 id=&quot;swift中的结构体及值类型&quot;&gt;&lt;strong&gt;Swift中的结构体及值类型&lt;/strong&gt;&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;相同点 &lt;ul&gt; &lt;li&gt;Swift中的类和结构体非常类似，都具有定义和使用属性、方法、下标和构造器、扩展、符号协议等面向对象特性。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;不同点 &lt;ul&gt; &lt;li&gt;但是结构体不具有继承性、运行时强制类型转换、使用析构器和使用引用计数的多次引用等能力。&lt;/li&gt; &lt;li&gt;Swift中只有类是引用类型，其他类型全部是值类型（整型、浮点型、布尔型、字符串、元组、集合、枚举以及函数类型、闭包类型）。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;值类型的优势与使用场景 &lt;ul&gt; &lt;li&gt;默认情况下，值类型被强制使用或者至少说被鼓励使用在属性上，来使得工作更清晰。&lt;/li&gt; &lt;li&gt;值类型是稳定的，值类型不具有行为，它是非常稳定的。虽然其中的一些方法可能会使值类型本身发生改变，但是控制流却还是严格地受控于该实例的唯一所有者。&lt;/li&gt; &lt;li&gt;一个典型的值类型对任何外部组件的行为都没有隐式的依赖。它是孤立的。&lt;/li&gt; &lt;li&gt;值类型是可交换的，因为每次将值类型赋给一个新变量的时候，该值类型都是被复制的，所以，所有的这些副本都是可交换的。&lt;/li&gt; &lt;li&gt;值层 (value layer) 实际上没有状态；它仅仅用来表示和变换数据。&lt;/li&gt; &lt;li&gt;对象可以和其他对象通信，但是通常它们发送的是值，而不是引用，除非它们确实想要和外部不可或缺的层创建一个持久的连接。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;hr /&gt; &lt;p&gt;以上参考了：&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://www.objccn.io/issue-16-2/&quot;&gt;结构体和值类型&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.cnblogs.com/chebaodaren/p/5590994.html&quot;&gt;Swift - 类和结构体&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://swift.gg/2015/10/20/thinking-in-swift-3/&quot;&gt;Swift 编程思想，第三部分：结构体和类&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/ios-referencetype-swift-struct-difference.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/ios-referencetype-swift-struct-difference</guid> <pubDate>Fri, 17 Jun 2016 00:00:00 +0800</pubDate> </item> <item> <title>iOS中的MVC、MVVM 研究</title> <description> &lt;h1 id=&quot;ios中的mvcmvvm-研究&quot;&gt;iOS中的MVC、MVVM 研究&lt;/h1&gt; &lt;h2 id=&quot;一个标准的mvc架构&quot;&gt;一个标准的MVC架构&lt;/h2&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Model&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; @interface Person : NSObject - (instancetype)initwithSalutation:(NSString *)salutation firstName:(NSString *)firstName lastName:(NSString *)lastName birthdate:(NSDate *)birthdate; @property (nonatomic, readonly) NSString *salutation; @property (nonatomic, readonly) NSString *firstName; @property (nonatomic, readonly) NSString *lastName; @property (nonatomic, readonly) NSDate *birthdate; @end &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;ViewController,有一个 PersonViewController ，在 viewDidLoad 里，只需要基于它的 model 属性设置一些 Label 即可&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; - (void)viewDidLoad { [super viewDidLoad]; if (self.model.salutation.length &amp;gt; 0) { self.nameLabel.text = [NSString stringWithFormat:@&quot;%@ %@ %@&quot;, self.model.salutation, self.model.firstName, self.model.lastName]; } else { self.nameLabel.text = [NSString stringWithFormat:@&quot;%@ %@&quot;, self.model.firstName, self.model.lastName]; } NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init]; [dateFormatter setDateFormat:@&quot;EEEE MMMM d, yyyy&quot;]; self.birthdateLabel.text = [dateFormatter stringFromDate:model.birthdate]; } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;从mvc-到-mvvm-的演化&quot;&gt;从MVC 到 MVVM 的演化&lt;/h2&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;优点&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; - MVVM 可以兼容你当下使用的 MVC 架构； - MVVM 增加你的应用的可测试性； MVVM 配合一个绑定机制效果最好。 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;缺点&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; - 学习成本和开发成本都很高,新人很难上手； - iOS中，并没有现成的绑定机制可用，要么使用 KVO，要么引入类似 ReactiveCocoa 这样的第三方库； - 数据绑定使 Debug 变得更难了，堆栈结构更复杂了，使得对象生命周期很难追踪； - 对于过大的项目，数据绑定需要花费更多的内存; - ReactiveCocoa 在国内外还都是在小众领域，没有被大量接受成为主流的编程框架。在别的语言中，例如 Java 中的 RxJava 也同样没有成为主流; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;用一个 View Model 来增强它&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; @interface PersonViewModel : NSObject - (instancetype)initWithPerson:(Person *)person; @property (nonatomic, readonly) Person *person; @property (nonatomic, readonly) NSString *nameText; @property (nonatomic, readonly) NSString *birthdateText; @end &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;/ul&gt; &lt;p&gt;View Model 的实现大概如下：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; @implementation PersonViewModel - (instancetype)initWithPerson:(Person *)person { self = [super init]; if (!self) return nil; _person = person; if (person.salutation.length &amp;gt; 0) { _nameText = [NSString stringWithFormat:@&quot;%@ %@ %@&quot;, self.person.salutation, self.person.firstName, self.person.lastName]; } else { _nameText = [NSString stringWithFormat:@&quot;%@ %@&quot;, self.person.firstName, self.person.lastName]; } NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init]; [dateFormatter setDateFormat:@&quot;EEEE MMMM d, yyyy&quot;]; _birthdateText = [dateFormatter stringFromDate:person.birthdate]; return self; } @end &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;将 viewDidLoad 中的表示逻辑放入我们的 View Model 里了。此时，我们新的 viewDidLoad 就会非常轻量：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; - (void)viewDidLoad { [super viewDidLoad]; self.nameLabel.text = self.viewModel.nameText; self.birthdateLabel.text = self.viewModel.birthdateText; } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;在这个简单的例子中， Model 是不可变的，所以我们可以只在初始化的时候指定我们 View Model 的属性。对于可变 Model，我们还需要使用一些绑定机制，这样 View Model 就能在背后的 Model 改变时更新自身的属性。此外，一旦 View Model 上的 Model 发生改变，那 View 的属性也需要更新。Model 的改变应该级联向下通过 View Model 进入 View。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;在 OS X 上，我们可以使用 Cocoa 绑定，但在 iOS 上我们并没有这样好的配置可用。所以在iOS上一般可以通过 KVO 或 ReactiveCocoa 实现数据绑定；&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;ios-中-mvvm-的改进方案&quot;&gt;iOS 中 MVVM 的改进方案&lt;/h2&gt; &lt;p&gt;&lt;img src=&quot;http://gracelancy.com/assets/post/arch0.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;ol&gt; &lt;li&gt;对 ViewModel 不引入双向绑定机制或者观察机制，而是通过传统的代理回调或是通知来将 UI 事件传递给外界。这样有3个好处： &lt;ul&gt; &lt;li&gt;首先是 View 的完全解耦合，只需要确定好相应的 ViewModel 和 UI 事件的回调接口即可与 Model 层完全隔离；&lt;/li&gt; &lt;li&gt;ViewController 可以避免与 View 的具体表现打交道，这部分职责被转交给了 ViewModel，有效的减轻了 ViewController 的负担；&lt;/li&gt; &lt;li&gt;同时我们弃用了传统绑定机制，使用了传统的易于理解的回调机制来传递 UI 事件，降低了学习成本，同时使得数据的流入和流出变得易于观察和控制，降低了维护了调适的成本。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;对每一个 ViewController 都创建一个对应的 DataController，代码如下：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;@interface APEHomePracticeViewController () &amp;lt;APEHomePracticeSubjectsViewDelegate&amp;gt; @property (nonatomic, strong, nullable) UIScrollView *contentView; @property (nonatomic, strong, nullable) APEHomePracticeBannerView *bannerView; @property (nonatomic, strong, nullable) APEHomePracticeActivityView *activityView; @property (nonatomic, strong, nullable) APEHomePracticeSubjectsView *subjectsView; @property (nonatomic, strong, nullable) APEHomePracticeDataController *dataController; @end &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;在 viewDidLoad 的时候，初始化好各个 SubView，并设置好布局：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;- (void)setupContentView { self.contentView = [[UIScrollView alloc] init]; [self.view addSubview:self.contentView]; self.bannerView = [[APEHomePracticeBannerView alloc] init]; self.activityView = [[APEHomePracticeActivityView alloc] init]; self.subjectsView = [[APEHomePracticeSubjectsView alloc] init]; self.subjectsView.delegate = self; [self.contentView addSubview:self.bannerView]; [self.contentView addSubview:self.activityView]; [self.contentView addSubview:self.subjectsView]; // Layout Views ... } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;接下来，ViewController 会向 DataController 请求 Subject 相关的数据，并在请求完成后，用获得的数据生成 ViewModel，将其装配给 SubjectView，完成界面渲染，代码如下：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;- (void)fetchSubjectData { [self.dataController requestSubjectDataWithCallback:^(NSError *error) { if (error == nil) { [self renderSubjectView]; } }]; } - (void)renderSubjectView { APEHomePracticeSubjectsViewModel *viewModel = [APEHomePracticeSubjectsViewModel viewModelWithSubjects:self.dataController.openSubjects]; [self.subjectsView bindDataWithViewModel:viewModel]; } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;DataController,每一个 ViewController 都会有一个对应的 DataController，这一类 DataController 的主要职责是处理这个页面上的所有数据相关的逻辑，我们称其为 View Related Data Controller。&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// APEHomePracticeDataController.h @interface APEHomePracticeDataController : APEBaseDataController // 1 @property (nonatomic, strong, nonnull, readonly) NSArray&amp;lt;APESubject *&amp;gt; *openSubjects; // 2 - (void)requestSubjectDataWithCallback:(nonnull APECompletionCallback)callback; @end &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt;DataController 这一层是一个灵活性很高的部件，一个 DataController 可以复用更小的 DataController，这一类更小的 DataController 通常只会包含纯粹的或是更抽象的 Model 相关的逻辑，例如网络请求，数据库请求，或是数据加工等。我们称这一类 DataController 为 Model Related Data Controller。&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;Model Related Data Controller（以下为subjectDataController）通常会为上层提供正交的数据：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; // APEHomePracticeDataController.m @interface APEHomePracticeDataController () @property (nonatomic, strong, nonnull) APESubjectDataController *subjectDataController; @end @implementation APEHomePracticeDataController - (void)requestSubjectDataWithCallback:(nonnull APECompletionCallback)callback { APEDataCallback dataCallback = ^(NSError *error, id data) { callback(error); }; [self.subjectDataController requestAllSubjectsWithCallback:dataCallback]; [self.subjectDataController requestUserSubjectsWithCallback:dataCallback]; } - (nonnull NSArray&amp;lt;APESubject *&amp;gt; *)openSubjects { return self.subjectDataController.openSubjectsWithCurrentPhase ?: @[]; } @end &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;swift版的基于kvo-的-mvvm案例&quot;&gt;Swift版的基于KVO 的 MVVM案例&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import UIKit struct Person { // Model let firstName: String let lastName: String } protocol GreetingViewModelProtocol: class { var greeting: String? { get } var greetingDidChange: ((GreetingViewModelProtocol) -&amp;gt; ())? { get set } // function to call when greeting did change init(person: Person) func showGreeting() } class GreetingViewModel : GreetingViewModelProtocol { let person: Person var greeting: String? { didSet { self.greetingDidChange?(self) } } var greetingDidChange: ((GreetingViewModelProtocol) -&amp;gt; ())? required init(person: Person) { self.person = person } func showGreeting() { self.greeting = &quot;Hello&quot; + &quot; &quot; + self.person.firstName + &quot; &quot; + self.person.lastName } } class GreetingViewController : UIViewController { var viewModel: GreetingViewModelProtocol! { didSet { self.viewModel.greetingDidChange = { [unowned self] viewModel in self.greetingLabel.text = viewModel.greeting } } } let showGreetingButton = UIButton() let greetingLabel = UILabel() override func viewDidLoad() { super.viewDidLoad() self.showGreetingButton.addTarget(self.viewModel, action: &quot;showGreeting&quot;, forControlEvents: .TouchUpInside) } // layout code goes here } // Assembling of MVVM let model = Person(firstName: &quot;David&quot;, lastName: &quot;Blaine&quot;) let viewModel = GreetingViewModel(person: model) let view = GreetingViewController() view.viewModel = viewModel &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;hr /&gt; &lt;p&gt;以上参考：&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://objccn.io/issue-13-1/&quot;&gt;MVVM 介绍&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://blog.coding.net/blog/ios-architecture-patterns&quot;&gt;iOS 架构模式 - 简述 MVC, MVP, MVVM 和 VIPER&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://gracelancy.com/blog/2016/01/06/ape-ios-arch-design/&quot;&gt;猿题库 iOS 客户端架构设计&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.infoq.com/cn/articles/rethinking-mvc-mvvm&quot;&gt;被误解的MVC和被神化的MVVM&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/ios-mvc-mvvm-research.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/ios-mvc-mvvm-research</guid> <pubDate>Fri, 17 Jun 2016 00:00:00 +0800</pubDate> </item> <item> <title>iOS性能内存优化</title> <description> &lt;h1 id=&quot;ios性能内存优化&quot;&gt;iOS性能内存优化&lt;/h1&gt; &lt;h2 id=&quot;几个优化总体思路&quot;&gt;几个优化总体思路：&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;避免过多的CPU计算 &lt;ul&gt; &lt;li&gt;简化复杂频繁的布局计算&lt;/li&gt; &lt;li&gt;文本计算、格式转换、图像绘制、对象的创建调整等尽可能放到后台线程进行&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;避免图层混合 &lt;ul&gt; &lt;li&gt;确保控件的opaque属性设置为true，确保backgroundColor和父视图颜色一致且不透明&lt;/li&gt; &lt;li&gt;如无特殊需要，不要设置低于1的alpha值&lt;/li&gt; &lt;li&gt;确保UIImage没有alpha通道&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;避免临时转换 &lt;ul&gt; &lt;li&gt;确保图片大小和frame一致，不要在滑动时缩放图片&lt;/li&gt; &lt;li&gt;确保图片颜色格式被GPU支持，避免劳烦CPU转换&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;慎用离屏渲染 &lt;ul&gt; &lt;li&gt;绝大多数时候离屏渲染会影响性能&lt;/li&gt; &lt;li&gt;重写drawRect方法，设置圆角、阴影、模糊效果，光栅化都会导致离屏渲染&lt;/li&gt; &lt;li&gt;设置阴影效果是加上阴影路径&lt;/li&gt; &lt;li&gt;滑动时若需要圆角效果，开启光栅化&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;hr /&gt; &lt;h2 id=&quot;屏幕显示图像的原理&quot;&gt;屏幕显示图像的原理&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;CPU 计算好显示内容提交到 GPU，GPU 渲染完成后将渲染结果放入帧缓冲区，随后视频控制器会按照 VSync信号(垂直同步信号)逐行读取帧缓冲区的数据，经过可能的数模转换传递给显示器显示。&lt;/li&gt; &lt;li&gt;显示系统一般都是双缓冲机制，即引入两个缓冲区。GPU 会预先渲染好一帧放入一个缓冲区内，让视频控制器读取，当下一帧渲染好后，GPU 会直接把视频控制器的指针指向第二个缓冲器。这样对帧缓冲区的读取和刷新的效率会较大提升。&lt;/li&gt; &lt;li&gt;双缓冲又可能会带来画面撕裂的问题。当视频控制器还未读取完成时，即屏幕内容刚显示一半时，GPU 将新的一帧内容提交到帧缓冲区并把两个缓冲区进行交换后，视频控制器就会把新的一帧数据的下半段显示到屏幕上，就造成画面撕裂现象。&lt;/li&gt; &lt;li&gt;多双缓冲区为了解决画面撕裂的问题，GPU 通常有一个机制叫做垂直同步（简写也是 V-Sync），当开启垂直同步后，GPU 会等待显示器的 VSync 信号发出后，才进行新的一帧渲染和缓冲区更新。这样能解决画面撕裂现象，也增加了画面流畅度，但需要消费更多的计算资源，也会带来部分延迟。&lt;/li&gt; &lt;li&gt;iOS 设备会始终使用双缓存，并开启垂直同步。而安卓设备直到 4.1 版本，Google 才开始引入这种机制，目前安卓系统是三缓存+垂直同步。&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;卡顿产生的原因和解决方案&quot;&gt;卡顿产生的原因和解决方案&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;在 VSync 信号到来后，系统图形服务会通过 CADisplayLink 等机制通知 App，App 主线程开始在 CPU 中计算显示内容，比如视图的创建、布局计算、图片解码、文本绘制等。&lt;/li&gt; &lt;li&gt;随后 CPU 会将计算好的内容提交到 GPU 去，由 GPU 进行变换、合成、渲染。随后 GPU 会把渲染结果提交到帧缓冲区去，等待下一次 VSync 信号到来时显示到屏幕上。&lt;/li&gt; &lt;li&gt;由于垂直同步的机制，如果在一个 VSync 时间内，CPU 或者 GPU 没有完成内容提交，则那一帧就会被丢弃，等待下一次机会再显示，而这时显示屏会保留之前的内容不变。这就是界面卡顿的原因。所以CPU 和 GPU 不论哪个阻碍了显示流程，都会造成掉帧现象。&lt;/li&gt; &lt;/ul&gt; &lt;hr /&gt; &lt;h2 id=&quot;cpu-资源消耗原因和解决方案&quot;&gt;CPU 资源消耗原因和解决方案&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;布局计算。 &lt;ul&gt; &lt;li&gt;视图布局的计算是 App 中最为常见的消耗 CPU 资源的地方。如果能在后台线程提前计算好视图布局、并且对视图布局进行缓存，那么这个地方基本就不会产生性能问题了。&lt;/li&gt; &lt;li&gt;不论通过何种技术对视图进行布局，其最终都会落到对 UIView.frame/bounds/center 等属性的调整上。对这些属性的调整非常消耗资源，所以尽量提前计算好布局，在需要时一次性调整好对应属性，而不要多次、频繁的计算和调整这些属性。&lt;/li&gt; &lt;li&gt;Autolayout。Autolayout对于复杂视图来说常常会产生严重的性能问题。随着视图数量、层次的增长，Autolayout 带来的 CPU 消耗会呈指数级上升。当然可以使用 ComponentKit、AsyncDisplayKit 等框架替代解决。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;文本计算。 &lt;ul&gt; &lt;li&gt;如果一个界面中包含大量文本（比如微博微信朋友圈等），文本的宽高计算会占用很大一部分资源，并且不可避免。&lt;/li&gt; &lt;li&gt;如果你对文本显示没有特殊要求，可以参考下 UILabel 内部的实现方式：用 [NSAttributedString boundingRectWithSize:options:context:] 来计算文本宽高，用 -[NSAttributedString drawWithRect:options:context:] 来绘制文本。尽管这两个方法性能不错，但仍旧需要放到后台线程进行以避免阻塞主线程。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;文本渲染。 &lt;ul&gt; &lt;li&gt;屏幕上能看到的所有文本内容控件，包括 UIWebView，在底层都是通过 CoreText 排版、绘制为 Bitmap 显示的。常见的文本控件 （UILabel、UITextView 等），其排版和绘制都是在主线程进行的，当显示大量文本时，CPU 的压力会非常大。&lt;/li&gt; &lt;li&gt;对此解决方案只有一个，那就是自定义文本控件，用 TextKit 或最底层的 CoreText 对文本异步绘制。尽管这实现起来非常麻烦，但其带来的优势也非常大，CoreText 对象创建好后，能直接获取文本的宽高等信息，避免了多次计算（调整 UILabel 大小时算一遍、UILabel 绘制时内部再算一遍）；CoreText 对象占用内存较少，可以缓存下来以备稍后多次渲染。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;图片的解码。 &lt;ul&gt; &lt;li&gt;原理：像素在内存中的布局和它在磁盘中的存储方式并不相同，每个像素有R、G、B和alpha四个值，每个值占用1字节，因此每个像素占用4字节的内存空间。一张1920*1080的照片(iPhone6 Plus的分辨率)一共有2,073,600个像素，因此占用了超过8Mb的内存。但是一张同样分辨率的PNG格式或JPEG格式的图片一般情况下不会有这么大。这是因为JPEG将像素数据进行了一种非常复杂且可逆的转化。&lt;/li&gt; &lt;li&gt;解码过程： 当我们打开JPEG格式的图片时，CPU会进行一系列解码相关运算，将JPEG图片解压成像素数据。显然这个工作会消耗不少时间，所以不应该在滑动时进行，我们应该预先处理好图片。&lt;/li&gt; &lt;li&gt;当你用 UIImage 或 CGImageSource 的那几个方法创建图片时，图片数据并不会立刻解码。图片设置到 UIImageView 或者 CALayer.contents 中去，并且 CALayer 被提交到 GPU 前，CGImage 中的数据才会得到解码。这一步是发生在主线程的，并且不可避免。&lt;/li&gt; &lt;li&gt;如果想要绕开这个机制，就需要预先处理好图片格式的转换。常见的做法是在后台线程先把图片绘制到 CGBitmapContext 中，然后从 Bitmap 直接创建图片。目前常见的网络图片库都自带这个功能。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;图像的绘制。 &lt;ul&gt; &lt;li&gt;图片都需要被缩放&lt;/li&gt; &lt;li&gt; &lt;p&gt;图像的绘制通常是指用那些以 CG 开头的方法把图像绘制到画布中，然后从画布创建图片并显示这样一个过程。这个最常见的地方就是 [UIView drawRect:] 里面了。由于 CoreGraphic 方法通常都是线程安全的，所以图像的绘制可以很容易的放到后台线程进行。一个简单异步绘制的过程大致如下（实际情况会比这个复杂得多，但原理基本一致）：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; - (void)display { dispatch_async(backgroundQueue, ^{ CGContextRef ctx = CGBitmapContextCreate(...); // draw in context... CGImageRef img = CGBitmapContextCreateImage(ctx); CFRelease(ctx); dispatch_async(mainQueue, ^{ layer.contents = img; }); }); } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;对象创建。对象的创建会分配内存、调整属性、甚至还有读取文件等操作，比较消耗 CPU 资源。尽量用轻量的对象代替重量的对象，可以对性能有所优化。比如 CALayer 比 UIView 要轻量许多，那么不需要响应触摸事件的控件，用 CALayer 显示会更加合适。 &lt;ul&gt; &lt;li&gt;如果对象不涉及 UI 操作，则尽量放到后台线程去创建，但可惜的是包含有 CALayer 的控件，都只能在主线程创建和操作。&lt;/li&gt; &lt;li&gt;尽量推迟对象创建的时间，并把对象的创建分散到多个任务中去。&lt;/li&gt; &lt;li&gt;如果对象可以复用，并且复用的代价比释放、创建新对象要小，那么这类对象应当尽量放到一个缓存池里复用。&lt;/li&gt; &lt;li&gt;通过 Storyboard 创建视图对象时，其资源消耗会比直接通过代码创建对象要大非常多。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;对象调整。对象的调整也经常是消耗 CPU 资源的地方。 &lt;ul&gt; &lt;li&gt;这里特别说一下 CALayer：CALayer 内部并没有属性，当调用属性方法时，它内部是通过运行时 resolveInstanceMethod 为对象临时添加一个方法，并把对应属性值保存到内部的一个 Dictionary 里，同时还会通知 delegate、创建动画等等，非常消耗资源。U&lt;/li&gt; &lt;li&gt;IView 的关于显示相关的属性（比如 frame/bounds/transform）等实际上都是 CALayer 属性映射来的，所以对 UIView 的这些属性进行调整时，消耗的资源要远大于一般的属性。对此你在应用中，应该尽量减少不必要的属性修改。&lt;/li&gt; &lt;li&gt;当视图层次调整时，UIView、CALayer 之间会出现很多方法调用与通知，所以在优化性能时，应该尽量避免调整视图层次、添加和移除视图。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;对象销毁。对象的销毁虽然消耗资源不多，但累积起来也是不容忽视的。&lt;/li&gt; &lt;/ul&gt; &lt;hr /&gt; &lt;h2 id=&quot;gpu-资源消耗原因和解决方案&quot;&gt;GPU 资源消耗原因和解决方案&lt;/h2&gt; &lt;p&gt;相对于 CPU 来说，GPU 能干的事情比较单一：接收提交的纹理（Texture）和顶点描述（三角形），应用变换（transform）、混合并渲染，然后输出到屏幕上。通常你所能看到的内容，主要也就是纹理（图片）和形状（三角模拟的矢量图形）两类。&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;避免短时间内大量图片的显示。&lt;/strong&gt;纹理的渲染，所有的 Bitmap，包括图片、文本、栅格化的内容，最终都要由内存提交到显存，绑定为 GPU Texture。不论是提交到显存的过程，还是 GPU 调整和渲染 Texture 的过程，都要消耗不少 GPU 资源。当在较短时间显示大量图片时（比如 TableView 存在非常多的图片并且快速滑动时），CPU 占用率很低，GPU 占用非常高，界面仍然会掉帧。避免这种情况的方法只能是尽量减少在短时间内大量图片的显示，尽可能&lt;strong&gt;将多张图片合成为一张进行显示&lt;/strong&gt;。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;避免图片过大。&lt;/strong&gt;超过 GPU 的最大纹理尺寸时，图片需要先由 CPU 进行预处理，这对 CPU 和 GPU 都会带来额外的资源消耗。目前来说，iPhone 4S 以上机型，纹理尺寸上限都是 4096x4096。所以，尽量不要让图片和视图的大小超过这个值。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;避免不必要的缩放。&lt;/strong&gt;在给UIImageView设置图片时，应尽可能保证无论是本地图片还是从网络或取得图片的大小，都与其frame保持一致，因为图片的缩放需要占用CPU时间的。&lt;/p&gt; &lt;/li&gt; &lt;li&gt;&lt;strong&gt;避免图层的混合 (Composing)。&lt;/strong&gt;当多个视图（或者说 CALayer）重叠在一起显示时，GPU 会首先把他们混合到一起。如果视图结构过于复杂，混合的过程也会消耗很多 GPU 资源。为了减轻这种情况的 GPU 消耗，应用应当尽量减少视图数量和层次，并在不透明的视图里标明 opaque 属性以避免无用的 Alpha 通道合成。如果只想显示最上层的图层，可以把它的透明度设置为100%，这样GPU会忽略下面所有的layer，从而节约了很多不必要的运算。当然，这也可以用上面的方法，把多个视图预先渲染为一张图片来显示。 &lt;ul&gt; &lt;li&gt;UIView的opaque属性默认值就是true，也就是说只要不是人为设置成透明，都不会出现图层混合。&lt;/li&gt; &lt;li&gt;对于UIImageView来说，不仅它自身需要是不透明的，它的图片也不能含有alpha通道。&lt;/li&gt; &lt;li&gt;还有一个更重要的是backgroundColor属性，如果不设置这个属性，控件依然被认为是透明的。所以可以在控件init的时候给&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;backgroundColor&lt;/code&gt;设置一个不透明的颜色。&lt;/li&gt; &lt;li&gt;具体做法： &lt;ul&gt; &lt;li&gt;确保控件的opaque属性设置为true，确保backgroundColor和父视图颜色一致且不透明。&lt;/li&gt; &lt;li&gt;如无特殊需要，不要设置低于1的alpha值。&lt;/li&gt; &lt;li&gt;确保UIImage没有alpha通道。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;&lt;strong&gt;避免反复的离屏渲染。&lt;/strong&gt;CALayer 的 border、圆角、阴影、遮罩（mask），CASharpLayer 的矢量图形显示，通常会触发离屏渲染（offscreen rendering），而离屏渲染通常发生在 GPU 中。 &lt;ul&gt; &lt;li&gt;当一个列表视图中出现大量圆角的 CALayer，并且快速滑动时，可以观察到 GPU 资源已经占满，而 CPU 资源消耗很少。这时界面仍然能正常滑动，但平均帧数会降到很低。为了避免这种情况，可以尝试开启 CALayer.shouldRasterize 属性，但这会把原本离屏渲染的操作转嫁到 CPU 上去。&lt;/li&gt; &lt;li&gt;对于只需要圆角的某些场合，更高效的做法是可以用一张已经绘制好的圆角图片覆盖到原本视图上面来模拟相同的视觉效果。最彻底的解决办法，就是把需要显示的图形在后台线程绘制为图片，避免使用圆角、阴影、遮罩等属性。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;&lt;strong&gt;缩小重绘区域。&lt;/strong&gt;刷新视图时，我们应该把需要重绘的区域尽可能缩小。对于未发生变化的内容则不应该重绘。&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;离屏渲染&quot;&gt;离屏渲染&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;离屏渲染，指的是GPU在当前屏幕缓冲区以外新开辟一个缓冲区进行渲染操作。&lt;/li&gt; &lt;li&gt;当设置了以下属性时，会触发离屏渲染： &lt;ul&gt; &lt;li&gt;重写drawRect方法&lt;/li&gt; &lt;li&gt;开发光栅化shouldRasterize（光栅化）&lt;/li&gt; &lt;li&gt;masks、layer.masksToBounds以模糊效果（遮罩）&lt;/li&gt; &lt;li&gt;shadows或是layer.shadow（阴影）&lt;/li&gt; &lt;li&gt;edge antialiasing（抗锯齿）&lt;/li&gt; &lt;li&gt;group opacity（组透明）&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;光栅化，光栅化是将一个layer预先渲染成位图(bitmap)，然后加入缓存中。如果对于阴影效果这样比较消耗资源的静态内容进行缓存，可以得到一定幅度的性能提升。&lt;/li&gt; &lt;li&gt;离屏渲染耗时的原因主要有创建缓冲区和上下文切换。 &lt;ul&gt; &lt;li&gt;上下文切换，首先要保存当前屏幕渲染环境，然后切换到一个新的绘制环境，申请绘制资源，初始化环境，然后开始一个绘制，绘制完毕后销毁这个绘制环境，如需要切换到主屏渲染或者再开始一个新的离屏渲染，则又要重复之前的操作。&lt;/li&gt; &lt;li&gt;不要在滚动视图使用cornerRadius或者mask，如果非要如此，可以开启光栅化&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;shouldRasterize = YES&lt;/code&gt;会使视图渲染内容被缓存起来，下次绘制的时候可以直接显示缓存。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;hr /&gt; &lt;p&gt;以上参考：&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://hit-alibaba.github.io/interview/iOS/Cocoa-Touch/Performance.html&quot;&gt;离屏渲染&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://blog.ibireme.com/2015/11/12/smooth_user_interfaces_for_ios/&quot;&gt;iOS 保持界面流畅的技巧&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.cnblogs.com/tanzhenblog/p/5001344.html&quot;&gt;iOS性能优化之内存管理：Analyze、Leaks、Allocations的使用和案例代码&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/619cf14640f3&quot;&gt;UIKit性能调优实战讲解&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.cocoachina.com/ios/20150803/12873.html&quot;&gt;小心别让圆角成了你列表的帧数杀手&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://github.com/skyming/iOS-Performance-Optimization&quot;&gt;iOS-Performance-Optimization&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/ios-perfermance-optimization.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/ios-perfermance-optimization</guid> <pubDate>Sun, 13 Dec 2015 00:00:00 +0800</pubDate> </item> <item> <title>WebView、网络操作相关及键盘相关的几个关键类</title> <description> &lt;h1 id=&quot;webview网络操作相关及键盘相关的几个关键类&quot;&gt;WebView、网络操作相关及键盘相关的几个关键类&lt;/h1&gt; &lt;h2 id=&quot;uiwebview的本地调用&quot;&gt;UIWebview的本地调用&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;注入js:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[webview stringByEvaluatingJavaScriptFromString:]&lt;/code&gt;&lt;/li&gt; &lt;li&gt;本地调用，使用WebViewJavascriptBridge：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;- (void)registerHandler:(NSString *)handlerName handler:(WVJBHandler)handler&lt;/code&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;wkwebview的本地调用&quot;&gt;WKWebView的本地调用&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;注入js:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[wkwebview evaluateJavaScript:]&lt;/code&gt;&lt;/li&gt; &lt;li&gt;首先通过&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WKUserContentController&lt;/code&gt; -&amp;gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;addScriptMessageHandler:&lt;/code&gt; 以及 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;addUserScript:&lt;/code&gt; ,实现WKScriptMessageHandler响应脚本消息:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;- (void)userContentController:(WKUserContentController *)userContentController didReceiveScriptMessage:(WKScriptMessage *)message&lt;/code&gt; 和 js的注入；&lt;/li&gt; &lt;li&gt;WKNavigationDelegate：跟踪网页加载进度，以及决定采取什么的处理策略；&lt;/li&gt; &lt;li&gt;WKUIDelegate:根据网页的行为展示本地的UI视图；&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;自定义nsurlprotocol&quot;&gt;自定义NSURLProtocol&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;NSURLProtocol能够让你去重新定义苹果的URL加载系统 (URL Loading System)的行为，URL Loading System里有许多类用于处理URL请求，比如NSURL，NSURLRequest，NSURLConnection和NSURLSession等，当URL Loading System使用NSURLRequest去获取资源的时候，它会创建一个NSURLProtocol子类的实例，你不应该直接实例化一个NSURLProtocol，NSURLProtocol看起来像是一个协议，但其实这是一个类，而且必须使用该类的子类，并且需要被注册。&lt;/li&gt; &lt;li&gt;不管你是通过UIWebView, NSURLConnection 或者第三方库 (AFNetworking, MKNetworkKit等)，他们都是基于NSURLConnection或者 NSURLSession实现的，因此你可以通过NSURLProtocol做自定义的操作。 &lt;ul&gt; &lt;li&gt;重定向网络请求&lt;/li&gt; &lt;li&gt;忽略网络请求，使用本地缓存&lt;/li&gt; &lt;li&gt;自定义网络请求的返回结果&lt;/li&gt; &lt;li&gt;一些全局的网络请求设置&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;子类化NSURLProtocol并注册&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; //子类化 @interface CustomURLProtocol : NSURLProtocol @end //注册 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions { //注册protocol [NSURLProtocol registerClass:[CustomURLProtocol class]]; return YES; } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt;实现Custom URLProtocol &lt;ul&gt; &lt;li&gt; &lt;p&gt;+canInitWithRequest:这个方法主要是说明你是否打算处理对应的request，如果不打算处理，返回NO，URL Loading System会使用系统默认的行为去处理；如果打算处理，返回YES，然后你就需要处理该请求的所有东西，包括获取请求数据并返回给 URL Loading System。&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; + (BOOL)canInitWithRequest:(NSURLRequest *)request { //只处理http和https请求 NSString *scheme = [[request URL] scheme]; if ( ([scheme caseInsensitiveCompare:@&quot;http&quot;] == NSOrderedSame || [scheme caseInsensitiveCompare:@&quot;https&quot;] == NSOrderedSame)) { //看看是否已经处理过了，防止无限循环 if ([NSURLProtocol propertyForKey:URLProtocolHandledKey inRequest:request]) { return NO; } return YES; } return NO; } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;+canonicalRequestForRequest:通常该方法你可以简单的直接返回request，但也可以在这里修改request，比如添加header，修改host等，并返回一个新的request，这是一个抽象方法，子类必须实现。&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; + (NSURLRequest *) canonicalRequestForRequest:(NSURLRequest *)request { NSMutableURLRequest *mutableReqeust = [request mutableCopy]; mutableReqeust = [self redirectHostInRequset:mutableReqeust]; return mutableReqeust; } +(NSMutableURLRequest*)redirectHostInRequset:(NSMutableURLRequest*)request{ if ([request.URL host].length == 0) { return request; } NSString *originUrlString = [request.URL absoluteString]; NSString *originHostString = [request.URL host]; NSRange hostRange = [originUrlString rangeOfString:originHostString]; if (hostRange.location == NSNotFound) { return request; } //定向到bing搜索主页 NSString *ip = @&quot;cn.bing.com&quot;; // 替换域名 NSString *urlString = [originUrlString stringByReplacingCharactersInRange:hostRange withString:ip]; NSURL *url = [NSURL URLWithString:urlString]; request.URL = url; return request; } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;+requestIsCacheEquivalent:toRequest:主要判断两个request是否相同，如果相同的话可以使用缓存数据，通常只需要调用父类的实现。&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; + (BOOL)requestIsCacheEquivalent:(NSURLRequest *)a toRequest:(NSURLRequest *)b{ return [super requestIsCacheEquivalent:a toRequest:b]; } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;-startLoading -stopLoading : 这两个方法主要是开始和取消相应的request，而且需要标示那些已经处理过的request。&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; - (void)startLoading { NSMutableURLRequest *mutableReqeust = [[self request] mutableCopy]; //标示改request已经处理过了，防止无限循环 [NSURLProtocol setProperty:@YES forKey:URLProtocolHandledKey inRequest:mutableReqeust]; self.connection = [NSURLConnection connectionWithRequest:mutableReqeust delegate:self]; } - (void)stopLoading { [self.connection cancel]; } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;NSURLConnectionDataDelegate方法,在处理网络请求的时候会调用到该代理方法，我们需要将收到的消息通过client返回给URL Loading System。&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; - (void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response { [self.client URLProtocol:self didReceiveResponse:response cacheStoragePolicy:NSURLCacheStorageNotAllowed]; } - (void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{ [self.client URLProtocol:self didLoadData:data]; } - (void) connectionDidFinishLoading:(NSURLConnection *)connection { [self.client URLProtocolDidFinishLoading:self]; } - (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error { [self.client URLProtocol:self didFailWithError:error]; } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;自定义键盘-uitextinputdelegate-方法定义&quot;&gt;自定义键盘 UITextInputDelegate 方法定义&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;- (void)selectionWillChange:(nullable id &amp;lt;UITextInput&amp;gt;)textInput; - (void)selectionDidChange:(nullable id &amp;lt;UITextInput&amp;gt;)textInput; - (void)textWillChange:(nullable id &amp;lt;UITextInput&amp;gt;)textInput; - (void)textDidChange:(nullable id &amp;lt;UITextInput&amp;gt;)textInput; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;自定义键盘uiinputviewcontroller的textdocumentproxy定义&quot;&gt;自定义键盘UIInputViewController的textDocumentProxy定义&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;@protocol UITextDocumentProxy &amp;lt;UIKeyInput&amp;gt; @property (nullable, nonatomic, readonly) NSString *documentContextBeforeInput; @property (nullable, nonatomic, readonly) NSString *documentContextAfterInput; // An app can store UITextInputMode in its document context, when user switches to the document, the host will pass the inputMode as documentInputMode to the UIInputViewController, // which can switch to the inputMode and set primaryLanguage if it supports it. @property (nullable, nonatomic, readonly) UITextInputMode *documentInputMode NS_AVAILABLE_IOS(10_0); - (void)adjustTextPositionByCharacterOffset:(NSInteger)offset; @end //----------------- @protocol UIKeyInput &amp;lt;UITextInputTraits&amp;gt; #if UIKIT_DEFINE_AS_PROPERTIES @property(nonatomic, readonly) BOOL hasText; #else - (BOOL)hasText; #endif - (void)insertText:(NSString *)text; - (void)deleteBackward; @end &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;hr /&gt; &lt;p&gt;参考以上：&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/7c89b8c5482a&quot;&gt;iOS开发之— NSURLProtocol&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/ios/ios-webview-custom-urlprotocol-keyboard.html</link> <guid>https://luowei.github.io/ios/ios-webview-custom-urlprotocol-keyboard</guid> <pubDate>Sat, 24 Oct 2015 00:00:00 +0800</pubDate> </item> <item> <title>iOS内存管理机制</title> <description> &lt;h1 id=&quot;ios内存管理机制&quot;&gt;iOS内存管理机制&lt;/h1&gt; &lt;h2 id=&quot;objective-c内存管理的对象&quot;&gt;Objective-C内存管理的对象&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;主要有两类，一类是值类型，比如int、float、struct等基本数据类型；&lt;/li&gt; &lt;li&gt;另一类是引用类型，也就是继承自NSObject类的所有的OC对象；&lt;/li&gt; &lt;li&gt;前一种值类型不需要我们管理，后一种引用类型是需要我们管理内存的；&lt;/li&gt; &lt;li&gt;值类型会被放入栈中，他们依次紧密排列，在内存中占有一块连续的内存空间，遵循先进后出的原则；&lt;/li&gt; &lt;li&gt;引用类型会被放到堆中，当给对象分配内存空间时，会随机的从内存当中开辟空间，对象与对象之间可能会留有不确定大小的空白空间，因此会产生很多内存碎片，需要我们管理；&lt;/li&gt; &lt;li&gt;栈内存与堆内存从性能上比较，栈内存要优于堆内存，这是因为栈遵循先进后出的原则，因此当数据量过大时，存入栈会明显的降低性能。因此，我们会把大量的数据存入堆中，然后栈中存放堆的地址，当需要调用数据时，就可以快速的通过栈内的地址找到堆中的数据。&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;objective-c管理内存的方式&quot;&gt;Objective-C管理内存的方式&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;MRC（人工引用计数），手动管理内存；&lt;/li&gt; &lt;li&gt;ARC(自动引用计数)，自动管理内存；&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;与内存有关的修饰符&quot;&gt;与内存有关的修饰符&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;strong ：强引用，ARC中使用，与MRC中retain类似，使用之后，计数器+1。&lt;/li&gt; &lt;li&gt;weak ：弱引用 ，ARC中使用，如果只想的对象被释放了，其指向nil，可以有效的避免野指针，其引用计数为1。&lt;/li&gt; &lt;li&gt;readwrite : 可读可写特性，需要生成getter方法和setter方法时使用。&lt;/li&gt; &lt;li&gt;readonly : 只读特性，只会生成getter方法 不会生成setter方法，不希望属性在类外改变。&lt;/li&gt; &lt;li&gt;assign ：赋值特性，不涉及引用计数，弱引用，setter方法将传入参数赋值给实例变量，仅设置变量时使用。&lt;/li&gt; &lt;li&gt;retain ：表示持有特性，setter方法将传入参数先保留，再赋值，传入参数的retaincount会+1。&lt;/li&gt; &lt;li&gt;copy ：表示拷贝特性，setter方法将传入对象复制一份，需要完全一份新的变量时。&lt;/li&gt; &lt;li&gt;nonatomic ：非原子操作，不加同步，多线程访问可提高性能，但是线程不安全的。决定编译器生成的setter getter是否是原子操作。&lt;/li&gt; &lt;li&gt;atomic ：原子操作，同步的，表示多线程安全，与nonatomic相反。&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;引用计数&quot;&gt;引用计数&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;引用计数（Reference Count）是一个简单而有效的管理对象生命周期的方式。&lt;/li&gt; &lt;li&gt;当我们创建一个新对象的时候，它的引用计数为 1，当有一个新的指针指向这个对象时，我们将其引用计数加 1，当某个指针不再指向这个对象是，我们将其引用计数减 1，当对象的引用计数变为 0 时，说明这个对象不再被任何指针指向了，这个时候我们就可以将对象销毁，回收内存。&lt;/li&gt; &lt;li&gt;由于引用计数简单有效，除了 Objective-C 和 Swift 语言外，微软的 COM（Component Object Model ）、C++11（C++11 提供了基于引用计数的智能指针 share_prt）等语言也提供了基于引用计数的内存管理方式。&lt;/li&gt; &lt;li&gt;对 Linux 文件系统比较了解的人可能发现，引用计数的这种管理方式类似于文件系统里面的硬链接。在 Linux 文件系统中，我们用 ln 命令可以创建一个硬链接（相当于我们这里的 retain)，当删除一个文件时（相当于我们这里的 release)，系统调用会检查文件的 link count 值，如果大于 1，则不会回收文件所占用的磁盘区域。直到最后一次删除前，系统发现 link count 值为 1，则系统才会执行直正的删除操作，把文件所占用的磁盘区域标记成未用。&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;arc&quot;&gt;ARC&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;ARC 背后的原理是依赖编译器的静态分析能力，通过在编译时找出合理的插入引用计数管理代码;&lt;/li&gt; &lt;li&gt;Swift 语言，而该语言仍然使用 ARC 技术，作为其内存管理方式。&lt;/li&gt; &lt;li&gt;ARC下还需要自己管理内存的情况： &lt;ul&gt; &lt;li&gt;遇到底层 Core Foundation 对象，需要手动管理引用计数；&lt;/li&gt; &lt;li&gt;过度使用 block 之后，可能需要手动处理对象的引用(强弱引用处理)&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;处理循环引用的几种方案&quot;&gt;处理循环引用的几种方案&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;主动断开循环引用。例如:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Controller持有了网络请求对象; 网络请求对象持有了回调的block; 回调的 block 里面使用了 self，所以持有了 Controller&lt;/code&gt;; 解决办法就是，在网络请求结束后，网络请求对象执行完 block 之后，主动释放对于block的持有，将其置为null，以便打破循环引用。&lt;/li&gt; &lt;li&gt;使用弱引用。弱引用虽然持有对象，但是并不增加引用计数，这样就避免了循环引用的产生。&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;弱引用的实现原理&quot;&gt;弱引用的实现原理&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;系统对于每一个有弱引用的对象，都维护一个表来记录它所有的弱引用的指针地址。这样，当一个对象的引用计数为 0 时，系统就通过这张表，找到所有的弱引用指针，继而把它们都置成 nil。&lt;/li&gt; &lt;li&gt;可以看出，弱引用的使用是有额外的开销的。虽然这个开销很小，但是如果一个地方我们肯定它不需要弱引用的特性，就不应该盲目使用弱引用。&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;使用xcode检测循环引用&quot;&gt;使用Xcode检测循环引用&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;Xcode 的 Instruments 工具集可以很方便的检测循环引用；&lt;/li&gt; &lt;li&gt;Xcode 的菜单栏选择：Product -&amp;gt; Profile，然后选择 “Leaks”，再点击右下角的”Profile” 按钮开始检测；&lt;/li&gt; &lt;li&gt;Instruments 中会用一条红色的条来表示一次内存泄漏的产生。&lt;/li&gt; &lt;li&gt;切换到 Leaks 这栏，点击”Cycles &amp;amp; Roots”，就可以看到以图形方式显示出来的循环引用。&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;core-foundation-对象的内存管理&quot;&gt;Core Foundation 对象的内存管理&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;底层的 Core Foundation 对象，在创建时大多以 XxxCreateWithXxx 这样的方式创建。&lt;/li&gt; &lt;li&gt; &lt;p&gt;对于这些对象的引用计数的修改，要相应的使用 CFRetain 和 CFRelease 方法。例如：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; // 创建一个 CFStringRef 对象 CFStringRef str= CFStringCreateWithCString(kCFAllocatorDefault, “hello world&quot;, kCFStringEncodingUTF8); // 创建一个 CTFontRef 对象 CTFontRef fontRef = CTFontCreateWithName((CFStringRef)@&quot;ArialMT&quot;, fontSize, NULL); // 引用计数加 1 CFRetain(fontRef); // 引用计数减 1 CFRelease(fontRef); &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;在 ARC 下，我们有时需要将一个 Core Foundation 对象转换成一个 Objective-C 对象，这个时候我们需要告诉编译器，转换过程中的引用计数需要做如何的调整。这就引入了bridge相关的关键字，以下是这些关键字的说明：&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__bridge&lt;/code&gt;: 只做类型转换，不修改相关对象的引用计数，原来的 Core Foundation 对象在不用时，需要调用 CFRelease 方法。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__bridge_retained&lt;/code&gt;: 类型转换后，将相关对象的引用计数加 1，原来的 Core Foundation 对象在不用时，需要调用 CFRelease 方法。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__bridge_transfer&lt;/code&gt;: 类型转换后，将该对象的引用计数交给 ARC 管理，Core Foundation 对象在不用时，不再需要调用 CFRelease 方法。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;hr /&gt; &lt;p&gt;以上参考：&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/66b5d43b6ac4&quot;&gt;iOS内存管理机制解析&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://blog.devtang.com/2016/07/30/ios-memory-management/&quot;&gt;理解iOS的内存管理&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://hit-alibaba.github.io/interview/iOS/ObjC-Basic/MM.html&quot;&gt;Objective-C中的内存分配&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.oschina.net/news/42288/10-objective-c-interview&quot;&gt;10个Objective-C基础面试题，iOS面试必备&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/ios/ios-memery-management.html</link> <guid>https://luowei.github.io/ios/ios-memery-management</guid> <pubDate>Mon, 19 Oct 2015 00:00:00 +0800</pubDate> </item> <item> <title>Tomcat多域名绑定及集群配置</title> <description> &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# - 配置Apache虚拟目录 1. 在 /etc/httpd/conf.d 目录中创建 tomcat.conf 文件； 2. 添加以下内容： ## 配置tomcat的常规应用,这里使用 my.wodedata.com 域名 &amp;lt;VirtualHost *:80&amp;gt; ServerName my.wodedata.com ProxyIOBufferSize 8192 ProxyRequests Off ProxyVia Full # 把 my.wodedata.com 指向 http://wodedata.com:8080 tomcat 应用端口 ProxyPass / http://wodedata.com:8080/ smax=5 max=20 ttl=120 retry=300 ProxyPassReverse / http://wodedata.com:8080/ &amp;lt;/VirtualHost&amp;gt; ## 配置独立域名的应用，这里使用 ldcs.wodedata.com 域名 &amp;lt;VirtualHost *:80&amp;gt; ServerName ldcs.wodedata.com ProxyIOBufferSize 8192 ProxyRequests Off ProxyVia Full ProxyPass / http://ldcs.wodedata.com:8080/ ProxyPassReverse / http://ldcs.wodedata.com:8080 &amp;lt;/VirtualHost&amp;gt; 3. 检查apache配置: httpd -t 4. 重启apache服务器: service httpd restart ---------------------------- # - tomcat的WebApp配置域名绑定 1. 上传应用wodedata.war到tomcat根目录下的webapps目录下； 2. 配置tomcat根目录下的conf/server.xml，如下： ## 在service/Engine下再添加一个Host &amp;lt;Host name=&quot;ldcs.wodedata.com&quot; appBase=&quot;webapps&quot; unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot; xmlValidation=&quot;false&quot; xmlNamespaceAware=&quot;false&quot;&amp;gt; &amp;lt;Alias&amp;gt;ldcs.wodedata.com&amp;lt;/Alias&amp;gt; ## name与tomcat.conf中配置的ServerName对应； ## appBase为tomcat的webapps目录名； ## Context的docBase为webapps目录下的wodedata； &amp;lt;Context path=&quot;&quot; docBase=&quot;wodedata&quot; reloadable=&quot;true&quot; caseSensitive=&quot;false&quot; &amp;gt; &amp;lt;/Context&amp;gt; &amp;lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; directory=&quot;logs&quot; prefix=&quot;localhost_wodedata_log&quot; suffix=&quot;.txt&quot; pattern=&quot;%h %l %u %t &amp;amp;quot;%r&amp;amp;quot; %s %b&quot; /&amp;gt; &amp;lt;/Host&amp;gt; 3. 最后重启tomcat； -------------------------------- Tomcat集群配置，后续更新。。暂见参考引用。 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;参考:&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.iteye.com/topic/1017961&quot;&gt;Apache+Tomcat集群配置:&lt;/a&gt; http://www.iteye.com/topic/1017961&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/freeglad/article/details/2819278&quot;&gt;Tomcat配置一个ip绑定多个域名:&lt;/a&gt; http://blog.csdn.net/freeglad/article/details/2819278&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/hanghangaidoudou/article/details/8363442&quot;&gt;apache+tomcat配置:&lt;/a&gt; http://blog.csdn.net/hanghangaidoudou/article/details/8363442&lt;/p&gt; </description> <link>https://luowei.github.io/tomcat%E9%85%8D%E7%BD%AE/tomcat-multiple-domain-bind-and-cluster-config.html</link> <guid>https://luowei.github.io/tomcat%E9%85%8D%E7%BD%AE/tomcat-multiple-domain-bind-and-cluster-config</guid> <pubDate>Mon, 03 Aug 2015 00:00:00 +0800</pubDate> </item> <item> <title>CentOS环境下Apache虚拟目录及负载均衡配置</title> <description> &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# 创建数据库 CREATE DATABASE IF NOT EXISTS rootls DEFAULT CHARSET utf8 COLLATE utf8_general_ci # 创建用户并授权 CREATE USER &apos;rootls&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;xxxxxx&apos;; GRANT ALL ON rootls.* TO &apos;rootls&apos;@&apos;localhost&apos; ; # 设置密码 # Set PASSWORD for rootls@localhost = password(&apos;xxxxxx&apos;) ; # 登录rootls mysql -h localhost -u rootls -p # 导入sql文件 use rootls set names utf8; source /var/www/zips/rootls.sql # 搭建CMS # 创建wodedata用户 CREATE USER &apos;wodedata&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;xxxxxx&apos;; # 给用户wodedata授予wodedata数据库的权限 GRANT ALL ON wodedata.* TO &apos;wodedata&apos;@&apos;localhost&apos; ; # 取消息在rootls数据库上的授权 # revoke all on rootls.* from wodedata@localhost ; # 下载gpEasy CMS # wget http://www.gpeasy.com/Special_gpEasy?cmd=download # 下载e107 CMS # wget http://jaist.dl.sourceforge.net/project/e107/e107/e107%20v2.0%20beta1/e107_2.0_full_beta1.zip # 备份host文件 cp /etc/hosts /etc/host.bak # 追加一行 cat &amp;gt;&amp;gt; /etc/hosts &amp;lt;&amp;lt;! 127.0.0.1 wodedata.com 127.0.0.1 bbs.wodedata.com 127.0.0.1 rootls.com ! #在万网添加一条对bbs.wodedata.com的解析记录, #然后再用以下方式添加ServerName，并配相应的虚拟目录 # 在conf.d下添加rootls.conf配置文件 vi /etc/httpd/conf.d/rootls.conf # 编辑 # ServerName bbs.wodedata.com:80 &amp;lt;VirtualHost *:80&amp;gt; ServerAdmin luowei@rootls.com ServerName bbs.wodedata.com ServerAlias bbs.wodedata.com rootls.com #多个域名指定同一站点 DocumentRoot /var/www/html/rootls &amp;lt;Directory &quot;/var/www/html/rootls&quot;&amp;gt; Options Indexes FollowSymLinks MultiViews AllowOverride All Order allow,deny Allow from all &amp;lt;/Directory&amp;gt; ErrorLog /var/www/html/rootls/logs/error.log CustomLog /var/www/html/rootls/logs/rootls.log combined &amp;lt;/VirtualHost&amp;gt; # 添加检查配置 apachectl configtest #重启 apachectl restart # 配置不同的端口运行不同的站点 # 完网添加 my.wodedata.com 域名解析记录； # 然后在 /etc/httpd/conf.d 添加配置文件 sudo vi /etc/httpd/conf.d/tomcat.conf # 并编辑添加虚拟主机(以端口转发形式)): &amp;lt;VirtualHost *:80&amp;gt; ServerName java.wodedata.com ProxyIOBufferSize 8192 ProxyRequests Off ProxyVia Full ProxyPass / http://wodedata.com:8080/ smax=5 max=20 ttl=120 retry=300 &amp;lt;/VirtualHost&amp;gt; # Apache + Tomcat 负载均衡配置参见以下 Apache+tomcat均衡负载配置新小结:http://liangzhijian.iteye.com/blog/1462668 Apache + Tomcat 配置多个应用:http://www.blogjava.net/sealyu/archive/2008/08/25/224326.html 实战Apache+Tomcat集群和负载均衡:http://www.cnblogs.com/qqzy168/archive/2013/08/03/3199237.html &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/lamp/apache-virtual-host-config.html</link> <guid>https://luowei.github.io/lamp/apache-virtual-host-config</guid> <pubDate>Thu, 23 Jul 2015 00:00:00 +0800</pubDate> </item> <item> <title>一些比较有用的iOS开发者博客</title> <description> &lt;dt&gt;&lt;h3 add_date=&quot;1429853414&quot; last_modified=&quot;1436840338&quot;&gt;一些比较有用的iOS开发者博客&lt;/h3&gt; &lt;dl&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://objccn.io/&quot; add_date=&quot;1430825540&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACdUlEQVQ4jWWTP2tUQRTFf3dm3stm3c1uomsRVDZELBTSBCJYKH4CESystLDwI2hpIYKIndgaEGwsxELETkQMCoFgYSJBE8Q/0U00m+Rtdt97M9fibTTiFMO9w9xzZu65R84tBN1QwQEK/V3+ZEX87xKUHKFmFPczF9YUygLbWhQbQJH/IHYIBkVIFLwRjA3QzmEmhRAEE8B4KAeoBRgKSjWA82BCcWcmhfUcnFfcfAoXysqFUaW12WVm03GrE9PyCiogfX4DN/eknKjmNCol7n8T7nUE9zmFA1XlcEW5tmD4iqXl4fqIMFXxWFGWe45LLXjQtsxtBKYnA4es4WsqOHLIctj2wmIoMZvC46YyFnd4vQoBYbLe5U2zzNSipWcs3dyTeSAHgwdRsAKzvcCVGkxUU+5+ihmvRZwejXi7GVPSjLt7YaEbsAKEAsDhQUO/0z3hVD0wv265eMjw/EtKNmJY6gj7Bx3NkofMFIxagBjCjj7FYS8L7IkMWZpxbGSAIyOOlIjxiufljwAWtF9cAPgiUIUxJzz8ojQrOfPrhu2thPcrHc7u2+LJx5QbvyJOGkW1D+J3fcGrsNRTlpKIifkOZ8aEb92Y2x8MT7YEYgvAi0T+vsBTqEBQBp0yfRDm2oar38tMr6acr2XgSzRiy1qAy9XA8eFAOVLUm6KJDYGn3xV9tc1QBL4bgxngEzHX1mIwcMBoMaVphu+k3JmBZxuDNAzI0UdB3+XCTi9wsN9CD6UGJAgJUAdW+tpjAAvHnOKSXCBA0ypYaKvwIy8s1N7lwBWgLlCPCkstByHJwdVRFMGGQs1hlOH/DLzLjlrMzEGUOvAbEc8uHCAq9jgAAAAASUVORK5CYII=&quot;&gt;objc中国&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://nshipster.cn/&quot; add_date=&quot;1424080897&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAqklEQVQ4je3QP2pCYRAE8F/QgCdIkRMoQmxSxi6Fhb2lvbcSksJX5wZpLNJYiCewsfBh8cDGP80IDxFSJKUDA/vNzuzHLnf8GY3wlPcjXjDAM9bR3vEW3xbHS76JCb7xhBGGqfeYxjhGCxt8YZa6DwVKVPmhzkN4rVfJFNDF/IbpN86TBW18ZurFsMNHuKvpZbxteKgdtIVepjawwk96r+hknSUWudEd/4Ez1lc66B4XVxsAAAAASUVORK5CYII=&quot;&gt;NSHipster 中文版 - NSHipster&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://www.raywenderlich.com/&quot; add_date=&quot;1430638902&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABpklEQVQ4jY2TvUtbYRTGf9ckfhtNGmoUhIpFEQVBEBQsCEWwTuJf4KijdHFRgg4dJE7ioPiBQgRdRNM72Ogk0aJufhSHljjUWG2iSczXvcntIIZe79Xk2Z5zzvN7D+/LK9SN9ivBaBiAIlMBne9bGPzQT1d9K7nIILfaHfexCDEpQTge5fT3T5a/i5QXldJe25wVkGcyGDVFRVFwelwkZCk74KXGx4Y28nXg/2vteEcfUGur5kvfEIIgvBi+jdzhcM9pAY32d2wOTVJVbnv19AlxgYs/l6h27GlqZ2XAga204tXwxfUls3sbFOcXqjeosVRmDQOMi/PEpSQmg1ENWD/exRfwZ3wqnVZ5gJ0fh7gOtzNeBbiLhVn0ujN+cd9N7/QwMSkBQFKWGNmYQVEUfQDA0r6buJQkGA0ztjXL2dUvnB7XY+/gK0e+c9W85qF9AT/iiRfx1MvV/S0Azm8uPjV1MOVZ1dyHYP3crQQeQqqi3fyGm0iQVDqdqVWarVyHAqo5a4lZuwGAP/RXU3seflKelJJ1G7lISskY35ZZ0PtQuchSXMY/5BCYXWHpDQYAAAAASUVORK5CYII=&quot;&gt;Ray Wenderlich | Tutorials for iPhone / iOS Developers and Gamers&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://www.52nlp.cn/&quot; add_date=&quot;1430907941&quot;&gt;我爱自然语言处理 | I Love Natural Language Processing&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://tech.glowing.com/cn/&quot; add_date=&quot;1428465345&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAOklEQVQ4jWNgGPKAEZmjoGPggE3RgysXDiDLw/gMDAwMTLR0HX0AUWGADkZSGKDHP7o4A8OwCAOKAQB38RQKMfDyNwAAAABJRU5ErkJggg==&quot;&gt;Glow 技术团队博客&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://onevcat.com/&quot; add_date=&quot;1425021473&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAC7UlEQVQ4jQXBz28UZRjA8e/zvu/O7OzsbHfLzpZuMW5bAyXUkqghHEz0YDjpwZNnbx69GG6m/4h/gUfjwRgv/kRBBAuGgMFECLClpbb7Y5yded+Hz0eumlV1As0gZAopShuhiXAvhVZk+KGa87MveCWO+ejSG2xnMeFgTLV3jEuNoRug3YCkhoYKqNKzQq9pkKZhNHXcFUfllc5swSAK2NhSJBY3qJUmEC8gRnCAw9DySp7GLBpCfvI/zSCsxDFLgyWiYoaZVEgAF6HEKAGlEEsFnLjAQ1EenkxIEsehetRCSWD8eMwZq/SDgg/IZ26gh1KxbwKPtEIwHFIjVpgZMD7QFYM3huCVQTNm6BqcajboTj3ST1MNEtCgnOplZE1Lli1x4fxZkiRhKetg58d89e2PlAuPNZYHT/bBWbwVXECZFSWj0zkXN1Z5/nTMq3nGShbTShI21tfoZpvkKwOOTk74+pdbNKcTrLU8O5pgg8hu5QPzRcWiKEhjx5nTOePxPlkrwVnBWEPezxmtj/j95h4fvPcOb54dUUynWCOyK0BZVQyX26wP+zw/nBD5mnffvsR3125RFTXD0TpPxwcs97pc2BhRzqf02hEOEerg2VzN2T63STmfMD46prPWZ3gmZ+f8a1jTwCssDwZkkeNg/wko9JdzbOTsrnrPpx9/yOe7VxmurfLswd90rKPX77O98zpilbWtLS5fucLw3BZ+seDRjT/594/7uL5z1GLJyhn3r39POwgH85K0m/LbtZsUBm5c3+OTtR7lZAOZlNz54ktuf/MT/4kgl9OO1j7QTZv0u22MKH89fsFqmpA1LP8cT7CdJm+tD7m4s0P56z3u3L6LJhkLA/J+lmvXK0veEHsh9hA3LFMNJF6IrWFG4EWoafma2jnqpMEs1NSiOESpRSgaQiM2GG+oayVyFowyR7EYVmzEvBURUEr1BIFCFDfzHhCMCtYHSgLWCgZYRKAKkQoemKMsNKCqFKIcac1LtfpEdxa+1gsAAAAASUVORK5CYII=&quot;&gt;OneV&apos;s Den&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://blog.sunnyxx.com/&quot; add_date=&quot;1432021679&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADe0lEQVQ4jU2TTWgcdRiHf+9/Zr9nN7sJm82uTbMtmEg1KU1tEQzWiIgHi1IpxV4Ur0UvildXFAoKHqwoilY8CEqhiKkgetBKFRrSmiamTdI0m6/dTTabnZn9mpmdmf/rxYrP+eG5PcTMAngHRAUGwMUih/PdK9p6cS7QVpSAV1mzDxx6QrZyL3VyOeowQAQw/oXwP/TS7JEA/nor6iwecYwlcq2qIijqBWOD7AVHF9TkC+8Hswen7/vMHPkv0Ny5coqt6QvRQDGnuDoQdABYgCMBG2i1Q2i6B7aQGH/37KVzF38rkMfMpABAd+OPY+xMXdSSM/vY7LhzN5dB0Qy07AjPTS9xV9f9dE6VISwl7Xr7mdOjrvfBZ5f/JCJJJpu9weWvvlHtX57dLC65wk6rlM0jO34IIgw0dkqoz9yAaPmIhXe9VJ8fWDOfrPQcPD+RGRtaFYmVH58W3uxTHd+Qhswq7dTDCMSH0cUwfLGPpRJFMDOMOqIwvKCKqOol+Ua/vfHFazNljory398r1N4JhL00rl5ep4/f+4FvXV/gZk3KoHiI7l3v8NuvfMfXri7DFyGIbhqpSE1pNO9M5OMYUrvdvaC17iHujODFB4dYP6rIsTMnfZkgIT2bHz0xKc69aWGg10FOi0CWq+SrRbathlsqwRbtRoclE5htyuX7MHY4o3qNedX3txUpywrZJRw9/oBIkQb7ngCsGLm2SpbtRbMxqCo7aMpYh8XwJkny4Gu9TAlFsDThkQclrJMXr3NoqAERM0Gsg/Uukxsz1iqwVS0zEgrGVoSM70hoIBFxgVAKJFwitwsWDShxk0E6mHRQq8ZkeiIY0YSRgC/Sj71xu64n7mLPgGgZkltVcHMVwlxh1dmEsHcZbRPcMkGOxbJhYWtvoIve4787CRhCG3xk3lHGvm3pKYFGlam1x1TbhmeaqC+ss71bBzUNiHaLyTLE6rKrVNyJvYFjp346maOOAAgRe/z84p3Ap/WNgOpXKoLaVXgyIH/+aJG315ghLbI3d3B31kGZJ5t942c+T+7ff7tQKAjiQkFQoSCnpqaiufrUh5o/f1pTKr2hmIRZqiGcioEksFVJyGbyuXL/4ec/SY9OfjkQpyoAELORAnraAOTrF6C8nP/6RGfz2qvW9nxfJCYzHmsRGco2IvmJm4OPn7002N/zKxG59yf8B+Oe1nCoS9gXAAAAAElFTkSuQmCC&quot;&gt;sunnyxx的技术博客&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://chun.tips/&quot; add_date=&quot;1435588413&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAa0lEQVQ4jWNgoBAwYhOMior6LyQkhCE+ZcoUDPUYArg04zIEhYNNM0wDshyyIUw4rUJTuGzZMsZ3795hqGHBZwA6WLZsGYaX8bqAGDBqAIkGREVF/c/JyflPtAHIinGlUOomZUKGYMtMFAMAaAgpXT4X95AAAAAASUVORK5CYII=&quot;&gt;Chun Tips&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://blog.devtang.com/&quot; add_date=&quot;1425021519&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABXElEQVQ4jaWTsYrCQBRFz2Yeghb5BsEqjUUgvxArv2NsbFLlP2z8hPyCpVjYpRCnFLQJBEtBJyHDbrFE0AQW1guvmMedw+XC+5rP5998IAFYrVb/+rxcLn8BzrnPErwDTqcT6/Waw+EAwHQ6ZbFYMJlMOgAPoGma5xRFQZqmGGNQSqGUwhhDmqYURfHi7QVkWUZVVYgIWmu01ogIVVWRZVkHIC2gVZ7niAjj8ZjZbAbAdrvlfD6T5/mLt5PgdrtR1zUiQhRFWGux1hJFESJCXdf9CdoSnXOICC203TdN89y/F/6SYDAY4Ps+IoIx5rk3xiAi+L7/dwdhGLLf7ynLkt1uB0BZliilCMOw00EHEMcxx+ORx+PBZrP5NYkwHA6J47i/ROfcczzPI0kSgiBARBARgiAgSRI8z3vx9iZou9BaMxqNALjf71yvV6y1vKsDaN+Xy6Vj7tPXp+f8A41y/M2KjWNrAAAAAElFTkSuQmCC&quot;&gt;唐巧的技术博客&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://xiangwangfeng.com/&quot; add_date=&quot;1430666293&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADHElEQVQ4jSWSS28bZRhGz/vNjC/x2B7HuddGdpRLCZFKCAsCpRELqEAVXSCW7JBgz79g2Q0SEksUxKYSlaLSooJEKSRBIaA0qUpw3dzTXCe249vM97Hw+QFHOo8eMR0wxoAISoTtWpuVwypiIBO3mRlIInTQxoDWiFIAiNbaGGNQShGGIbXzE/7yYWqom1REsXxUh5MtLsdDgkQW1+tFKYXWGhHBNsYgSlE5fcHh0yV2yus8z88yW+jFhG1ezsS59dsGf+/+QdFuEPUGGH79Ov3FyY5Eh6FpNeuUl+/j+4csBX1MTL3N1aE0lgihMVS0xdpxhZVff2Dsxe8YK8r0B5+RzY+iRCnO9svoVpVVdYkP37vJO/luHEuhRHCU0O0Yrg4kmX33Yza9V4hbhq0nCwCdBEu32GkIw5enycdAa83eRZtM1KLa1hzUA6Ji6HUTJAqvUltZJ96oYozBFhGikRh1FafoeWz7dXbqAbYSsjGbtCPU2lDza8RadZJdLrVmi1zc7YyojcHtzWGzSq3RZCTwcZMenueC0SAOxbQDrgOiaJT+JRGxSfUXEAGF1kgsSTGT5tl2mVg+h5dOEIQhh4HiwcO7rP/yLcZyWPQ1a48XcUTRkx/HGEEhgjGG0ZEJmntP+HrtiGoAtqUQDFldZXPuC5ZufcJG+Rkz125yNvM5VjKLwaAARIRyNcQbfo1rQy5f/bPLl39usbp/xsXkRxx/eo8Hmz79folCvkA7DAkbF50EEaF5fsTTxXlCyyHnxTnfesywPuRKf4pIu0K7q4fo5HWO9kusPbpDeukbSo9uY7TpCM6ODxiMC82FOeZuf0dv6WfGci+RiVhYItwYHaAwPsUluWAs2MEWxcnBc3TQRhkg2uWiYikK0YArtVV66gf8+NM8d9a3OG2FLOydUfpvAyfdx2mlgopGibkeYlkojCHh9aEsG9Xl4Tc1mVSCfGmeh/e+542ch19aZrB8n2hYp9WoETYbuN2DWJbdeaITiZHNjVM53iWV6ScxMs1wUGcokuVu2adPV8m99T6B3UWkdo4Sm/zEmxhj+B/GimjgWd/tlAAAAABJRU5ErkJggg==&quot;&gt;阿毛的蛋疼地&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://zhowkev.in/&quot; add_date=&quot;1425022162&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAOklEQVQ4jWNgGPKAEZmjoGPggE3RgysXDiDLw/gMDAwMTLR0HX0AUWGADkZSGKDHP7o4A8OwCAOKAQB38RQKMfDyNwAAAABJRU5ErkJggg==&quot;&gt;Kevin Blog&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://yulingtianxia.com/&quot; add_date=&quot;1423730094&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABgklEQVQ4jbXTzatNURgG8N9697nkclFcA5HycbtEUrryMSAf3eSMyMwfIjNmysjAAP+BMtDNzFCMXDGkTIhyw0A+Onstk3VqO/eEiad2e9f77Oejdy3+I9K/zJoxxAmsw7e/GBzEZDOi2vR6ves4V0oZ4FU1WYVB5W3DLsxhA+xB1GHgQn3PR8Rt9LEPM9VkGqeGyZumae6mlHaUUhbxvRJmIuJszvledd6MJ5ivRi+xG++jlPIm5/wal9DDdET0c8638Ahra6IBPtXuO/F8mOIqzmMLDuMi9uNMp9ooLldhDaYiYq6Ucr86LOJQ0zSbSinPaqo8IrAeP7AUeIztVXGA1XjRtu1sjZjrbGPlHY2II/iqqn/EF1ypdfp4hzsonWdvRBzDbP3v7bCCUsrTmuQzJiPieCllAVuxAlP4UEpZk1L6mXO+Weum0VOYcAMLEXEg5/wAK3EyIiZSSktt2z6sCZdhKHYiIq7h9PgF/Mb944XpclLnux2r1EF396PrW4Zf8AprG3BespAAAAAASUVORK5CYII=&quot;&gt;yulingtianxia&apos;s blog&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://www.rover12421.com/&quot; add_date=&quot;1429520042&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACxUlEQVQ4jYVTTUgbYRCdb3fdxE3YJI3kssaag0ZUSElMt0Ik9GBMQdNI2kN6qYe0UnprEUo9FDwUKvZQSAoWCUWClx6rgg1IPEglCoWKDZQSS5tEiIfFRNt03e704EbSP3yXOXwz8715bwbgBBScjX/m0FrEeDxupWk64HK5Bvf29i7WajWxq6vrqiAIrtHR0a9bW1uVf3ZFRBKNRiPpdHqKZVkzx3GywWBYs1qtaZPJlDs6OhKXlpY++ny+R4io+6uDKIrXgsHgs5WVFZvdbp90u90pRGTr74hI9/f337VYLDgwMDCNiEwDcwBBEJ63tbW9mZiYeGi325Fl2SeISACA0eamEFHvcDjWTCaTPDMz06KVEgAAKhaLJQHgg06nyxqNxoosyz8aElQAIIQQ+eDgYFVV1SaWZW2JRCKwvLzcAo1ARKvT6UQAmPpTaETkuru737a2tn6JRqPj4XB4rqenhwUA+pQmANCEEACAY0RsIoScb29vL+zu7h5HIpEblUrlkt/vv57L5Q4R8fXOzo5cp0lOCKCts7OzVCwWp4eGhjpKpVKNoii7Xq9/XygUwoIgTGUymbmNjQ0+FouFqtWqIx6PP/1tOQghRFEUxWAwvJMkqawoim57e/vO8PDwlUwmMwcAZGFhwQsA8xzHVUdGRr4xAIB1GSiKQlmW5VQq9RgADJIkNXk8nuL6+vo9RLxNCFF5ns/39vaOMwxzYWxszEnV7QAAoqoqzTCMRbPxu9lsrjU3N6/m8/mbi4uLHQAAiqKc43neWC6XP9M0TU799Pv9gxzHpXmefxkIBGz1sUKh0GWz2Yx9fX3zWmNAxNNFqv8O2uIomiMEAH4CAEFE4vV6b0mSlBBF8YHb7X6VzWbvG43GyWQyedgooqJFVSsGAEBCCG5ubr7w+Xyu/f19anZ21lOpVD4Fg0GlQb8z8d9z/wVWFRzO6meFTQAAAABJRU5ErkJggg==&quot;&gt;Rover12421&apos;s Blog&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://koofrank.com/&quot; add_date=&quot;1425537945&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADL0lEQVQ4jQXBzU8cZQDA4d+8M7OzM8PM7G5hWZQCpSosdZW0NKSJ6MUYDkYTPRiNMSaeGj148dTEEI8evOjF/8AY49F4sKkHMY3RJrbWQFUq6xaWBZZZ2J2vdz58HuXG9Q+KUaEwoYG4O8D/94z1dsh1Mtw5k31f0AszSiUFo2YRncYIkWHUNM7aASLIctoZ+HnGzLiFq+s0P77GWwtVmgKeu+KiZhJFZqR+gBiF5Gcx4cMhCiCYnkVInd5RwnbXx3PAuORwVBJ8uzOkc5piegbmkoc6a6LMWOCVELqgVC2jHsiFjT//7tHfHZFnBcuLNvvtkM/uHNK6aNPZC0gShczVoMhJfEk+ytAo0Bpl1Cennt1oNCz2gwI9jDnpSL7+aY+VVY9XLteIVDgMUjJgwtY4i3MMQ8UyVEaWQCuCkKCfkp9EdIucPwYps47Oar1Mf1hQLWlEpsaYa+L7MRdcgzDPGUaChVoZ7dd7j9A0ASkckXNtaZKrFyykIrhoFTzKQRlzCIOEME1pPj2Fo5UwKTPfNNGuzjV4vG7h91OUHFaX69zc6vL7wyFvrnrceuCzvxsw5Y5hV3R2joe8sVJnqTXBl99to1SMVwsVBU0BVVfoJ5IoDrANnaWZMvf/C4niHFXAJzfW+f7mfY67Jyw+Nc6Pt3uoGfMbwzQiTHNOkxhFLdCFIEmhcxxRINB1QSIlaRHzzstT3LrTZfOXAzyvjCrE/IZZMjBMQfOJGoN+jMxzyraOYeoIVZAkOa3WBC8tudQnLZp1FVWHIC3QKApal6d4b/08K07C+9/s8vPmHq5rkMmCYc8HBCvPT/PCYxo7/RHnbJ2318b552iEluYgU8lryw5b7QF+uUTZMAgOA6Ik4qMPX2TlmQb3Oh0eJJKaomBWbGxNUK2OoXzx6efFTDVnzZNI16PtnMfVVXpHA7bafd59/QqqlnD7t7+wLZPF6QaxjElkTJpmKEVyt6DdZfOrHxjZDq21S7gVg+29M6quw2TFIxiNcBwXo2Qg0wRFaMRpgJQRmjwIoOxhN+cgLqiMN1BVHdeEc5aNkhe4TgVd18mzgsHghJJdQ8ocUPgfh05pBpjmljcAAAAASUVORK5CYII=&quot;&gt;KooFrank&apos;s Den&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://www.matrix67.com/blog/&quot; add_date=&quot;1430066201&quot;&gt;Matrix67: The Aha Moments&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://blog.cnbang.net/&quot; add_date=&quot;1424074771&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABt0lEQVQ4jaVSMaviYBCc90iRIqVFCsFALIQIfoKQwiKCZRQLixQWKW0E7f0B/gxLCwO2goK2kkosLFS0SGEXC0ELYa64lzxz4e7gbmCLb3e/YWd2PwAQ/4HP90cmk4HjOLAsC6qqAgCy2Wzig2EYKRJGYVkWIxiGQQBcrVbc7Xbs9/vsdrt8PB4cj8eUJIkA+Jmi+4IkSXAcBwBQLBZxu90QBAFkWYYQArlc7mcfAGiaBsuyUCgUYoLBYABN05DP5+OcEALX6xXNZhNBEPxZgqqqsQSSdF2X0+mUpmny/Y8UsbiuG09wv9/h+z6Wy2VC1nq9xna7/buJ+/0+zr1PoOs6fd+nruvpCSIvAOByucB13XiVEU6nE4IggOd5KJfL3yaWSiUIIdBoNOLmSqUCRVESJkbyhBAwTRObzSYpYTabkSTr9XpKwmg0om3bDMOQJFmtVqOeLy2SxDAMeTgc4iN5J5hMJvGGzuczZVlOHlKr1YKiKOj1eni9Ximn5/M5jscjPM9DrVbD8/n83oKiKPR9n+12O7FjAFwsFiTJTqeTqsUSTNOMD+fXsG2bw+Hwt/WPiOVf8QNKdCROxNBQAgAAAABJRU5ErkJggg==&quot;&gt;bang’s blog&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://wufawei.com/categories/&quot; add_date=&quot;1427182744&quot;&gt;Categories | Ted&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://itony.me/&quot; add_date=&quot;1427454012&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADHUlEQVQ4jXWTS2xUZRiGn3OZzpm2Z6Yzp5fTTq8MTg1KO4AG2iaCLKAL3RHQjRAXCF0JOxIXTVjoQkIiMS7cEFlIlERijNQYLiW2CQlRC8aA6diLreXSzpk5bc/MnNvvwpo0AZ/Vm3zv++0eiecwOjraXfHCoU5Dy7TXq9Qqcv6p6028ffLM7PP6mzGBS4AARBzEG0nESDcipyI2bubmgfRfOJZL567NWjdc30/2mjH62+uwbZd0QqMtEcNyXCbzNtfzJSuCst/D+xVABUhA0hXBpBeKmFP2WbZdik6UdR+mLY+FtQARCp7aHhAmPcRkJ6TnwVI2Hlxq0CP9f5aq5Lrq6UhptDVqHNzVzNCLBvFameJahVe3JgiExHyhHDEhswJfq5+dOpX+4vz5Q2sln3XHZeRAL23JGL/NWezoqiWdqkORfIJAZzjXRLVSpegLtldLh86OnE3LDwqrw/eBnVsMmhMR5h+t0W3UsSfbgufLPHxcxGhQGXipiSe2S/8LjZw7PUTGUKisB8Nye5fWs9uE3dtN3j/ch6lH0BBoApJmM/FkCtyQqKoQkUJe37uVva9l+eNvH18RPerpg70MTDfw/f1HvHXmTZKqy9Kdn3FFSDymorgKQlLxhKBSdjGzrcwsuSysQGNTFLkoaTNaq8H83BM+v3Cbtm1bMMxGCKEwu8TayipqtIYwkOhoN1h4XOHTD38gKUFtrTojO9SMafF6hnaZTFyf4uMLt+jeuQ1/tYJjuxRKDk7VQw4DmjsMzl28y5fj0ywJKPjVMblj8Ohiqqv1SmdC5Ug2zrcXx/nul0X6dmQIqwFWsYocSHS06Fy+meebq/fItWpoClcOn/xgUQZYfvD78VSjXn45kwLb4d7NKbzAxwtlXsm2I4cR7KLDzOIqekRiT09dWQ44DiAD9H00bxkpfdCPKlYQVbj7sICzZBF4IbenFlku2sRUhanZCrpeY4UEgz+B9YxJX+3DPLAhU4+EuPFOixh/t1Xcei8t+vV/ZdpX9z8ybebEsRPdcyV76OhAOnNkf4Zrd/7Kf/JjfmLs6uVndP4HGRZOh3tPgaUAAAAASUVORK5CYII=&quot;&gt;Tony&apos;s blog - stay hungry, stay foolish.&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://beyondvincent.com/&quot; add_date=&quot;1425021493&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACh0lEQVQ4jV2Ty2tTURDGf3MfaW3SNG2tfYMbC1btCysVS60vFHVTHyCIC1HBhQvBrQv/CRXcqCCKiCIuFNSNdCUUMVArIqWWqn1S06bJTW7uveMiubF2NodzZuabme+bI4MjSaVkCnRsreT7jxwKCBtMAdHwAAEj9KgqdTUWN6+30dhgI1rEbWuOcOZEHV3bq+jqrOL65RZ6O6OEVY0Q/NiBWo4N13D7wRy2LVw534RtCaYhDPbHmf6ZZ/pnnrbmCPmCIiLrAFS4cKqBr5MOqVWfps02w3vj2HYxKJdXUmmf1KqP50HW0dI8JQAtzeU4AbGoweR0jrVsQNbxqY4ZrKS9csJGM9ZfZucLXDrXSGNDpEzg1vZNTM3kEZXym2n8o9jQEFmLNZ68XCST8dESiQO9Md6PrpTZn5rJcetGO0/vbqNvVwwZufRFjw4nOHuynlfv/uC6SmWFQX93lBdvlllaLjCWXEPlXweVEQGBvKtYi8sFnr9e5shQgscvlsjlAxI1Jnt6oyQnMtTXWuzuqSad9orZIhwejPPg2SKqAQYIjuMT+FBXa3HjaiuWJQSB8HvBpaUxwv6BOKlVj9Sqz1rG4+C+BNVREwALwLIE11N+zblURIS+nbFyu54PWSdgbslDAMsUnJwyu+Ai4SYm4hYLSwUUuPNwls8TmbJoQaAlsP9lDBkxUOjsqGIsmUZQ/qQ8XFfL8eHGoVJSRhEpq4ilovTsiHL/6TwoHD9Uy5Z6GyfvA2BbQmuTzdBANYJgmFBZIZgm+D5YLVsijH/Lkl7zUYG3H1Jcu9jMvUfzCGAY8Gk8w+jHdLGiKfR3xwiCUodDp5NavIQzrv/Eim0bFArh7v/vU+AvKdkM5LQuafoAAAAASUVORK5CYII=&quot;&gt;破船之家&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://www.mgenware.com/blog/?cat=5&quot; add_date=&quot;1425541987&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABj0lEQVQ4jc2TzWtTURDFf3PffclLTL+MMbGtol0oYkAEEdzUfyEguOnChRv/LZcu253gonRjF3Wh2EUXLUSStGnVfDXPvLzce7uIeShEKXRRz2pmYIY5Z85IebXiuADURZr/jwHaOYe19o+iiOCcmyQwiREQklwphV5eLPHs6WOccwyiCM/zOKjWuH93hSCVolprcCWb5Vp+nqPjb5iR4erCPPEoZuvDR/SdW0u8fvmCaDjE1xrlKT592ePhg3sYazmo1lgqFUinU/ROQzrdHoulAr7vc/K9hQYIBwPqjSZzszkyQYD2NZ3eKa12B6UEEcFaRz8MAfhaP+JGsYAShZIxM0Qk4eisI5fNUCzkEy364U9+tLtY5xAEmYjYaJ6w8W6TTrdHEKTxtWYQRSzMzbBy+ya7e/ts73ymeD1P/fCYOI4BmJ3JUTtsIuXViksUB4y1PHlU5tXac3LZDO+3tnnzdn18mV/b/n4tmWZlz/NIp3wAhsOYkTF/98G0ojGGfmgSG/wLUwecp3GCy/+FM2UMlj2VXr6OAAAAAElFTkSuQmCC&quot;&gt;iOS/OS X/Cocoa | Mgen&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://blog.codingnow.com/&quot; add_date=&quot;1430070399&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAy0lEQVQ4jWNgoBAwElJw4PaH/zC2g6oAhnqsBiBrgmmEiWEzBEMzugHYDCVoKzGGMjAwMDBhEzz98BOGYlxOx2rAot13GCZtufkfm0FEGaAqwc1w58VXBlN5PoKxhNUARkYmhiB7JUJ6cRuQ663KuO7gPaIMYGBgwIyB3Dnn/q849PA/PjUEXKDMcPTWW6yxQZQBk7feZbBWE0YJROTUiAJuPf/4H52Py2b0BHXr+cf/BKMJmyEMDAwMUjyMDM++/CecG/EZJMXDyAAA3oZwz2MtmwkAAAAASUVORK5CYII=&quot;&gt;云风的 BLOG&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://answerhuang.duapp.com/&quot; add_date=&quot;1425025018&quot;&gt;answer_huang - iOS developer，Python fans&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://www.itiger.me/&quot; add_date=&quot;1429457278&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADQklEQVQ4jW2SX0yTVxjGn/N9X0uLlha0tqVYxAodThAr1EmnFZjDcrOoQaNeGHVLnCa7lGliAlypicaEG0MW3byTkKnZFDYYY2NGJR0rIELFFflbEGhrWm2/tuc7XkhNMb7X5/ec53nel+CDOa9Wb80vs9bN+WanH6jVXui1eN7ePXaupvokohHjwJ+dZy+8FtuT7/lUuAzQV9ed+T1osdh/fjr4GSdGnIIgOLWZKw/PG40Fu+vq9NPhN84Cd3+rCwgAIO8E6us5dHezU4cOVGSV2b7tH3AlKnfZ2J7qChRmqVFeuYNQOaPyFVl0Q8mWlUPuvn7Xy3l3LcBzSwIAgADP6zru3WV7d24hW4s2EffYInnoGsTtR8PsyIGvOH2GwHmHR1BeUPgaAD4FGJcaYWhySqsiCWwsMLN0hYysSkTI5s/LSLkxA/5JH3sxOsK7uzpmHWbzPwBQDzBhiSUAsCbXNLqCxPFL632SnZnJSi05sDi2E3ExyDx/90qaeIwoVmf9Zrp40YdLlwhSHEgtLS1qjVI46qiwkY2bC6FeZ2RrrUX4//kEwrwc248dFEw7yjEvSfnOmho5AAYA3NLvbGFmRi9RqajvqVfS6rWcaa2BDwdfEUhxkFiUe+YZw0+t7fBN+4bb2tpEpFpPijQ2NtrjsWgXIn447VZPVIyZBZ5PZzwXeDg0/sz7Yso275sYKrY5qhoaGl4CQLIDDgDte/RXqVLGyxPgu10x2R7N3HjtN/udN31zr76/9Wtnn06BxzEqZcRiCxQpIJJ5EglJJyYoW2fKa25rahJDsxOP0xQyIvAo/q+31yVSdkehVGoMBsv77SUdvGuS0mkhXcnMGyxvjl89YzFgfdNsKI36mer011cuTA3+eP0PKkn5fr9/8aOnXLTpExoMBE4OdPRcNlRW7eNVhhOTY6DCqmweOq7EyKsfiJGg51rzjZ5kf8sieLxTT9KViub1pXaVPJRTE4mHqLV4G5dt0CVkIlbv2n3EuhAcvZbKECwfAoAd/e6HKqVuTWdAO8JkVI6oKiLlaXK5LzUOzxf27BJCyPs1Ljvl2toWDgByDTkaoiBsLrwojdMZFlbEEVJGITIxjH8hpTJvAZiJWxw+BwdDAAAAAElFTkSuQmCC&quot;&gt;Tiger的小站 | 得失从缘，心无增减&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://limboy.me/&quot; add_date=&quot;1424075825&quot;&gt;Limboy&apos;s HQ&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://nianxi.net/&quot; add_date=&quot;1425021550&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAC90lEQVQ4jT2TzW9UZRTGf+d9770zbeejQyGllQElFmyCiSQQqYqCSz/2RpYadyYqC+P/4MKPle6NbkyVENGEUEmQRFMIkkprS0vBlNYC/ZzpzNy57zkuZuQkJyfP4jknefI7YmYBEIAQAt572Vjf4PNPP+PS5Ql279rD0J4hzrz7NmNjY4QQcOK6DhBVVREhhCDee5rNJmff/4jLFybwcQ/tLEOC4vqEL77+ktOnTxGygPPu8QIzMwCr1evy8Qdn7fqVa1IslNjYquO8w3tHmrbI52K+/2WcweG9qCrOORzwv5BfL05w8+p1eXJflUajRRw7RKDVTCmXimw+2uLnny4AgqpiZjjAus2d6WkbPXSQvnIffb09OO9I2xlq0GxkJIWY2cV5RMDMEBGcmeG9I4RgS/fuE+ViSqVeSuVeotiRz+XwTkhDSk+SZ+nuElknbMyMSEQQEanvbNtfszO4llLuL1CpFNlq1tC0TdKTp5W1iV3E+sojggaSKEZNOxmYYb29PVSHqlTKeeKSoxEFxs9/w4efvENhMMZFjlaWMjI6QhxFmBqCEImIhRAk8pGUBgfs8P5+XnvlVX6bnaGvsgvJMrJUOfnCs/wwPsHx54/hxJFphveeCDDpUCFD1WHbXF2WA0cOcfjl46zfnubUiyc4eeQo354/x779w7z+5hudAJ2AgDMM5xyqaseOPid7q09xcfIGyyurWBpRGKiwWFvj5uISb713hkK5iKoiIoAhatoWxKuqZVkmdxYWZPb2AgNRg9FnDjJ37yG/35jjQPUJTrw0RrlUJk6SjhnBCWKqKs452anX+e6rH5m6NsXI01WK/bsplxKaaymTl6YImZIkCaaKGB0OAO2iLHO3FtjZblFfTRk/9wd/Ts0zefUWtY0GO1tNFv5eREQwM+jOCBARMYDNzS1UmyRJhfmZNe7OXiGYUCzkWGlssF2r0T32uCLDfAdkZHX5oT1Yf0ChVCaXz5FEEYjRTpV6c5t//7lPF7zOHzjHf4/pcDhN+fT3AAAAAElFTkSuQmCC&quot;&gt;Latest Posts – 念茜的博客&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://www.ios-wiki.com/&quot; add_date=&quot;1427683653&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAC7UlEQVQ4jU3TTWtcZRjG8f/9PM95mXMyM20mNqCV2tSmBVtrGhGp4EJwoS4Ul1pduNFVF34Dl34DdWMRXImCSKnLCi6EglJqiWljCzGT98lMMjmZM+fluV0kFa/9dS0u+ImqqiqA8jiqigLWGABqD3l+gLOWKIoA8N4D4GqvqIIAiCIIIoIRGO72WFxYYNDvkzRbBFFKkjaZmTlFI45RVUTVH9UVULyHyiuDUc33P96ktz/mYbfPhZMTfPz+O6ytrrO93eW5i5cJAof7Z6fkwaBiMFb6B8Ju7hnkwmhcsdt8jagTEZwMWVr/k72tTa7/8At/3V/kzSv3uTR3GXd3o+T6PYidI5QKg+BrRxQIpycL/t6oyIsRb5w/xq3bd/g5m+fF199iZ+1bqrLAPTFhaYceZyyheOraMlZlMs453xEatuZOV3hhKuPre22en5vFaMEHn3zKdALmWAQhNYGOsIwp/OEjTzcLFtcNFZZXp9ZZWe6yxSSpUfZGNY82M1Q9rhULDQv7RYxxBaktaCUVgbMc1MKot8+tL64xSs7y0kefM85zytqwtVeCJJhmZEiNUlYF7biklXjajYqdzKKuxfJvN3i0uMD0M7MEQcBwVIMqyzuAKiZ0hkasVLWwNzJUBUTO0MsbrK5usn77OyRqk56aI7UF+4WlVMfKQClKj3FGaIeCMRVFDRNhTj5WtooGK7/fZLz5EHP8NMP0IlmWc26qoPTKxoFnO6sxKjAZK/nY4NXQSTzdgWPQGzK8+xNlWZDMXKHRbrKyndPtQaJDsmHGg60ShwrHGw5DTYBnaQ2GmlAv3cD3l9grU849+wpxOSCOlcnU82Qz4EQr4kzH4kSENBJSM8SUBrXKU9EOf/z6Dbu9bc5eeJnPrl5iuiV0JlLC0B0hk0NMqsrslOPqfMqJpqUzYWnGljP9t/nyq00+fO9d5meaqK8RY/FeqbwieoSvrms1Rv5b/H+yLMNaiwtCRMCIHAo0BlFQUf4Fbo5nTNop2n8AAAAASUVORK5CYII=&quot;&gt;iOS wiki&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://blog.xcodev.com/&quot; add_date=&quot;1425021852&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADDklEQVQ4jW2TS2hcdRyFv9//3jvJTN6P1mnSUBvKGFO0+KguihhEuxPqIhvFKih21Y1aIbtRcOVGEERddCMUFcVuVNRNEGlFjGib0dSkvSbNZJJJJpPJPDL33v/DhRQk+K3PdzibI9zBOcm/iRQmkYEqam4O5j6S5NvfXdf6b1/kwvCW5PNv3ARqAIVCIVUoFIzk804B5PNi2cf775x9Mpbxl7SVRyePn8iOjuVWwpXS1cWw+NaF82dDAPmvcOz8YsehbP9gms4hUXJ4oHn9RbzMyLUNPTQ9sTN54dzjVLbWufz5pfnxex78eLCv9zs5/fbOUyrIvGCRAWBEiRo2joFOX7oaiWgBV40JHkgt22dPLplPv2/5C2G5cubh6vCB7NiMb+GRzFDwXNSEQIGxEEeQ7oCjI/iLy9DYNZye0uqvm7vuUv0ZufcIf7z2uswAi8rE8WK7BhKjXdvpuO2MjZxJi7PD/dihQdxjI7hctsX1taMu1w1dVk9MzLgbwKYyWq+b2OAJvk7w4gjPN3jdvahwBeUrJBv8KFeu/MxCbUz5CTQjOdizXToJoJSNylrbeisGz8P2dwoDPRAbx1YNSmGZyx9M8eqHf+JSQ9IpWCse2vXkAFRcXds2satYAymFEwedHbBbE1otKM5/RXEepk49QVcaqTetcQ6MUfcBqPLyJzWTmE0c1LZxOoJELOUtoVJcJ1p4l97Dd6ODSXQCWIPWYK2aADy19M17kYldyRrQMfR1w14DNrahUZwlXr7myJ4x5b1Ro/cww2nlTAwKP3d8em3UByCxxXoLupVorY1sbnhi9urY258p14FkDj3tBZmAdhs88by+ALRTB+ueGfcBjLalbg+UJl0pe3hA1+6vVEpfYgdPkcqMbdtmslZtV28rp0Nn4qXE1MNGXJn/d0HcWvWaAVGk/97TZtXhwp0bF0+oDu6vR8nXq0nqZS6mGkB9/18E4Nj0DweakTpSKhaKzJ3bAhJgePCu8efrG7euJvDTHSGfd2oWFMBsHgM42d+6n4de+SUg79T/Zf8BUqqP2ka5aQcAAAAASUVORK5CYII=&quot;&gt;Xcode Dev&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://esoftmobile.com/archives/&quot; add_date=&quot;1428483154&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACgklEQVQ4jXWTu2tUQRSHvzN7726yd4mvCIpGiA8UH1iIiEJ8NHZaaiX4AP8CQews0tlpZy9aGEHUImAhURHRQo1vgia+E5MYs9nsvTN35ljsNVHBaeb8znDOGQ6/T6YPHlFQQGjd/BFLof//HlmXF1JBpagpClQL/bsR/zSEyDkHJQPGgBQTVCH3EJda2nsIAUQg+jsXWe/R6TrazOa/VoowCxLC2DSoIh01pByDD+honaABU0swbWUi25ilsmYt5ZXLIcshLhGm6sy+eE117x5MpUTzyUvcjwkkSUh29yDVmPTFG7KxURhcs0PHrvarqqrX1ml+GtI3+w5oXujJvj59tmi9vj95WkOR+3LmrD7v3q6RdQ7faKK5Z+j4Mey3cZhxSHsnvp5iqjFJz078Ak/7/j1IUDQE8qyO9TmRzRxeA5QMq3p7kUqF+oMBPpy7iGkr0/gwTLW7m9qhwyRbNtD48pn2FSvwpYB1lsilFh9aix2/M4B3gfTVIHZWMZHw8+59Qg5dp09hJPCx7zrdJ47ig2J9jrGZJYSAAFOPHzJ+u5/G8Aja0YEAbmqS0ZsDVBYvZGboNZN37yGqeO+xucdYzfAGVIRN5y+w7fIltl69Al1LCCJQa+PrjT4UGL12jexnHTWGXAzW5citzo1aXr2MStdiNMvAGNTlpG/HaN/chfs6QTYyQW3XOtJH71AD1V0byJ6+w32fRa4v3aRqU1TdvHMRTNxGcClSipG4TEhnMJUENBBsE4kriImJnLWIiUDKcy5WUXwISFxFNYDLkTjB57617ThpWds7Iuc8Kvk8Y9qyPAqKQwqmEIfMcevmXB9Z7+arlBZQc1T+Qd+/pBbhLyQreDcbhU+RAAAAAElFTkSuQmCC&quot;&gt;Archives | Esoft Mobile&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://macshuo.com/?page_id=93&quot; add_date=&quot;1424076234&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABF0lEQVQ4jZ3Tv0rDUBTH8W96E9ukjTaVFgwuOog4OBdEfA+fS3ByVNDJ3cVBsvkIXbS26R/tTcO9JRUbH6BRcnvGH5wPhwM/K89/ckqM1hrP89bySpllgPu728K8FBBFEZMk2wyQUvLw+ITr1TcDrq5v0N8V7IplDsTDmOeXV6qOheM45kB/EHNyfMhwmuL7rjkwnSV0wpDp+ItgxzcH5qlmMFHoNGG3FZgDMlX0em9kek670zYHPt775GrE/LOPYxc/0f4P6J4ecLTfpBlcksxm7IWhGXB2foHWCq0UiZTlL1hoxUJrtqo1aq6LEDbkxZ0rBJbZEiklthAIIWgGLbz6ehMBrL/qvFqtGI9ifH+beqNRuAzwC4yiZ6yDUKr4AAAAAElFTkSuQmCC&quot;&gt;全部文章 | MacTalk-池建强的随想录&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://woodgears.ca/&quot; add_date=&quot;1430066166&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABzUlEQVQ4ja2Sz2oTURTGfyNZZChNhhlnUeqEmZ3UEIqLUjCupWbhC0jAF+hDCN35AK676BvEuAlWWoIEGtophtgiiTMpBScJM2NjsgnXxTTXP0kriGdzDxfO757v+y78jxKBLwbthviXWUUEvjg7qjAJIww7z73NkjKDAiimpdwGSC26HLQbwq3tyd64v3EjJOXW9khrWc5P9jk/2WfQbohxGJDWskzC6K8S7sju2yXDVpXe8TtGoU/HrQNw2+sAqUvvI3gwjgL0tS3SWpaOWyc4rbGSeyBl9LtNljRLeiQBV57LOAoAGPdcTt8nJ0Ach3x6+1r0u02+el8YuXVE4ItfjZUS1KwpIQCF0jZOocgkjKScJy925lKRKcy2mFUch8TuId2DXdSsuXD4N8Cf1T3YTcDxBQBnR5WFf0N5+TQnag0P09B5tqHOgQqlbQw7j6qZSC/CC7lRyv18BUAwGNIZ5HCMqXxVX9vCsPPXsR4CkMloOIWi3OJGCQDDVpU3rWoCs9bZfL4zF6NMwTR0HGMKgJpZlUO5R2V0ax2WV1C1JCkR+KL3oZL48apcFN/7Ho4x/RnldSL24zJOoQjAKPQBuGs/pN9tArCkWfwAmgrUdDapt9oAAAAASUVORK5CYII=&quot;&gt;Woodworking for engineers&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://blog.csdn.net/yiyaaixuexi/&quot; add_date=&quot;1425021820&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABgklEQVQ4jcWTTy8DYRDGf9PubruEEFai2sSfkDRt4s9hL+Li6lu4IeFrOOMbkLhIHNzFzcWlEkoPKpGgSLuCpNXV12FrdW2ExMEcJpl35nneZ955R44QxR8s8hcwgBY+Ur4XQE8kMJIpxDRRbp23cplasYiq1r4jAHNykr6FBTrn5tD7+0P5t0eHXHfPVwJFxDRJrq3ROz8PIt+IVtSvb8ItiKYxsrdHx+ysn3R2dylvb1M9zdN4fkLiJvpAgmhHZ5jAWlwKgK9Wlrlb30AIKqkVCoFYPsaYPs5hZrNe0cUFJ6OjKKVCBF/NH2M8nQ7c4oF/Np+g4ThNTR6ZaBq/+WE+QWVnp4kXYoODDG1tYiSTKBQ0PSgi8ZgfQcsbRLu6GDvYp218witVCpTitXhJ/eEe0TR0y6JeKnFm257UVgWuU+F8eobb1VXcSrlJLxjDQ7TbNm1TU+ipFG6pFGhNPpepRZZh0G7bxDMZNMtColEa1Rru/R0vh4dU83lfgfz7Nr4Doo6Dci0l0QIAAAAASUVORK5CYII=&quot;&gt;念茜的博客 - 博客频道 - CSDN.NET&lt;/a&gt; &lt;/dt&gt;&lt;dt&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://joeyio.com/&quot; add_date=&quot;1429672701&quot; icon=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAwElEQVQ4jWNgGGjACGMwSxv8J8cAFmTOyR2rSdJs7hGK4JDjAmZpg/9MpGpCB4z4bP779AIjLjmYC1gYGLD73dwjlOHM5dv/TXRV8RrCwsDAwIBNEbFhQnEY0N6AM5dv//cJifl/5vJtrF5iQlZY0zYRQ2FDYyMKjdOADZu3MbRPnc+wYfM2FAUN9fUoNDpgZJY2+P/36QXGM5dv/9+weRtDgK8Xg4muKkycgYGBgYFZ2gCnF/EmpJM7VmONYmQAAOm1RtD0AC8pAAAAAElFTkSuQmCC&quot;&gt;代码手工艺人&lt;/a&gt; &lt;/dt&gt;&lt;/dl&gt;&lt;p&gt; &lt;/p&gt;&lt;/dt&gt; </description> <link>https://luowei.github.io/ios/some-useful-iOS-developer-blog.html</link> <guid>https://luowei.github.io/ios/some-useful-iOS-developer-blog</guid> <pubDate>Tue, 14 Jul 2015 00:00:00 +0800</pubDate> </item> <item> <title>HTTPS的深入理解</title> <description> &lt;h1 id=&quot;https的深入理解&quot;&gt;HTTPS的深入理解&lt;/h1&gt; &lt;h2 id=&quot;https的工作原理&quot;&gt;HTTPS的工作原理&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;HTTPS在传输数据之前需要客户端（浏览器）与服务端（网站）之间进行一次握手，在握手过程中将确立双方加密传输数据的密码信息。TLS/SSL协议不仅仅是一套加密传输的协议，更是一件经过艺术家精心设计的艺术品，TLS/SSL中使用了非对称加密，对称加密以及HASH算法。握手过程的具体描述如下：&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1. 浏览器将自己支持的一套加密规则发送给网站。 2. 网站从中选出一组加密算法与HASH算法，并将自己的身份信息以证书的形式发回给浏览器。证书里面包含了网站地址，加密公钥，以及证书的颁发机构等信息。 3. 浏览器获得网站证书之后浏览器要做以下工作： a.验证证书的合法性（颁发证书的机构是否合法，证书中包含的网站地址是否与正在访问的地址一致等），如果证书受信任，则浏览器栏里面会显示一个小锁头，否则会给出证书不受信的提示。 b.如果证书受信任，或者是用户接受了不受信的证书，浏览器会生成一串随机数的密码，并用证书中提供的公钥加密。 c.使用约定好的HASH算法计算握手消息，并使用生成的随机数对消息进行加密，最后将之前生成的所有信息发送给网站。 4. 网站接收浏览器发来的数据之后要做以下的操作： a.使用自己的私钥将信息解密取出密码，使用密码解密浏览器发来的握手消息，并验证HASH是否与浏览器发来的一致。 b.使用密码加密一段握手消息，发送给浏览器。 5.浏览器解密并计算握手消息的HASH，如果与服务端发来的HASH一致，此时握手过程结束，之后所有的通信数据将由之前浏览器生成的随机密码并利用对称加密算法进行加密。 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;这里浏览器与网站互相发送加密的握手消息并验证，目的是为了保证双方都获得了一致的密码，并且可以正常的加密解密数据，为后续真正数据的传输做一次测试。另外，HTTPS一般使用的加密与HASH算法如下：&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; 非对称加密算法：RSA，DSA/DSS 对称加密算法：AES，RC4，3DES HASH算法：MD5，SHA1，SHA256 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;HTTPS对应的通信时序图如下： &lt;img src=&quot;http://ww2.sinaimg.cn/large/680dfa44jw1faniowa4rwj208v09mdg9.jpg&quot; alt=&quot;时序图&quot; /&gt;&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;HTTPS协议和HTTP协议的区别：&lt;/p&gt; &lt;ul&gt; &lt;li&gt;https协议需要到ca申请证书，一般免费证书很少，需要交费。&lt;/li&gt; &lt;li&gt;http是超文本传输协议，信息是明文传输，https 则是具有安全性的ssl加密传输协议。&lt;/li&gt; &lt;li&gt;http和https使用的是完全不同的连接方式用的端口也不一样,前者是80,后者是443。&lt;/li&gt; &lt;li&gt;http的连接很简单,是无状态的 。&lt;/li&gt; &lt;li&gt;HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议， 要比http协议安全。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;与https相关的几个常见的安全问题&quot;&gt;与HTTPS相关的几个常见的安全问题&lt;/h2&gt; &lt;h3 id=&quot;csrf&quot;&gt;CSRF&lt;/h3&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;CSRF(跨站请求伪造，Cross-Site Request Forgery简称)，是攻击者通过一些技术手段欺骗用户的浏览器去访问一个自己曾经认证过的网站并执行一些操作（如发邮件，发消息，甚至财产操作如转账和购买商品）。由于浏览器曾经认证过，所以被访问的网站会认为是真正的用户操作而去执行。这利用了web中用户身份验证的一个漏洞：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;简单的身份验证只能保证请求发自某个用户的浏览器，却不能保证请求本身是用户自愿发出的&lt;/code&gt;。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;案例： 假如一家银行用以执行转账操作的URL地址如下： &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://www.examplebank.com/withdraw?account=AccoutName&amp;amp;amount=1000&amp;amp;for=PayeeName&lt;/code&gt;&lt;/p&gt; &lt;p&gt;那么，一个恶意攻击者可以在另一个网站上放置如下代码： &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;img src=&quot;http://www.examplebank.com/withdraw?account=Alice&amp;amp;amount=1000&amp;amp;for=Badman&quot;&amp;gt;&lt;/code&gt;&lt;/p&gt; &lt;p&gt;如果有账户名为Alice的用户访问了恶意站点，而她之前刚访问过银行不久，登录信息尚未过期，那么她就会损失1000资金。&lt;/p&gt; &lt;p&gt;这种恶意的网址可以有很多种形式，藏身于网页中的许多地方。此外，攻击者也不需要控制放置恶意网址的网站。例如他可以将这种地址藏在论坛，博客等任何用户生成内容的网站中。这意味着如果服务器端没有合适的防御措施的话，用户即使访问熟悉的可信网站也有受攻击的危险。&lt;/p&gt; &lt;p&gt;透过例子能够看出，攻击者并不能通过CSRF攻击来直接获取用户的账户控制权，也不能直接窃取用户的任何信息。他们能做到的，是欺骗用户浏览器，让其以用户的名义执行操作。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;防御措施&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;检查Referer字段&lt;/p&gt; &lt;p&gt;HTTP头中有一个Referer字段，这个字段用以标明请求来源于哪个地址。在处理敏感数据请求时，通常来说，Referer字段应和请求的地址位于同一域名下。以上文银行操作为例，Referer字段地址通常应该是转账按钮所在的网页地址，应该也位于www.examplebank.com之下。而如果是CSRF攻击传来的请求，Referer字段会是包含恶意网址的地址，不会位于www.examplebank.com之下，这时候服务器就能识别出恶意的访问。&lt;/p&gt; &lt;p&gt;这种办法简单易行，工作量低，仅需要在关键访问处增加一步校验。但这种办法也有其局限性，因其完全依赖浏览器发送正确的Referer字段。虽然http协议对此字段的内容有明确的规定，但并无法保证来访的浏览器的具体实现，亦无法保证浏览器没有安全漏洞影响到此字段。并且也存在攻击者攻击某些浏览器，篡改其Referer字段的可能。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;添加校验token&lt;/p&gt; &lt;p&gt;由于CSRF的本质在于攻击者欺骗用户去访问自己设置的地址，所以如果要求在访问敏感数据请求时，要求用户浏览器提供不保存在cookie中，并且攻击者无法伪造的数据作为校验，那么攻击者就无法再执行CSRF攻击。&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;这种数据通常是表单中的一个数据项。服务器将其生成并附加在表单中，其内容是一个伪乱数。当客户端通过表单提交请求时，这个伪乱数也一并提交上去以供校验。&lt;/code&gt;正常的访问时，客户端浏览器能够正确得到并传回这个伪乱数，而通过CSRF传来的欺骗性攻击中，攻击者无从事先得知这个伪乱数的值，服务器端就会因为校验token的值为空或者错误，拒绝这个可疑请求。(同Cookie Hashing)&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;验证码 这个方案的思路是：每次的用户提交都需要用户在表单中填写一个图片上的随机字符串，这个方案可以完全解决CSRF，但在易用性方面似乎不是太好，还有听闻是验证码图片的使用涉及了一个被称为MHTML的Bug，可能在某些版本的微软IE中受影响。&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;中间人攻击&quot;&gt;中间人攻击&lt;/h3&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;SSL证书欺骗攻击 此类攻击较为简单常见。首先通过ARP欺骗、DNS劫持甚至网关劫持等等，将客户端的访问重定向到攻击者的机器，让客户端机器与攻击者机器建立HTTPS连接（使用伪造证书），而攻击者机器再跟服务端连接。这样用户在客户端看到的是相同域名的网站，但浏览器会提示证书不可信，用户不点击继续浏览就能避免被劫持的。所以这是最简单的攻击方式，也是最容易识别的攻击方式。&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;防范措施：&lt;/p&gt; &lt;p&gt;钓鱼类攻击，App直接调用系统API创建的HTTPS连接(NSURLConnection)一般不会受到影响，只使用默认的系统校验，只要系统之前没有信任相关的伪造证书，校验就直接失败，不会SSL握手成功；但如果是使用WebView浏览网页，需要在UIWebView中加入较强的授权校验，禁止用户在校验失败的情况下继续访问。&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;SSL剥离攻击（SSLStrip） SSL剥离，即将HTTPS连接降级到HTTP连接。&lt;/p&gt; &lt;p&gt;该攻击方式主要是利用用户并不会每次都直接在浏览器上输入&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://xxx.xxx.com&lt;/code&gt;来访问网站，或者有些网站并非全网HTTPS，而是只在需要进行敏感数据传输时才使用HTTPS的漏洞。中间人攻击者在劫持了客户端与服务端的HTTP会话后，将HTTP页面里面所有的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://&lt;/code&gt;超链接都换成&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://&lt;/code&gt;，用户在点击相应的链接时，是使用HTTP协议来进行访问；这样，就算服务器对相应的URL只支持HTTPS链接，但中间人一样可以和服务建立HTTPS连接之后，将数据使用HTTP协议转发给客户端，实现会话劫持。&lt;/p&gt; &lt;p&gt;这种攻击手段更让人难以提防，因为它使用HTTP，不会让浏览器出现HTTPS证书不可信的警告，而且用户很少会去看浏览器上的URL是&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://&lt;/code&gt;还是&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://&lt;/code&gt;。特别是App的WebView中，应用一般会把URL隐藏掉，用户根本无法直接查看到URL出现异常。&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;防范措施：&lt;/p&gt; &lt;p&gt;该种攻击方式同样无法劫持App内的HTTPS连接会话，因为App中传入请求的URL参数是固定带有&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://&lt;/code&gt;的；但在WebView中打开网页同样需要注意，在非全网HTTPS的网站，建议对WebView中打开的URL做检查，检查应该使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://&lt;/code&gt;的URL是否被篡改为&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://&lt;/code&gt;；也建议服务端在配置HTTPS服务时，加上“HTTP Strict Transport Security”配置项。&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;针对SSL算法进行攻击&lt;/p&gt; &lt;p&gt;上述两种方式，技术含量较低，而且一般只能影响 WebApp，而很难攻击到 Native App ， 所以高阶的 Hacker，会直接针对SSL算法相关漏洞进行攻击，期间会使用很多的密码学相关手段。&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;防范措施：&lt;/p&gt; &lt;p&gt;这类攻击手段是利用SSL算法的相关漏洞，所以最好的防范措施就是对服务端 SSL/TLS 的配置进行升级：&lt;/p&gt; &lt;ul&gt; &lt;li&gt;只支持尽量高版本的TLS（最低TLSv1）；&lt;/li&gt; &lt;li&gt;禁用一些已爆出安全隐患的加密方法；&lt;/li&gt; &lt;li&gt;使用2048位的数字证书；&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;实现支持https&quot;&gt;实现支持HTTPS&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;使用NSURLConnection支持HTTPS的实现&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;以下通过系统默认验证流程来验证证书：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// Now start the connection NSURL * httpsURL = [NSURL URLWithString:@&quot;https://www.google.com&quot;]; self.connection = [NSURLConnection connectionWithRequest:[NSURLRequest requestWithURL:httpsURL] delegate:self]; //回调 - (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge { //1)获取trust object SecTrustRef trust = challenge.protectionSpace.serverTrust; SecTrustResultType result; //2)SecTrustEvaluate对trust进行验证 OSStatus status = SecTrustEvaluate(trust, &amp;amp;result); if (status == errSecSuccess &amp;amp;&amp;amp; (result == kSecTrustResultProceed || result == kSecTrustResultUnspecified)) { //3)验证成功，生成NSURLCredential凭证cred，告知challenge的sender使用这个凭证来继续连接 NSURLCredential *cred = [NSURLCredential credentialForTrust:trust]; [challenge.sender useCredential:cred forAuthenticationChallenge:challenge]; } else { //5)验证失败，取消这次验证流程 [challenge.sender cancelAuthenticationChallenge:challenge]; } } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;如果是我们自建的证书，Trust Object里面服务器的证书因为不是可信任的CA签发的，所以直接使用SecTrustEvaluate进行验证是不会成功。又或者，即使服务器返回的证书是信任CA签发的，又如何确定这证书就是我们想要的特定证书？这就需要先在本地导入证书，设置成需要参与验证的Anchor Certificate（锚点证书，通过SecTrustSetAnchorCertificates设置了参与校验锚点证书之后，假如验证的数字证书是这个锚点证书的子节点，即验证的数字证书是由锚点证书对应CA或子CA签发的，或是该证书本身，则信任该证书），再调用SecTrustEvaluate来验证。代码如下：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;//先导入证书 NSString * cerPath = ...; //证书的路径 NSData * cerData = [NSData dataWithContentsOfFile:cerPath]; SecCertificateRef certificate = SecCertificateCreateWithData(NULL, (__bridge CFDataRef)(cerData)); self.trustedCertificates = @[CFBridgingRelease(certificate)]; //回调 - (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge { //1)获取trust object SecTrustRef trust = challenge.protectionSpace.serverTrust; SecTrustResultType result; //注意：这里将之前导入的证书设置成下面验证的Trust Object的anchor certificate SecTrustSetAnchorCertificates(trust, (__bridge CFArrayRef)self.trustedCertificates); //2)SecTrustEvaluate会查找前面SecTrustSetAnchorCertificates设置的证书或者系统默认提供的证书，对trust进行验证 OSStatus status = SecTrustEvaluate(trust, &amp;amp;result); if (status == errSecSuccess &amp;amp;&amp;amp; (result == kSecTrustResultProceed || result == kSecTrustResultUnspecified)) { //3)验证成功，生成NSURLCredential凭证cred，告知challenge的sender使用这个凭证来继续连接 NSURLCredential *cred = [NSURLCredential credentialForTrust:trust]; [challenge.sender useCredential:cred forAuthenticationChallenge:challenge]; } else { //5)验证失败，取消这次验证流程 [challenge.sender cancelAuthenticationChallenge:challenge]; } } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;使用AFNetworking来支持HTTPS&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;AFNetworking是iOS/OSX开发最流行的第三方开源库之一，其作者是非常著名的iOS/OSX开发者Mattt Thompson，其博客NSHipster也是iOS/OSX开发者学习和开阔技术视野的好地方。AFNetworking已经将上面的逻辑代码封装好，甚至更完善，在AFSecurityPolicy文件中，有兴趣可以阅读这个模块的代码。AFNetworking上配置对HTTPS的支持非常简单，AFHTTPSessionManager与之基本一致。如下代码：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;NSURL * url = [NSURL URLWithString:@&quot;https://www.google.com&quot;]; AFHTTPRequestOperationManager * requestOperationManager = [[AFHTTPRequestOperationManager alloc] initWithBaseURL:url]; dispatch_queue_t requestQueue = dispatch_create_serial_queue_for_name(&quot;kRequestCompletionQueue&quot;); requestOperationManager.completionQueue = requestQueue; AFSecurityPolicy * securityPolicy = [AFSecurityPolicy policyWithPinningMode:AFSSLPinningModeCertificate]; //allowInvalidCertificates 是否允许无效证书（也就是自建的证书），默认为NO //如果是需要验证自建证书，需要设置为YES securityPolicy.allowInvalidCertificates = YES; //validatesDomainName 是否需要验证域名，默认为YES； //假如证书的域名与你请求的域名不一致，需把该项设置为NO；如设成NO的话，即服务器使用其他可信任机构颁发的证书，也可以建立连接，这个非常危险，建议打开。 //置为NO，主要用于这种情况：客户端请求的是子域名，而证书上的是另外一个域名。因为SSL证书上的域名是独立的，假如证书上注册的域名是www.google.com，那么mail.google.com是无法验证通过的；当然，有钱可以注册通配符的域名*.google.com，但这个还是比较贵的。 //如置为NO，建议自己添加对应域名的校验逻辑。 securityPolicy.validatesDomainName = YES; //validatesCertificateChain 是否验证整个证书链，默认为YES //设置为YES，会将服务器返回的Trust Object上的证书链与本地导入的证书进行对比，这就意味着，假如你的证书链是这样的： //GeoTrust Global CA // Google Internet Authority G2 // *.google.com //那么，除了导入*.google.com之外，还需要导入证书链上所有的CA证书（GeoTrust Global CA, Google Internet Authority G2）； //如是自建证书的时候，可以设置为YES，增强安全性；假如是信任的CA所签发的证书，则建议关闭该验证，因为整个证书链一一比对是完全没有必要（请查看源代码）； securityPolicy.validatesCertificateChain = NO; requestOperationManager.securityPolicy = securityPolicy; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;hr /&gt; &lt;p&gt;以上参考：&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.cnblogs.com/ttltry-air/archive/2012/08/20/2647898.html&quot;&gt;HTTPS的工作原理&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://oncenote.com/2014/10/21/Security-1-HTTPS/&quot;&gt;iOS安全系列之一：HTTPS&lt;/a&gt; &lt;a href=&quot;http://oncenote.com/2015/09/16/Security-2-HTTPS2/&quot;&gt;iOS安全系列之二：HTTPS进阶&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.cnblogs.com/hyddd/archive/2009/04/09/1432744.html?login=1&quot;&gt;浅谈CSRF攻击方式&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0&quot;&gt;跨站请求伪造&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://software.intel.com/zh-cn/blogs/2011/10/11/ssl&quot;&gt;针对SSL的中间人攻击&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/https-insight.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/https-insight</guid> <pubDate>Mon, 06 Jul 2015 00:00:00 +0800</pubDate> </item> <item> <title>OAuth2.0深入理解</title> <description> &lt;h1 id=&quot;oauth20深入理解&quot;&gt;OAuth2.0深入理解&lt;/h1&gt; &lt;h2 id=&quot;oauth简介&quot;&gt;OAuth简介&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;OAuth（开放授权）是一个开放标准，允许用户让第三方应用访问该用户在某一网站上存储的私密的资源（如照片，视频，联系人列表），而无需将用户名和密码提供给第三方应用。&lt;/li&gt; &lt;li&gt;OAuth允许用户提供一个令牌，而不是用户名和密码来访问他们存放在特定服务提供者的数据。每一个令牌授权一个特定的网站（例如，视频编辑网站)在特定的时段（例如，接下来的2小时内）内访问特定的资源（例如仅仅是某一相册中的视频）。这样，OAuth让用户可以授权第三方网站访问他们存储在另外服务提供者的某些特定信息，而非所有内容。&lt;/li&gt; &lt;li&gt;OAuth(俗称1.0)是OpenID的一个补充，但是完全不同的服务。1.0协议相较于2.0协议复杂些，易用性差，所以没有得到广泛普及。 &lt;h2 id=&quot;oauth和openid的区别&quot;&gt;OAuth和OpenID的区别:&lt;/h2&gt; &lt;/li&gt; &lt;li&gt;OAuth关注的是authorization；而OpenID侧重的是authentication。从表面上看，这两个英文单词很容易混淆，但实际上，它们的含义有本质的区别： &lt;ul&gt; &lt;li&gt;authorization: n. 授权，认可；批准，委任&lt;/li&gt; &lt;li&gt;authentication: n. 证明；鉴定；证实&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;OAuth关注的是授权，即：“用户能做什么”；而OpenID关注的是证明，即：“用户是谁”。 &lt;h2 id=&quot;oauth20与oauth10的区别&quot;&gt;Oauth2.0与Oauth1.0的区别&lt;/h2&gt; &lt;/li&gt; &lt;li&gt;1.0授权分3步:&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;A)客户端到授权服务器请求一个授权令牌(request token&amp;amp;secret) B)引导用户到授权服务器请求授权 C)用访问令牌到授权服务器换取访问令牌(access token&amp;amp;secret) D)用访问令牌去访问得到授权的资源 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;2.0的用户授权过程有2步:&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;A)引导用户到授权服务器，请求用户授权，用户授权后返回 授权码(Authorization Code) B)客户端由授权码到授权服务器换取访问令牌(access token) C)用访问令牌去访问得到授权的资源 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;1.0协议每个token都有一个加密(非对称加密)，2.0要求使用https协议，安全性也更高一筹。&lt;/li&gt; &lt;li&gt;1.0只有一个用户授权流程，而2.0充分考虑了客户端的各种子态，并且提供了多种途径获取访问令牌，如下：&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;a)授权码 b)客户端私有证书 c)资源拥有者密码证书 d)刷新令牌 e)断言证书 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;oauth-认证的流程&quot;&gt;OAuth 认证的流程&lt;/h2&gt; &lt;p&gt;&lt;img src=&quot;http://img-storage.qiniudn.com/15-9-5/40552531.jpg&quot; alt=&quot;详细流程&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;oauth协议案例描述&quot;&gt;OAuth协议案例描述&lt;/h2&gt; &lt;p&gt;协议的参与者，OAuth 的参与实体至少有如下三个：&lt;/p&gt; &lt;ul&gt; &lt;li&gt;RO (resource owner): 资源所有者，对资源具有授权能力的用户。&lt;/li&gt; &lt;li&gt;RS (resource server): 资源服务器，它存储资源，并处理对资源的访问请求。如 Google 资源服务器，它所保管的资源就是用户的照片等。&lt;/li&gt; &lt;li&gt;Client: 第三方应用，它获得 RO 的授权后便可以去访问 RO 的资源。如网易印像服务。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;此外，为了支持开放授权功能以及更好地描述开放授权协议，OAuth 引入了第四个参与实体：&lt;/p&gt; &lt;ul&gt; &lt;li&gt;AS (authorization server): 授权服务器，它认证 RO 的身份，为 RO 提供授权审批流程，并最终颁发授权令牌 (Access Token)。请注意，为了便于协议的描述，这里只是在逻辑上把 AS 与 RS 区分开来；在物理上，AS 与 RS 的功能可以由同一个服务器来提供服务。&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;授权类型&quot;&gt;授权类型&lt;/h2&gt; &lt;p&gt;在开放授权中，第三方应用 (Client) 可能是一个 Web 站点，也可能是在浏览器中运行的一段 JavaScript 代码，还可能是安装在本地的一个应用程序。这些第三方应用都有各自的安全特性。对于 Web 站点来说，它与 RO 浏览器是分离的，它可以自己保存协议中的敏感数据，这些密钥可以不暴露给 RO；对于 JavaScript 代码和本地安全的应用程序来说，它本来就运行在 RO 的浏览器中，RO 是可以访问到 Client 在协议中的敏感数据。&lt;/p&gt; &lt;p&gt;OAuth 为了支持这些不同类型的第三方应用，提出了多种授权类型，如：&lt;/p&gt; &lt;ul&gt; &lt;li&gt;授权码 (Authorization Code Grant)&lt;/li&gt; &lt;li&gt;隐式授权 (Implicit Grant)&lt;/li&gt; &lt;li&gt;RO 凭证授权 (Resource Owner Password Credentials Grant)&lt;/li&gt; &lt;li&gt;Client 凭证授权 (Client Credentials Grant)&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;其中最核心、最难理解、也是最广泛使用的一种授权类型为 “授权码”。&lt;/p&gt; &lt;h2 id=&quot;授权码类型的开放授权协议的流程&quot;&gt;授权码类型的开放授权协议的流程&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;Client 初始化协议的执行流程。首先通过 HTTP 302 来重定向 RO 用户代理到 AS。Client 在 redirect_uri 中应包含如下参数：client_id，scope (描述被访问的资源)，redirect_uri (即 Client 的 URI)，state (用于抵制 CSRF 攻击)。此外，请求中还可以包含 access_type 和 approval_prompt 参数。当 approval_prompt=force 时，AS 将提供交互页面，要求 RO 必须显式地批准 (或拒绝) Client 的此次请求。如果没有 approval_prompt 参数，则默认为 RO 批准此次请求。当 access_type=offline 时，AS 将在颁发 access_token 时，同时还会颁发一个 refresh_token。因为 access_token 的有效期较短 (如 3600 秒)，为了优化协议执行流程，offline 方式将允许 Client 直接持 refresh_token 来换取一个新的 access_token。&lt;/li&gt; &lt;li&gt;AS 认证 RO 身份，并提供页面供 RO 决定是否批准或拒绝 Client 的此次请求 (当 approval_prompt=force 时)。&lt;/li&gt; &lt;li&gt;若请求被批准，AS 使用步骤 1 中 Client 提供的 redirect_uri 重定向 RO 用户代理到 Client。redirect_uri 须包含 authorization_code，以及步骤 1 中 Client 提供的 state。若请求被拒绝，AS 将通过 redirect_uri 返回相应的错误信息。&lt;/li&gt; &lt;li&gt;Client 拿 authorization_code 去访问 AS 以交换所需的 access_token。Client 请求信息中应包含用于认证 Client 身份所需的认证数据，以及上一步请求 authorization_code 时所用的 redirect_uri。&lt;/li&gt; &lt;li&gt;AS 在收到 authorization_code 时需要验证 Client 的身份，并验证收到的 redirect_uri 与第 3 步请求 authorization_code 时所使用的 redirect_uri 相匹配。如果验证通过，AS 将返回 access_token，以及 refresh_token (若 access_type=offline)。&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;步骤 4 中，Client 需要拿 “授权码” 去换 “授权令牌” 时，Client 需要向 AS 证明自己的身份，即证明自己就是步骤 2 中 Alice 批准授权时的 Grantee。这个身份证明的方法主要有两种：&lt;/p&gt; &lt;ol&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;通过 https 直接将 client_secret 发送给 AS&lt;/code&gt;，因为 client_secret 是由 Client 与 AS 所共享，所以只要传送 client_secret 的信道安全即可。(利用TSL安全信道传送client_secret验证身份)&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;通过消息认证码来认证 Client 身份&lt;/code&gt;，典型的算法有 HMAC-SHA1。在这种方式下，Client 无需传送 client_secret，只需发送消息请求的 signature 即可。由于不需要向 AS 传递敏感数据，所以它只需要使用 http 即可。(利用client与AS共享的client_cecret与消息的绑定的hash签名值验证身份)&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;此外，在步骤 2 中，Google 授权服务器需要认证 Alice 的 RO 身份，并提供授权界面给 Alice 进行授权审批。&lt;/p&gt; &lt;h2 id=&quot;为何引入-authorization_code&quot;&gt;为何引入 authorization_code&lt;/h2&gt; &lt;p&gt;协议设计中，为什么要使用 authorization_code 来交换 access_token？这是读者容易想到的一个问题。也就是说，在协议的第 3 步，为什么不直接将 access_token 通过重定向方式返回给 Client 呢？如果直接返回 access_token，协议将变得更加简洁，而且少一次 Client 与 AS 之间的交互，性能也更优。那为何不这么设计呢？协议文档中并没有给出这样设计的理由，但也不难分析：&lt;/p&gt; &lt;ol&gt; &lt;li&gt;浏览器的 redirect_uri 是一个不安全信道，此方式不适合于传递敏感数据 (如 access_token)。&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;因为 uri 可能通过 HTTP referrer 被传递给其它恶意站点，也可能存在于浏览器 cacher 或 log 文件中，这就给攻击者盗取 access_token 带来了很多机会&lt;/code&gt;。另外，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;此协议也不应该假设 RO 用户代理的行为是可信赖的，因为 RO 的浏览器可能早已被攻击者植入了跨站脚本用来监听 access_token&lt;/code&gt;。因此，access_token 通过 RO 的用户代理传递给 Client，会显著扩大 access_token 被泄露的风险。但 authorization_code 可以通过 redirect_uri 方式来传递，是因为 authorization_code 并不像 access_token 一样敏感。即使 authorization_code 被泄露，攻击者也无法直接拿到 access_token，因为拿 authorization_code 去交换 access_token 是需要验证 Client 的真实身份。也就是说，除了 Client 之外，其他人拿 authorization_code 是没有用的。此外，access_token 应该只颁发给 Client 使用，其他任何主体 (包括 RO) 都不应该获取 access_token。协议的设计应能保证 Client 是唯一有能力获取 access_token 的主体。引入 authorization_code 之后，便可以保证 Client 是 access_token 的唯一持有人。当然，Client 也是唯一的有义务需要保护 access_token 不被泄露。&lt;/li&gt; &lt;li&gt;引入 authorization_code 还会带来如下的好处。由于协议需要验证 Client 的身份，如果不引入 authorization_code，这个 Client 的身份认证只能通过第 1 步的 redirect_uri 来传递。同样由于 redirect_uri 是一个不安全信道，这就额外要求 Client 必须使用数字签名技术来进行身份认证，而不能用简单的密码或口令认证方式。引入 authorization_code 之后，AS 可以直接对 Client 进行身份认证 (见步骤 4 和 5)，而且可以支持任意的 Client 认证方式 (比如，简单地直接将 Client 端密钥发送给 AS)。&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;消息认证码算法及原理&quot;&gt;消息认证码算法及原理&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;MAC（Message Authentication Code，消息认证码算法）是含有密钥的散列函数算法，兼容了MD和SHA算法的特性，并在此基础上加入了密钥。&lt;/li&gt; &lt;li&gt;MAC算法主要集合了MD和SHA两大系列消息摘要算法。MD系列的算法有HmacMD2、HmacMD4、HmacMD5三种算法；SHA系列的算法有HmacSHA1、HmacSHA224、HmacSHA256、HmacSHA384.HmacSHA512五种算法。&lt;/li&gt; &lt;li&gt;&lt;/li&gt; &lt;li&gt; &lt;p&gt;MAC函数 &lt;img src=&quot;http://ww4.sinaimg.cn/large/680dfa44jw1faniejqv9yj20de0bkt9g.jpg&quot; alt=&quot;MAC函数&quot; /&gt;&lt;/p&gt; &lt;/li&gt; &lt;li&gt;消息认证码:密码学中，通信实体双方使用的一种验证机制，保证消息数据完整性的一种工具。安全性依赖于Hash函数，故也称带密钥的Hash函数。==消息认证码是基于密钥和消息摘要【hash】所获得的一个值，&lt;strong&gt;目的是用于==验证消息的完整性，确认数据在传送和存储过程中未受到主动攻击&lt;/strong&gt;。 &lt;img src=&quot;http://ww1.sinaimg.cn/large/680dfa44jw1fanigsbl5dj20id0bdabp.jpg&quot; alt=&quot;消息认证码&quot; /&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;基于-web-安全的考虑&quot;&gt;基于 Web 安全的考虑&lt;/h2&gt; &lt;p&gt;OAuth 协议设计不同于简单的网络安全协议的设计，因为 OAuth 需要考虑各种 Web 攻击，比如 CSRF (Cross-Site Request Forgery)、XSS (Cross Site Script)、Clickjacking。要理解这些攻击原理，读者需要对浏览器安全 (eg, Same Origin Policy, 同源策略) 有基本理解。&lt;/p&gt; &lt;p&gt;比如，在 redirect_uri 中引入 state 参数就是从浏览器安全角度考虑的，有了它就可以抵制 CSRF 攻击。如果没有这个参数，攻击者便可以在 redirect_uri 中注入攻击者提供的 authorization_code 或 access_token，结果可能导致 Client 访问错误的资源 (比如，将款项汇到一个错误的帐号)。&lt;/p&gt; &lt;hr /&gt; &lt;p&gt;以上参考：&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/seccloud/article/details/8192707&quot;&gt;帮你深入理解OAuth2.0协议&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/0db71eb445c8&quot;&gt;OAuth 认证流程详解&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://blog.unvs.cn/archives/oauth-qq2-0-developer.html&quot;&gt;OAuth 2.0的机制原理讲解及开发流程&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://atove.com/Article/Details/B0D17AEDFD3BE7AFD67A14F17A54FC8E&quot;&gt;OAuth (Open Authorization, 开放授权), OpenID&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://atove.com/Article/Details/E4FD08836591C1DE5EAFB3D5901780F7&quot;&gt;OAuth2.0 鉴权 (微信公众平台、腾讯微博)&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html&quot;&gt;理解OAuth 2.0&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://guazi.iteye.com/blog/1569242&quot;&gt;Oauth2.0与Oauth1.0的区别&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://desert3.iteye.com/blog/1701626&quot;&gt;OAuth、OAuth与OpenID区别和联系&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/OAuth&quot;&gt;OAuth&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/seccloud/article/details/8192707&quot;&gt;帮你深入理解OAuth2.0协议&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://my.oschina.net/xinxingegeya/blog/290594&quot;&gt;MAC_Message Authentication Code_消息认证码算法&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.cnblogs.com/winter-cn/archive/2012/09/22/2698138.html&quot;&gt;图解Browser端访问OAuth2 API的安全性问题与解决方案&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/OAuth2.0-insight.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/OAuth2.0-insight</guid> <pubDate>Sat, 04 Jul 2015 00:00:00 +0800</pubDate> </item> <item> <title>CentOS上LAMP环境搭建及配置</title> <description> &lt;p&gt;将以下脚本保存为 lamp.sh , 执行 sh lamp.sh 安装。&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; #!/bin/sh # 参考: # Shell脚本编程30分钟入门:https://github.com/qinjx/30min_guides/blob/master/shell.md # nstall JAVA 8 (JDK 8u45) on CentOS/RHEL 7/6/5 and Fedora:http://tecadmin.net/install-java-8-on-centos-rhel-and-fedora/ # CentOS开机自动运行程序的脚本:http://blog.csdn.net/jiedushi/article/details/6767445 # 安装Apache cd ~ yum install httpd # 启动apache service httpd start # 开启apache的开机自启动 chkconfig httpd on # ------------------------ cd /opt/ wget --no-cookies --no-check-certificate --header &quot;Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com%2F; oraclelicense=accept-securebackup-cookie&quot; &quot;http://download.oracle.com/otn-pub/java/jdk/8u45-b14/jdk-8u45-linux-x64.tar.gz&quot; tar xzf jdk-8u45-linux-x64.tar.gz # 配置java cd /opt/jdk1.8.0_45/ alternatives --install /usr/bin/java java /opt/jdk1.8.0_45/bin/java 1 alternatives --install /usr/bin/jar jar /opt/jdk1.8.0_45/bin/jar 1 alternatives --install /usr/bin/javac javac /opt/jdk1.8.0_45/bin/javac 1 alternatives --set jar /opt/jdk1.8.0_45/bin/jar alternatives --set jar /opt/jdk1.8.0_45/bin/jar alternatives --set javac /opt/jdk1.8.0_45/bin/javac # --config可以选择java的设置 # alternatives --config java # 设置环境变量 touch java_env.sh echo &apos;#!/bin/sh&apos; $&apos;\n&apos; &amp;gt;&amp;gt; java_env.sh echo &apos;export JAVA_HOME=/opt/jdk1.8.0_45&apos; &amp;gt;&amp;gt; java_env.sh echo &apos;export JRE_HOME=/opt/jdk1.8.0_45/jre&apos; &amp;gt;&amp;gt; java_env.sh echo &apos;export PATH=$PATH:/opt/jdk1.8.0_45/bin:/opt/jdk1.8.0_45/jre/bin&apos; &amp;gt;&amp;gt; java_env.sh source ./java_env.sh mv ./java_env.sh /etc/profile.d/java_env.sh # -------------------------- # 安装Tomcat cd /opt wget http://www.us.apache.org/dist/tomcat/tomcat-8/v8.0.23/bin/apache-tomcat-8.0.23.tar.gz tar xzf apache-tomcat-8.0.23.tar.gz # 设置环境变量 echo &quot;export CATALINA_HOME=\&quot;/opt/apache-tomcat-8.0.23\&quot;&quot; &amp;gt;&amp;gt; ~/.bashrc source ~/.bashrc # # Edit conf/tomcat-users.xml file in your editor and paste inside &amp;lt;tomcat-users&amp;gt; &amp;lt;/tomcat-users&amp;gt; tags. # &amp;lt;!-- user manager can access only manager section --&amp;gt; # &amp;lt;role rolename=&quot;manager-gui&quot; /&amp;gt; # &amp;lt;user username=&quot;manager&quot; password=&quot;_SECRET_PASSWORD_&quot; roles=&quot;manager-gui&quot; /&amp;gt; # &amp;lt;!-- user admin can access manager and admin section both --&amp;gt; # &amp;lt;role rolename=&quot;admin-gui&quot; /&amp;gt; # &amp;lt;user username=&quot;admin&quot; password=&quot;_SECRET_PASSWORD_&quot; roles=&quot;manager-gui,admin-gui&quot; /&amp;gt; # 启动tomcat cd /opt/apache-tomcat-8.0.23 ./bin/startup.sh # 创建开机启动脚本， cd /etc/init.d sudo touch tomcat_startup.sh sudo chmod 755 tomcat_startup.sh sudo chown luowei:luowei tomcat_startup.sh echo &apos; #!/bin/sh # # Auto Start At Boot #add for chkconfig #chkconfig:2345 70 30 #description:tomcat 启动脚本 #脚本描述 #processname:tomcat8 #进程名 /bin/sh /opt/apache-tomcat-8.0.23/bin/startup.sh &apos; &amp;gt;&amp;gt; tomcat_startup.sh # 设置开机启动 chkconfig --add tomcat_startup.sh # # --------------- cd ~ # 安装Mysql yum install mysql mysql-server # 启动Mysql并配置数据库 service mysqld start /usr/bin/mysql_secure_installation # 设置mysqld开机自启动 chkconfig mysqld on # # --------------- cd ~ # 安装php yum install php php-common # 安装php其他第三方库 yum install php-cli php-mysql php-devel php-gd php-mcrypt php-mbstring # # 查看php模块加载情况 # php -m # 添加phpinfo测试文件 mkdir /var/www/html/php chown -R luowei:luowei /var/www/html echo &apos;&amp;lt;?php echo phpinfo(); ?&amp;gt;&apos; &amp;gt; /var/www.html/php/phpinfo.php # 重启apache service httpd restart # # --------------- cd ~ # 安装phpMyAdmin yum install phpmyadmin # 修改/etc/httpd/config.d/phpMyAdmin.conf # &amp;lt;Directory /usr/share/phpMyAdmin/&amp;gt; # AddDefaultCharset UTF-8 # &amp;lt;IfModule mod_authz_core.c&amp;gt; # # Apache 2.4 # &amp;lt;RequireAny&amp;gt; # # Require ip 127.0.0.1 # # Require ip ::1 # Require all granted # &amp;lt;/RequireAny&amp;gt; # &amp;lt;/IfModule&amp;gt; # &amp;lt;IfModule !mod_authz_core.c&amp;gt; # # Apache 2.2 # Order Deny,Allow # # Deny from All # # Allow from 127.0.0.1 # # Allow from ::1 # Allow from all # &amp;lt;/IfModule&amp;gt; # &amp;lt;/Directory&amp;gt; # 重启apache service httpd restart &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/lamp/centOS-install-apache-java-tomcat-php-phpmyadmin.html</link> <guid>https://luowei.github.io/lamp/centOS-install-apache-java-tomcat-php-phpmyadmin</guid> <pubDate>Mon, 15 Jun 2015 00:00:00 +0800</pubDate> </item> <item> <title>浅谈将兵之才与将将之才</title> <description> &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; 帅和将，在古书里经常出现在军队和战场上，一场战争是否能取得胜利，往往得益于帅和将的密切配合。其区别在于：“能领兵者，谓之将也”；“能将将者，谓之帅也”，即帅才比将才高一个层次，偏重于战略思维；而将才是在一定局部范围内能掌控局势，能带领所属出色或顺利完成统帅分派的任务的人，他偏重于战术或方式方法的研究。 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;　　在现代的企业管理中，经营一个企业也好比持续打一场战争，也需要各类的帅才和将才。往往总经理的职位更需要一个帅才，而下面的各部门负责人更需要一些将才，至于董事长其实更多的是相才。 　　管理上的将才一般能够独挡一面，为企业的骨干，在自己所管辖的范围内能够干出非常不错的业绩。而管理上的帅才是管理一个企业的方方面面，经营稳步有序，最终作出更大成绩的人。在实际中，有的人向往做帅才，实际却只适合做将才；有的人身在帅才，却无法施展，回归将才则如鱼得水；有的人不满足做将才，身怀帅才之志而长叹怀才不遇；有的人不识将帅之分，用人不当，谬误千里。&lt;/p&gt; &lt;p&gt;　　将才和帅才可以相互转换，也有天性之分，具体要看经历、环境和特质。在实际的管理活动中，还是有许多本质的不同 ：&lt;/p&gt; &lt;p&gt;　　在管理能力方面：帅才比较注重提升下属的学习能力，善于处理矛盾和解决问题，以提高企业的整体管理水平。而将才喜欢言传身教的带徒弟，希望下属按照自己的方法去做，不善于处理矛盾。&lt;/p&gt; &lt;p&gt;　　在沟通方面： 帅才是典型的沟通高手，往往会根据不同的对象确定不同的沟通方式，适应能力强。而将才往往是直来直去的沟通，千人一面，对不同的人采用同一沟通方式，而且强制性较多。&lt;/p&gt; &lt;p&gt;　　在执行力方面：帅才善于分解任务，并预留余地和后备方案，执行的侧重点在于控制。将才执行力最强，但是感情因素很多，关键时候可以一人顶多人，喜欢做的事情不计成本和代价去做，不感兴趣的基本不碰。&lt;/p&gt; &lt;p&gt;　　在学习能力方面：帅才涉猎范围很广，讲究学习方法，注重历史和管理学的研究。将才更多注重专业领域的学习，而且比较深入。&lt;/p&gt; &lt;p&gt;　　对理想的认知，帅才是典型的完美主义者，最求的是整体最佳和完美，将才是最求把局部或者擅长的事做到极致。&lt;/p&gt; &lt;p&gt;　　对价值观的认知：帅才追求团队的成功，善于享受成功的喜约，将才追求单项工作的完美，并善于享受其中的乐趣。&lt;/p&gt; &lt;p&gt;　　同时帅才和将才还一些明显的缺陷，帅才喜欢思考，思考过多，这是身体健康的危险信号；将才喜欢专注，容易自满，这是事业健康的危险信号。&lt;/p&gt; &lt;p&gt;　　总之，帅才偏综合，将才偏专业，都是企业管理中不可缺少的人才类型，具体要取决于性格、情商、智商以及经历的不同。每个人要经常分析自己到底更符合帅才或者将才，才能找到自己合适的职业规划，每个具有相才的领导要经常观察那些人到底适合帅才或者将才，才能在正确的岗位找到合适的人才！&lt;/p&gt; &lt;p&gt;&lt;em&gt;来源:http://www.029yc.com/Train/info1331879437.html&lt;/em&gt;&lt;/p&gt; &lt;hr /&gt; &lt;p&gt;　　中国历史上，刘邦无疑是个好皇帝，除了当皇帝，他几乎什么都一无是处，冷酷无情，不学无术，好色，少年时期就是个横行乡里的无赖，偶然的机会走上了反抗暴秦的道路，最终打败西楚霸王项羽建立大汉王朝，论统兵打仗刘邦根本不是项羽的对手，但他善于驾驭手下的大将，张良、韩信、萧何等等无不唯首是瞻，大概就凭这一点他远远高于英勇善战但不善于用人的项羽。历史选择了刘邦。&lt;/p&gt; &lt;p&gt;　　历史惊人的相似，20世纪四十年代末，毛泽东领导下的共产党人最终以小米加步枪推翻了蒋介石美式装备800万国民党大军，论军事功底，蒋介石也曾是保定陆军学校加日本军校双料的科班出身，毛泽东则是地道的自学成才，一天的军校没上过，在蒋介石的眼里是个地地道道的土包子，毛泽东一生亲自指挥的战役寥寥无几，且都是小规模的，但毛泽东与蒋介石相比，除了占据了政治优势民心优势的制高点以外，与毛泽东的善于用人有很大的关系，解放战争期间，毛泽东给林彪彭德怀刘伯承粟裕充分的战役自主权，从不干涉战役细节，只管战役的大方向，反观蒋介石在淮海战役期间遥控杜聿明，甚至连一个个打仗微小环节也横加干涉，杜聿明出于对蒋介石的忠心每次也违心地执行，虽然他心里明明知道这样打下去失败是必然的。前线最高指挥官的杜聿明却成了摆设和傀儡，空有一肚子诸葛亮军事天才也是白搭了。&lt;/p&gt; &lt;p&gt;　　不要以为这样的事情都发生在大人物身上，我们百姓也无时不再重复着这样的故事。我们常常可以看到，在企业里尤其是民营企业里，老板本该“将将”却天天在“将兵”。事无巨细样样过问，处处干预，从一个文件的起草，一个员工的录用从差旅费的报销到一场会议的召开，像是个大掌柜的，每天疲于应付，老板高薪聘请来的中层领导成了摆设。老板跨部门直接干预普通员工的选派任用甚至升迁，这样空投的员工有时通常不要说专业甚至一无所长，这样的员工用他还不如养起来，部门领导不敢惹，任他胡来，到头来作出事来也还要部门来负责。一个两个可能还能将就，如果某个部门多数的员工都这样的话，结果会可想而知了。&lt;/p&gt; &lt;p&gt;　　有同事请教我如何辅导孩子的学习，我总是说，你千万不要一道题一道题地给孩子讲，这样做既不现实也很笨拙，如果养成了习惯，这孩子就耽误了，“受之以鱼不如授以渔”，当家长的任务是如何教孩子学习的方法还有以身作则养成良好的学习习惯，而不是教会他怎么做对一道题。看来即使是在家庭里这样的道理也存在着。&lt;/p&gt; &lt;p&gt;　　刘备，毛泽东是将将之人，项羽蒋介石却是个将兵之人，泾渭分明，结果也是天上人间。生活中无论是把“将兵之人”当作“将将之人” 还是把“将将之人”当作 “将兵之人”都是本末倒置，避重就轻，丢了西瓜捡芝麻。都是要不得的，这样做的结果如果只是交点学费也就罢了，如果因此给个人和企业带来不可挽的有形或无形的损失来就真的为之惋惜了。&lt;/p&gt; &lt;p&gt;&lt;em&gt;来源:http://blog.sina.com.cn/s/blog_a85a9ccb010117af.html&lt;/em&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/life/general-and-marshal-talent.html</link> <guid>https://luowei.github.io/life/general-and-marshal-talent</guid> <pubDate>Wed, 03 Jun 2015 00:00:00 +0800</pubDate> </item> <item> <title>CentOS上安装ShadowSocks脚本</title> <description> &lt;p&gt;将以下脚本保存为 shadowsocks.sh , 执行 sh shadowsocks.sh 安装。&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; #!/bin/sh # 参考： # Pip和Shadowsocks的安装配置教程:http://www.guance.com/611.html # CentOS6零基础配置shadowsocks服务端完整教程:http://hazelzhu.com/archives/1568 # Linux的简单shell脚本中修改文件操作:http://jsczxy2.iteye.com/blog/673910 # Linux Shell编程入门:http://www.cnblogs.com/suyang/archive/2008/05/18/1201990.html # centOS防火墙iptables的设置教程:http://www.jb51.net/os/RedHat/68744.html # CentOS配置防火墙操作实例(启、停、开、闭端口):http://blog.csdn.net/jemlee2002/article/details/7042991 # 安装所需组件 yum install -y wget tar gcc gcc-c++ openssl openssl-devel pcre-devel python-devel libevent autoconf libtool echo &quot;==== 所需组件安装成功&quot; # 升级python cd /root wget http://www.python.org/ftp/python/2.7.6/Python-2.7.6.tgz tar zxvf Python-2.7.6.tgz cd Python-2.7.6 ./configure make make install echo &quot;==== 升级到python-2.7.6 成功&quot; # 设置python2.7.6为默认版本 mv /usr/bin/python /usr/bin/python2.6.6 ln -s /usr/local/bin/python2.7 /usr/bin/python # 修改一下yum依赖,把第1行的 python 替换成 python-2.6.6 cp /usr/bin/yum /usr/bin/yum.bak sed -i &apos;1s/python/python2.6.6/g&apos; /usr/bin/yum cd /root # 安装setputools wget http://pypi.python.org/packages/2.7/s/setuptools/setuptools-0.6c11-py2.7.egg –no-check-certificate sh setuptools-0.6c11-py2.7.egg # 安装pip wget http://pypi.python.org/packages/source/p/pip/pip-1.5.4.tar.gz –no-check-certificate tar zxvf pip-1.5.4.tar.gz cd pip-1.5.4 python setup.py install # 安装swig cd /root wget http://jaist.dl.sourceforge.net/project/swig/swig/swig-3.0.0/swig-3.0.0.tar.gz tar zxvf swig-3.0.0.tar.gz cd swig-3.0.0 ./configure make make install # 安装shadowsocks pip install shadowsocks # 创建配置文件 mkdir /opt/shadowsocks cd /opt/shadowsocks touch config.json cat &amp;gt; config.json &amp;lt;&amp;lt;! { &quot;server&quot;:&quot;0.0.0.0&quot;, &quot;server_port&quot;:8388, &quot;local_address&quot;: &quot;127.0.0.1&quot;, &quot;local_port&quot;:1080, &quot;password&quot;:&quot;luowei&quot;, &quot;timeout&quot;:300, &quot;method&quot;:&quot;aes-256-cfb&quot;, &quot;fast_open&quot;: false, &quot;workers&quot;: 1 } ! # 安装M2Crypto cd /root pip install M2Crypto # 安装easy_install并安装greenlet cd /root wget -q http://peak.telecommunity.com/dist/ez_setup.py python ez_setup.py easy_install greenlet ## 安装greenlet # pip install greenlet # 安装Gevent pip install gevent # 开启server_port 8388 iptables -A INPUT -m state --state NEW -m tcp -p tcp --dport 8388 -j ACCEPT /etc/rc.d/init.d/iptables save # 重启防火墙iptables service iptables restart # # 命令行参数（服务器端启动命令） # ssserver -c /etc/shadowsocks.json # # 后台运行Shadowsocks # nohup ssserver -c /opt/shadowsocks/config.json &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 &amp;amp; # # kill掉shadowsocks的进程 # killall ssserver &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/linux/centOS-install-shadowsocks-shell-script.html</link> <guid>https://luowei.github.io/linux/centOS-install-shadowsocks-shell-script</guid> <pubDate>Fri, 01 May 2015 00:00:00 +0800</pubDate> </item> <item> <title>决策、目标、计划</title> <description> &lt;p&gt;其实随着年龄的增长，自身积累的增长，自己对自己的人生，在大方向与决策方面能做的选择空间也会越来越小。&lt;/p&gt; &lt;p&gt;人生的确定性与不确定性的比例也就越来越高。&lt;/p&gt; &lt;p&gt;人生的目标可以就有很多，不同的时间段都可能给自己设定不能的目标；好的人生，决策只能一次，总体的方向只能一个方向，就像生命只有一次一样；这一次要说明一个人是做政治的？做文学的？做艺术的？务农的？做工的？做管理的？做科研的？到处跑的？乐享人生什么都没做的？等等总规会有一个定位。&lt;/p&gt; &lt;p&gt;自己必须做出选择，必须定位自己；不对自己人生做出选择，那这个选择权就自然交给别人，或者是你所处在的组织或是环境。&lt;/p&gt; &lt;p&gt;当然通常很少有人能脱离自身环境而自己做出人生选择的，出家人、山林隐士同样也不能，除非生下来就马上死掉，不然选择总还是要受环境影响或说与身处环境结合。这句话似乎又像是说了等于没说一样。&lt;/p&gt; &lt;p&gt;人是一个立体的人。信息的发达，如今的社会环境给自己看到方向也有万千，每个方向上都有很多人，但能选择方向只能有几条，最终付出全身心做的只能是一条。&lt;/p&gt; &lt;p&gt;人生要有阶段性的升华才能达到人生高点，每个阶段的升华又依赖于每个阶段的目标。如果某个阶段的目标都做不太好的，或者说目标的对个人的促进方向都凌乱的，升华的高度就不会那么显然。如果某个阶段没有目标那这阶段就差不多是平行线了。&lt;/p&gt; &lt;p&gt;虽然说个人无法对人生做出总的决策，但阶段性决策还是要做的。有了决策之后，就一如既往的去坚持与遵循这一阶段的决策，设定这一决策的不同时间段的目标，只有这样才能让目标总朝着一个方向前进。&lt;/p&gt; &lt;p&gt;人生要有方向、要有目标、也要有规划，不能盲目、也不能只凭兴趣去做事情，一定要有一个总体的方向,要有目标与计划的去做一些事情。&lt;/p&gt; &lt;p&gt;对未来真的需要有方向、有确定的决策，有选择就注定要有更多的放弃。一个人也不可能什么事情都做的成功，如果总是想什么事情都想做成功，那也必将什么事情也做不成。&lt;/p&gt; &lt;p&gt;没有确定的方向，在方向与决策方面，不严格要求自己遵守坚持自己的决策，人生就会像随处撒落沙子，每个阶段的目标也就失去相互关联相互促进的作用。人生也就很难达到一个高点。&lt;/p&gt; &lt;p&gt;没有目标，就会无所是事，就会无聊空虚；&lt;/p&gt; &lt;p&gt;无论身处何地，身在何时，都需要给自己设定目标，给自己下个月或者说下个半年要做的什么做个规划。&lt;/p&gt; &lt;p&gt;如果说未来没有方向，或者说方向很难去确定。那至少要想想未来两到三年中，照现在的轨迹与状态走下，自己将会在或者能够做些什么事情，这个大体的方向总是可以自己决定的。&lt;/p&gt; &lt;p&gt;人生更需要管理，对自己的目标、规划进行阶段性的管理。&lt;/p&gt; &lt;p&gt;不要给自己设定过多的目标，就像我不能同时做几个项目。&lt;/p&gt; &lt;p&gt;一部不错教程，一本拿的出手的书，一个完整、功能丰富的应用，都需要最初定下目标，规划好每月/每天/每周的任务，并能在确定目标后坚持的做完他做好他。&lt;/p&gt; &lt;ol&gt; &lt;li&gt;做出阶段性的决策方向；&lt;/li&gt; &lt;li&gt;设定这一阶段的目标与具体规划；&lt;/li&gt; &lt;li&gt;根据目标去寻找自己擅长及感兴趣的项目；&lt;/li&gt; &lt;li&gt;分析项目需求，为项目做出具体计划；&lt;/li&gt; &lt;/ol&gt; </description> <link>https://luowei.github.io/life/decisions-goals-plans.html</link> <guid>https://luowei.github.io/life/decisions-goals-plans</guid> <pubDate>Sun, 15 Feb 2015 00:00:00 +0800</pubDate> </item> <item> <title>如果你做的事情毫不费力，就是在浪费时间</title> <description> &lt;p&gt;原文出处： 钛媒体&lt;br /&gt; 曾担任苹果副总裁的Roizen女士提出了八条职业原则，其中关于创业她说：很多怀有雄心壮志的人力求消除工作中的困难，顺利到达梦想彼岸，这是不对的。现实情况是，即使你真的轻松成功，你也会感到无聊。所以，找点困难的事情做吧。创业的美妙之处正在于其艰难。没有安全可言，没有稳定的收入，你必须完全靠自己。&lt;/p&gt; &lt;p&gt;注：本文作者Heidi Roizen系DFJ Venture合伙人，曾任苹果公司主管开发者关系的高级副总裁，女性创业者。&lt;/p&gt; &lt;p&gt;以下是 Roizen 提出的八条原则，她正是利用这些原则来指导自己的工作、建立起广泛的人际网络并不断推动创新。这些过来人的经验对于新入行者弥足珍贵，可以作为职业生涯各个阶段发展重要的领航灯。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;1）如果你做的事情毫不费力，那就是在浪费时间&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;梅琳达·盖茨曾有一次路过小女儿的房间，看着她在尝试着自己穿鞋，她女儿说：“这很难，但是我喜欢困难的事。” 我喜欢这种态度。在你经历过很多困难时期后，你会发现渡过难关是你最美好的经历。&lt;/p&gt; &lt;p&gt;成功的创业者追求一种永不止步的状态。你努力工作，超越能力的极限，不断地尝试、失败、再尝试；你每天、每周都问自己“我还能做什么更有难度的事情吗”，这时你才能理解这种劲头。&lt;/p&gt; &lt;p&gt;有趣的是，很多怀有雄心壮志的人却力求消除工作中的困难。他们想平步青云，顺利到达梦想彼岸，这是不对的。”现实情况是，即使你真的轻松成功，你也会感到无聊。所以，找点困难的事情做吧。&lt;/p&gt; &lt;p&gt;创业的美妙之处正在于其艰难。没有安全可言，没有稳定的收入，你必须完全靠自己。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;2）你的品德决定了你生活的基调&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;做第一家公司 T/Maker 的 CEO 时，曾有一次防火洒水器故障毁掉了所有库存商品。幸运的是，大多数产品都不太值钱。更幸运的是（从另一个角度说），房东不知道货品不值钱，愿意用保险赔付一切损失。&lt;/p&gt; &lt;p&gt;当时的条件确实很诱人，我们本可以收到 15 万美元的赔款。但是我们决定说出真相，因为不仅我们知道库存的价值，我们的员工也知道，如果我们决定作假，那我们怎么向员工交代。&lt;/p&gt; &lt;p&gt;你要成为员工的榜样，清楚自己所做每件事的后果。如果公司领导层决定收了这笔钱，那就等于告诉员工，作假是被允许的，就好像是在说：“虚报费用是没问题的，如果想要的话把多余的设备带回家也行。”&lt;/p&gt; &lt;p&gt;这看起来轻而易举，但是真正做到却不容易。你可能会想：“我可以怎么简单怎么来，我可以这么说，我可以对消费者撒谎来达成交易。”&lt;/p&gt; &lt;p&gt;有时你能逃脱掉，有时却逃不掉，大多数情况你最终都是逃不掉的。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;3）你的内心比你掌握更多的信息&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;你的行为决定了公司的文化基调。做有些事是为了晚上能睡个安稳觉，另一些是为了搭建良好的工作关系。当你把标准定得更高时，你会发现更容易把持自己。&lt;/p&gt; &lt;p&gt;在斯坦福商学院，有一门“商业创新”课程，要求学生进行一周练习：睡前把你明天要做的一个决定写在纸上，第二天早上起来立即做决定。这个练习的目的是告诉学生直觉是如何做决定的，以及直觉能够有多么准确。&lt;/p&gt; &lt;p&gt;但是科技圈的认知却朝向相反的方向发展，做决定越来越靠无尽的数据。人们认为掌握的数据越多就能作出正确的决定。对于有些事情来说，这种方法是有效的，但是并不是所有事。内心的直觉建立在多年的经验以及对于人类行为持续不断的观察上。我们甚至不知道它的具体形式。&lt;/p&gt; &lt;p&gt;我在做一些艰难的决定时往往会听从直觉，尤其是涉及到人的时候——和谁工作，和谁保持联系，把谁炒鱿鱼等。每次数据指示和我想的不一样时，听从数据都会让我后悔不已。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;4）挑选团队是你要做的最重要的事情&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;绝大多数公司的成败都取决于团队的质量。&lt;/p&gt; &lt;p&gt;过去这些年里，Roizen 见过太多年轻的创业者犯同一个错误：他们有一个创意，开了一家公司，但是当需要聘用管理人员的时候，他们不想找一个比他们更懂的人来做。他们不想被威胁，所以就找跟他们同龄，和他们懂得一样多的，找自己信任的熟人。这种做法听起来不错，但是同时，创业者因为怕被压制或大权旁落而错失了许多专业人才。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;5）如果你希望成为团队内最聪明的人，那你会建立一支平庸的队伍。&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;你真的希望你负责销售的副总比你还不懂销售？你想要你的 CFO 不如你懂财务？当然不是。你应该去冒险，找到正确的人，并且信任他们。你的工作是激励这些人，并确保他们和睦相处。&lt;/p&gt; &lt;p&gt;我的目标永远是成为团队里最笨的人，我希望我的身边都是些真正有才华的人。这才是让人兴奋的事情，我们才能完成最艰难的挑战。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;6）生活真的是反复无常的&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;倒霉事儿会发生在你头上，你会失败，失控的事情会发生，你需要接受现实。在这种境遇下，你如何挺过去，坚持到成功呢？一条建议：把事情都想成一团糟。&lt;/p&gt; &lt;p&gt;快乐的关键是降低你的预期。这并不是说你不应该追求自己的目标，这意味着你应该对前进路上的不完美做好准备。比如说，Roizen 出国旅行时会设想行李丢失、航班晚点或是租的车没有按时到达等各种情况。我想到了各种事情最坏的结果，那么当坏事真的发生时，我也不会感到难过。我在随身行李中放了换洗衣服，我在落地两小时内没有安排任何会议。我预期很低，如果坏事没有发生，那我就会很欣喜。95%的压力都是自找的。&lt;/p&gt; &lt;p&gt;Roizen 想起她认识的一位总是严谨制定计划的创业者，每一件事都计划得滴水不漏，但是实际上事情从没有完全按计划施行过。 如果你期待每件事都顺利进行，坏事就可能会落到你身上。生活有时候可能很遭，当这种情况真的发生时，整顿行装，继续前行。&lt;/p&gt; &lt;p&gt;如果你跌倒了却爬不起来，那么你的余生也将一事无成。&lt;/p&gt; &lt;p&gt;记住，就像硬币的两面一样，生活的跌宕也可能带来好事。当机会来临时，不要错过，你不知道接下来会发生什么。如果你得到 3 个不错的工作 offer，不要总想着选个最正确的。&lt;/p&gt; &lt;p&gt;可能你选了一个不太好的工作，业绩不好，你被炒了，但以后可能还有更好的工作机会。而且在这份工作中学到的经验教训在另一份更稳定的工作中是得不到的。&lt;/p&gt; &lt;p&gt;Roizen 回忆起自己不久前看的一本书，书中说在问到过去 5 年发生过的最好和最坏的事情是什么时，大部人说出的都是同一件事，甚至包括离婚、得癌症或是失业等。&lt;/p&gt; &lt;p&gt;但当你接着问他什么是促使生活向好的方向发展的事情时，往往就是这些坏事。有时，接受生活的起伏，你会发现一些伪装起来的好事。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;7）充分利用时间&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;你所拥有的最重要的东西就是你的时间，因为你不能创造更多时间。&lt;/p&gt; &lt;p&gt;你可以用钱或他人的帮助来节约你的时间，但是，最终你还是会用光自己的时间。所以，你需要对自己如何利用时间了如指掌。很多人不知道每件事情花了多少时间，他们有 1000 封未回复的邮件，却还说不知道怎么处理。解决方法就是每天安排的工作不要超过 5 个小时，留出 3 个小时回邮件，打电话，阅读，获取最新消息。当别人说没时间时，我会说，你当然有时间，但你用来做别的事情了。&lt;/p&gt; &lt;p&gt;想想所有需要花时间的事情，开始时对它们一视同仁。你要明白，睡觉是花时间的，阅读也是花时间的。搞清楚你喜欢做什么，什么能够最大限度的拓展你的能力，然后重新规划时间，把时间花在正确的事情上。理想的情况是，你能留出一些时间用来思考和睡觉，但是 Roizen 说有时候也确实很难实现。&lt;/p&gt; &lt;p&gt;在工作上花更多的时间就意味着陪家人和朋友的时间少了。人们有一种幻觉认为关系和交流不需要用时间来维系，但是实际上不是这样的。你可能没法完全平衡你的时间，但是至少试着来。&lt;/p&gt; &lt;p&gt;如果你不给你自己留时间，那就没时间做些正确的事，总会有各种突发情况。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;8）20-40-60 法则&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;演员 Shirley MacLaine 最早提出了这个法则，主要内容是：20 岁时，你总在担心别人是怎么看你的；40 岁时你觉醒了，我才不管别人是怎么想的。60 岁时你才发现，根本没人管你。这个法则的核心理念就是：从一开始就没有人想着你。&lt;/p&gt; &lt;p&gt;当然，这既是好事儿，也是坏事。坏处在于没有人在一直关心你好不好，挣多少钱，你对工作和人际关系是否满意。“你需要为自己着想，如果你在做一件不喜欢的工作，你需要自己做出决定是否换个工作，你不能在办公室等着别人帮你做决定。 你的老板不会想着你，你的同事没有想着你，你需要替自己着想。&lt;/p&gt; &lt;p&gt;这听起来令人难以接受。有些人花很多时间思忖别人是怎么看待自己的，深受折磨，其实完全没必要这样。&lt;/p&gt; &lt;p&gt;我曾经也总是顾虑长途飞行后穿着不合时宜的鞋和褶皱的套装时开会是什么状态。我会很担心人们看到我连自己都收拾不利索会怎么看我。但是，有一次开会时，我发现，并没有人认为“虽然这个家伙很聪明，但是他衣冠不整，这人肯定不行”。&lt;/p&gt; &lt;p&gt;人们总是为一些犯过的小错误折磨自己，在会上说错话，叫错人名等。你可能浪费几个星期的时间来懊恼，导致工作效率低下。如果你发现自己是这样的，那么请记住：没有人像你自己一样关注你。所以就不要担心太多了。&lt;/p&gt; </description> <link>https://luowei.github.io/life/it's-a-waste-of-time-do-effortlessly.html</link> <guid>https://luowei.github.io/life/it's-a-waste-of-time-do-effortlessly</guid> <pubDate>Wed, 15 Oct 2014 00:00:00 +0800</pubDate> </item> <item> <title>一些简单的iOS应用视频教程</title> <description> &lt;p&gt;FMDB操作SQLite示例QuizSQLite&lt;/p&gt; &lt;embed src=&quot;http://www.tudou.com/v/HMvxFxSeBAg/&amp;amp;bid=05&amp;amp;rpid=68930770&amp;amp;resourceId=68930770_05_05_99/v.swf&quot; type=&quot;application/x-shockwave-flash&quot; allowscriptaccess=&quot;always&quot; allowfullscreen=&quot;true&quot; wmode=&quot;opaque&quot; width=&quot;480&quot; height=&quot;400&quot; /&gt; &lt;p&gt;&amp;lt;/embed&amp;gt;&lt;/p&gt; &lt;p&gt;直升机越障碍小游戏示例HeliGame&lt;/p&gt; &lt;embed src=&quot;http://www.tudou.com/v/BP04AFMZFvU/&amp;amp;bid=05&amp;amp;rpid=68930770&amp;amp;resourceId=68930770_05_05_99/v.swf&quot; type=&quot;application/x-shockwave-flash&quot; allowscriptaccess=&quot;always&quot; allowfullscreen=&quot;true&quot; wmode=&quot;opaque&quot; width=&quot;480&quot; height=&quot;400&quot; /&gt; &lt;p&gt;&amp;lt;/embed&amp;gt;&lt;/p&gt; &lt;p&gt;iOS下计算器应用的开发&lt;/p&gt; &lt;embed src=&quot;http://www.tudou.com/v/SGduGOFxwNU/&amp;amp;bid=05&amp;amp;rpid=68930770&amp;amp;resourceId=68930770_05_05_99/v.swf&quot; type=&quot;application/x-shockwave-flash&quot; allowscriptaccess=&quot;always&quot; allowfullscreen=&quot;true&quot; wmode=&quot;opaque&quot; width=&quot;480&quot; height=&quot;400&quot; /&gt; &lt;p&gt;&amp;lt;/embed&amp;gt;&lt;/p&gt; &lt;p&gt;乒乓球小游戏示例PingPongGame&lt;/p&gt; &lt;embed src=&quot;http://www.tudou.com/v/a4nQzauIfFQ/&amp;amp;bid=05&amp;amp;rpid=68930770&amp;amp;resourceId=68930770_05_05_99/v.swf&quot; type=&quot;application/x-shockwave-flash&quot; allowscriptaccess=&quot;always&quot; allowfullscreen=&quot;true&quot; wmode=&quot;opaque&quot; width=&quot;480&quot; height=&quot;400&quot; /&gt; &lt;p&gt;&amp;lt;/embed&amp;gt;&lt;/p&gt; &lt;p&gt;太空入侵者示例SpaceInvaders&lt;/p&gt; &lt;embed src=&quot;http://www.tudou.com/v/ySMVn8Ur544/&amp;amp;bid=05&amp;amp;rpid=68930770&amp;amp;resourceId=68930770_05_05_99/v.swf&quot; type=&quot;application/x-shockwave-flash&quot; allowscriptaccess=&quot;always&quot; allowfullscreen=&quot;true&quot; wmode=&quot;opaque&quot; width=&quot;480&quot; height=&quot;400&quot; /&gt; &lt;p&gt;&amp;lt;/embed&amp;gt;&lt;/p&gt; &lt;p&gt;问答示例(智商测试)QuizSample&lt;/p&gt; &lt;embed src=&quot;http://www.tudou.com/v/euD9Dpud8uI/&amp;amp;bid=05&amp;amp;rpid=68930770&amp;amp;resourceId=68930770_05_05_99/v.swf&quot; type=&quot;application/x-shockwave-flash&quot; allowscriptaccess=&quot;always&quot; allowfullscreen=&quot;true&quot; wmode=&quot;opaque&quot; width=&quot;480&quot; height=&quot;400&quot; /&gt; &lt;p&gt;&amp;lt;/embed&amp;gt;&lt;/p&gt; &lt;p&gt;简单的塔防小游戏TowerDefense&lt;/p&gt; &lt;embed src=&quot;http://www.tudou.com/v/sATSPWet84E/&amp;amp;bid=05&amp;amp;rpid=68930770&amp;amp;resourceId=68930770_05_05_99/v.swf&quot; type=&quot;application/x-shockwave-flash&quot; allowscriptaccess=&quot;always&quot; allowfullscreen=&quot;true&quot; wmode=&quot;opaque&quot; width=&quot;480&quot; height=&quot;400&quot; /&gt; &lt;p&gt;&amp;lt;/embed&amp;gt;&lt;/p&gt; &lt;p&gt;小球跳云梯小游戏DoodleJump&lt;/p&gt; &lt;embed src=&quot;http://www.tudou.com/v/CbPUlXXhsJg/&amp;amp;bid=05&amp;amp;rpid=68930770&amp;amp;resourceId=68930770_05_05_99/v.swf&quot; type=&quot;application/x-shockwave-flash&quot; allowscriptaccess=&quot;always&quot; allowfullscreen=&quot;true&quot; wmode=&quot;opaque&quot; width=&quot;480&quot; height=&quot;400&quot; /&gt; &lt;p&gt;&amp;lt;/embed&amp;gt;&lt;/p&gt; &lt;p&gt;糖果粉碎小游戏示例CandyCrush&lt;/p&gt; &lt;embed src=&quot;http://www.tudou.com/v/Fvy9CIUW_g4/&amp;amp;bid=05&amp;amp;rpid=68930770&amp;amp;resourceId=68930770_05_05_99/v.swf&quot; type=&quot;application/x-shockwave-flash&quot; allowscriptaccess=&quot;always&quot; allowfullscreen=&quot;true&quot; wmode=&quot;opaque&quot; width=&quot;480&quot; height=&quot;400&quot; /&gt; &lt;p&gt;&amp;lt;/embed&amp;gt;&lt;/p&gt; &lt;p&gt;FlappyBird(笨鸟先飞)小游戏&lt;/p&gt; &lt;embed src=&quot;http://www.tudou.com/v/0VkHWl3SSXE/&amp;amp;bid=05&amp;amp;rpid=68930770&amp;amp;resourceId=68930770_05_05_99/v.swf&quot; type=&quot;application/x-shockwave-flash&quot; allowscriptaccess=&quot;always&quot; allowfullscreen=&quot;true&quot; wmode=&quot;opaque&quot; width=&quot;480&quot; height=&quot;400&quot; /&gt; &lt;p&gt;&amp;lt;/embed&amp;gt;&lt;/p&gt; </description> <link>https://luowei.github.io/ios/ios-game-samples.html</link> <guid>https://luowei.github.io/ios/ios-game-samples</guid> <pubDate>Mon, 13 Oct 2014 00:00:00 +0800</pubDate> </item> <item> <title>学习积累之iOS示例</title> <description> &lt;p&gt;屏幕背景切换Flashlight http://www.tudou.com/listplay/xs8jxgy4XvQ/59M24Wo-tdU.html&lt;/p&gt; &lt;p&gt;UITableView,UINavigationView的使用 http://www.tudou.com/listplay/xs8jxgy4XvQ/YFYNXET3kRs.html&lt;/p&gt; &lt;p&gt;UIAlertView的使用 http://www.tudou.com/listplay/xs8jxgy4XvQ/YwGeImwTjNA.html&lt;/p&gt; &lt;p&gt;发送Email之EmailDemo http://www.tudou.com/listplay/xs8jxgy4XvQ/SJKkE0mx35Y.html&lt;/p&gt; &lt;p&gt;日期时间选择器DatePickDemo http://www.tudou.com/listplay/xs8jxgy4XvQ/OjVXJT8KuAI.html&lt;/p&gt; &lt;p&gt;播放网络视频StreamingDemo http://www.tudou.com/listplay/xs8jxgy4XvQ/8w1Yp0Uj9Ds.html&lt;/p&gt; &lt;p&gt;摄相头闪光CameraFlash http://www.tudou.com/listplay/xs8jxgy4XvQ/LIhEei4dx9Q.html&lt;/p&gt; &lt;p&gt;WebView的使用 http://www.tudou.com/listplay/xs8jxgy4XvQ/hewvEZoEVb4.html&lt;/p&gt; &lt;p&gt;Social示例SocialTest http://www.tudou.com/listplay/xs8jxgy4XvQ/qS9moGKe_Rc.html&lt;/p&gt; &lt;p&gt;播放网络音频StreamingMusic http://www.tudou.com/listplay/xs8jxgy4XvQ/Z9Z5Bb-dj9E.html&lt;/p&gt; &lt;p&gt;图片选择及用户数据保存UserData http://www.tudou.com/listplay/xs8jxgy4XvQ/7zwK4k3T8wQ.html&lt;/p&gt; &lt;p&gt;图片颜色过滤示例ImageFilter http://www.tudou.com/listplay/xs8jxgy4XvQ/j26JmeSCNNc.html&lt;/p&gt; &lt;p&gt;Property List属性文件的读写操作 http://www.tudou.com/listplay/xs8jxgy4XvQ/BfinnV4vsmQ.html&lt;/p&gt; &lt;p&gt;简单图片处理示例ImageFilter http://www.tudou.com/listplay/xs8jxgy4XvQ/Mwy-hjOBpRA.html&lt;/p&gt; &lt;p&gt;TableView 分组及排序示例SectionsDemo http://www.tudou.com/listplay/xs8jxgy4XvQ/prJXsB-yyIg.html&lt;/p&gt; &lt;p&gt;下拉刷新示例PullRefresher http://www.tudou.com/listplay/xs8jxgy4XvQ/DJxNN66CBI8.html&lt;/p&gt; &lt;p&gt;NSDictionary的应用 http://www.tudou.com/listplay/xs8jxgy4XvQ/kpnbUWT1pak.html&lt;/p&gt; &lt;p&gt;文字匹配示例MatchingGame http://www.tudou.com/listplay/xs8jxgy4XvQ/sCToX-w4RIk.html&lt;/p&gt; &lt;p&gt;自定义选择器CustomPicker http://www.tudou.com/listplay/xs8jxgy4XvQ/vzbu2ENRHzA.html&lt;/p&gt; &lt;p&gt;自定义View示例HeadsUpDisplay http://www.tudou.com/listplay/xs8jxgy4XvQ/4bAuugTR0rQ.html&lt;/p&gt; &lt;p&gt;Segue实现视图之间传递数据 http://www.tudou.com/listplay/xs8jxgy4XvQ/1hwGXyAh87M.html&lt;/p&gt; &lt;p&gt;自定义Button http://www.tudou.com/listplay/xs8jxgy4XvQ/VdQJNk8BG4Y.html&lt;/p&gt; &lt;p&gt;CollectionView使用 http://www.tudou.com/listplay/xs8jxgy4XvQ/roWaz3PN9Lo.html&lt;/p&gt; &lt;p&gt;显示本地通知 http://www.tudou.com/listplay/xs8jxgy4XvQ/ADTuixlCeR4.html&lt;/p&gt; &lt;p&gt;CoreData操作sqlite数据库 http://www.tudou.com/listplay/xs8jxgy4XvQ/_HIWUd5GHqo.html&lt;/p&gt; &lt;p&gt;获取当前位置 http://www.tudou.com/listplay/xs8jxgy4XvQ/YOci9CueBBk.html&lt;/p&gt; &lt;p&gt;简单的指南针 http://www.tudou.com/listplay/xs8jxgy4XvQ/778TkEvmjsc.html&lt;/p&gt; &lt;p&gt;简单搜索匹配 http://www.tudou.com/listplay/xs8jxgy4XvQ/pJskRiyFJo8.html&lt;/p&gt; &lt;p&gt;读取Json接口数据 http://www.tudou.com/listplay/xs8jxgy4XvQ/x60sl0uujFQ.html&lt;/p&gt; &lt;p&gt;使用Slider调节图片色调 http://www.tudou.com/listplay/xs8jxgy4XvQ/ywH4BMIkU9Y.html&lt;/p&gt; &lt;p&gt;播放声音 http://www.tudou.com/listplay/xs8jxgy4XvQ/Q6pucakgLXQ.html&lt;/p&gt; &lt;p&gt;简单的拖拽 http://www.tudou.com/listplay/xs8jxgy4XvQ/_8FLJUjT_Js.html&lt;/p&gt; &lt;p&gt;获得地图及计算地理位置 http://www.tudou.com/listplay/xs8jxgy4XvQ/7edd74gPLzI.html&lt;/p&gt; &lt;p&gt;使用sqlite3.h提供的api直接操作sqlite数据库 http://www.tudou.com/listplay/xs8jxgy4XvQ/cLxcU_5tAcA.html&lt;/p&gt; &lt;p&gt;UIButton的动态添加和UIAlertView的监听 http://www.tudou.com/listplay/xs8jxgy4XvQ/4WOHDJiuswg.html&lt;/p&gt; &lt;p&gt;TabBar的使用 http://www.tudou.com/listplay/xs8jxgy4XvQ/aDbSOgIhDA4.html&lt;/p&gt; &lt;p&gt;级联选择器及偏好设置的读取与保存 http://www.tudou.com/listplay/xs8jxgy4XvQ/Q036BbFLTpg.html&lt;/p&gt; </description> <link>https://luowei.github.io/ios/ios-cocos2dx-game.html</link> <guid>https://luowei.github.io/ios/ios-cocos2dx-game</guid> <pubDate>Mon, 13 Oct 2014 00:00:00 +0800</pubDate> </item> <item> <title>nginx的负载均衡配置</title> <description> &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Nginx负载均衡通过upstream实现,同时Nginx还支持多组的负载均衡,可以配置多个upstream来服务于不同的Server. &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;down 表示单前的server暂时不参与负载&lt;/li&gt; &lt;li&gt;weight 默认为1.weight越大，负载的权重就越大。&lt;/li&gt; &lt;li&gt;max_fails ：允许请求失败的次数默认为1.当超过最大次数时，返回— proxy_next_upstream 模块定义的错误&lt;/li&gt; &lt;li&gt;fail_timeout:max_fails 次失败后，暂停的时间。&lt;/li&gt; &lt;li&gt;backup： 其它所有的非backup机器down或者忙的时候，请求backup机器。所以这台机器压力会最轻。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;strong&gt;nginx的upstream目前支持4种方式的分配&lt;/strong&gt;&lt;/p&gt; &lt;ol&gt; &lt;li&gt;轮询（默认） 每个请求按时间顺序逐一分配到不同的后端服务器，如果后端服务器down掉，能自动剔除。&lt;/li&gt; &lt;li&gt;weight 指定轮询几率，weight和访问比率成正比，用于后端服务器性能不均的情况。&lt;/li&gt; &lt;li&gt;ip_hash 每个请求按访问ip的hash结果分配，这样每个访客固定访问一个后端服务器，可以解决session的问题。&lt;/li&gt; &lt;li&gt;fair（第三方） 按后端服务器的响应时间来分配请求，响应时间短的优先分配。&lt;/li&gt; &lt;li&gt;url_hash（第三方）&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;strong&gt;配置nginx.conf(上代码)：&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;worker_processes 1; error_log logs/rtmp_error.log debug; pid logs/nginx.pid; events { worker_connections 1024; } #http config #include conf.d/http.conf; http { include mime.types; default_type application/octet-stream; #通过ip设置访问权限 #allow 192.168.0.0/24; #allow 127.0.0.1; #deny all; sendfile on; keepalive_timeout 65; #gzip on; #upstream config(负载均衡配置) #定义负载均衡设备的 Ip及设备状态 upstream myServer { # 不同的ip或者端口指定不同的server server 127.0.0.1:9090 down; server 127.0.0.1:8080 weight=2; server 127.0.0.1:6060; server 127.0.0.1:7070 backup; } # upstream 每个设备的状态: # down 表示单前的server暂时不参与负载 # weight 默认为1.weight越大，负载的权重就越大。 # max_fails ：允许请求失败的次数默认为1.当超过最大次数时，返回proxy_next_upstream 模块定义的错误 # fail_timeout:max_fails 次失败后，暂停的时间。 # backup： 其它所有的非backup机器down或者忙的时候，请求backup机器。所以这台机器压力会最轻。 server { listen 80; server_name localhost; location / { #在需要使用负载的Server节点下添加 proxy_pass http://myServer; #root html; #index index.html index.htm; } error_page 500 502 503 504 /50x.html; location = /50x.html { root html; } } #监听6060的服务器 server { listen 6060; server_name 127.0.0.1; location / { root html; index 6060.html; } } #监听7070的服务器 server { listen 7070; server_name 127.0.0.1; location / { root html; index 7070.html; } } #8080端口让tomcat来监听服务器 #server { # listen 8080; # server_name 127.0.0.1; # # location / { # root html; # index index.html index.htm; # } #} } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;相应配置源代码:&lt;a href=&quot;https://github.com/luowei/nginx-rtmp-sample&quot; target=&quot;__blank&quot;&gt;nginx-rtmp-sample&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/tutorials/nginx-upstream.html</link> <guid>https://luowei.github.io/tutorials/nginx-upstream</guid> <pubDate>Fri, 10 Oct 2014 00:00:00 +0800</pubDate> </item> <item> <title>我做的一些视频</title> <description> &lt;p&gt;Intellij之JavaEE开发教程 &lt;a href=&quot;http://www.tudou.com/plcover/4maF4_tJ9uw/&quot;&gt;http://www.tudou.com/plcover/4maF4_tJ9uw/&lt;/a&gt;&lt;/p&gt; &lt;p&gt;Spring教程 &lt;a href=&quot;http://www.tudou.com/plcover/w30DGqKxUyY/&quot;&gt;http://www.tudou.com/plcover/w30DGqKxUyY/&lt;/a&gt;&lt;/p&gt; &lt;p&gt;从项目实例学习开发 &lt;a href=&quot;http://www.tudou.com/plcover/SZ6ASAjPlYw/&quot;&gt;http://www.tudou.com/plcover/SZ6ASAjPlYw/&lt;/a&gt;&lt;/p&gt; &lt;p&gt;Intellij开发系列教程 intellij开发系列.01.开发环境的搭建 &lt;a href=&quot;http://v.youku.com/v_show/id_XNjQ1MjMyMjY0.html?f=21186166&quot;&gt;http://v.youku.com/v_show/id_XNjQ1MjMyMjY0.html?f=21186166&lt;/a&gt;&lt;/p&gt; &lt;p&gt;intellij开发系列.02.git版本管理及pom配置 &lt;a href=&quot;http://v.youku.com/v_show/id_XNjM5Nzk5ODM2.html?f=21186166&quot;&gt;http://v.youku.com/v_show/id_XNjM5Nzk5ODM2.html?f=21186166&lt;/a&gt;&lt;/p&gt; &lt;p&gt;intellij开发系列.03.使用spring-jpa及spring-mvc介绍 &lt;a href=&quot;http://www.youku.com/playlist_show/id_21186166.html&quot;&gt;http://www.youku.com/playlist_show/id_21186166.html&lt;/a&gt;&lt;/p&gt; &lt;p&gt;intellij开发系列.04.sitemesh以及shiro的应用 &lt;a href=&quot;http://v.youku.com/v_show/id_XNjQ2MTA4MTY0.html?f=21186166&quot;&gt;http://v.youku.com/v_show/id_XNjQ2MTA4MTY0.html?f=21186166&lt;/a&gt;&lt;/p&gt; &lt;p&gt;Spring,OSGI,TomEE,Tomcat系列教程 &lt;a href=&quot;http://www.youku.com/playlist_show/id_22866044.html&quot;&gt;http://www.youku.com/playlist_show/id_22866044.html&lt;/a&gt;&lt;/p&gt; &lt;p&gt;ffmpeg教程 &lt;a href=&quot;http://www.youku.com/playlist_show/id_22857322.html&quot;&gt;http://www.youku.com/playlist_show/id_22857322.html&lt;/a&gt;&lt;/p&gt; &lt;p&gt;word长文档排版技巧 &lt;a href=&quot;http://v.youku.com/v_show/id_XNjQ1NDQzMjM2.html?f=21206983&quot;&gt;http://v.youku.com/v_show/id_XNjQ1NDQzMjM2.html?f=21206983&lt;/a&gt;&lt;/p&gt; &lt;p&gt;apach php与nigin php环境的搭建 &lt;a href=&quot;http://v.youku.com/v_show/id_XNzYzNTIyOTg0.html?f=22857321&quot;&gt;http://v.youku.com/v_show/id_XNzYzNTIyOTg0.html?f=22857321&lt;/a&gt;&lt;/p&gt; &lt;p&gt;nginx_rtmp在windows下编译及点播,直播,服务端录制的配置 &lt;a href=&quot;http://v.youku.com/v_show/id_XNzg1NzY2Mzcy.html?f=22857321&quot;&gt;http://v.youku.com/v_show/id_XNzg1NzY2Mzcy.html?f=22857321&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/tutorials/video-tutorials.html</link> <guid>https://luowei.github.io/tutorials/video-tutorials</guid> <pubDate>Sun, 28 Sep 2014 00:00:00 +0800</pubDate> </item> <item> <title>Apache虚拟目录、域名关联、端口转发以及防盗链配置</title> <description> &lt;h1 id=&quot;apache虚拟目录域名关联端口转发以及防盗链配置&quot;&gt;Apache虚拟目录、域名关联、端口转发以及防盗链配置&lt;/h1&gt; &lt;p&gt;在上网，或在浏览器输入网址时，细心的就会发现，这个网址有很大的学问。一般网站都是通过域来访问的，一些相关的站点就配置了相应的子域名，如本站主域名为：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;wodedata.com&lt;/code&gt; ,其他相关的站点就配置了子域名进行访问，如：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;my.wodedata.com&lt;/code&gt;,&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;life.wodedata.com&lt;/code&gt;,&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fdm.wodedata.com&lt;/code&gt;等等。 在购买了域名之后，就可以设置无数个子域名了。当然还有一种方式是在域名后面以&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/&lt;/code&gt;分隔，设置不路径指向不同的网站内容。 当然还有一种情况就是，java写的web项目布署在tomcat当中，百tomcat服务器不是80端口访问，如果又不想在域名后面加上一个8080端口直接暴露出来，就需要在Apache中设置代理转发到指定端口了。&lt;/p&gt; &lt;p&gt;首先万网添加域名解析A记录:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;img.wodeata.com&lt;/code&gt; 到指定IP地址，然后。。废话不多说了直接上配置代码&lt;/p&gt; &lt;h3 id=&quot;虚拟目录及域名关联&quot;&gt;虚拟目录及域名关联&lt;/h3&gt; &lt;ol&gt; &lt;li&gt;在CentOS中，直接在conf.d目录下添加一个img.wodedata.com.conf文件；&lt;/li&gt; &lt;li&gt;在Ubuntu中，直接在sites-avaliable目录下添加img.wodedata.com.conf文件；&lt;/li&gt; &lt;li&gt;开启Apache的rewrite模块；&lt;/li&gt; &lt;/ol&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;VirtualHost *:80&amp;gt; ServerAdmin luowei@wodedata.com ServerName img.wodedata.com ServerAlias img.wodedata.com # 指定资源目录 DocumentRoot /var/www/img.wodedata.com # 配置防盗链 RewriteEngine on RewriteCond %{HTTP_REFERER} !^$ [NC] RewriteCond %{HTTP_REFERER} !wodedata.com [NC] RewriteCond %{HTTP_REFERER} !rootls.com [NC] RewriteCond %{HTTP_REFERER} !baidu.com [NC] RewriteCond %{HTTP_REFERER} !google.cn [NC] RewriteCond %{HTTP_REFERER} !google.com [NC] RewriteRule .*.(json|txt|doc|pdf|mp3|mp4|zip|rar|bmp|png|jpg|gif)$ http://wodedata.com [R,NC,L] # 配置日志生成目录 ErrorLog ${APACHE_LOG_DIR}/error.log CustomLog ${APACHE_LOG_DIR}/access.log combined &amp;lt;/VirtualHost&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h3 id=&quot;tomcat端口转发配置&quot;&gt;Tomcat端口转发配置&lt;/h3&gt; &lt;ol&gt; &lt;li&gt;在CentOS中，直接在conf.d目录下添加一个my.wodedata.com.conf文件；&lt;/li&gt; &lt;li&gt;在Ubuntu中，直接在sites-avaliable目录下添加my.wodedata.com.conf文件；&lt;/li&gt; &lt;li&gt;开启Apache的proxy模块；&lt;/li&gt; &lt;/ol&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &amp;lt;VirtualHost *:80&amp;gt; ServerName my.wodedata.com ProxyIOBufferSize 8192 ProxyRequests Off ProxyVia Full ProxyPass / http://wodedata.com:8080/ smax=5 max=20 ttl=120 retry=300 # 代理到8080端口 ProxyPassReverse / http://wodedata.com:8080/ ErrorLog ${APACHE_LOG_DIR}/error.log CustomLog ${APACHE_LOG_DIR}/access.log combined &amp;lt;/VirtualHost&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/lamp/apache-mutile-virturehost-domains-anti-leech.html</link> <guid>https://luowei.github.io/lamp/apache-mutile-virturehost-domains-anti-leech</guid> <pubDate>Wed, 03 Sep 2014 00:00:00 +0800</pubDate> </item> <item> <title>从笔迹看性格</title> <description> &lt;p&gt;即使是因为意外事故，不能用手而学会用脚趾头那笔写字的人，也会表现出和用手写字时一样的习惯。因为与其说人是用手写字，不如说是用脑写子。也就是说，人的笔迹会如实地暴露出你的潜意识。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;从笔迹看性格1&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;写的字左边略微往上，亦即稍微往右倾斜的人，属于“感情型”。而且往右倾斜的幅度越大者，感情越丰富。称为“We 型人”。&lt;/p&gt; &lt;p&gt;反之，写的字右边往上，亦即稍微往左倾斜的人，属于“理论型”。可判断为有抑制感情的倾向，称为“Me 型人”。&lt;/p&gt; &lt;p&gt;写的字既不偏左，也不偏右，完全像方正铅字般的人，是超乎必要的谨慎而过度压抑自己的人，几乎不会对别人敞开心胸。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;从笔迹看性格2&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;给你一张全新的纸，请对方在上面随意写些字。不论写什么都可以，例如自己的名字。 写的字的内容都无关紧要，实际上要观察的是，对方把字写在了什么地方。&lt;/p&gt; &lt;p&gt;字写在纸上方的人，性格积极； 写在越下方的人，性格越消极。&lt;/p&gt; &lt;p&gt;写在偏右方的人，是未来取向的人，经常思考将来的事。 写在偏左方的人，有拘泥于过去的倾向，是属于做任何事都以过去经验为基础的类型。&lt;/p&gt; &lt;p&gt;如果是混合型，例如字写在偏右上的人，可视为朝向未来、怀抱希望的行动型； 偏左上方的人，是属于积极但不太敢冒险型；&lt;/p&gt; &lt;p&gt;写在右下方的人，可说是可以预测未来，但内心感到不安型； 写在左下方的人，则是没有自信，不太愿意挑战新事物的类型&lt;/p&gt; &lt;p&gt;&lt;strong&gt;从笔迹看性格3&lt;/strong&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;字迹潦草而且写字速度很快的人，工作也很快，难免就有些马虎粗糙的地方，但那是因为他认为“大略做好后再修改细节就好了”。这类型的人，适合做一贯作业的工作，对需要精雕细琢的工作就会感到不耐烦。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;写字谨慎而慢的人，工作时也会一步一步边确认边进行。他会非常仔细、孜孜不倦地工作，然而一旦被催促加快速度时，就不能发挥原有的水准，甚至干劲全失了。&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;p&gt;把这两种人混合编成一组，正好可以发挥互补的功能，快速做完之后，再仔细确认，让工作顺利完成。&lt;/p&gt; </description> <link>https://luowei.github.io/life/character-by-handwriting.html</link> <guid>https://luowei.github.io/life/character-by-handwriting</guid> <pubDate>Thu, 05 Dec 2013 00:00:00 +0800</pubDate> </item> <item> <title>ssh隧道、端口转发及内网穿透</title> <description> &lt;h1 id=&quot;ssh隧道端口转发及内网穿透&quot;&gt;ssh隧道、端口转发及内网穿透&lt;/h1&gt; &lt;h2 id=&quot;ssh相关知识点概要&quot;&gt;ssh相关知识点概要&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;SSH是一种安全的传输协议，目前最多的主要是用于连接服务器，除了这个之外它的隧道转发功能也是非常强大有用的。&lt;/li&gt; &lt;li&gt; &lt;p&gt;下面介绍一下三个非常强大的命令：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; ssh -C -f -N -g -L listen_port:DST_Host:DST_port user@Tunnel_Host ssh -C -f -N -g -R listen_port:DST_Host:DST_port user@Tunnel_Host ssh -C -f -N -g -D listen_port user@Tunnel_Host &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;ul&gt; &lt;li&gt;参数说明： &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-f&lt;/code&gt; Fork into background after authentication. 后台认证用户/密码，通常和-N连用，不用登录到远程主机。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-L port:host:hostport&lt;/code&gt;.将本地机(客户机)的某个端口转发到远端指定机器的指定端口. 工作原理是本地机器上分配了一个 socket 侦听 port 端口, 一旦这个端口上有了连接, 该连接就经过安全通道转发出去, 同时远程主机和 host 的 hostport 端口建立连接. 可以在配置文件中指定端口的转发. 只有 root 才能转发特权端口. IPv6 地址用另一种格式说明: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;port/host/hostport&lt;/code&gt;。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-R port:host:hostport&lt;/code&gt;.将远程主机(服务器)的某个端口转发到本地端指定机器的指定端口. 工作原理是远程主机上分配了一个 socket 侦听 port 端口, 一旦这个端口上有了连接, 该连接就经过安全通道转向出去, 同时本地主机和 host 的 hostport 端口建立连接. 可以在配置文件中指定端口的转发. 只有用 root 登录远程主机才能转发特权端口. IPv6 地址用另一种格式说明: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;port/host/hostport&lt;/code&gt;。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-D port&lt;/code&gt;.指定一个本地机器 “动态的’’ 应用程序端口转发. 工作原理是本地机器上分配了一个 socket 侦听 port 端口, 一旦这个端口上有了连接, 该连接就经过安全通道转发出去, 根据应用程序的协议可以判断出远程主机将和哪里连接. 目前支持 SOCKS4 协议, 将充当 SOCKS4 服务器. 只有 root 才能转发特权端口. 可以在配置文件中指定动态端口的转发。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-C&lt;/code&gt; Enable compression. 压缩数据传输。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-N&lt;/code&gt; Do not execute a shell or command. 不执行脚本或命令，通常与-f连用。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-g&lt;/code&gt; Allow remote hosts to connect to forwarded ports. 在-L/-R/-D参数中，允许远程主机连接到建立的转发的端口，如果不加这个参数，只允许本地主机建立连接。注：而这个参数我在实践中似乎始终不起作用。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;建立ssh隧道案例&quot;&gt;建立SSH隧道案例&lt;/h2&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;网络结构说明： &lt;img src=&quot;http://ww1.sinaimg.cn/large/680dfa44jw1fapifoe3ccj20dw0a3mxv.jpg&quot; alt=&quot;网络拓扑图&quot; /&gt;&lt;/p&gt; &lt;blockquote&gt; &lt;ol&gt; &lt;li&gt;需要访问234.234.234.234的FTP服务，也就是端口21&lt;/li&gt; &lt;li&gt;中间服务器是123.123.123.123&lt;/li&gt; &lt;/ol&gt; &lt;/blockquote&gt; &lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;建立本地ssh隧道&quot;&gt;建立本地SSH隧道&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;即要实现绕过公司防火墙，访问c某网站服务器。需要在公司内自己的机器上使用如下命令配置来建立一个本地的SSH隧道：&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1. ssh -N -f -L 2121:234.234.234.234:21 123.123.123.123 2. ftp localhost:2121 # 现在访问本地2121端口，就能连接234.234.234.234的21端口了 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;参考说明： &lt;ul&gt; &lt;li&gt;-N 告诉SSH客户端，这个连接不需要执行任何命令。仅仅做端口转发&lt;/li&gt; &lt;li&gt;-f 告诉SSH客户端在后台运行&lt;/li&gt; &lt;li&gt;-L 做本地映射端口，被冒号分割的三个部分含义分别是 &lt;ul&gt; &lt;li&gt;需要使用的本地端口号&lt;/li&gt; &lt;li&gt;需要访问的目标机器IP地址（IP: 234.234.234.234）&lt;/li&gt; &lt;li&gt;需要访问的目标机器端口（端口: 21)&lt;/li&gt; &lt;li&gt;其中中间服务器是123.123.123.123，需要访问的FTP服务器是234.234.234.234，端口为21&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-L X:Y:Z&lt;/code&gt;的含义是，将IP为Y的机器的Z端口通过中间服务器映射到本地机器的X端口。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;最后一个参数是我们用来建立隧道的中间机器的IP地址(IP: 123.123.123.123)&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;建立远程ssh隧道&quot;&gt;建立远程SSH隧道&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;即要实现在IP是123.123.123.123的机器上用命令：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ssh -p 2222 localhost&lt;/code&gt;就可以登陆公司的IP是192.168.0.100的机器。则需要在公司内自己的机器上使用以下命令来建立一个远程SSH隧道：&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ssh -N -f -R 2222:127.0.0.1:22 123.123.123.123 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;参考说明： &lt;ul&gt; &lt;li&gt;-N，-f 这两个参数上面已经在本地SSH隧道中说明过了&lt;/li&gt; &lt;li&gt;-R。该参数的三个部分的含义分别是: &lt;ul&gt; &lt;li&gt;远程机器使用的端口（2222）&lt;/li&gt; &lt;li&gt;需要映射的内部机器的IP地址(127.0.0.1)&lt;/li&gt; &lt;li&gt;需要映射的内部机器的端口(22)&lt;/li&gt; &lt;li&gt;其中需要访问内部机器的远程机器的IP地址（这里是123.123.123.123）&lt;/li&gt; &lt;li&gt;这里 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-R X:Y:Z&lt;/code&gt; 就是把我们内部的Y机器的Z端口映射到远程机器的X端口上&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;通过ssh隧道建立socks服务器&quot;&gt;通过SSH隧道建立SOCKS服务器&lt;/h3&gt; &lt;p&gt;如果需要借助一台中间服务器访问很多资源，一个个映射显然不是办法。这就要用到SSH客户端为我们提供了通过SSH隧道建立SOCKS服务器(动态绑定)的功能。&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1. ssh -N -f -D 1080 123.123.123 # 将端口绑定在127.0.0.1上 2. ssh -N -f -D 0.0.0.0:1080 123.123.123.123 # 将端口绑定在0.0.0.0上 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;使用场景,假设X网络（192.168.18.0/24）有主机A（192.168.18.100）,Y网络（192.168.2.0/24）有主机B（192.168.2.100）和主机C（192.168.2.101），已知主机A可以连接主机B，但无法连接主机C。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;在主机A执行&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ssh -D localhost:8080 root@192.168.2.100 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;然后主机A上的应用程序就可以通过&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;SOCKS5 localhost:8080 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;访问主机C上的服务。&lt;/p&gt; &lt;h3 id=&quot;建立ssh隧道的几个技巧&quot;&gt;建立SSH隧道的几个技巧&lt;/h3&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;自动重连&lt;/strong&gt;。隧道可能因为某些原因断开，例如：机器重启，长时间没有数据通信而被路由器切断等等。因此我们可以用程序控制隧道的重新连接，例如一个简单的循环或者使用 &lt;a href=&quot;http://cr.yp.to/daemontools.html&quot;&gt;djb’s daemontools&lt;/a&gt; . 不管用哪种方法，重连时都应避免因输入密码而卡死程序。关于如何安全的避免输入密码的方法，参考&lt;a href=&quot;http://blog.jianingy.com/node/73&quot;&gt;如何实现安全的免密码ssh登录&lt;/a&gt; 。这里请注意，如果通过其他程序控制隧道连接，应当避免将SSH客户端放到后台执行，也就是去掉-f参数。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;保持长时间连接&lt;/strong&gt;。有些路由器会把长时间没有通信的连接断开。SSH客户端的TCPKeepAlive选项可以避免这个问题的发生，默认情况下它是被开启的。如果它被关闭了，可以在ssh的命令上加上-o TCPKeepAlive=yes来开启。另一种方法是，去掉-N参数，加入一个定期能产生输出的命令。例如: top或者vmstat。下面给出一个这种方法的例子：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ssh -R 2222:localhost:22 123.123.123.123 &quot;vmstat 30&quot;&lt;/code&gt;。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;检查隧道状态&lt;/strong&gt;。有些时候隧道会因为一些原因通信不畅而卡死，例如：由于传输数据量太大，被路由器带入stalled状态。这种时候，往往SSH客户端并不退出，而是卡死在那里。一种应对方法是，使用SSH客户端的ServerAliveInterval和ServerAliveCountMax选项。 ServerAliveInterval会在隧道无通信后的一段设置好的时间后发送一个请求给服务器要求服务器响应。如果服务器在 ServerAliveCountMax次请求后都没能响应，那么SSH客户端就自动断开连接并退出，将控制权交给你的监控程序。这两个选项的设置方法分别是在ssh时加入-o ServerAliveInterval=n和-o ServerAliveCountMax=m。其中n, m可以自行定义。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;将端口绑定到外部地址上&lt;/strong&gt;。使用上面的方法，映射的端口只能绑定在127.0.0.1这个接口上。也就是说，只能被本机自己访问到。如何才能让其他机器访问这个端口呢？我们可以把这个映射的端口绑定在0.0.0.0的接口上，方法是加上参数-b 0.0.0.0。同时还需要打开SSH服务器端的一个选项－GatewayPorts。默认情况下它应当是被打开的。如果被关闭的话，可以在/etc /sshd_config中修改GatewayPorts no为GatewayPorts yes来打开它。&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;hr /&gt; &lt;p&gt;以上参考：&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://blog.creke.net/722.html&quot;&gt;SSH隧道与端口转发及内网穿透&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://codelife.me/blog/2012/12/09/three-types-of-ssh-turneling/&quot;&gt;三种不同类型的ssh隧道&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://www.liaohuqiu.net/cn/posts/setup-web-prorxy-by-ssh-tunnel/&quot;&gt;简单的ssh隧道实现代理上网&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.cnblogs.com/robinyjj/archive/2008/11/03/1325853.html&quot;&gt;SSH Tunnel 实现VPN的功能&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.pchou.info/linux/2015/11/01/ssh-tunnel.html&quot;&gt;SSH隧道翻墙的原理和实现&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://chenweiguang.blogspot.ae/2009/03/ssh.html&quot;&gt;SSH 隧道转发实战&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/tutorials/ssh-tunnel-forward-intranet-strike.html</link> <guid>https://luowei.github.io/tutorials/ssh-tunnel-forward-intranet-strike</guid> <pubDate>Fri, 08 Nov 2013 00:00:00 +0800</pubDate> </item> <item> <title>macOS下安装配置Jekyll</title> <description> &lt;h1 id=&quot;在macos-1011下安装配置jekyll&quot;&gt;在macOS 10.11+下安装配置Jekyll&lt;/h1&gt; &lt;ol&gt; &lt;li&gt;确保系统已经有环境：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ruby(v1.9.3+),RubyGems,NodeJS,Python 2.7&lt;/code&gt; ;&lt;/li&gt; &lt;li&gt;安装Xcode Command-Line Tools：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcode-select --install&lt;/code&gt;；&lt;/li&gt; &lt;li&gt;安装Jekyll:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo gem install -n /usr/local/bin jekyll&lt;/code&gt;，检查版本：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jekll -v&lt;/code&gt;；&lt;/li&gt; &lt;li&gt;安装Github Pages插件：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo gem install -n /usr/local/bin github-pages&lt;/code&gt;；&lt;/li&gt; &lt;li&gt;查看Gems列表：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gem list&lt;/code&gt;；&lt;/li&gt; &lt;li&gt;启动Jekyll服务：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jekyll serve&lt;/code&gt;；&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;参考：&lt;a href=&quot;http://jekyllcn.com/docs/home/&quot;&gt;Jekyll官网&lt;/a&gt;&lt;/p&gt; &lt;hr /&gt; &lt;ul&gt; &lt;li&gt;安装Jekyll&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;参考：&lt;a href=&quot;http://stackoverflow.com/questions/31567029/how-can-i-install-jekyll-on-osx-10-11&quot;&gt;How can I install Jekyll on OSX 10.11&lt;/a&gt;&lt;/p&gt; &lt;p&gt;安装命令：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo gem install -n /usr/local/bin/ jekyll&lt;/code&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;安装依赖&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;参考：&lt;a href=&quot;http://stackoverflow.com/questions/35401566/dont-have-jekyll-paginate-or-one-of-its-dependencies-installed&quot;&gt;don’t have jekyll-paginate or one of its dependencies installed&lt;/a&gt;&lt;/p&gt; &lt;p&gt;安装命令：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo gem install -n /usr/local/bin/ jekyll-paginate&lt;/code&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;查看安装的gem依赖&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;命令：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gem list&lt;/code&gt;&lt;/p&gt; &lt;p&gt;下面列出一些常用的：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;*** LOCAL GEMS *** actionmailer (4.2.5) actionpack (4.2.5) actionpack-action_caching (1.1.1) actionpack-xml_parser (1.0.2) actionview (4.2.5) activejob (4.2.5) activemodel (4.2.5) activerecord (4.2.5) activesupport (4.2.5.1, 4.2.5) addressable (2.4.0, 2.3.8) arel (6.0.3) awesome_nested_set (3.0.3) bigdecimal (1.2.4) builder (3.2.2) bundler (1.11.2) climate_control (0.0.3) cocaine (0.5.8) coderay (1.1.0) coffee-script (2.4.1) coffee-script-source (1.10.0) colorator (0.1) colored (1.2) concurrent-ruby (1.0.0) css_parser (1.3.7) erubis (2.7.0) ethon (0.8.1) execjs (2.6.0) faraday (0.9.2) ffi (1.9.10) gemoji (2.1.0) github-pages (48) github-pages-health-check (0.6.1) globalid (0.3.6) html-pipeline (2.3.0) html-proofer (2.6.4) htmlentities (4.3.1) i18n (0.7.0) io-console (0.4.2) jekyll (3.1.1, 3.0.3) jekyll-coffeescript (1.0.1) jekyll-feed (0.3.1) jekyll-gist (1.4.0) jekyll-mentions (1.0.0) jekyll-paginate (1.1.0) jekyll-redirect-from (0.9.1) jekyll-sass-converter (1.4.0, 1.3.0) jekyll-seo-tag (1.0.0) jekyll-sitemap (0.10.0) jekyll-textile-converter (0.1.0) jekyll-watch (1.3.1) jemoji (0.5.1) jquery-rails (3.1.4) json (1.8.3, 1.8.1) kaminari (0.16.3) kramdown (1.9.0) liquid (3.0.6) listen (3.0.6) loofah (2.0.3) mail (2.6.3) mercenary (0.3.5) mime-types (2.99) mini_portile2 (2.0.0) minitest (5.8.4, 4.7.5) multi_json (1.11.2) multipart-post (2.0.0) mysql2 (0.3.20) net-dns (0.8.0) net-ldap (0.12.1) nokogiri (1.6.7.2) octokit (4.2.0) pandoc-ruby (1.0.0) paperclip (4.2.4) parallel (1.6.1) passenger (5.0.23) posix-spawn (0.3.11) protected_attributes (1.1.3) psych (2.0.5) public_suffix (1.5.3) pygments.rb (0.6.3) rack (1.6.4, 1.5.2) rack-openid (1.4.2) rack-raw-upload (1.1.1) rack-test (0.6.3) rails (4.2.5) rails-deprecated_sanitizer (1.0.3) rails-dom-testing (1.0.7) rails-html-sanitizer (1.0.3) railties (4.2.5) rake (10.5.0, 10.1.0) rb-fsevent (0.9.7) rb-inotify (0.9.7) rbpdf (1.19.0) rbpdf-font (1.19.0) rdiscount (2.1.8) rdoc (4.1.0) redcarpet (3.3.4, 3.3.3) RedCloth (4.2.9) redmine_crm (0.0.22) request_store (1.0.5) rmagick (2.15.4) roadie (3.1.1) roadie-rails (1.1.0) rouge (1.10.1) ruby-ole (1.2.12) ruby-openid (2.3.0) rubyzip (1.1.7, 1.1.6) safe_yaml (1.0.4) sass (3.4.21) sass-rails (5.0.4) sawyer (0.6.0) spreadsheet (0.6.9) sprockets (3.5.2) sprockets-rails (3.0.0) terminal-table (1.5.2) test-unit (2.1.5.0) thor (0.19.1) thread_safe (0.3.5) tilt (2.0.2) typhoeus (0.8.0) tzinfo (1.2.2) vcard (0.2.12) yajl-ruby (1.2.1) yell (2.0.5) &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;在后台运行jekyll serve &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;nohup bundle exec jekyll serve --incremental &amp;amp; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;/ul&gt; </description> <link>https://luowei.github.io/tutorials/macOS-install-jekyll.html</link> <guid>https://luowei.github.io/tutorials/macOS-install-jekyll</guid> <pubDate>Wed, 01 May 2013 00:00:00 +0800</pubDate> </item> <item> <title>作者简介</title> <description> &lt;h1 id=&quot;个人简介&quot;&gt;个人简介&lt;/h1&gt; &lt;ul&gt; &lt;li&gt;维唯为为是wodedata.com背后的男人；&lt;/li&gt; &lt;li&gt;是一个有激情干劲、个性随和的年轻小伙；&lt;/li&gt; &lt;li&gt;是一个热爱编程并有着多年开发工作经验的工作狂；&lt;/li&gt; &lt;li&gt;是一个喜欢学习新知识、研究新技术、热爱分享的IT达人；&lt;/li&gt; &lt;li&gt;是一个业余爱好各种技术DIY、技术分享、交流技术的技术人；&lt;/li&gt; &lt;li&gt;是一个喜欢和知心的朋友畅言社会生活工作而无所顾虑的喝酒聊天客；&lt;/li&gt; &lt;li&gt;是一个技术路上踏实不畏艰难，虽智商平平但内心却向往图灵、冯诺依曼的程序员；&lt;/li&gt; &lt;/ul&gt; &lt;h1 id=&quot;个人资料汇总&quot;&gt;个人资料汇总&lt;/h1&gt; &lt;ol&gt; &lt;li&gt;MyGitHub：&lt;a href=&quot;https://github.com/luowei&quot;&gt;https://github.com/luowei&lt;/a&gt;&lt;/li&gt; &lt;li&gt;网易博客：&lt;a href=&quot;http://blog.163.com/luowei505050@126&quot;&gt;http://blog.163.com/luowei505050@126&lt;/a&gt;&lt;/li&gt; &lt;li&gt;CSDN博客：&lt;a href=&quot;http://blog.csdn.net/luowei505050&quot;&gt;http://blog.csdn.net/luowei505050&lt;/a&gt;&lt;/li&gt; &lt;li&gt;博客园：&lt;a href=&quot;http://www.cnblogs.com/luowei010101&quot;&gt;http://www.cnblogs.com/luowei010101&lt;/a&gt;&lt;/li&gt; &lt;li&gt;新浪博客：&lt;a href=&quot;http://blog.sina.com.cn/u/1745746500&quot;&gt;http://blog.sina.com.cn/u/1745746500&lt;/a&gt;&lt;/li&gt; &lt;li&gt;优酷主页：&lt;a href=&quot;http://i.youku.com/rootls&quot;&gt;http://i.youku.com/rootls&lt;/a&gt;&lt;/li&gt; &lt;li&gt;土豆主页：&lt;a href=&quot;http://www.tudou.com/home/rootls&quot;&gt;http://www.tudou.com/home/rootls&lt;/a&gt;&lt;/li&gt; &lt;li&gt;腾讯微博：&lt;a href=&quot;http://t.qq.com/rootls&quot;&gt;http://t.qq.com/rootls&lt;/a&gt;&lt;/li&gt; &lt;li&gt;My邮箱：&lt;a href=&quot;mailto:luowei@wodedata.com&quot; cursor=&quot;pointer&quot;&gt;luowei@wodedata.com&lt;/a&gt;&lt;/li&gt; &lt;li&gt;我的论坛：&lt;a href=&quot;http://rootls.com&quot;&gt;http://rootls.com&lt;/a&gt;&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;a target=&quot;__blank&quot; href=&quot;http://rootls.com&quot;&gt;&lt;img src=&quot;https://luowei.github.io/images/wechat.jpg&quot; /&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;作者：&lt;a href=&quot;http://weibo.com/luowei010101&quot;&gt;@维唯为为&lt;/a&gt; 2013-10-10 星期四 15:35:20&lt;/p&gt; </description> <link>https://luowei.github.io/author/hello-world.html</link> <guid>https://luowei.github.io/author/hello-world</guid> <pubDate>Tue, 01 Jan 2013 00:00:00 +0800</pubDate> </item> <item> <title>链表相关面试题</title> <description> &lt;h1 id=&quot;链表相关面试题&quot;&gt;链表相关面试题&lt;/h1&gt; &lt;h2 id=&quot;判断单链表是否存在环&quot;&gt;判断单链表是否存在环&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;设置两个指针(fast, slow)，初始值都指向头，slow每次前进一步，fast每次前进二步，如果链表存在环，则fast必定先进入环，而slow后进入环，两个指针必定相遇。(当然，fast先行头到尾部为NULL，则为无环链表)程序如下：&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bool IsExitsLoop(List *head){ List *slow = head, *fast = head; while ( fast &amp;amp;&amp;amp; fast-&amp;gt;next ){ slow = slow-&amp;gt;next; fast = fast-&amp;gt;next-&amp;gt;next; if ( slow == fast ) break; } return !(fast == NULL || fast-&amp;gt;next == NULL); } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;寻找单链表环的入口点&quot;&gt;寻找单链表环的入口点&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;推演过程&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;当fast若与slow相遇时，slow肯定没有走遍历完链表，而fast已经在环内循环了n圈(1&amp;lt;=n)。假设slow走了s步，则fast走了2s步（fast步数还等于s 加上在环上多转的n圈），设环长为r，则： 2s = s + nr s= nr 设整个链表长L，入口环与相遇点距离为x，起点到环入口点的距离为a。 a + x = nr a + x = (n – 1)r +r = (n-1)r + L - a a = (n-1)r + (L – a – x) (L – a – x)为相遇点到环入口点的距离，由此可知，从链表头到环入口点等于(n-1)循环内环+相遇点到环入口点，于是我们从链表头、与相遇点分别设一个指针，每次各走一步，两个指针必定相遇，且相遇第一点为环入口点。程序描述如下： list* FindLoopNode(list* head){ list *slow = head, *fast = head; while ( fast &amp;amp;&amp;amp; fast-&amp;gt;next ){ slow = slow-&amp;gt;next; fast = fast-&amp;gt;next-&amp;gt;next; //fast每次两步，slow每次一步 if ( slow == fast ) break; //当两指针相等时，判断链表中有环 } if (fast == NULL || fast-&amp;gt;next == NULL) //没有环就返回 return NULL; slow = head; while (slow != fast){ //一个头指针，一个相遇点指针，两个第一次相等时为环入口点 slow = slow-&amp;gt;next; fast = fast-&amp;gt;next; } return slow; } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;判断两个链表是否相交假设两个链表均不带环&quot;&gt;判断两个链表是否相交(假设两个链表均不带环）&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;两个无环单向链表，画出来只可能是2条不相干的链表或一个”Y”字形。我们只需从第二个链表开始遍历，看是否会回到起点就可以判断出来。&lt;/li&gt; &lt;li&gt;解法一：一个简单的做法是对第一个链表的节点地址进行hash排序，建立hash表，然后针对第二个链表的每个节点的地址查询hash表，如果在hash表中出现，那么说明有共同的节点，时间复杂度为O(L1+L2),但是同时要附加O(L1)的存储空间。&lt;/li&gt; &lt;li&gt;解法二：由于2个链表都没有环，我们可以&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;把第二个链表接在第一个链表后面&lt;/code&gt;，如果得到的链表有环，则说明2个链表相交。这样就转换为了判断一个链表是否有环。最后，把链表再恢复原来的状态。&lt;/li&gt; &lt;li&gt;解法三：用指针p1、p2分别指向两个链表头，不断后移；最后到达各自表尾时，若p1==p2，那么两个链表必相交，复杂度为O(L1+L2)，比解法3更好&lt;/li&gt; &lt;li&gt;总结： &lt;ul&gt; &lt;li&gt;1.先判断带不带环&lt;/li&gt; &lt;li&gt;2.如果都不带环，就判断尾节点是否相等&lt;/li&gt; &lt;li&gt;3.如果都带环，判断一链表上俩指针相遇的那个节点，在不在另一条链表上。如果在，则相交，如果不在，则不相交。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;p&gt;判断是否带环：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;struct Node{ int value; Node * next; }; //1.先判断带不带环 //判断是否有环，返回bool，如果有环，返回环里的节点 //思路：用两个指针，一个指针步长为1，一个指针步长为2，判断链表是否有环 bool isCircle(Node * head, Node *&amp;amp; circleNode, Node *&amp;amp; lastNode){ Node * fast = head-&amp;gt;next; Node * slow = head; while(fast != slow &amp;amp;&amp;amp; fast &amp;amp;&amp;amp; slow){ if(fast-&amp;gt;next != NULL) fast = fast-&amp;gt;next; if(fast-&amp;gt;next == NULL) lastNode = fast; if(slow-&amp;gt;next == NULL) lastNode = slow; fast = fast-&amp;gt;next; slow = slow-&amp;gt;next; } if(fast == slow &amp;amp;&amp;amp; fast &amp;amp;&amp;amp; slow){ circleNode = fast; return true; } else return false; } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;判断两个链表是否相交：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;//判断带环不带环时链表是否相交 //2.如果都不带环，就判断尾节点是否相等 //3.如果都带环，判断一链表上俩指针相遇的那个节点，在不在另一条链表上。 bool detect(Node * head1, Node * head2){ Node * circleNode1; Node * circleNode2; Node * lastNode1; Node * lastNode2; bool isCircle1 = isCircle(head1,circleNode1, lastNode1); bool isCircle2 = isCircle(head2,circleNode2, lastNode2); //一个有环，一个无环 if(isCircle1 != isCircle2){ return false; //两个都无环，判断最后一个节点是否相等 }else if(!isCircle1 &amp;amp;&amp;amp; !isCircle2){ return lastNode1 == lastNode2; } //两个都有环，判断环里的节点是否能到达另一个链表环里的节点 else{ Node * temp = circleNode1-&amp;gt;next; while(temp != circleNode1){ if(temp == circleNode2) return true; temp = temp-&amp;gt;next; } return false; } return false; } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;求链表倒数第k个结点&quot;&gt;求链表倒数第k个结点&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;设置两个指针p1,p2，首先p1和p2都指向head，然后p2向前走k步，这样p1和p2之间就间隔k个节点，最后p1和p2同时向前移动，直至p2走到链表末尾。&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;struct ListNode{ char data; ListNode* next; }; ListNode* head,*p,*q; ListNode *pone,*ptwo; //求链表倒数第k个结点应该考虑k大于链表长度的case。 ListNode* fun(ListNode *head,int k){ assert(k &amp;gt;= 0); pone = ptwo = head; for( ; k &amp;gt; 0 &amp;amp;&amp;amp; ptwo != NULL; k--) ptwo=ptwo-&amp;gt;next; if (k &amp;gt; 0) return NULL; while(ptwo!=NULL){ pone=pone-&amp;gt;next; ptwo=ptwo-&amp;gt;next; } return pone; } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;求链表的中间节点&quot;&gt;求链表的中间节点&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;题目：求链表的中间节点，如果链表的长度为偶数，返回中间两个节点的任意一个，若为奇数，则返回中间节点。&lt;/li&gt; &lt;li&gt;分析：此题的解决思路和第3题「求链表的倒数第 k 个节点」很相似。可以先求链表的长度，然后计算出中间节点所在链表顺序的位置。但是如果要求只能扫描一遍链表，如何解决呢？最高效的解法和第3题一样，通过两个指针来完成。用两个指针从链表头节点开始，一个指针每次向后移动两步，一个每次移动一步，直到快指针移到到尾节点，那么慢指针即是所求。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;实现代码：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;//求链表的中间节点 Node* theMiddleNode(Node *head){ if(head == NULL) return NULL; Node *slow,*fast; slow = fast = head; //如果要求在链表长度为偶数的情况下，返回中间两个节点的第一个，可以用下面的循环条件 //while(fast &amp;amp;&amp;amp; fast-&amp;gt;next != NULL &amp;amp;&amp;amp; fast-&amp;gt;next-&amp;gt;next != NULL) while(fast != NULL &amp;amp;&amp;amp; fast-&amp;gt;next != NULL){ fast = fast-&amp;gt;next-&amp;gt;next; slow = slow-&amp;gt;next; } return slow; } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;求环长&quot;&gt;求环长&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;求环长相对就比较容易了，就是在环的入口点设一指针和一计数器，让这一指针在环里面跑，计数器不断自增。当这一指针回到环的入口点的时候，环长就出来了。&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;单链表的转置&quot;&gt;单链表的转置&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;即：输入一个单向链表，输出逆序反转后的链表&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;以下是循环与递归两种方法实现：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;//单链表的转置,循环方法 Node* reverseByLoop(Node *head){ if(head == NULL || head-&amp;gt;next == NULL) return head; Node *pre = NULL; Node *next = NULL; while(head != NULL){ next = head-&amp;gt;next; head-&amp;gt;next = pre; pre = head; head = next; } return pre; } //单链表的转置,递归方法 Node* reverseByRecursion(Node *head){ //第一个条件是判断异常，第二个条件是结束判断 if(head == NULL || head-&amp;gt;next == NULL) return head; Node *newHead = reverseByRecursion(head-&amp;gt;next); head-&amp;gt;next-&amp;gt;next = head; head-&amp;gt;next = NULL; return newHead; //返回新链表的头指针 } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;hr /&gt; &lt;p&gt;以上参考：&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/a809146548/article/details/51366261&quot;&gt;编程判断两个链表是否相交及求环的入口点&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.cnblogs.com/ccdev/archive/2012/09/06/2673618.html&quot;&gt;判断单链表是否存在环及求环入口点&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://wuchong.me/blog/2014/03/25/interview-link-questions/&quot;&gt;面试精选：链表问题集锦&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/linked-list-interview-question.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/linked-list-interview-question</guid> <pubDate>Fri, 05 Oct 2012 00:00:00 +0800</pubDate> </item> <item> <title>排序及二分查找</title> <description> &lt;blockquote&gt; &lt;ol&gt; &lt;li&gt;冒泡排序:是对所有相邻记录的关键字值进行比效，如果是逆顺（a[j]&amp;gt;a[j+1]），则将其交换，最终达到有序化;&lt;/li&gt; &lt;/ol&gt; &lt;/blockquote&gt; &lt;blockquote&gt; &lt;ol&gt; &lt;li&gt;选择排序:第一次从R[0]-R[n-1]中选取最小值，与R[0]交换，第二次从R[1]-R[n-1]中选取最小值，与R[1]交换，第三次从R[2]-R[n-1]中选取最小值，与R[2]交换，…，第i次从R[i-1]-R[n-1]中选取最小值，与R[i-1]交换，…第n-1次从R[n-2]-R[n-1]中选取最小值，与R[n-2]交换，总共通过n-1次，得到一个按排序码从小到大排列的有序序列。&lt;/li&gt; &lt;/ol&gt; &lt;/blockquote&gt; &lt;blockquote&gt; &lt;ol&gt; &lt;li&gt;插入排序:把n个待排序的元素看成为一个有序表和一个无序表，开始时有序表中只包含一个元素，无序表中包含有n-1个元素，排序过程中每次从无序表中取出第一个元素，把它的排序码依次与有序表的排序码进行比较，将它插入到有序表中的适当位置，使之成为新的有序表。&lt;/li&gt; &lt;/ol&gt; &lt;/blockquote&gt; &lt;blockquote&gt; &lt;ol&gt; &lt;li&gt;快速排序：假设要排序的数组是A[1]……A[N]，首先任意选取一个数据（通常选用第一个数据）作为关键数据，然后将所有比它的数都放到它前面，所有比它大的数都放到它后面，这个过程称为一躺快速排序。&lt;/li&gt; &lt;/ol&gt; &lt;/blockquote&gt; &lt;h4 id=&quot;java实现&quot;&gt;Java实现&lt;/h4&gt; &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Bubble&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//测试 &lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//冒泡排序 &lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//外层循环,决定一共走几趟 &lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//内层循环，开始逐个比较，如果发现前一个数比后一个数大，则交换 &lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//换位 &lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Select&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//选择排序 &lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//临时变量 &lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//j&amp;lt;arr.length说明当只剩最后一个数没比较时，不必再比较了 &lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//假设第j个数是最小的数 &lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//记录最小数的下标 &lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;minIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//k&amp;lt;arr.length说明只剩两个数未比较时，最后一个数要参与比较 &lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//修改最小 &lt;/span&gt; &lt;span class=&quot;n&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;minIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//当退出内层for循环时，就找到这次的最小值 &lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;minIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;minIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//插入排序 &lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;InsertSort&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//插入排序方法 &lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;insertVal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//insertVal准备和前一个数比较 &lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;insertVal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//将把arr[index]向后移动一位 &lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//让index向前移动 &lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;--;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//将insertVal插入到行当 位置 &lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;insertVal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//快速排序 &lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;QuickSort&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//左边 &lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//右边 &lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pivot&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//中间的作为隔板数 &lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pivot&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pivot&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;--;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]==&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pivot&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]==&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pivot&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;--;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//二分查找 &lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BinaryFind&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;leftIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rightIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//首先找到中间的数 &lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;midIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rightIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;leftIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;midVal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;midIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rightIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;leftIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//如果要找的数比midVal大 &lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;midVal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//在arr的左边数中找 &lt;/span&gt; &lt;span class=&quot;n&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;leftIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;midIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//递归 &lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;midVal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//在arr的右边的数找 &lt;/span&gt; &lt;span class=&quot;n&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;midIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rightIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//递归 &lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;midVal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;找到下标&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;midIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;没有找到！&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h4 id=&quot;objective-c实现&quot;&gt;Objective-C实现&lt;/h4&gt; &lt;p&gt;&lt;strong&gt;首先是header文件：&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#import &amp;lt;Foundation/Foundation.h&amp;gt; @interface Sort : NSObject{ } //冒泡排序 -(void)bunbleSortWithArray:(NSArray *)aData; //选择排序 -(void)selectSortWithArray:(NSArray *)aData; //插入排序 -(void)insertSortWithArray:(NSArray *)aData; //快速排序，对冒泡排序的一种改进 -(void)quickSortWithArray:(NSArray *)aData; -(void)swapWithData:(NSMutableArray *)aData index1:(NSInteger)index1 index2:(NSInteger)index2; @end &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;接着是实现：&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#import &quot;Sort.h&quot; @interface Sort() -(void)quickSortWithArray:(NSArray *)aData left:(NSInteger)left right:(NSInteger)right; @end @implementation Sort - (id)init { self = [super init]; if (self) { // Initialization code here. } return self; } -(void)bunbleSortWithArray:(NSArray *)aData{ NSMutableArray *data = [[NSMutableArray alloc]initWithArray:aData]; for (int i=0; i&amp;lt;[data count]-1; i++) { for (int j =0; j&amp;lt;[data count]-1-i; j++) { if ([data objectAtIndex:j] &amp;gt; [data objectAtIndex:j+1]) { [self swapWithData:data index1:j index2:j+1]; } } } NSLog(@&quot;冒泡排序后的结果：%@&quot;,[data description]); } -(void)selectSortWithArray:(NSArray *)aData{ NSMutableArray *data = [[NSMutableArray alloc]initWithArray:aData]; for (int i=0; i&amp;lt;[data count]-1; i++) { int m =i; for (int j =i+1; j&amp;lt;[data count]; j++) { if ([data objectAtIndex:j] &amp;lt; [data objectAtIndex:m]) { m = j; } } if (m != i) { [self swapWithData:data index1:m index2:i]; } } NSLog(@&quot;选择排序后的结果：%@&quot;,[data description]); } -(void)insertSortWithArray:(NSArray *)aData{ NSMutableArray *data = [[NSMutableArray alloc]initWithArray:aData]; for (int i = 1; i &amp;lt; [data count]; i++) { id tmp = [data objectAtIndex:i]; int j = i-1; while (j != -1 &amp;amp;&amp;amp; [data objectAtIndex:j] &amp;gt; tmp) { [data replaceObjectAtIndex:j+1 withObject:[data objectAtIndex:j]]; j--; } [data replaceObjectAtIndex:j+1 withObject:tmp]; } NSLog(@&quot;插入排序后的结果：%@&quot;,[data description]); } -(void)quickSortWithArray:(NSArray *)aData{ NSMutableArray *data = [[NSMutableArray alloc] initWithArray:aData]; [self quickSortWithArray:data left:0 right:[aData count]-1]; NSLog(@&quot;快速排序后的结果：%@&quot;,[data description]); } -(void)quickSortWithArray:(NSMutableArray *)aData left:(NSInteger)left right:(NSInteger)right{ if (right &amp;gt; left) { NSInteger i = left; NSInteger j = right + 1; while (true) { while (i+1 &amp;lt; [aData count] &amp;amp;&amp;amp; [aData objectAtIndex:++i] &amp;lt; [aData objectAtIndex:left]) ; while (j-1 &amp;gt; -1 &amp;amp;&amp;amp; [aData objectAtIndex:--j] &amp;gt; [aData objectAtIndex:left]) ; if (i &amp;gt;= j) { break; } [self swapWithData:aData index1:i index2:j]; } [self swapWithData:aData index1:left index2:j]; [self quickSortWithArray:aData left:left right:j-1]; [self quickSortWithArray:aData left:j+1 right:right]; } } //-(void)dealloc{ //} -(void)swapWithData:(NSMutableArray *)aData index1:(NSInteger)index1 index2:(NSInteger)index2{ NSNumber *tmp = [aData objectAtIndex:index1]; [aData replaceObjectAtIndex:index1 withObject:[aData objectAtIndex:index2]]; [aData replaceObjectAtIndex:index2 withObject:tmp]; } @end &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;然后写main函数测试：&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nn&quot;&gt;Foundation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Foundation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nn&quot;&gt;Sort.h&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot; #define kSize 20 #define kMax 100 int main (int argc, const char * argv[]) { // insert code here... NSLog(@&quot;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Hello&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;World&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;); NSMutableArray *data = [[NSMutableArray alloc] initWithCapacity:kSize]; for (int i =0;i&amp;lt;kSize;i++) { u_int32_t x = arc4random() % kMax;//0~kMax NSNumber *num = [[NSNumber alloc] initWithInt:x]; [data addObject:num]; } NSLog(@&quot;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;排序前的数据&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;：&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;description&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]);&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Sort&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sort&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Sort&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sort&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;bunbleSortWithArray:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sort&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;selectSortWithArray:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sort&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;insertSortWithArray:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sort&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;quickSortWithArray:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/sorting-and-binary-search.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/sorting-and-binary-search</guid> <pubDate>Wed, 03 Oct 2012 00:00:00 +0800</pubDate> </item> <item> <title>两数相乘小数位无限制</title> <description> &lt;p&gt;两个数相乘，小数点后位数没有限制，请写一个高精度算法&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;解题思路：将两组小数用数组存储，计算机两组小数点位数的总和，将小数点剔除，将小数点后面的位数向前移动一位。即开始求两个大整数的乘积。用递归的思路输出，得到的乘积，同时通过计算的小数点的位数，来判定什么时候输出小数点。&lt;/p&gt; &lt;/blockquote&gt; &lt;blockquote&gt; &lt;p&gt;求两个大整数的乘积的思路：用结点来存储乘积的每一位，可以是数值不受限制。&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;&lt;strong&gt;关键函数：&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;istream&amp;amp;getline(char *pch,int nCount,char delime=&apos;\n&apos;) extern char * strchr(char *str,char character) extern char * strrev(char *s) &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;strong&gt;实现：&lt;/strong&gt;&lt;/p&gt; &lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#include&amp;lt;iostream&amp;gt; &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;#define MAX 10000 &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Mul&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//头 &lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;temp1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bbit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//若乘数不为空 ,继续. &lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bbit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;48&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//把当前位转为整型 &lt;/span&gt; &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;||&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//若被乘数不空,继续 &lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//若要操作的结点为空,申请之 &lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;temp1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;48&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bbit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;temp1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//留当前位 &lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;temp1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//进位以int的形式留下. &lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//被乘数到下一位 &lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//q进下一位 &lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//显示 &lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//释放空间 &lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;请输入两个数&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MAX&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MAX&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MAX&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;&apos;\n&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MAX&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;&apos;\n&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;strchr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;&apos;.&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;strlen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;strchr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;&apos;.&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;strlen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Mul&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;strrev&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;strrev&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;PAUSE&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/high-precision-algorithm.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/high-precision-algorithm</guid> <pubDate>Tue, 02 Oct 2012 00:00:00 +0800</pubDate> </item> <item> <title>用宏比较两数大小</title> <description> &lt;p&gt;请定义一个宏，比较两个数a、b的大小，不能使用大于、小于、if语句 .&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;方法一： #define max(a,b) ((((long)((a)-(b)))&amp;amp;0x80000000)?(b):(a)) 若a&amp;gt;b，则a-b的二进制最高位为0，与上任何数还是0，所以大数为a； 否则，a-b为负数，最高位为1，与上0x80000000（最高位为1其他为0）之后为1，所以此时最大数为b。 方法二： #define max(a,b) ((((a)-(b))&amp;amp;(1&amp;lt;&amp;lt;31))?(b):(a)) 方法三： #define max(a,b) (((abs((a)-(b)))==((a)-(b)))?(a):(b)) &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; </description> <link>https://luowei.github.io/%E9%9D%A2%E8%AF%95/macro-comparing-two-numbers-size.html</link> <guid>https://luowei.github.io/%E9%9D%A2%E8%AF%95/macro-comparing-two-numbers-size</guid> <pubDate>Mon, 01 Oct 2012 00:00:00 +0800</pubDate> </item> <item> <title>Linux下常见文件解压及压缩命令</title> <description> &lt;h1 id=&quot;linux下常见文件解压及压缩命令&quot;&gt;Linux下常见文件解压及压缩命令&lt;/h1&gt; &lt;ul&gt; &lt;li&gt;解压及压缩命令大全&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;.tar 解包：tar xvf FileName.tar 打包：tar cvf FileName.tar DirName （注：tar是打包，不是压缩！） ——————————————— .gz 解压 1：gunzip FileName.gz 解压2：gzip -d FileName.gz 压缩：gzip FileName .tar.gz 和 .tgz 解压：tar zxvf FileName.tar.gz 压缩：tar zcvf FileName.tar.gz DirName ——————————————— .bz2 解压1：bzip2 -d FileName.bz2 解压2：bunzip2 FileName.bz2 压缩： bzip2 -z FileName .tar.bz2 解压：tar jxvf FileName.tar.bz2 或tar --bzip xvf FileName.tar.bz2 压缩：tar jcvf FileName.tar.bz2 DirName ——————————————— .bz 解压1：bzip2 -d FileName.bz 解压2：bunzip2 FileName.bz 压缩：未知 .tar.bz 解压：tar jxvf FileName.tar.bz 压缩：未知 ——————————————— .Z 解压：uncompress FileName.Z 压缩：compress FileName .tar.Z 解压：tar Zxvf FileName.tar.Z 压缩：tar Zcvf FileName.tar.Z DirName ——————————————— .zip 解压：unzip FileName.zip 压缩：zip FileName.zip DirName 压缩一个目录使用 -r 参数，-r 递归。例： $ zip -r FileName.zip DirName ——————————————— .rar 解压：rar x FileName.rar 压缩：rar a FileName.rar DirName rar 请到：http://www.rarsoft.com/download.htm 下载！ 解压后请将rar_static拷贝到/usr /bin目录（其他由$PATH环境变量指定的目录也可以）： [root@www2 tmp]# cp rar_static /usr/bin/rar ——————————————— .lha 解压：lha -e FileName.lha 压缩：lha -a FileName.lha FileName lha请到：http://www.infor.kanazawa-it.ac.jp/~ishii/lhaunix/下载！ &amp;gt;解压后请将 lha拷贝到/usr/bin目录（其他由$PATH环境变量指定的目录也可以）： [root@www2 tmp]# cp lha /usr/bin/ ——————————————— .rpm 解包：rpm2cpio FileName.rpm | cpio -div ——————————————— .deb 解包：ar p FileName.deb data.tar.gz | tar zxf - ——————————————— .tar .tgz .tar.gz .tar.Z .tar.bz .tar.bz2 .zip .cpio .rpm .deb .slp .arj .rar .ace .lha .lzh .lzx .lzs .arc .sda .sfx .lnx .zoo .cab .kar .cpt .pit .sit .sea 解压：sEx x FileName.* 压缩：sEx a FileName.* FileName sEx只是调用相关程序，本身并无压缩、解压功能，请注意！ sEx请到： http://sourceforge.net/projects/sex下载！ 解压后请将sEx拷贝到/usr/bin目录（其他由$PATH环境变量指定的目录也可以）： [root@www2 tmp]# cp sEx /usr/bin/ &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;常见分类列表&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1.以.a为扩展名的文件: #tar xv file.a 2.以.z为扩展名的文件: #uncompress file.Z 3.以.gz为扩展名的文件: #gunzip file.gz 4.以.bz2为扩展名的文件: #bunzip2 file.bz2 5.以.tar.Z为扩展名的文件: #tar xvZf file.tar.Z 或 #compress -dc file.tar.Z | tar xvf 6.以.tar.gz/.tgz为扩展名的文件: #tar xvzf file.tar.gz 或 gzip -dc file.tar.gz | tar xvf - 7.以.tar.bz2为扩展名的文件: #tar xvIf file.tar.bz2 或 bzip2 -dc file.tar.bz2 | xvf - 8.以.cpio.gz/.cgz为扩展名的文件: #gzip -dc file.cgz | cpio -div 9. 以.cpio/cpio为扩展名的文件: #cpio -div file.cpio 或cpio -divc file.cpio 10.以.rpm为扩展名的文件安装: #rpm -i file.rpm 11.以.rpm为扩展名的文件解压缩： #rpm2cpio file.rpm | cpio -div 12.以.deb为扩展名的文件安装： #dpkg -i file.deb 13.以.deb为扩展名的文件解压缩: #dpkg-deb -fsys-tarfile file.deb | tar xvf - ar p file.deb data.tar.gz | tar xvzf - 14.以.zip为扩展名的文件: #unzip file.zip 在linux下解压Winzip格式的文件 要是装了jdk的话，可以用 jar命令；还可以使用unzip命令。 直接解压.tar.gz文件 xxxx.tar.gz文件使用tar带zxvf参数，可以一次解压开。XXXX为文件名。 例如： $tar zxvf xxxx.tar.gz 各种压缩文件的解压（安装方法） &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;文件扩展名分类列表&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;.a ar xv file.a .Z uncompress file.Z .gz gunzip file.gz .bz2 bunzip2 file.bz2 .tar.Z tar xvZf file.tar.Z compress -dc file.tar.Z | tar xvf - .tar.gz/.tgz tar xvzf file.tar.gz gzip -dc file.tar.gz | tar xvf - .tar.bz2 tar xvIf file.tar.bz2 bzip2 -dc file.tar.bz2 | xvf - .cpio.gz/.cgz gzip -dc file.cgz | cpio -div .cpio/cpio cpio -div file.cpio cpio -divc file.cpio .rpm/install rpm -i file.rpm .rpm/extract rpm2cpio file.rpm | cpio -div .deb/install dpkg -i file.deb .deb/exrtact dpkg-deb -fsys-tarfile file.deb | tar xvf - ar p file.deb data.tar.gz | tar xvzf - .zip unzip file.zip bzip2 -d myfile.tar.bz2 | tar xvf tar xvfz myfile.tar.bz2 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;tar与gzip命令简单解析 &lt;ul&gt; &lt;li&gt;tar：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tar xvfz myfile.tar.bz2 &lt;/code&gt; &lt;ul&gt; &lt;li&gt;x 是解压&lt;/li&gt; &lt;li&gt;v 是复杂输出&lt;/li&gt; &lt;li&gt;f 是指定文件&lt;/li&gt; &lt;li&gt;z gz格式&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;gzip gzip[选项]要压缩（或解压缩）的文件名 -c将输出写到标准输出上，并保留原有文件。 -d将压缩文件压缩。 -l对每个压缩文件，显示下列字段：压缩文件的大小，未压缩文件的大小、压缩比、未压缩文件的名字 -r递归式地查找指定目录并压缩或压缩其中的所有文件。 -t测试压缩文件是正完整。 -v对每一个压缩和解压缩的文件，显示其文件名和压缩比。 -num-用指定的数字调整压缩的速度。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;案例&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;把/usr目录并包括它的子目录在内的全部文件做一备份，备份文件名为usr.tar tar cvf usr.tar /home 把/usr 目录并包括它的子目录在内的全部文件做一备份并进行压缩，备份文件名是usr.tar.gz tar czvf usr.tar.gz /usr 压缩一组文件，文件的后缀为tar.gz #tar cvf back.tar /back/ #gzip -q back.tar or #tar cvfz back.tar.gz /back/ 释放一个后缀为tar.gz 的文件。 #tar zxvf back.tar.gz #gzip back.tar.gz #tar xvf back.tar &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;hr /&gt; &lt;p&gt;以上参考：&lt;a href=&quot;http://www.centoscn.com/CentOS/help/2014/0613/3133.html&quot;&gt;CentOS下tar解压 gz解压 bz2等各种解压文件使用方法&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/linux/linux-compress-decompress-comand.html</link> <guid>https://luowei.github.io/linux/linux-compress-decompress-comand</guid> <pubDate>Fri, 23 Sep 2011 00:00:00 +0800</pubDate> </item> <item> <title>Linux下常用的系统相关信息查看命令</title> <description> &lt;h1 id=&quot;linux下常用的系统相关信息查看命令&quot;&gt;Linux下常用的系统相关信息查看命令&lt;/h1&gt; &lt;ul&gt; &lt;li&gt;&lt;strong&gt;查看文本的常命令&lt;/strong&gt;：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cat&lt;/code&gt; 及 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tail -f&lt;/code&gt;。&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;日志文件说明&quot;&gt;日志文件说明&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/var/log/message 系统启动后的信息和错误日志，是Red Hat Linux中最常用的日志之一 /var/log/secure 与安全相关的日志信息 /var/log/maillog 与邮件相关的日志信息 /var/log/cron 与定时任务相关的日志信息 /var/log/spooler 与UUCP和news设备相关的日志信息 /var/log/boot.log 守护进程启动和停止相关的日志消息 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;系统信息&quot;&gt;系统信息&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# uname -a # 查看内核/操作系统/CPU信息 # cat /etc/issue # cat /etc/redhat-release # 查看操作系统版本 # cat /proc/cpuinfo # 查看CPU信息 # hostname # 查看计算机名 # lspci -tv # 列出所有PCI设备 # lsusb -tv # 列出所有USB设备 # lsmod # 列出加载的内核模块 # env # 查看环境变量 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;资源信息&quot;&gt;资源信息&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# free -m # 查看内存使用量和交换区使用量 # df -h # 查看各分区使用情况 # du -sh &amp;lt;目录名&amp;gt; # 查看指定目录的大小 # grep MemTotal /proc/meminfo # 查看内存总量 # grep MemFree /proc/meminfo # 查看空闲内存量 # uptime # 查看系统运行时间、用户数、负载 # cat /proc/loadavg # 查看系统负载 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;磁盘和分区&quot;&gt;磁盘和分区&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mount | column -t # 查看挂接的分区状态 # fdisk -l # 查看所有分区 # swapon -s # 查看所有交换分区 # hdparm -i /dev/hda # 查看磁盘参数(仅适用于IDE设备) # dmesg | grep IDE # 查看启动时IDE设备检测状况 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;网络情况&quot;&gt;网络情况&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ifconfig # 查看所有网络接口的属性 # iptables -L # 查看防火墙设置 # route -n # 查看路由表 # netstat -lntp # 查看所有监听端口 # netstat -antp # 查看所有已经建立的连接 # netstat -s # 查看网络统计信息 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;进程信息&quot;&gt;进程信息&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ps -ef # 查看所有进程 # top # 实时显示进程状态（另一篇文章里面有详细的介绍） &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;用户信息&quot;&gt;用户信息&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# w # 查看活动用户 # id &amp;lt;用户名&amp;gt; # 查看指定用户信息 # last # 查看用户登录日志 # cut -d: -f1 /etc/passwd # 查看系统所有用户 # cut -d: -f1 /etc/group # 查看系统所有组 # crontab -l # 查看当前用户的计划任务 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;服务信息&quot;&gt;服务信息&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chkconfig –list # 列出所有系统服务 # chkconfig –list | grep on # 列出所有启动的系统服务 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;安装的程序情况&quot;&gt;安装的程序情况&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rpm -qa # 查看所有安装的软件包 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;hr /&gt; &lt;p&gt;以上参考：&lt;a href=&quot;http://www.centoscn.com/CentOS/help/2014/0310/2540.html&quot;&gt;CentOS系统中常用查看日志命令&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/linux/linux-useful-info-comand.html</link> <guid>https://luowei.github.io/linux/linux-useful-info-comand</guid> <pubDate>Thu, 22 Sep 2011 00:00:00 +0800</pubDate> </item> <item> <title>CentOS常用的操作命令</title> <description> &lt;h1 id=&quot;centos常用的操作命令&quot;&gt;CentOS常用的操作命令&lt;/h1&gt; &lt;h2 id=&quot;用户相关&quot;&gt;用户相关&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;&lt;strong&gt;创建新用户&lt;/strong&gt;，使用useradd命令完成一个新用户的初始化设置工作,命令:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;useradd luowei &amp;lt;回车&amp;gt;&lt;/code&gt;。 &lt;ul&gt; &lt;li&gt;useradd所做的初始化操作包括在/home目录下为luowei帐号建立一个名为luowei的主目录。&lt;/li&gt; &lt;li&gt;useradd的初始化操作还包括为用户单独建立一个与用户名同名的组(luoweii组)。这叫用户私有组的机制，与默认组机制相对应。对用户分组一是方便管理，二是可以明确权限。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;&lt;strong&gt;为新用户设置密码&lt;/strong&gt;，使用passwd为这个新用户设置密码，命令:&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;passwd luowei &amp;lt;回车&amp;gt;&lt;/code&gt;。 &lt;ul&gt; &lt;li&gt;passwd命令为一个用户设置密码，但它实质上是一个修改密码的程序。只有超级用户和用户自己可以修改密码，其它的普通用户没有给他修改密码的 权利。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;&lt;strong&gt;在创建新用户时指定用户的主目录&lt;/strong&gt;，可以使用useradd的参数-d，命令如下：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;useradd -d /home/goal luowei&lt;/code&gt;。&lt;/li&gt; &lt;li&gt;&lt;strong&gt;添加用户到一个已有的组&lt;/strong&gt;，可以使用-g参数。例如我们想让floatboat加入webusers组，那么可以使用以下命令：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;useradd -g webusers luowei&lt;/code&gt;。&lt;/li&gt; &lt;li&gt;&lt;strong&gt;同时添加用户到多个组&lt;/strong&gt;，可以使用-G参数使他同时加入多个组，例如webusers和ftpusers：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;useradd -G ftpusers,webusers luowei&lt;/code&gt;。&lt;/li&gt; &lt;li&gt;&lt;strong&gt;删除一个用户&lt;/strong&gt;，可以使用userdel命令，直接带用户名做参数就可以了，如：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;userdel luowei&lt;/code&gt;。&lt;strong&gt;删除用户及用户组&lt;/strong&gt;,如：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;userdel -f luowei&lt;/code&gt;。&lt;/li&gt; &lt;li&gt;&lt;strong&gt;修改用户所属的默认组&lt;/strong&gt;,可以通过usermod命令来实现，使用-g参数，例如把luowei的默认组改为nobody，可以使用如下命令：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;usermod -g nobody luowei&lt;/code&gt;。&lt;/li&gt; &lt;li&gt;&lt;strong&gt;设置帐号有效期&lt;/strong&gt;,可以使用如下命令来修改一个帐号的有效期：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;usermod -e MM/DD/YY username&lt;/code&gt;。例如把用户luowei的有效期定为2001年12月31日：usermod -e 12/31/16 luowei。&lt;em&gt;如果把该用户的有效期设为已经过去的时间，就可以暂时禁止该用户登录系统。&lt;/em&gt;&lt;/li&gt; &lt;li&gt;&lt;strong&gt;修改用户主目录&lt;/strong&gt;，使用usermod命令的-d参数，例如：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;usermod -d /www luowei&lt;/code&gt;。这一行命令将luowei的主目录改到/www。如果想将现有主目录的主要内容转移到新的目录，应该使用-m开关，如：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;usermod -d -m /www luowei&lt;/code&gt;。&lt;/li&gt; &lt;li&gt;&lt;strong&gt;赋予root权限&lt;/strong&gt;，sudo的配置文件位于/etc/sudoers，找到root ALL=(ALL) ALL这一行，在后面再加上一行就可以了，如添加一行：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;luowei ALL=(ALL) ALL&lt;/code&gt;。 &lt;ul&gt; &lt;li&gt; &lt;p&gt;操作步骤：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; 1. 使用 “su –” 命令，进入超级用户，进入etc目录 “cd /etc” 2. 为sudoers文件添加写入的权限：使用命令 “chmod u+w sudoers” 3. 使用命令“vim sudoers”，按“i”进入编辑模式后，找到“rootALL=(ALL) ALL ”，在后面添加：&quot;xxxALL=(ALL) ALL&quot;(这里的xxx是你的用户名)，再按一下“Esc”键退出编辑，输入“wq”（write quit）后，退出sudoers。 4. 输入“chmod u-v sudoers”将文件的写入属性撤销 5. 通过“su xxx”切换回自己的用户名，再使用sudo命令时，就可以使用了 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt;如果你想每次使用sudo命令的时候都提示你输入根密码，移动到这一行：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#%wheel ALL=(ALL) ALL&lt;/code&gt;,解除前面的#号注释。&lt;/li&gt; &lt;li&gt;如果你不想每次使用sudo命令的时候都提示你输入跟密码，移动到下面这一行：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#%wheel ALL=(ALL)NOPASSWD:ALL&lt;/code&gt;，解除前面的#号注释。&lt;/li&gt; &lt;li&gt;最后，添加用户名到wheel用户组：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;usermod -G wheel luowei&lt;/code&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;端口相关&quot;&gt;端口相关&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;&lt;strong&gt;查看端口占用情况命令&lt;/strong&gt;，比如查看80端口占用情况使用如下命令：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lsof -i tcp:80&lt;/code&gt;。&lt;/li&gt; &lt;li&gt;&lt;strong&gt;列出所有端口&lt;/strong&gt;：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;netstat -ntlp&lt;/code&gt;。&lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;开启端口&lt;/strong&gt;（以80端口为例） 方法一：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; /sbin/iptables -I INPUT -p tcp --dport 80 -j ACCEPT 写入修改 /etc/init.d/iptables save 保存修改 service iptables restart 重启防火墙，修改生效 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;p&gt;方法二：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; vi /etc/sysconfig/iptables 打开配置文件加入如下语句: -A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT 重启防火墙，修改完成 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;关闭端口&lt;/strong&gt; 方法一：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; /sbin/iptables -I INPUT -p tcp --dport 80 -j DROP 写入修改 /etc/init.d/iptables save 保存修改 service iptables restart 重启防火墙，修改生效 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;p&gt;方法二：&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; vi /etc/sysconfig/iptables 打开配置文件加入如下语句: -A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j DROP 重启防火墙，修改完成 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt;&lt;strong&gt;查看端口状态&lt;/strong&gt;,使用命令：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/init.d/iptables status&lt;/code&gt;。&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;计算目录及文件大小&quot;&gt;计算目录及文件大小&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;显示&lt;strong&gt;目录及所有档案&lt;/strong&gt;大小,如：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;du -h /luowei&lt;/code&gt;;参数 -h 表示使用「Human-readable」的输出，也就是在档案系统大小使用 GB、MB 等易读的格式。&lt;/li&gt; &lt;li&gt;显示&lt;strong&gt;人性的汇总计算目录&lt;/strong&gt;大小,如：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;du -sh /luowei&lt;/code&gt;。&lt;/li&gt; &lt;li&gt;查看目录的使用情形时，我们可以将输出结果导到 sort 指令进行排序，如：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;du /luowei | sort -nr | more&lt;/code&gt;。这里sort 的参数 -nr 表示要以数字排序法进行反向排序，因为我们要对目录大小做排序，所以不可以使用 human-readable 的大小输出，不然目录大小中会有 K、M 等字样，会造成排序不正确。&lt;/li&gt; &lt;li&gt;显示全部的档案系统和各分割区的磁盘使用情形，如：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;df -ah&lt;/code&gt;。&lt;/li&gt; &lt;/ul&gt; &lt;hr /&gt; &lt;p&gt;以上参考：&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.centoscn.com/CentOS/help/2013/0725/597.html&quot;&gt;Centos 建立一个新用户详细讲解&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.centoscn.com/CentOS/help/2013/0725/558.html&quot;&gt;Centos查看端口占用情况和开启端口命令&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.centoscn.com/CentOS/help/2013/1014/1821.html&quot;&gt;CentOS下du查看计算目录大小的命令&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.cnblogs.com/chijianqiang/archive/2011/05/09/2041592.html&quot;&gt;df和du命令详解&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.centoscn.com/CentOS/help/2014/0815/3499.html&quot;&gt;CentOS下添加sudo用户&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.phpernote.com/linux/1235.html&quot;&gt;centos将用户添加到sudo用户组的方法&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/linux/centOS-useful-comand.html</link> <guid>https://luowei.github.io/linux/centOS-useful-comand</guid> <pubDate>Wed, 21 Sep 2011 00:00:00 +0800</pubDate> </item> <item> <title>CentOS最常用命令及快捷键整理</title> <description> &lt;h1 id=&quot;centos最常用命令及快捷键整理&quot;&gt;CentOS最常用命令及快捷键整理&lt;/h1&gt; &lt;h2 id=&quot;常用命令&quot;&gt;常用命令:&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;文件和目录:&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cd /home 进入 &apos;/home&apos; 目录 # cd .. 返回上一级目录 # cd ../.. 返回上两级目录 # cd - 返回上次所在目录 # cp file1 file2 将file1复制为file2 # cp -a dir1 dir2 复制一个目录 # cp -a /tmp/dir1 . 复制一个目录到当前工作目录（.代表当前目录） # ls 查看目录中的文件 # ls -a 显示隐藏文件 # ls -l 显示详细信息 # ls -lrt 按时间显示文件（l表示详细列表，r表示反向排序，t表示按时间排序） # pwd 显示工作路径 # mkdir dir1 创建 &apos;dir1&apos; 目录 # mkdir dir1 dir2 同时创建两个目录 # mkdir -p /tmp/dir1/dir2 创建一个目录树 # mv dir1 dir2 移动/重命名一个目录 # rm -f file1 删除 &apos;file1&apos; # rm -rf dir1 删除 &apos;dir1&apos; 目录及其子目录内容 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;查看文件内容:&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat file1 从第一个字节开始正向查看文件的内容 # head -2 file1 查看一个文件的前两行 # more file1 查看一个长文件的内容 # tac file1 从最后一行开始反向查看一个文件的内容 # tail -3 file1 查看一个文件的最后三行 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;文本处理:&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# grep str /tmp/test 在文件 &apos;/tmp/test&apos; 中查找 &quot;str&quot; # grep ^str /tmp/test 在文件 &apos;/tmp/test&apos; 中查找以 &quot;str&quot; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;开始的行&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# grep [0-9] /tmp/test 查找 &apos;/tmp/test&apos; 文件中所有包含数字的行 # grep str -r /tmp/* 在目录 &apos;/tmp&apos; 及其子目录中查找 &quot;str&quot; # diff file1 file2 找出两个文件的不同处 # sdiff file1 file2 以对比的方式显示两个文件的不同 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;查找:&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# find / -name file1 从 &apos;/&apos; 开始进入根文件系统查找文件和目录 # find / -user user1 查找属于用户 &apos;user1&apos; 的文件和目录 # find /home/user1 -name \*.bin 在目录 &apos;/ home/user1&apos; 中查找以 &apos;.bin&apos; 结尾的文件 # find /usr/bin -type f -atime +100 查找在过去100天内未被使用过的执行文件 # find /usr/bin -type f -mtime -10 查找在10天内被创建或者修改过的文件 # locate \*.ps 寻找以 &apos;.ps&apos; 结尾的文件，先运行 &apos;updatedb&apos; 命令 # find -name &apos;*.[ch]&apos; | xargs grep -E &apos;expr&apos; 在当前目录及其子目录所有.c和.h文件中查找 &apos;expr&apos; # find -type f -print0 | xargs -r0 grep -F &apos;expr&apos; 在当前目录及其子目录的常规文件中查找 &apos;expr&apos; # find -maxdepth 1 -type f | xargs grep -F &apos;expr&apos; 在当前目录中查找 &apos;expr&apos; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;压缩和解压:&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# bzip2 file1 压缩 file1 # bunzip2 file1.bz2 解压 file1.bz2 # gzip file1 压缩 file1 # gzip -9 file1 最大程度压缩 file1 # gunzip file1.gz 解压 file1.gz # tar -cvf archive.tar file1 把file1打包成 archive.tar （-c: 建立压缩档案；-v: 显示所有过程；-f: 使用档案名字，是必须的，是最后一个参数） # tar -cvf archive.tar file1 dir1 把 file1，dir1 打包成 archive.tar # tar -tf archive.tar 显示一个包中的内容 # tar -xvf archive.tar 释放一个包 # tar -xvf archive.tar -C /tmp 把压缩包释放到 /tmp目录下 # zip file1.zip file1 创建一个zip格式的压缩包 # zip -r file1.zip file1 dir1 把文件和目录压缩成一个zip格式的压缩包 # unzip file1.zip 解压一个zip格式的压缩包到当前目录 # unzip test.zip -d /tmp/ 解压一个zip格式的压缩包到 /tmp 目录 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;yum工具:&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# yum -y install [package] 下载并安装一个rpm包 # yum localinstall [package.rpm] 安装一个rpm包，使用你自己的软件仓库解决所有依赖关系 # yum -y update 更新当前系统中安装的所有rpm包 # yum update [package] 更新一个rpm包 # yum remove [package] 删除一个rpm包 # yum list 列出当前系统中安装的所有包 # yum search [package] 在rpm仓库中搜寻软件包 # yum clean [package] 清除缓存目录（/var/cache/yum）下的软件包 # yum clean headers 删除所有头文件 # yum clean all 删除所有缓存的包和头文件 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;网络:&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ifconfig eth0 显示一个以太网卡的配置 # ifconfig eth0 192.168.1.1 netmask 255.255.255.0 配置网卡的IP地址 # ifdown eth0 禁用 &apos;eth0&apos; 网络设备 # ifup eth0 启用 &apos;eth0&apos; 网络设备 # iwconfig eth1 显示一个无线网卡的配置 # iwlist scan 显示无线网络 # ip addr show 显示网卡的IP地址 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;其他:&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# su - 切换到root权限（与su有区别） # shutdown -h now 关机 # shutdown -r now 重启 # top 罗列使用CPU资源最多的linux任务 （输入q退出） # pstree 以树状图显示程序 # man ping 查看参考手册（例如ping 命令） # passwd 修改密码 # df -h 显示磁盘的使用情况 # cal -3 显示前一个月，当前月以及下一个月的月历 # cal 10 1988 显示指定月，年的月历 # date --date &apos;1970-01-01 UTC 1427888888 seconds&apos; 把一相对于1970-01-01 00:00的秒数转换成时间 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;常用快捷键&quot;&gt;常用快捷键&lt;/h2&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Ctrl + u 删除光标之前到行首的字符 Ctrl + k 删除光标之前到行尾的字符 Ctrl + c 取消当前行输入的命令，相当于Ctrl + Break Ctrl + a 光标移动到行首（ahead of line），相当于通常的Home键 Ctrl + e 光标移动到行尾（end of line） Ctrl + f 光标向前（forward）移动一个字符位置 Ctrl + b 光标往回（backward）移动一个字符位置 Ctrl + l 清屏，相当于执行clear命令 Ctrl + r 显示:号提示，根据用户输入查找相关历史命令（reverse-i-search） Ctrl + w 删除从光标位置前到当前所处单词（word）的开头 Ctrl + t 交换光标位置前的两个字符 Ctrl + y 粘贴最后一次被删除的单词 Ctrl + Alt + d 显示桌面 Alt + b 光标往回（backward）移动到前一个单词 Alt + d 删除从光标位置到当前所处单词的末尾 Alt + F2 运行 Alt + F4 关闭当前窗口 Alt + F9 最小化当前窗口 Alt + F10 最大化当前窗口 Alt + Tab 切换窗口 Alt +按住左键 移动窗口（或在最下面的任务栏滚动鼠标滑轮） [鼠标中间键] 粘贴突出显示的文本。使用鼠标左键来选择文本。把光标指向想粘贴文本的地方。点击鼠标中间键来粘贴。 [Tab] 命令行自动补全。使用 shell 提示时可使用这一方式。键入命令或文件名的前几个字符，然后按 [Tab] 键，它会自动补全命令或显示匹配键入字符的所有命令。 在桌面或文件管理器中直接按 / 就可以输入位置，打开文件管理器。 快速搜索：在 vi 或 Firefox 中直接按 / 即可进入搜索状态。 网站链接和图片可直接拖放到桌面或者目录，可以马上下载。 直接将文件管理器中的文件拖到终端中就可以在终端中得到完整的路径名。 在滚动条的空白处点击鼠标中键，屏幕即滚动到那个地方。 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;hr /&gt; &lt;p&gt;以上参考：&lt;a href=&quot;http://www.centoscn.com/CentOS/help/2014/0306/2493.html&quot;&gt;CentOS最常用命令及快捷键整理&lt;/a&gt;&lt;/p&gt; </description> <link>https://luowei.github.io/linux/centOS-common-comand-and-shutkeys.html</link> <guid>https://luowei.github.io/linux/centOS-common-comand-and-shutkeys</guid> <pubDate>Wed, 21 Sep 2011 00:00:00 +0800</pubDate> </item> </channel> </rss>
